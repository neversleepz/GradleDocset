<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Gradle User Guide</title><link xmlns:xslthl="http://xslthl.sf.net" type="text/css" rel="stylesheet" href="base.css"><link type="text/css" rel="stylesheet" href="docs.css"><link type="text/css" rel="stylesheet" href="userguide.css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"></head><body><div class="book"><div class="titlepage"><div class="title"><div><h1 class="title"><a name="N10002"></a>Gradle User Guide</h1></div><div><h3 class="releaseinfo">Version 2.0</h3></div></div><div><p class="copyright">Copyright &copy; 2007-2012 Hans Dockter, Adam Murdoch</p></div><div><div class="legalnotice" title="Legal Notice"><a name="N1000D"></a><p>Copies of this document may be made for your own use and for distribution to others, provided that you
                do not charge any fee for such copies and further provided that each copy contains this Copyright
                Notice, whether distributed in print or electronically.
            </p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#N10048">1.1. About this user guide</a></span></dt></dl></dd><dt><span class="chapter"><a href="#overview">2. Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:special_feature_of_gradle">2.1. Features</a></span></dt><dt><span class="section"><a href="#sec:why_groovy">2.2. Why Groovy?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorials">3. Tutorials</a></span></dt><dd><dl><dt><span class="section"><a href="#N100CE">3.1. Getting Started</a></span></dt></dl></dd><dt><span class="chapter"><a href="#installation">4. Installing Gradle</a></span></dt><dd><dl><dt><span class="section"><a href="#N10116">4.1. Prerequisites</a></span></dt><dt><span class="section"><a href="#N10123">4.2. Download</a></span></dt><dt><span class="section"><a href="#N1012C">4.3. Unpacking</a></span></dt><dt><span class="section"><a href="#N10148">4.4. Environment variables</a></span></dt><dt><span class="section"><a href="#N10155">4.5. Running and testing your installation</a></span></dt><dt><span class="section"><a href="#N10160">4.6. JVM options</a></span></dt></dl></dd><dt><span class="chapter"><a href="#troubleshooting">5. Troubleshooting</a></span></dt><dd><dl><dt><span class="section"><a href="#N10187">5.1. Working through problems</a></span></dt><dt><span class="section"><a href="#N10194">5.2. Getting help</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_using_tasks">6. Build Script Basics</a></span></dt><dd><dl><dt><span class="section"><a href="#N101A5">6.1. Projects and tasks</a></span></dt><dt><span class="section"><a href="#N101BC">6.2. Hello world</a></span></dt><dt><span class="section"><a href="#N10222">6.3. A shortcut task definition</a></span></dt><dt><span class="section"><a href="#N10239">6.4. Build scripts are code</a></span></dt><dt><span class="section"><a href="#sec:task_dependencies">6.5. Task dependencies</a></span></dt><dt><span class="section"><a href="#N1029B">6.6. Dynamic tasks</a></span></dt><dt><span class="section"><a href="#N102B0">6.7. Manipulating existing tasks</a></span></dt><dt><span class="section"><a href="#sec:shortcut_notations">6.8. Shortcut notations</a></span></dt><dt><span class="section"><a href="#sec:extra_task_properties">6.9. Extra task properties</a></span></dt><dt><span class="section"><a href="#N10326">6.10. Using Ant Tasks</a></span></dt><dt><span class="section"><a href="#N10346">6.11. Using methods</a></span></dt><dt><span class="section"><a href="#sec:default_tasks">6.12. Default tasks</a></span></dt><dt><span class="section"><a href="#configure-by-dag">6.13. Configure by DAG</a></span></dt><dt><span class="section"><a href="#N103B3">6.14. Where to next?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_java_projects">7. Java Quickstart</a></span></dt><dd><dl><dt><span class="section"><a href="#N103C9">7.1. The Java plugin</a></span></dt><dt><span class="section"><a href="#N103DA">7.2. A basic Java project</a></span></dt><dt><span class="section"><a href="#sec:examples">7.3. Multi-project Java build</a></span></dt><dt><span class="section"><a href="#N10552">7.4. Where to next?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#artifact_dependencies_tutorial">8. Dependency Management Basics</a></span></dt><dd><dl><dt><span class="section"><a href="#N1056B">8.1. What is dependency management?</a></span></dt><dt><span class="section"><a href="#N10589">8.2. Declaring your dependencies</a></span></dt><dt><span class="section"><a href="#configurations">8.3. Dependency configurations</a></span></dt><dt><span class="section"><a href="#N105C9">8.4. External dependencies</a></span></dt><dt><span class="section"><a href="#N1060B">8.5. Repositories</a></span></dt><dt><span class="section"><a href="#N10653">8.6. Publishing artifacts</a></span></dt><dt><span class="section"><a href="#N10691">8.7. Where to next?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_groovy_projects">9. Groovy Quickstart</a></span></dt><dd><dl><dt><span class="section"><a href="#N106C1">9.1. A basic Groovy project</a></span></dt><dt><span class="section"><a href="#N1070A">9.2. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#web_project_tutorial">10. Web Application Quickstart</a></span></dt><dd><dl><dt><span class="section"><a href="#N10725">10.1. Building a WAR file</a></span></dt><dt><span class="section"><a href="#N1074A">10.2. Running your web application</a></span></dt><dt><span class="section"><a href="#N10763">10.3. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_gradle_command_line">11. Using the Gradle Command-Line</a></span></dt><dd><dl><dt><span class="section"><a href="#N1077C">11.1. Executing multiple tasks</a></span></dt><dt><span class="section"><a href="#sec:excluding_tasks_from_the_command_line">11.2. Excluding tasks</a></span></dt><dt><span class="section"><a href="#sec:continue_build_on_failure">11.3. Continuing the build when a failure occurs</a></span></dt><dt><span class="section"><a href="#N107F3">11.4. Task name abbreviation</a></span></dt><dt><span class="section"><a href="#sec:selecting_build">11.5. Selecting which build to execute</a></span></dt><dt><span class="section"><a href="#sec:obtaining_information_about_your_build">11.6. Obtaining information about your build</a></span></dt><dt><span class="section"><a href="#sec:dry_run">11.7. Dry Run</a></span></dt><dt><span class="section"><a href="#N10953">11.8. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_gradle_gui">12. Using the Gradle Graphical User Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#N10981">12.1. Task Tree</a></span></dt><dt><span class="section"><a href="#N10997">12.2. Favorites</a></span></dt><dt><span class="section"><a href="#N1099E">12.3. Command Line</a></span></dt><dt><span class="section"><a href="#N109A3">12.4. Setup</a></span></dt></dl></dd><dt><span class="chapter"><a href="#writing_build_scripts">13. Writing Build Scripts</a></span></dt><dd><dl><dt><span class="section"><a href="#N109CD">13.1. The Gradle build language</a></span></dt><dt><span class="section"><a href="#sec:project_api">13.2. The Project API</a></span></dt><dt><span class="section"><a href="#N10AD9">13.3. The Script API</a></span></dt><dt><span class="section"><a href="#N10AE6">13.4. Declaring variables</a></span></dt><dt><span class="section"><a href="#N10B36">13.5. Some Groovy basics</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_this_and_that">14. Tutorial - 'This and That'</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:directory_creation">14.1. Directory creation</a></span></dt><dt><span class="section"><a href="#sec:gradle_properties_and_system_properties">14.2. Gradle properties and system properties</a></span></dt><dt><span class="section"><a href="#sec:configuring_using_external_script">14.3. Configuring the project using an external build script</a></span></dt><dt><span class="section"><a href="#sec:configuring_arbitrary_objects">14.4. Configuring arbitrary objects</a></span></dt><dt><span class="section"><a href="#N10C8A">14.5. Configuring arbitrary objects using an external script</a></span></dt><dt><span class="section"><a href="#sec:caching">14.6. Caching</a></span></dt></dl></dd><dt><span class="chapter"><a href="#more_about_tasks">15. More about Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#N10CBF">15.1. Defining tasks</a></span></dt><dt><span class="section"><a href="#N10CF6">15.2. Locating tasks</a></span></dt><dt><span class="section"><a href="#sec:configuring_tasks">15.3. Configuring tasks</a></span></dt><dt><span class="section"><a href="#sec:adding_dependencies_to_tasks">15.4. Adding dependencies to a task</a></span></dt><dt><span class="section"><a href="#sec:ordering_tasks">15.5. Ordering tasks</a></span></dt><dt><span class="section"><a href="#N10E91">15.6. Adding a description to a task</a></span></dt><dt><span class="section"><a href="#N10EA3">15.7. Replacing tasks</a></span></dt><dt><span class="section"><a href="#N10EC0">15.8. Skipping tasks</a></span></dt><dt><span class="section"><a href="#sec:up_to_date_checks">15.9. Skipping tasks that are up-to-date</a></span></dt><dt><span class="section"><a href="#N10F94">15.10. Task rules</a></span></dt><dt><span class="section"><a href="#N10FC0">15.11. Finalizer tasks</a></span></dt><dt><span class="section"><a href="#sec:the_idea_behind_gradle_tasks">15.12. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#working_with_files">16. Working With Files</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:locating_files">16.1. Locating files</a></span></dt><dt><span class="section"><a href="#sec:file_collections">16.2. File collections</a></span></dt><dt><span class="section"><a href="#sec:file_trees">16.3. File trees</a></span></dt><dt><span class="section"><a href="#sec:archive_contents">16.4. Using the contents of an archive as a file tree</a></span></dt><dt><span class="section"><a href="#sec:specifying_multiple_files">16.5. Specifying a set of input files</a></span></dt><dt><span class="section"><a href="#sec:copying_files">16.6. Copying files</a></span></dt><dt><span class="section"><a href="#sec:sync_task">16.7. Using the <code class="literal">Sync</code> task</a></span></dt><dt><span class="section"><a href="#sec:archives">16.8. Creating archives</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ant">17. Using Ant from Gradle</a></span></dt><dd><dl><dt><span class="section"><a href="#N113E5">17.1. Using Ant tasks and types in your build</a></span></dt><dt><span class="section"><a href="#N11485">17.2. Importing an Ant build</a></span></dt><dt><span class="section"><a href="#N114DF">17.3. Ant properties and references</a></span></dt><dt><span class="section"><a href="#N11533">17.4. API</a></span></dt></dl></dd><dt><span class="chapter"><a href="#logging">18. Logging</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:choosing_a_log_level">18.1. Choosing a log level</a></span></dt><dt><span class="section"><a href="#sec:sending_your_own_log_messages">18.2. Writing your own log messages</a></span></dt><dt><span class="section"><a href="#sec:external_tools">18.3. Logging from external tools and libraries</a></span></dt><dt><span class="section"><a href="#sec:changing_what_gradle_logs">18.4. Changing what Gradle logs</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gradle_daemon">19. The Gradle Daemon</a></span></dt><dd><dl><dt><span class="section"><a href="#enter_the_daemon">19.1. Enter the daemon</a></span></dt><dt><span class="section"><a href="#reusing_daemons">19.2. Reusing and expiration of daemons</a></span></dt><dt><span class="section"><a href="#daemon_usage_and_troubleshooting">19.3. Usage and troubleshooting</a></span></dt><dt><span class="section"><a href="#sec:daemon_properties">19.4. Configuring the daemon</a></span></dt></dl></dd><dt><span class="chapter"><a href="#build_environment">20. The Build Environment</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:gradle_configuration_properties">20.1. Configuring the build environment via gradle.properties</a></span></dt><dt><span class="section"><a href="#sec:accessing_the_web_via_a_proxy">20.2. Accessing the web via a proxy</a></span></dt></dl></dd><dt><span class="chapter"><a href="#plugins">21. Gradle Plugins</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:using_plugins">21.1. Applying plugins</a></span></dt><dt><span class="section"><a href="#N11857">21.2. What plugins do</a></span></dt><dt><span class="section"><a href="#sub:more_about_convention_objects">21.3. Conventions</a></span></dt><dt><span class="section"><a href="#N118FA">21.4. More on plugins</a></span></dt></dl></dd><dt><span class="chapter"><a href="#standard_plugins">22. Standard Gradle plugins</a></span></dt><dd><dl><dt><span class="section"><a href="#N11909">22.1. Language plugins</a></span></dt><dt><span class="section"><a href="#N1199A">22.2. Incubating language plugins</a></span></dt><dt><span class="section"><a href="#N11A41">22.3. Integration plugins</a></span></dt><dt><span class="section"><a href="#N11B05">22.4. Incubating integration plugins</a></span></dt><dt><span class="section"><a href="#N11B88">22.5. Software development plugins</a></span></dt><dt><span class="section"><a href="#N11D24">22.6. Incubating software development plugins</a></span></dt><dt><span class="section"><a href="#N11DF9">22.7. Base plugins</a></span></dt><dt><span class="section"><a href="#N11E6C">22.8. Third party plugins</a></span></dt></dl></dd><dt><span class="chapter"><a href="#java_plugin">23. The Java Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N11E7D">23.1. Usage</a></span></dt><dt><span class="section"><a href="#N11E8C">23.2. Source sets</a></span></dt><dt><span class="section"><a href="#N11EA4">23.3. Tasks</a></span></dt><dt><span class="section"><a href="#N12116">23.4. Project layout</a></span></dt><dt><span class="section"><a href="#sec:java_plugin_and_dependency_management">23.5. Dependency management</a></span></dt><dt><span class="section"><a href="#N1223B">23.6. Convention properties</a></span></dt><dt><span class="section"><a href="#sec:source_sets">23.7. Working with source sets</a></span></dt><dt><span class="section"><a href="#sec:javadoc">23.8. Javadoc</a></span></dt><dt><span class="section"><a href="#sec:clean">23.9. Clean</a></span></dt><dt><span class="section"><a href="#sec:resources">23.10. Resources</a></span></dt><dt><span class="section"><a href="#sec:compile">23.11. CompileJava</a></span></dt><dt><span class="section"><a href="#sec:java_test">23.12. Test</a></span></dt><dt><span class="section"><a href="#N12959">23.13. Jar</a></span></dt><dt><span class="section"><a href="#sec:upload">23.14. Uploading</a></span></dt></dl></dd><dt><span class="chapter"><a href="#groovy_plugin">24. The Groovy Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N129D8">24.1. Usage</a></span></dt><dt><span class="section"><a href="#N129E7">24.2. Tasks</a></span></dt><dt><span class="section"><a href="#N12A7C">24.3. Project layout</a></span></dt><dt><span class="section"><a href="#N12B1F">24.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N12B63">24.5. Automatic configuration of groovyClasspath</a></span></dt><dt><span class="section"><a href="#N12B9C">24.6. Convention properties</a></span></dt><dt><span class="section"><a href="#N12BA1">24.7. Source set properties</a></span></dt><dt><span class="section"><a href="#sec:groovyCompile">24.8. GroovyCompile</a></span></dt></dl></dd><dt><span class="chapter"><a href="#scala_plugin">25. The Scala Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N12CC1">25.1. Usage</a></span></dt><dt><span class="section"><a href="#N12CD0">25.2. Tasks</a></span></dt><dt><span class="section"><a href="#N12D77">25.3. Project layout</a></span></dt><dt><span class="section"><a href="#N12E10">25.4. Dependency management</a></span></dt><dt><span class="section"><a href="#sec:configure_scala_classpath">25.5. Automatic configuration of scalaClasspath</a></span></dt><dt><span class="section"><a href="#N12E78">25.6. Convention properties</a></span></dt><dt><span class="section"><a href="#N12E7D">25.7. Source set properties</a></span></dt><dt><span class="section"><a href="#N12F1A">25.8. Fast Scala Compiler</a></span></dt><dt><span class="section"><a href="#N12F37">25.9. Compiling in external process</a></span></dt><dt><span class="section"><a href="#N12F5B">25.10. Incremental compilation</a></span></dt><dt><span class="section"><a href="#N12FAF">25.11. Eclipse Integration</a></span></dt><dt><span class="section"><a href="#N12FB4">25.12. IntelliJ IDEA Integration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#war_plugin">26. The War Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N12FC1">26.1. Usage</a></span></dt><dt><span class="section"><a href="#N12FD0">26.2. Tasks</a></span></dt><dt><span class="section"><a href="#N13016">26.3. Project layout</a></span></dt><dt><span class="section"><a href="#N13030">26.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N1305C">26.5. Convention properties</a></span></dt><dt><span class="section"><a href="#sec:default_settings">26.6. War</a></span></dt><dt><span class="section"><a href="#sec:customizing">26.7. Customizing</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ear_plugin">27. The Ear Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N130F0">27.1. Usage</a></span></dt><dt><span class="section"><a href="#N130FF">27.2. Tasks</a></span></dt><dt><span class="section"><a href="#N1313F">27.3. Project layout</a></span></dt><dt><span class="section"><a href="#N13159">27.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N13170">27.5. Convention properties</a></span></dt><dt><span class="section"><a href="#sec:default_settings">27.6. Ear</a></span></dt><dt><span class="section"><a href="#sec:customizing">27.7. Customizing</a></span></dt><dt><span class="section"><a href="#sec:using_custom_app_xml">27.8. Using custom descriptor file</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jetty_plugin">28. The Jetty Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N1322A">28.1. Usage</a></span></dt><dt><span class="section"><a href="#N13239">28.2. Tasks</a></span></dt><dt><span class="section"><a href="#N13298">28.3. Project layout</a></span></dt><dt><span class="section"><a href="#N1329D">28.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N132A2">28.5. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#checkstyle_plugin">29. The Checkstyle Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N13324">29.1. Usage</a></span></dt><dt><span class="section"><a href="#N13338">29.2. Tasks</a></span></dt><dt><span class="section"><a href="#N133AB">29.3. Project layout</a></span></dt><dt><span class="section"><a href="#N133C7">29.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N133E3">29.5. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#codenarc_plugin">30. The CodeNarc Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N133F8">30.1. Usage</a></span></dt><dt><span class="section"><a href="#N1340C">30.2. Tasks</a></span></dt><dt><span class="section"><a href="#N1347A">30.3. Project layout</a></span></dt><dt><span class="section"><a href="#N13496">30.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N134B2">30.5. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#findbugs_plugin">31. The FindBugs Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N134C7">31.1. Usage</a></span></dt><dt><span class="section"><a href="#N134DB">31.2. Tasks</a></span></dt><dt><span class="section"><a href="#N13550">31.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N1356C">31.4. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jdepend_plugin">32. The JDepend Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N13581">32.1. Usage</a></span></dt><dt><span class="section"><a href="#N13595">32.2. Tasks</a></span></dt><dt><span class="section"><a href="#N1360A">32.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N13626">32.4. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pmd_plugin">33. The PMD Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N1363B">33.1. Usage</a></span></dt><dt><span class="section"><a href="#N1364F">33.2. Tasks</a></span></dt><dt><span class="section"><a href="#N136BD">33.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N136D9">33.4. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jacoco_plugin">34. The JaCoCo Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N136F6">34.1. Getting Started</a></span></dt><dt><span class="section"><a href="#N13712">34.2. Configuring the JaCoCo Plugin</a></span></dt><dt><span class="section"><a href="#N13740">34.3. JaCoCo Report configuration</a></span></dt><dt><span class="section"><a href="#N13763">34.4. JaCoCo specific task configuration</a></span></dt><dt><span class="section"><a href="#N13836">34.5. Tasks</a></span></dt><dt><span class="section"><a href="#N13863">34.6. Dependency management</a></span></dt></dl></dd><dt><span class="chapter"><a href="#sonar_plugin">35. The Sonar Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N138AF">35.1. Usage</a></span></dt><dt><span class="section"><a href="#N138FD">35.2. Analyzing Multi-Project Builds</a></span></dt><dt><span class="section"><a href="#N13956">35.3. Analyzing Custom Source Sets</a></span></dt><dt><span class="section"><a href="#N1396B">35.4. Analyzing languages other than Java</a></span></dt><dt><span class="section"><a href="#N13983">35.5. Setting Custom Sonar Properties</a></span></dt><dt><span class="section"><a href="#sec:sonar_command_line_parameters">35.6. Configuring Sonar Settings from the Command Line</a></span></dt><dt><span class="section"><a href="#N139F8">35.7. Tasks</a></span></dt></dl></dd><dt><span class="chapter"><a href="#sonar_runner_plugin">36. The Sonar Runner Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N13A4B">36.1. Plugin Status and Compatibility</a></span></dt><dt><span class="section"><a href="#N13A58">36.2. Getting Started</a></span></dt><dt><span class="section"><a href="#N13A7A">36.3. Configuring the Sonar Runner</a></span></dt><dt><span class="section"><a href="#N13B49">36.4. Analyzing Multi-Project Builds</a></span></dt><dt><span class="section"><a href="#N13B8A">36.5. Analyzing Custom Source Sets</a></span></dt><dt><span class="section"><a href="#N13B9F">36.6. Analyzing languages other than Java</a></span></dt><dt><span class="section"><a href="#N13BB7">36.7. More on configuring Sonar properties</a></span></dt><dt><span class="section"><a href="#sec:sonar_command_line_parameters">36.8. Setting Sonar Properties from the Command Line</a></span></dt><dt><span class="section"><a href="#N13BE6">36.9. Executing Sonar Runner in a separate process</a></span></dt><dt><span class="section"><a href="#N13BEE">36.10. Tasks</a></span></dt></dl></dd><dt><span class="chapter"><a href="#osgi_plugin">37. The OSGi Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N13C38">37.1. Usage</a></span></dt><dt><span class="section"><a href="#N13C47">37.2. Implicitly applied plugins</a></span></dt><dt><span class="section"><a href="#N13C4C">37.3. Tasks</a></span></dt><dt><span class="section"><a href="#N13C51">37.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N13C56">37.5. Convention object</a></span></dt><dt><span class="section"><a href="#N13C99">37.6. </a></span></dt></dl></dd><dt><span class="chapter"><a href="#eclipse_plugin">38. The Eclipse Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N13D46">38.1. Usage</a></span></dt><dt><span class="section"><a href="#N13D5D">38.2. Tasks</a></span></dt><dt><span class="section"><a href="#N13EC7">38.3. Configuration</a></span></dt><dt><span class="section"><a href="#N13F46">38.4. Customizing the generated files</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idea_plugin">39. The IDEA Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N1409D">39.1. Usage</a></span></dt><dt><span class="section"><a href="#N140B4">39.2. Tasks</a></span></dt><dt><span class="section"><a href="#N14198">39.3. Configuration</a></span></dt><dt><span class="section"><a href="#N141EF">39.4. Customizing the generated files</a></span></dt><dt><span class="section"><a href="#N142DE">39.5. Further things to consider</a></span></dt></dl></dd><dt><span class="chapter"><a href="#antlr_plugin">40. The ANTLR Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N142F5">40.1. Usage</a></span></dt><dt><span class="section"><a href="#N14304">40.2. Tasks</a></span></dt><dt><span class="section"><a href="#N14382">40.3. Project layout</a></span></dt><dt><span class="section"><a href="#N143B5">40.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N143C7">40.5. Convention properties</a></span></dt><dt><span class="section"><a href="#N143CC">40.6. Source set properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#project_reports_plugin">41. The Project Report Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14432">41.1. Usage</a></span></dt><dt><span class="section"><a href="#N1443A">41.2. Tasks</a></span></dt><dt><span class="section"><a href="#N144C1">41.3. Project layout</a></span></dt><dt><span class="section"><a href="#N144C6">41.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N144CB">41.5. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#announce_plugin">42. The Announce Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14583">42.1. Usage</a></span></dt><dt><span class="section"><a href="#N14606">42.2. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#build_announcements_plugin">43. The Build Announcements Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14622">43.1. Usage</a></span></dt></dl></dd><dt><span class="chapter"><a href="#distribution_plugin">44. The Distribution Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14652">44.1. Usage</a></span></dt><dt><span class="section"><a href="#N1468F">44.2. Tasks</a></span></dt><dt><span class="section"><a href="#N14783">44.3. Distribution contents</a></span></dt></dl></dd><dt><span class="chapter"><a href="#application_plugin">45. The Application Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N147B2">45.1. Usage</a></span></dt><dt><span class="section"><a href="#N147FF">45.2. Tasks</a></span></dt><dt><span class="section"><a href="#N14892">45.3. Convention properties</a></span></dt><dt><span class="section"><a href="#application_distribution_resources">45.4. Including other resources in the distribution</a></span></dt></dl></dd><dt><span class="chapter"><a href="#javaLibraryDistribution_plugin">46. The Java Library Distribution Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N148E8">46.1. Usage</a></span></dt><dt><span class="section"><a href="#N1490E">46.2. Tasks</a></span></dt><dt><span class="section"><a href="#java_library_distribution_resources">46.3. Including other resources in the distribution</a></span></dt></dl></dd><dt><span class="chapter"><a href="#build_init_plugin">47. Build Init Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14979">47.1. Tasks</a></span></dt><dt><span class="section"><a href="#N149BF">47.2. What to set up</a></span></dt><dt><span class="section"><a href="#N149E2">47.3. Build init types</a></span></dt></dl></dd><dt><span class="chapter"><a href="#wrapper_plugin">48. Wrapper Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14AAB">48.1. Usage</a></span></dt><dt><span class="section"><a href="#N14AB9">48.2. Tasks</a></span></dt></dl></dd><dt><span class="chapter"><a href="#buildDashboard_plugin">49. The Build Dashboard Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N14AF3">49.1. Usage</a></span></dt><dt><span class="section"><a href="#N14B1D">49.2. Tasks</a></span></dt><dt><span class="section"><a href="#N14B48">49.3. Project layout</a></span></dt><dt><span class="section"><a href="#N14B4D">49.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N14B52">49.5. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#dependency_management">50. Dependency Management</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:Introduction">50.1. Introduction</a></span></dt><dt><span class="section"><a href="#sec:dependency_management_overview">50.2. Dependency Management Best Practices</a></span></dt><dt><span class="section"><a href="#sub:configurations">50.3. Dependency configurations</a></span></dt><dt><span class="section"><a href="#sec:how_to_declare_your_dependencies">50.4. How to declare your dependencies</a></span></dt><dt><span class="section"><a href="#sec:working_with_dependencies">50.5. Working with dependencies</a></span></dt><dt><span class="section"><a href="#sec:repositories">50.6. Repositories</a></span></dt><dt><span class="section"><a href="#sec:dependency_resolution">50.7. How dependency resolution works</a></span></dt><dt><span class="section"><a href="#N15192">50.8. Fine-tuning the dependency resolution process</a></span></dt><dt><span class="section"><a href="#sec:dependency_cache">50.9. The dependency cache</a></span></dt><dt><span class="section"><a href="#sec:strategies_of_transitive_dependency_management">50.10. Strategies for transitive dependency management</a></span></dt></dl></dd><dt><span class="chapter"><a href="#artifact_management">51. Publishing artifacts</a></span></dt><dd><dl><dt><span class="section"><a href="#N153C3">51.1. Introduction</a></span></dt><dt><span class="section"><a href="#artifacts_and_configurations">51.2. Artifacts and configurations</a></span></dt><dt><span class="section"><a href="#N153EC">51.3. Declaring artifacts</a></span></dt><dt><span class="section"><a href="#N1542A">51.4. Publishing artifacts</a></span></dt><dt><span class="section"><a href="#project_libraries">51.5. More about project libraries</a></span></dt></dl></dd><dt><span class="chapter"><a href="#maven_plugin">52. The Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N1547F">52.1. Usage</a></span></dt><dt><span class="section"><a href="#N1548E">52.2. Tasks</a></span></dt><dt><span class="section"><a href="#N154BE">52.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N154C3">52.4. Convention properties</a></span></dt><dt><span class="section"><a href="#N15530">52.5. Convention methods</a></span></dt><dt><span class="section"><a href="#uploading_to_maven_repositories">52.6. Interacting with Maven repositories</a></span></dt></dl></dd><dt><span class="chapter"><a href="#signing_plugin">53. The Signing Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N1573F">53.1. Usage</a></span></dt><dt><span class="section"><a href="#N1574E">53.2. Signatory credentials</a></span></dt><dt><span class="section"><a href="#N15780">53.3. Specifying what to sign</a></span></dt><dt><span class="section"><a href="#N15809">53.4. Publishing the signatures</a></span></dt><dt><span class="section"><a href="#N15817">53.5. Signing POM files</a></span></dt></dl></dd><dt><span class="chapter"><a href="#nativeBinaries">54. Building native binaries</a></span></dt><dd><dl><dt><span class="section"><a href="#N15845">54.1. Supported languages</a></span></dt><dt><span class="section"><a href="#native-binaries:tool-chain-support">54.2. Tool chain support</a></span></dt><dt><span class="section"><a href="#N158D4">54.3. Component model</a></span></dt><dt><span class="section"><a href="#N1592D">54.4. Tasks</a></span></dt><dt><span class="section"><a href="#native_binaries:languages">54.5. Language support</a></span></dt><dt><span class="section"><a href="#N15AB9">54.6. Configuring the compiler, assembler and linker</a></span></dt><dt><span class="section"><a href="#native_binaries:windows-resources">54.7. Windows Resources</a></span></dt><dt><span class="section"><a href="#N15B53">54.8. Library Dependencies</a></span></dt><dt><span class="section"><a href="#native_binaries:variants">54.9. Native Binary Variants</a></span></dt><dt><span class="section"><a href="#native_binaries:tool_chain">54.10. Tool chains</a></span></dt><dt><span class="section"><a href="#native_binaries:visual_studio">54.11. Visual Studio IDE integration</a></span></dt><dt><span class="section"><a href="#native_binaries:cunit">54.12. CUnit support</a></span></dt></dl></dd><dt><span class="chapter"><a href="#build_lifecycle">55. The Build Lifecycle</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:build_phases">55.1. Build phases</a></span></dt><dt><span class="section"><a href="#sec:settings_file">55.2. Settings file</a></span></dt><dt><span class="section"><a href="#sec:multi_project_builds">55.3. Multi-project builds</a></span></dt><dt><span class="section"><a href="#sec:initialization">55.4. Initialization</a></span></dt><dt><span class="section"><a href="#sec:configuration_and_execution_of_a_single_project_build">55.5. Configuration and execution of a single project build</a></span></dt><dt><span class="section"><a href="#build_lifecycle_events">55.6. Responding to the lifecycle in the build script</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multi_project_builds">56. Multi-project Builds</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:cross_project_configuration">56.1. Cross project configuration</a></span></dt><dt><span class="section"><a href="#sec:subproject_configuration">56.2. Subproject configuration</a></span></dt><dt><span class="section"><a href="#sec:execution_rules_for_multi_project_builds">56.3. Execution rules for multi-project builds</a></span></dt><dt><span class="section"><a href="#sec:running_partial_build_from_the_root">56.4. Running tasks by their absolute path</a></span></dt><dt><span class="section"><a href="#sec:project_and_task_paths">56.5. Project and task paths</a></span></dt><dt><span class="section"><a href="#sec:dependencies_which_dependencies">56.6. Dependencies - Which dependencies?</a></span></dt><dt><span class="section"><a href="#sec:project_jar_dependencies">56.7. Project lib dependencies</a></span></dt><dt><span class="section"><a href="#sec:parallel_execution">56.8. Parallel project execution</a></span></dt><dt><span class="section"><a href="#sec:decoupled_projects">56.9. Decoupled Projects</a></span></dt><dt><span class="section"><a href="#sec:multiproject_build_and_test">56.10. Multi-Project Building and Testing</a></span></dt><dt><span class="section"><a href="#sec:property_and_method_inheritance">56.11. Property and method inheritance</a></span></dt><dt><span class="section"><a href="#N164EA">56.12. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#custom_tasks">57. Writing Custom Task Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#N1651A">57.1. Packaging a task class</a></span></dt><dt><span class="section"><a href="#N16546">57.2. Writing a simple task class</a></span></dt><dt><span class="section"><a href="#N1658F">57.3. A standalone project</a></span></dt><dt><span class="section"><a href="#incremental_tasks">57.4. Incremental tasks</a></span></dt></dl></dd><dt><span class="chapter"><a href="#custom_plugins">58. Writing Custom Plugins</a></span></dt><dd><dl><dt><span class="section"><a href="#N1670B">58.1. Packaging a plugin</a></span></dt><dt><span class="section"><a href="#N16734">58.2. Writing a simple plugin</a></span></dt><dt><span class="section"><a href="#N16758">58.3. Getting input from the build</a></span></dt><dt><span class="section"><a href="#N167A4">58.4. Working with files in custom tasks and plugins</a></span></dt><dt><span class="section"><a href="#N167CE">58.5. A standalone project</a></span></dt><dt><span class="section"><a href="#N16831">58.6. Maintaining multiple domain objects</a></span></dt></dl></dd><dt><span class="chapter"><a href="#organizing_build_logic">59. Organizing Build Logic</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:inherited_properties_and_methods">59.1. Inherited properties and methods</a></span></dt><dt><span class="section"><a href="#sec:injected_configuration">59.2. Injected configuration</a></span></dt><dt><span class="section"><a href="#sec:build_sources">59.3. Build sources in the <code class="filename">buildSrc</code> project</a></span></dt><dt><span class="section"><a href="#sec:external_build">59.4. Running another Gradle build from a build</a></span></dt><dt><span class="section"><a href="#sec:external_dependencies">59.5. External dependencies for the build script</a></span></dt><dt><span class="section"><a href="#sec:ant_optional_dependencies">59.6. Ant optional dependencies</a></span></dt><dt><span class="section"><a href="#sec:philosophy">59.7. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#init_scripts">60. Initialization Scripts</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:basic_usage">60.1. Basic usage</a></span></dt><dt><span class="section"><a href="#N169E1">60.2. Using an init script</a></span></dt><dt><span class="section"><a href="#N16A17">60.3. Writing an init script</a></span></dt><dt><span class="section"><a href="#sec:custom_classpath">60.4. External dependencies for the init script</a></span></dt><dt><span class="section"><a href="#N16A81">60.5. Init script plugins</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gradle_wrapper">61. The Gradle Wrapper</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:configuration">61.1. Configuration</a></span></dt><dt><span class="section"><a href="#sec:unix_file_permissions">61.2. Unix file permissions</a></span></dt></dl></dd><dt><span class="chapter"><a href="#embedding">62. Embedding Gradle</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:embedding_introduction">62.1. Introduction to the Tooling API</a></span></dt><dt><span class="section"><a href="#sec:embedding_daemon">62.2. Tooling API and the Gradle Build Daemon</a></span></dt><dt><span class="section"><a href="#sec:embedding_quickstart">62.3. Quickstart</a></span></dt></dl></dd><dt><span class="chapter"><a href="#comparing_builds">63. Comparing Builds</a></span></dt><dd><dl><dt><span class="section"><a href="#N16B8C">63.1. Definition of terms</a></span></dt><dt><span class="section"><a href="#N16BC2">63.2. Current Capabilities</a></span></dt><dt><span class="section"><a href="#N16BEB">63.3. Comparing Gradle Builds</a></span></dt></dl></dd><dt><span class="chapter"><a href="#publishing_ivy">64. Ivy Publishing (new)</a></span></dt><dd><dl><dt><span class="section"><a href="#publishing_ivy:plugin">64.1. The &ldquo;<code class="literal">ivy-publish</code>&rdquo; Plugin</a></span></dt><dt><span class="section"><a href="#publishing_ivy:publications">64.2. Publications</a></span></dt><dt><span class="section"><a href="#publishing_ivy:repositories">64.3. Repositories</a></span></dt><dt><span class="section"><a href="#publishing_ivy:publishing">64.4. Performing a publish</a></span></dt><dt><span class="section"><a href="#publishing_ivy:descriptor">64.5. Generating the Ivy module descriptor file without publishing</a></span></dt><dt><span class="section"><a href="#publishing_ivy:example">64.6. Complete example</a></span></dt><dt><span class="section"><a href="#publishing_ivy:future">64.7. Future features</a></span></dt></dl></dd><dt><span class="chapter"><a href="#publishing_maven">65. Maven Publishing (new)</a></span></dt><dd><dl><dt><span class="section"><a href="#N16F3D">65.1. The &ldquo;<code class="literal">maven-publish</code>&rdquo; Plugin</a></span></dt><dt><span class="section"><a href="#publishing_maven:publications">65.2. Publications</a></span></dt><dt><span class="section"><a href="#publishing_maven:repositories">65.3. Repositories</a></span></dt><dt><span class="section"><a href="#publishing_maven:publishing">65.4. Performing a publish</a></span></dt><dt><span class="section"><a href="#publishing_maven:install">65.5. Publishing to Maven Local</a></span></dt><dt><span class="section"><a href="#publishing_maven:generate-pom">65.6. Generating the POM file without publishing</a></span></dt></dl></dd><dt><span class="appendix"><a href="#sample_list">A. Gradle Samples</a></span></dt><dd><dl><dt><span class="section"><a href="#-1241809347">A.1. Sample <code class="filename">customBuildLanguage</code>
    </a></span></dt><dt><span class="section"><a href="#-483118767">A.2. Sample <code class="filename">customDistribution</code>
    </a></span></dt><dt><span class="section"><a href="#1805725798">A.3. Sample <code class="filename">customPlugin</code>
    </a></span></dt><dt><span class="section"><a href="#1527440619">A.4. Sample <code class="filename">java/multiproject</code>
    </a></span></dt></dl></dd><dt><span class="appendix"><a href="#potential_traps">B. Potential Traps</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:groovy_script_variables">B.1. Groovy script variables</a></span></dt><dt><span class="section"><a href="#sec:configuration_and_execution_phase">B.2. Configuration and execution phase</a></span></dt></dl></dd><dt><span class="appendix"><a href="#feature_lifecycle">C. The Feature Lifecycle</a></span></dt><dd><dl><dt><span class="section"><a href="#N17469">C.1. States</a></span></dt><dt><span class="section"><a href="#backwards_compatibility">C.2. Backwards Compatibility Policy</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gradle_command_line">D. Gradle Command Line</a></span></dt><dd><dl><dt><span class="section"><a href="#daemon_cli">D.1. Daemon command-line options:</a></span></dt><dt><span class="section"><a href="#N176AF">D.2. System properties</a></span></dt><dt><span class="section"><a href="#N176C5">D.3. Environment variables</a></span></dt></dl></dd><dt><span class="appendix"><a href="#ide_support">E. Existing IDE Support and how to cope without it</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:intellij">E.1. IntelliJ</a></span></dt><dt><span class="section"><a href="#N1770D">E.2. Eclipse</a></span></dt><dt><span class="section"><a href="#sec:using_gradle_without_ide_support">E.3. Using Gradle without IDE support</a></span></dt></dl></dd><dt><span class="glossary"><a href="#N17723">Glossary</a></span></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>6.1. <a href="#hello">The first build script</a></dt><dt>6.2. <a href="#hello">Execution of a build script</a></dt><dt>6.3. <a href="#helloShortcut">A task definition shortcut</a></dt><dt>6.4. <a href="#upper">Using Groovy in Gradle's tasks</a></dt><dt>6.5. <a href="#count">Using Groovy in Gradle's tasks</a></dt><dt>6.6. <a href="#intro">Declaration of dependencies between tasks</a></dt><dt>6.7. <a href="#lazyDependsOn">Lazy dependsOn - the other task does not exist (yet)</a></dt><dt>6.8. <a href="#dynamic">Dynamic creation of a task</a></dt><dt>6.9. <a href="#dynamicDepends">Accessing a task via API - adding a dependency</a></dt><dt>6.10. <a href="#helloEnhanced">Accessing a task via API - adding behaviour</a></dt><dt>6.11. <a href="#helloWithShortCut">Accessing task as a property of the build script</a></dt><dt>6.12. <a href="#extraTaskProperties">Adding extra properties to a task</a></dt><dt>6.13. <a href="#antLoadfile">Using AntBuilder to execute ant.loadfile target</a></dt><dt>6.14. <a href="#antLoadfileWithMethod">Using methods to organize your build logic</a></dt><dt>6.15. <a href="#defaultTasks">Defining a default tasks</a></dt><dt>6.16. <a href="#configByDagNoRelease">Different outcomes of build depending on chosen tasks</a></dt><dt>7.1. <a href="#javaQuickstart">Using the Java plugin</a></dt><dt>7.2. <a href="#javaQuickstart">Building a Java project</a></dt><dt>7.3. <a href="#javaQuickstart">Adding Maven repository</a></dt><dt>7.4. <a href="#javaQuickstart">Adding dependencies</a></dt><dt>7.5. <a href="#javaQuickstart">Customization of MANIFEST.MF</a></dt><dt>7.6. <a href="#javaQuickstart">Adding a test system property</a></dt><dt>7.7. <a href="#javaQuickstart">Publishing the JAR file</a></dt><dt>7.8. <a href="#javaQuickstart">Eclipse plugin</a></dt><dt>7.9. <a href="#javaQuickstart">Java example - complete build file</a></dt><dt>7.10. <a href="#javaMultiProject">Multi-project build - hierarchical layout</a></dt><dt>7.11. <a href="#javaMultiProject">Multi-project build - settings.gradle file</a></dt><dt>7.12. <a href="#javaMultiProject">Multi-project build - common configuration</a></dt><dt>7.13. <a href="#javaMultiProject">Multi-project build - dependencies between projects</a></dt><dt>7.14. <a href="#javaMultiProject">Multi-project build - distribution file</a></dt><dt>8.1. <a href="#basicDependencyDeclarations">Declaring dependencies</a></dt><dt>8.2. <a href="#externalDependencies">Definition of an external dependency</a></dt><dt>8.3. <a href="#externalDependencies">Shortcut definition of an external dependency</a></dt><dt>8.4. <a href="#defineMavenCentral">Usage of Maven central repository</a></dt><dt>8.5. <a href="#defineRemoteMavenRepo">Usage of a remote Maven repository</a></dt><dt>8.6. <a href="#defineRemoteIvyRepo">Usage of a remote Ivy directory</a></dt><dt>8.7. <a href="#defineRemoteIvyRepo">Usage of a local Ivy directory</a></dt><dt>8.8. <a href="#publishIvyRepository">Publishing to an Ivy repository</a></dt><dt>8.9. <a href="#publishMavenRepository">Publishing to a Maven repository</a></dt><dt>9.1. <a href="#groovyQuickstart">Groovy plugin</a></dt><dt>9.2. <a href="#groovyQuickstart">Dependency on Groovy 2.2.0</a></dt><dt>9.3. <a href="#groovyQuickstart">Groovy example - complete build file</a></dt><dt>10.1. <a href="#webQuickstart">War plugin</a></dt><dt>10.2. <a href="#webQuickstart">Running web application with Jetty plugin</a></dt><dt>11.1. <a href="#multipleTasksFromCommandLine">Executing multiple tasks</a></dt><dt>11.2. <a href="#excludeTask">Excluding tasks</a></dt><dt>11.3. <a href="#abbreviateTaskName">Abbreviated task name</a></dt><dt>11.4. <a href="#abbreviateCamelCaseTaskName">Abbreviated camel case task name</a></dt><dt>11.5. <a href="#selectProjectUsingBuildFile">Selecting the project using a build file</a></dt><dt>11.6. <a href="#selectProjectUsingProjectDir">Selecting the project using project directory</a></dt><dt>11.7. <a href="#projectListReport">Obtaining information about projects</a></dt><dt>11.8. <a href="#projectListReport">Providing a description for a project</a></dt><dt>11.9. <a href="#taskListReport">Obtaining information about tasks</a></dt><dt>11.10. <a href="#taskListReport">Changing the content of the task report</a></dt><dt>11.11. <a href="#taskListAllReport">Obtaining more information about tasks</a></dt><dt>11.12. <a href="#taskHelp">Obtaining detailed help for tasks</a></dt><dt>11.13. <a href="#dependencyListReport">Obtaining information about dependencies</a></dt><dt>11.14. <a href="#dependencyListReportFiltered">Filtering dependency report by configuration</a></dt><dt>11.15. <a href="#dependencyInsightReport">Getting the insight into a particular dependency</a></dt><dt>11.16. <a href="#propertyListReport">Information about properties</a></dt><dt>12.1. <a href="#N10969">Launching the GUI</a></dt><dt>13.1. <a href="#projectApi">Accessing property of the Project object</a></dt><dt>13.2. <a href="#localVariables">Using local variables</a></dt><dt>13.3. <a href="#extraProperties">Using extra properties</a></dt><dt>13.4. <a href="#groovyBasics">Groovy JDK methods</a></dt><dt>13.5. <a href="#groovyBasics">Property accessors</a></dt><dt>13.6. <a href="#groovyBasics">Method call without parentheses</a></dt><dt>13.7. <a href="#groovyBasics">List and map literals</a></dt><dt>13.8. <a href="#groovyBasics">Closure as method parameter</a></dt><dt>13.9. <a href="#groovyBasics">Closure delegates</a></dt><dt>14.1. <a href="#makeDirectory">Directory creation with mkdir</a></dt><dt>14.2. <a href="#properties">Setting properties with a gradle.properties file</a></dt><dt>14.3. <a href="#configureProjectUsingScript">Configuring the project using an external build script</a></dt><dt>14.4. <a href="#configureObject">Configuring arbitrary objects</a></dt><dt>14.5. <a href="#configureObjectUsingScript">Configuring arbitrary objects using a script</a></dt><dt>15.1. <a href="#defineAsExpression">Defining tasks</a></dt><dt>15.2. <a href="#defineUsingStringTaskNames">Defining tasks - using strings for task names</a></dt><dt>15.3. <a href="#addToTaskContainer">Defining tasks with alternative syntax</a></dt><dt>15.4. <a href="#accessAsProperty">Accessing tasks as properties</a></dt><dt>15.5. <a href="#accessFromTaskContainer">Accessing tasks via tasks collection</a></dt><dt>15.6. <a href="#accessUsingPath">Accessing tasks by path</a></dt><dt>15.7. <a href="#declareTask">Creating a copy task</a></dt><dt>15.8. <a href="#configureUsingVar">Configuring a task - various ways</a></dt><dt>15.9. <a href="#configureUsingClosure">Configuring a task - with closure</a></dt><dt>15.10. <a href="#defineAndConfigure">Defining a task with closure</a></dt><dt>15.11. <a href="#addDependencyUsingPath">Adding dependency on task from another project</a></dt><dt>15.12. <a href="#addDependencyUsingTask">Adding dependency using task object</a></dt><dt>15.13. <a href="#addDependencyUsingClosure">Adding dependency using closure</a></dt><dt>15.14. <a href="#mustRunAfter">Adding a 'must run after' task ordering</a></dt><dt>15.15. <a href="#shouldRunAfter">Adding a 'should run after' task ordering</a></dt><dt>15.16. <a href="#mustRunAfterSingleTask">Task ordering does not imply task execution</a></dt><dt>15.17. <a href="#shouldRunAfterWithCycle">A 'should run after' task ordering is ignored if it introduces an ordering cycle</a></dt><dt>15.18. <a href="#describeTask">Adding a description to a task</a></dt><dt>15.19. <a href="#replaceTask">Overwriting a task</a></dt><dt>15.20. <a href="#taskOnlyIf">Skipping a task using a predicate</a></dt><dt>15.21. <a href="#stopExecutionException">Skipping tasks with StopExecutionException</a></dt><dt>15.22. <a href="#disableTask">Enabling and disabling tasks</a></dt><dt>15.23. <a href="#generatorTask">A generator task</a></dt><dt>15.24. <a href="#incrementalTask">Declaring the inputs and outputs of a task</a></dt><dt>15.25. <a href="#taskRule">Task rule</a></dt><dt>15.26. <a href="#taskRuleDependsOn">Dependency on rule based tasks</a></dt><dt>15.27. <a href="#taskFinalizers">Adding a task finalizer</a></dt><dt>15.28. <a href="#taskFinalizersWithFailure">Task finalizer for a failing task</a></dt><dt>16.1. <a href="#resolveFile">Locating files</a></dt><dt>16.2. <a href="#fileCollections">Creating a file collection</a></dt><dt>16.3. <a href="#fileCollections">Using a file collection</a></dt><dt>16.4. <a href="#fileCollections">Implementing a file collection</a></dt><dt>16.5. <a href="#fileTrees">Creating a file tree</a></dt><dt>16.6. <a href="#fileTrees">Using a file tree</a></dt><dt>16.7. <a href="#fileTrees">Using an archive as a file tree</a></dt><dt>16.8. <a href="#inputFiles">Specifying a set of files</a></dt><dt>16.9. <a href="#inputFiles">Specifying a set of files</a></dt><dt>16.10. <a href="#copy">Copying files using the copy task</a></dt><dt>16.11. <a href="#copy">Specifying copy task source files and destination directory</a></dt><dt>16.12. <a href="#copy">Selecting the files to copy</a></dt><dt>16.13. <a href="#copy">Copying files using the copy() method without up-to-date check</a></dt><dt>16.14. <a href="#copy">Copying files using the copy() method with up-to-date check</a></dt><dt>16.15. <a href="#renameOnCopy">Renaming files as they are copied</a></dt><dt>16.16. <a href="#filterOnCopy">Filtering files as they are copied</a></dt><dt>16.17. <a href="#nestedCopySpecs">Nested copy specs</a></dt><dt>16.18. <a href="#syncDependencies">Using the Sync task to copy dependencies</a></dt><dt>16.19. <a href="#createZip">Creating a ZIP archive</a></dt><dt>16.20. <a href="#archiveNaming">Creation of ZIP archive</a></dt><dt>16.21. <a href="#zipWithCustomName">Configuration of archive task - custom archive name</a></dt><dt>16.22. <a href="#zipWithArguments">Configuration of archive task - appendix &amp; classifier</a></dt><dt>17.1. <a href="#useAntTask">Using an Ant task</a></dt><dt>17.2. <a href="#taskWithNestedText">Passing nested text to an Ant task</a></dt><dt>17.3. <a href="#taskWithNestedElements">Passing nested elements to an Ant task</a></dt><dt>17.4. <a href="#useAntType">Using an Ant type</a></dt><dt>17.5. <a href="#useExternalAntTask">Using a custom Ant task</a></dt><dt>17.6. <a href="#useExternalAntTaskWithConfig">Declaring the classpath for a custom Ant task</a></dt><dt>17.7. <a href="#useExternalAntTaskWithConfig">Using a custom Ant task and dependency management together</a></dt><dt>17.8. <a href="#antHello">Importing an Ant build</a></dt><dt>17.9. <a href="#dependsOnAntTarget">Task that depends on Ant target</a></dt><dt>17.10. <a href="#addBehaviourToAntTarget">Adding behaviour to an Ant target</a></dt><dt>17.11. <a href="#dependsOnTask">Ant target that depends on Gradle task</a></dt><dt>17.12. <a href="#antProperties">Setting an Ant property</a></dt><dt>17.13. <a href="#antProperties">Getting an Ant property</a></dt><dt>17.14. <a href="#antProperties">Setting an Ant reference</a></dt><dt>17.15. <a href="#antProperties">Getting an Ant reference</a></dt><dt>18.1. <a href="#logging_to_stdout">Using stdout to write log messages</a></dt><dt>18.2. <a href="#logging_ex">Writing your own log messages</a></dt><dt>18.3. <a href="#logging_with_slf4j">Using SLF4J to write log messages</a></dt><dt>18.4. <a href="#project_stdout_capture">Configuring standard output capture</a></dt><dt>18.5. <a href="#task_stdout_capture">Configuring standard output capture for a task</a></dt><dt>18.6. <a href="#custom_logging_ui">Customizing what Gradle logs</a></dt><dt>20.1. <a href="#N117B7">Configuring an HTTP proxy</a></dt><dt>20.2. <a href="#N117C1">Configuring an HTTPS proxy</a></dt><dt>21.1. <a href="#useJavaPlugin">Applying a plugin</a></dt><dt>21.2. <a href="#pluginIntro">Applying a plugin by type</a></dt><dt>21.3. <a href="#pluginIntro">Applying a plugin by type</a></dt><dt>21.4. <a href="#pluginIntro">Tasks added by a plugin</a></dt><dt>21.5. <a href="#pluginConfig">Changing plugin defaults</a></dt><dt>21.6. <a href="#pluginConvention">Plugin convention object</a></dt><dt>23.1. <a href="#useJavaPlugin">Using the Java plugin</a></dt><dt>23.2. <a href="#customJavaSourceLayout">Custom Java source layout</a></dt><dt>23.3. <a href="#defineSourceSet">Accessing a source set</a></dt><dt>23.4. <a href="#configureSourceSet">Configuring the source directories of a source set</a></dt><dt>23.5. <a href="#defineSourceSet">Defining a source set</a></dt><dt>23.6. <a href="#sourceSetDependencies">Defining source set dependencies</a></dt><dt>23.7. <a href="#compileSourceSet">Compiling a source set</a></dt><dt>23.8. <a href="#configureSourceSet">Assembling a JAR for a source set</a></dt><dt>23.9. <a href="#configureSourceSet">Generating the Javadoc for a source set</a></dt><dt>23.10. <a href="#configureSourceSet">Running tests in a source set</a></dt><dt>23.11. <a href="#testfiltering">Filtering tests in the build script</a></dt><dt>23.12. <a href="#junitcategories">JUnit Categories</a></dt><dt>23.13. <a href="#testnggrouping">Grouping TestNG tests</a></dt><dt>23.14. <a href="#subProjectsTestReport">Creating a unit test report for subprojects</a></dt><dt>23.15. <a href="#manifest">Customization of MANIFEST.MF</a></dt><dt>23.16. <a href="#manifest">Creating a manifest object.</a></dt><dt>23.17. <a href="#manifest">Separate MANIFEST.MF for a particular archive</a></dt><dt>23.18. <a href="#manifest">Separate MANIFEST.MF for a particular archive</a></dt><dt>24.1. <a href="#useGroovyPlugin">Using the Groovy plugin</a></dt><dt>24.2. <a href="#customGroovySourceLayout">Custom Groovy source layout</a></dt><dt>24.3. <a href="#quickstartGroovyDependency">Configuration of Groovy dependency</a></dt><dt>24.4. <a href="#groovyTestDependency">Configuration of Groovy test dependency</a></dt><dt>24.5. <a href="#bundledGroovyDependency">Configuration of bundled Groovy dependency</a></dt><dt>24.6. <a href="#groovyFileDependency">Configuration of Groovy file dependency</a></dt><dt>25.1. <a href="#useScalaPlugin">Using the Scala plugin</a></dt><dt>25.2. <a href="#customScalaSourceLayout">Custom Scala source layout</a></dt><dt>25.3. <a href="#declareScalaDependency">Declaring a Scala dependency for production code</a></dt><dt>25.4. <a href="#declareScalaTestDependency">Declaring a Scala dependency for test code</a></dt><dt>25.5. <a href="#fsc">Enabling the Fast Scala Compiler</a></dt><dt>25.6. <a href="#zinc">Adjusting memory settings</a></dt><dt>25.7. <a href="#zinc">Activating the Zinc based compiler</a></dt><dt>26.1. <a href="#useWarPlugin">Using the War plugin</a></dt><dt>26.2. <a href="#webproject">Customization of war plugin</a></dt><dt>27.1. <a href="#earWithWar">Using the Ear plugin</a></dt><dt>27.2. <a href="#earCustomized">Customization of ear plugin</a></dt><dt>28.1. <a href="#useJettyPlugin">Using the Jetty plugin</a></dt><dt>29.1. <a href="#useCheckstylePlugin">Using the Checkstyle plugin</a></dt><dt>30.1. <a href="#useCodeNarcPlugin">Using the CodeNarc plugin</a></dt><dt>31.1. <a href="#useFindBugsPlugin">Using the FindBugs plugin</a></dt><dt>32.1. <a href="#useJDependPlugin">Using the JDepend plugin</a></dt><dt>33.1. <a href="#usePmdPlugin">Using the PMD plugin</a></dt><dt>34.1. <a href="#applyJacoco">Applying the JaCoCo plugin</a></dt><dt>34.2. <a href="#configJacoco">Configuring JaCoCo plugin settings</a></dt><dt>34.3. <a href="#configJacocoReport">Configuring test task</a></dt><dt>34.4. <a href="#jacocotesttast">Configuring test task</a></dt><dt>34.5. <a href="#jacoco-application-setup">Using application plugin to generate code coverage data</a></dt><dt>34.6. <a href="#jacoco-application-output">Coverage reports generated by applicationCodeCoverageReport</a></dt><dt>35.1. <a href="#quickstart">Applying the Sonar plugin</a></dt><dt>35.2. <a href="#quickstart">Configuring Sonar connection settings</a></dt><dt>35.3. <a href="#quickstart">Configuring Sonar project settings</a></dt><dt>35.4. <a href="#multiProject">Global configuration in a multi-project build</a></dt><dt>35.5. <a href="#multiProject">Common project configuration in a multi-project build</a></dt><dt>35.6. <a href="#multiProject">Individual project configuration in a multi-project build</a></dt><dt>35.7. <a href="#multiProject">Configuring the language to be analyzed</a></dt><dt>35.8. <a href="#multiProject">Using property syntax</a></dt><dt>35.9. <a href="#advanced">Analyzing custom source sets</a></dt><dt>35.10. <a href="#advanced">Analyzing languages other than Java</a></dt><dt>35.11. <a href="#advanced">Setting custom global properties</a></dt><dt>35.12. <a href="#advanced">Setting custom project properties</a></dt><dt>35.13. <a href="#advanced">Implementing custom command line properties</a></dt><dt>36.1. <a href="#quickstart">Applying the Sonar Runner plugin</a></dt><dt>36.2. <a href="#quickstart">Configuring Sonar connection settings</a></dt><dt>36.3. <a href="#multiProject">Global configuration settings</a></dt><dt>36.4. <a href="#multiProject">Shared configuration settings</a></dt><dt>36.5. <a href="#multiProject">Individual configuration settings</a></dt><dt>36.6. <a href="#multiProject">Skipping analysis of a project</a></dt><dt>36.7. <a href="#advanced">Analyzing custom source sets</a></dt><dt>36.8. <a href="#advanced">Analyzing languages other than Java</a></dt><dt>37.1. <a href="#useOsgiPlugin">Using the OSGi plugin</a></dt><dt>37.2. <a href="#osgi">Configuration of OSGi MANIFEST.MF file</a></dt><dt>38.1. <a href="#useEclipsePlugin">Using the Eclipse plugin</a></dt><dt>38.2. <a href="#partialOverwrites">Partial Overwrite for Classpath</a></dt><dt>38.3. <a href="#partialOverwritesProject">Partial Overwrite for Project</a></dt><dt>38.4. <a href="#exportDependencies">Export Dependencies</a></dt><dt>38.5. <a href="#wtpWithXml">Customizing the XML</a></dt><dt>39.1. <a href="#useIdeaPlugin">Using the IDEA plugin</a></dt><dt>39.2. <a href="#partialOverwrites">Partial Overwrite for Module</a></dt><dt>39.3. <a href="#partialOverwritesProject">Partial Overwrite for Project</a></dt><dt>39.4. <a href="#exportDependencies">Export Dependencies</a></dt><dt>39.5. <a href="#projectWithXml">Customizing the XML</a></dt><dt>40.1. <a href="#useAntlrPlugin">Using the ANTLR plugin</a></dt><dt>40.2. <a href="#declareAntlrVersion">Declare ANTLR version</a></dt><dt>42.1. <a href="#useAnnouncePlugin">Using the announce plugin</a></dt><dt>42.2. <a href="#useAnnouncePlugin">Configure the announce plugin</a></dt><dt>42.3. <a href="#useAnnouncePlugin">Using the announce plugin</a></dt><dt>43.1. <a href="#useBuildAnnouncementsPlugin">Using the build announcements plugin</a></dt><dt>43.2. <a href="#useBuildAnnouncementsPlugin">Using the build announcements plugin from an init script</a></dt><dt>44.1. <a href="#useDistributionPlugin">Using the distribution plugin</a></dt><dt>44.2. <a href="#multipleDistribution">Adding extra distributions</a></dt><dt>44.3. <a href="#configureDistribution">Configuring the main distribution</a></dt><dt>45.1. <a href="#useApplicationPlugin">Using the application plugin</a></dt><dt>45.2. <a href="#useApplicationPlugin">Configure the application main class</a></dt><dt>45.3. <a href="#configureApplicationDefaultJvmArgs">Configure default JVM settings</a></dt><dt>45.4. <a href="#includeTaskOutputInApplicationDistribution">Include output from other tasks in the application distribution</a></dt><dt>45.5. <a href="#dependentTaskForApplicationDistributionOutput">Automatically creating files for distribution</a></dt><dt>46.1. <a href="#usejavaLibraryPlugin">Using the java library distribution plugin</a></dt><dt>46.2. <a href="#useApplicationPlugin">Configure the distribution name</a></dt><dt>46.3. <a href="#includeTaskOutputInApplicationDistribution">Include files in the distribution</a></dt><dt>49.1. <a href="#useBuildDashboardPlugin">Using the Build Dashboard plugin</a></dt><dt>50.1. <a href="#defineConfiguration">Definition of a configuration</a></dt><dt>50.2. <a href="#defineConfiguration">Accessing a configuration</a></dt><dt>50.3. <a href="#defineConfiguration">Configuration of a configuration</a></dt><dt>50.4. <a href="#moduleDependencies">Module dependencies</a></dt><dt>50.5. <a href="#artifactOnly">Artifact only notation</a></dt><dt>50.6. <a href="#classifier">Dependency with classifier</a></dt><dt>50.7. <a href="#externalDependencies">Iterating over a configuration</a></dt><dt>50.8. <a href="#client-modules">Client module dependencies - transitive dependencies</a></dt><dt>50.9. <a href="#project-dependencies">Project dependencies</a></dt><dt>50.10. <a href="#file-dependencies">File dependencies</a></dt><dt>50.11. <a href="#generatedFileDependencies">Generated file dependencies</a></dt><dt>50.12. <a href="#gradle-api-dependencies">Gradle API dependencies</a></dt><dt>50.13. <a href="#local-groovy-dependencies">Gradle's Groovy dependencies</a></dt><dt>50.14. <a href="#exclude-dependencies">Excluding transitive dependencies</a></dt><dt>50.15. <a href="#dependenciesWithEmptyAttributes">Optional attributes of dependencies</a></dt><dt>50.16. <a href="#listGrouping">Collections and arrays of dependencies</a></dt><dt>50.17. <a href="#dependencyConfigurations">Dependency configurations</a></dt><dt>50.18. <a href="#dependencyConfigurationsProjects">Dependency configurations for project</a></dt><dt>50.19. <a href="#configurationHandlingSetup">Configuration.copy</a></dt><dt>50.20. <a href="#configurationHandlingDependencies">Accessing declared dependencies</a></dt><dt>50.21. <a href="#configurationHandlingAllFiles">Configuration.files</a></dt><dt>50.22. <a href="#configurationHandlingFiles">Configuration.files with spec</a></dt><dt>50.23. <a href="#configurationHandlingCopy">Configuration.copy</a></dt><dt>50.24. <a href="#configurationHandlingCopyVsFiles">Configuration.copy vs. Configuration.files</a></dt><dt>50.25. <a href="#mavenIvyRepositoriesNoAuth">Declaring a Maven and Ivy repository</a></dt><dt>50.26. <a href="#mavenIvyRepositoriesAuth">Providing credentials to a Maven and Ivy repository</a></dt><dt>50.27. <a href="#mavenCentral">Adding central Maven repository</a></dt><dt>50.28. <a href="#mavenJcenter">Adding Bintray's JCenter Maven repository</a></dt><dt>50.29. <a href="#mavenLocalRepo">Adding the local Maven cache as a repository</a></dt><dt>50.30. <a href="#mavenLikeRepo">Adding custom Maven repository</a></dt><dt>50.31. <a href="#mavenLikeRepoWithJarRepo">Adding additional Maven repositories for JAR files</a></dt><dt>50.32. <a href="#mavenPasswordProtectedRepo">Accessing password protected Maven repository</a></dt><dt>50.33. <a href="#flatDirMulti">Flat repository resolver</a></dt><dt>50.34. <a href="#ivyRepository">Ivy repository</a></dt><dt>50.35. <a href="#ivyRepository">Ivy repository with named layout</a></dt><dt>50.36. <a href="#ivyRepository">Ivy repository with pattern layout</a></dt><dt>50.37. <a href="#ivyRepository">Ivy repository with multiple custom patterns</a></dt><dt>50.38. <a href="#ivyRepository">Ivy repository with Maven compatible layout</a></dt><dt>50.39. <a href="#ivyRepository">Ivy repository</a></dt><dt>50.40. <a href="#defineRepository">Accessing a repository</a></dt><dt>50.41. <a href="#defineRepository">Configuration of a repository</a></dt><dt>50.42. <a href="#fileSystemResolver">Definition of a custom repository</a></dt><dt>50.43. <a href="#releasable-unit">Forcing consistent version for a group of libraries</a></dt><dt>50.44. <a href="#custom-versioning-scheme">Using a custom versioning scheme</a></dt><dt>50.45. <a href="#blacklisting_version">Blacklisting a version with a replacement</a></dt><dt>50.46. <a href="#module_substitution">Changing dependency group and/or name at the resolution</a></dt><dt>50.47. <a href="#dynamicResolveMode">Enabling dynamic resolve mode</a></dt><dt>50.48. <a href="#latestSelector">'Latest' version selector</a></dt><dt>50.49. <a href="#customStatusScheme">Custom status scheme</a></dt><dt>50.50. <a href="#dynamic-version-cache-control">Dynamic version cache control</a></dt><dt>50.51. <a href="#changing-module-cache-control">Changing module cache control</a></dt><dt>51.1. <a href="#archiveTaskArtifact">Defining an artifact using an archive task</a></dt><dt>51.2. <a href="#fileArtifact">Defining an artifact using a file</a></dt><dt>51.3. <a href="#fileArtifact">Customizing an artifact</a></dt><dt>51.4. <a href="#fileArtifact">Map syntax for defining an artifact using a file</a></dt><dt>51.5. <a href="#uploading">Configuration of the upload task</a></dt><dt>52.1. <a href="#useMavenPlugin">Using the Maven plugin</a></dt><dt>52.2. <a href="#newPom">Creating a stand alone pom.</a></dt><dt>52.3. <a href="#uploadFile">Upload of file to remote Maven repository</a></dt><dt>52.4. <a href="#uploadWithSsh">Upload of file via SSH</a></dt><dt>52.5. <a href="#customizePom">Customization of pom</a></dt><dt>52.6. <a href="#pomBuilder">Builder style customization of pom</a></dt><dt>52.7. <a href="#pomBuilder">Modifying auto-generated content</a></dt><dt>52.8. <a href="#customizeInstaller">Customization of Maven installer</a></dt><dt>52.9. <a href="#multiplePoms">Generation of multiple poms</a></dt><dt>52.10. <a href="#mappings">Accessing a mapping configuration</a></dt><dt>53.1. <a href="#useSigningPlugin">Using the Signing plugin</a></dt><dt>53.2. <a href="#signingArchives">Signing a configuration</a></dt><dt>53.3. <a href="#signingArchivesOutput">Signing a configuration output</a></dt><dt>53.4. <a href="#signingTasks">Signing a task</a></dt><dt>53.5. <a href="#signingTaskOutput">Signing a task output</a></dt><dt>53.6. <a href="#conditionalSigning">Conditional signing</a></dt><dt>53.7. <a href="#signingMavenPom">Signing a POM for deployment</a></dt><dt>54.1. <a href="#cppLibraries">Defining a library component</a></dt><dt>54.2. <a href="#cppExecutables">Defining executable components</a></dt><dt>54.3. <a href="#cppPlugin">The 'cpp' plugin</a></dt><dt>54.4. <a href="#cppSourceSet">C++ source set</a></dt><dt>54.5. <a href="#cPlugin">The 'c' plugin</a></dt><dt>54.6. <a href="#cSourceSet">C source set</a></dt><dt>54.7. <a href="#assemblerPlugin">The 'assembler' plugin</a></dt><dt>54.8. <a href="#objectiveCPlugin">The 'objective-c' plugin</a></dt><dt>54.9. <a href="#objectiveCppPlugin">The 'objective-cpp' plugin</a></dt><dt>54.10. <a href="#allBinarySettings">Settings that apply to all binaries</a></dt><dt>54.11. <a href="#allSharedLibraryBinarySettings">Settings that apply to all shared libraries</a></dt><dt>54.12. <a href="#componentBinarySettings">Settings that apply to all binaries produced for the 'main' executable component</a></dt><dt>54.13. <a href="#sharedLibraryArgs">Settings that apply only to shared libraries produced for the 'main' library component</a></dt><dt>54.14. <a href="#windowsResourcesPlugin">The 'windows-resources' plugin</a></dt><dt>54.15. <a href="#windowsResourceSet">Configuring the location of Windows resource sources</a></dt><dt>54.16. <a href="#resourceOnlyDll">Building a resource-only dll</a></dt><dt>54.17. <a href="#cppSourceLibrary">Providing a library dependency to the source set</a></dt><dt>54.18. <a href="#cppBinaryLibrary">Providing a library dependency to the binary</a></dt><dt>54.19. <a href="#cppProjectDependencies">Declaring project dependencies</a></dt><dt>54.20. <a href="#buildTypes">Defining build types</a></dt><dt>54.21. <a href="#buildTypeConfig">Configuring debug binaries</a></dt><dt>54.22. <a href="#platforms">Defining platforms</a></dt><dt>54.23. <a href="#flavors">Defining flavors</a></dt><dt>54.24. <a href="#targets">Targeting a component at particular platforms</a></dt><dt>54.25. <a href="#buildable">Building all possible variants</a></dt><dt>54.26. <a href="#toolChains">Defining tool chains</a></dt><dt>54.27. <a href="#withArguments">Reconfigure tool arguments</a></dt><dt>54.28. <a href="#targetPlatforms">Defining target platforms</a></dt><dt>54.29. <a href="#cunitSources">Registering CUnit tests</a></dt><dt>54.30. <a href="#cunitSources">Registering CUnit tests</a></dt><dt>54.31. <a href="#completeCUnitExample">Running CUnit tests</a></dt><dt>55.1. <a href="#buildlifecycle">Single project build</a></dt><dt>55.2. <a href="#standardLayouts">Hierarchical layout</a></dt><dt>55.3. <a href="#standardLayouts">Flat layout</a></dt><dt>55.4. <a href="#customLayout">Modification of elements of the project tree</a></dt><dt>55.5. <a href="#customLayout">Modification of elements of the project tree</a></dt><dt>55.6. <a href="#projectEvaluateEvents">Adding of test task to each project which has certain property set</a></dt><dt>55.7. <a href="#buildProjectEvaluateEvents">Notifications</a></dt><dt>55.8. <a href="#taskCreationEvents">Setting of certain property to all tasks</a></dt><dt>55.9. <a href="#taskExecutionEvents">Logging of start and end of each task execution</a></dt><dt>56.1. <a href="#multiprojectFirstExample">Multi-project tree - water &amp; bluewhale projects</a></dt><dt>56.2. <a href="#multiprojectFirstExample">Build script of water (parent) project</a></dt><dt>56.3. <a href="#multiprojectAddKrill">Multi-project tree - water, bluewhale  &amp; krill projects</a></dt><dt>56.4. <a href="#multiprojectAddKrill">Water project build script</a></dt><dt>56.5. <a href="#multiprojectUseSubprojects">Defining common behaviour of all projects and subprojects</a></dt><dt>56.6. <a href="#multiprojectSubprojectsAddFromTop">Defining specific behaviour for particular project</a></dt><dt>56.7. <a href="#multiprojectSpreadSpecifics">Defining specific behaviour for project krill</a></dt><dt>56.8. <a href="#multiprojectAddTropical">Adding custom behaviour to some projects (filtered by project name)</a></dt><dt>56.9. <a href="#multiprojectTropicalWithProperties">Adding custom behaviour to some projects (filtered by project properties)</a></dt><dt>56.10. <a href="#multiprojectSubBuild">Running build from subproject</a></dt><dt>56.11. <a href="#multiprojectPartialTasks">Evaluation and execution of projects</a></dt><dt>56.12. <a href="#multiprojectPartialTasksNotQuiet">Evaluation and execution of projects</a></dt><dt>56.13. <a href="#multiprojectAbsoluteTaskPaths">Running tasks by their absolute path</a></dt><dt>56.14. <a href="#multiprojectFirstMessages">Dependencies and execution order</a></dt><dt>56.15. <a href="#multiprojectMessagesHack">Dependencies and execution order</a></dt><dt>56.16. <a href="#multiprojectMessagesHackBroken">Dependencies and execution order</a></dt><dt>56.17. <a href="#multiprojectMessagesDependencies">Declaring dependencies</a></dt><dt>56.18. <a href="#multiprojectMessagesDependenciesSubBuild">Declaring dependencies</a></dt><dt>56.19. <a href="#multiprojectMessagesTaskDependencies">Cross project task dependencies</a></dt><dt>56.20. <a href="#multiprojectMessagesConfigDependenciesBroken">Configuration time dependencies</a></dt><dt>56.21. <a href="#multiprojectMessagesConfigDependencies">Configuration time dependencies - evaluationDependsOn</a></dt><dt>56.22. <a href="#multiprojectMessagesConfigDependenciesAltSolution">Configuration time dependencies</a></dt><dt>56.23. <a href="#webdist">Dependencies - real life example - crossproject configuration</a></dt><dt>56.24. <a href="#javadependencies_1">Project lib dependencies</a></dt><dt>56.25. <a href="#javadependencies_2">Project lib dependencies</a></dt><dt>56.26. <a href="#javaWithCustomConf">Fine grained control over dependencies</a></dt><dt>56.27. <a href="#multitestingBuild">Build and Test Single Project</a></dt><dt>56.28. <a href="#multitestingBuildDashA">Partial Build and Test Single Project</a></dt><dt>56.29. <a href="#multitestingBuildNeeded">Build and Test Depended On Projects</a></dt><dt>56.30. <a href="#multitestingBuildDependents">Build and Test Dependent Projects</a></dt><dt>57.1. <a href="#customTask">Defining a custom task</a></dt><dt>57.2. <a href="#customTaskWithAction">A hello world task</a></dt><dt>57.3. <a href="#customTaskWithProperty">A customizable hello world task</a></dt><dt>57.4. <a href="#customTaskStandalone">A build for a custom task</a></dt><dt>57.5. <a href="#customTaskStandalone">A custom task</a></dt><dt>57.6. <a href="#usingCustomTask">Using a custom task in another project</a></dt><dt>57.7. <a href="#customTaskStandalone">Testing a custom task</a></dt><dt>57.8. <a href="#taskDefinition">Defining an incremental task action</a></dt><dt>57.9. <a href="#incrementalTaskFirstRun">Running the incremental task for the first time</a></dt><dt>57.10. <a href="#incrementalTaskNoChange">Running the incremental task with unchanged inputs</a></dt><dt>57.11. <a href="#incrementalTaskUpdatedInputs">Running the incremental task with updated input files</a></dt><dt>57.12. <a href="#incrementalTaskRemovedInput">Running the incremental task with an input file removed</a></dt><dt>57.13. <a href="#incrementalTaskRemovedOutput">Running the incremental task with an output file removed</a></dt><dt>57.14. <a href="#incrementalTaskChangedProperty">Running the incremental task with an input property changed</a></dt><dt>58.1. <a href="#customPlugin">A custom plugin</a></dt><dt>58.2. <a href="#customPluginWithConvention">A custom plugin extension</a></dt><dt>58.3. <a href="#customPluginWithAdvancedConvention">A custom plugin with configuration closure</a></dt><dt>58.4. <a href="#lazyFileProperties">Evaluating file properties lazily</a></dt><dt>58.5. <a href="#customPluginStandalone">A build for a custom plugin</a></dt><dt>58.6. <a href="#customPluginStandalone">Wiring for a custom plugin</a></dt><dt>58.7. <a href="#customPluginStandalone">Using a custom plugin in another project</a></dt><dt>58.8. <a href="#customPluginStandalone">Testing a custom plugin</a></dt><dt>58.9. <a href="#domainObjectContainer">Managing domain objects</a></dt><dt>59.1. <a href="#inheritedBuildLogic">Using inherited properties and methods</a></dt><dt>59.2. <a href="#injectedBuildLogic">Using injected properties and methods</a></dt><dt>59.3. <a href="#customBuildSrcBuild">Custom buildSrc build script</a></dt><dt>59.4. <a href="#multiProjectBuildSrc">Adding subprojects to the root buildSrc project</a></dt><dt>59.5. <a href="#nestedBuild">Running another build from a build</a></dt><dt>59.6. <a href="#declareExternalBuildDependency">Declaring external dependencies for the build script</a></dt><dt>59.7. <a href="#externalBuildDependency">A build script with external dependencies</a></dt><dt>59.8. <a href="#buildLogic">Ant optional dependencies</a></dt><dt>60.1. <a href="#initScriptConfiguration">Using init script to perform extra configuration before projects are evaluated</a></dt><dt>60.2. <a href="#declareExternalInitDependency">Declaring external dependencies for an init script</a></dt><dt>60.3. <a href="#externalInitDependency">An init script with external dependencies</a></dt><dt>60.4. <a href="#usePluginsInInitScripts">Using plugins in init scripts</a></dt><dt>61.1. <a href="#wrapperSimple">Wrapper task</a></dt><dt>61.2. <a href="#wrapperSimple">Wrapper generated files</a></dt><dt>64.1. <a href="#publishing_ivy:apply-plugin-snippet">Applying the &ldquo;ivy-publish&rdquo; plugin</a></dt><dt>64.2. <a href="#publishing_ivy:publish-component-snippet">Publishing a java module to Ivy</a></dt><dt>64.3. <a href="#publishing_ivy:publish-custom-artifact-snippet">Publishing additional artifact to Ivy</a></dt><dt>64.4. <a href="#publishing_ivy:publish-customize-identity">customizing the publication identity</a></dt><dt>64.5. <a href="#publishing_ivy:descriptor-customization-snippet">Customizing the module descriptor file</a></dt><dt>64.6. <a href="#publishing_ivy:publish-multiple-publications">Publishing multiple modules from a single project</a></dt><dt>64.7. <a href="#publishing_ivy:sample_repositories">Declaring repositories to publish to</a></dt><dt>64.8. <a href="#publishingIvyPublishSingle">Choosing a particular publication to publish</a></dt><dt>64.9. <a href="#publishingIvyPublishLifecycle">Publishing all publications via the &ldquo;publish&rdquo; lifecycle task</a></dt><dt>64.10. <a href="#publishingIvyGenerateDescriptor">Generating the Ivy module descriptor file</a></dt><dt>64.11. <a href="#publishing_ivy:complete_example">Publishing a java module</a></dt><dt>64.12. <a href="#publishing_ivy:output_ivy.xml">Example generated ivy.xml</a></dt><dt>65.1. <a href="#publishing_maven:apply_plugin">Applying the 'maven-publish' plugin</a></dt><dt>65.2. <a href="#publishing_maven:publish-component">Adding a MavenPublication for a java component</a></dt><dt>65.3. <a href="#publishing_maven:publish-custom-artifact">Adding additional artifact to a MavenPublication</a></dt><dt>65.4. <a href="#publishing_maven:publish-customize-identity">customizing the publication identity</a></dt><dt>65.5. <a href="#publishing_maven:pom_modification">Modifying the POM file</a></dt><dt>65.6. <a href="#publishing_maven:publish-multiple-publications">Publishing multiple modules from a single project</a></dt><dt>65.7. <a href="#publishing_maven:repositories">Declaring repositories to publish to</a></dt><dt>65.8. <a href="#publishingMavenPublishMinimal">Publishing a project to a Maven repository</a></dt><dt>65.9. <a href="#publishingMavenPublishLocal">Publish a project to the Maven local repository</a></dt><dt>65.10. <a href="#publishingMavenGeneratePom">Generate a POM file without publishing</a></dt><dt>B.1. <a href="#scope">Variables scope: local and script wide</a></dt><dt>B.2. <a href="#mkdirTrap">Distinct configuration and execution phase</a></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h1></div></div></div><p>We would like to introduce Gradle to you, a build system that we think is a quantum leap for build technology
        in the Java (JVM) world. Gradle provides:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A very flexible general purpose build tool like Ant.
            </p></li><li class="listitem"><p>Switchable, build-by-convention frameworks a la Maven. But we never lock you in!
            </p></li><li class="listitem"><p>Very powerful support for multi-project builds.
            </p></li><li class="listitem"><p>Very powerful dependency management (based on Apache Ivy).
            </p></li><li class="listitem"><p>Full support for your existing Maven or Ivy repository infrastructure.
            </p></li><li class="listitem"><p>Support for transitive dependency management without the need for remote repositories or
                <code class="filename">pom.xml</code> and <code class="filename">ivy.xml</code> files.
            </p></li><li class="listitem"><p>Ant tasks and builds as first class citizens.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Groovy</em></span> build scripts.
            </p></li><li class="listitem"><p>A rich domain model for describing your build.
            </p></li></ul></div><p>
        In <a class="xref" href="#overview">Chapter&nbsp;2, <i>Overview</i></a> you will find a detailed overview of Gradle. Otherwise, the
        <a class="link" href="#tutorials">tutorials</a> are waiting, have fun :)
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10048"></a>1.1.&nbsp;About this user guide</h2></div></div></div><p>This user guide, like Gradle itself, is under very active development. Some parts of Gradle aren't
            documented as completely as they need to be. Some of the content presented won't be entirely clear or
            will assume that you know more about Gradle than you do. We need your help to improve this user
            guide. You can find out more about contributing to the documentation at the
            <a class="ulink" href="http://www.gradle.org/contribute" target="_top">Gradle web site</a>.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="overview"></a>Chapter&nbsp;2.&nbsp;Overview</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:special_feature_of_gradle"></a>2.1.&nbsp;Features</h2></div></div></div><p>Here is a list of some of Gradle's features.
        </p><div class="variablelist"><dl><dt><span class="term">Declarative builds and build-by-convention</span></dt><dd><p>At the heart of Gradle lies a rich extensible Domain Specific Language (DSL) based on Groovy.
                        Gradle pushes declarative builds to the next level by providing declarative language elements
                        that you can assemble as you like. Those elements also provide build-by-convention support for
                        Java, Groovy, OSGi, Web and Scala projects. Even more, this declarative language is extensible.
                        Add your own new language elements or enhance the existing ones. Thus providing concise,
                        maintainable and comprehensible builds.
                    </p></dd><dt><span class="term">Language for dependency based programming</span></dt><dd><p>The declarative language lies on top of a general purpose task graph, which you can fully
                        leverage in your builds. It provides utmost flexibility to adapt Gradle to your unique needs. 
                    </p></dd><dt><span class="term">Structure your build</span></dt><dd><p>The suppleness and richness of Gradle finally allows you to apply common design principles to your build.
                        For example, it is very easy to compose your build from reusable
                        pieces of build logic. Inline stuff where unnecessary indirections would be inappropriate. Don't be
                        forced to tear apart what belongs together (e.g. in your project hierarchy). Thus avoiding smells
                        like shotgun changes or divergent change that turn your build into a maintenance nightmare.
                        At last you can create a well structured, easily maintained, comprehensible build.</p></dd><dt><span class="term">Deep API</span></dt><dd><p>From being a pleasure to be used embedded to its many hooks over the whole lifecycle of build
                        execution, Gradle allows you to monitor and customize its configuration and execution behavior
                        to its very core.
                    </p></dd><dt><span class="term">Gradle scales</span></dt><dd><p>Gradle scales very well. It significantly increases your productivity,
                        from simple single project builds up to huge enterprise multi-project builds. This is true
                        for structuring the build. With the state-of-art incremental build function, this is also true for
                        tackling the performance pain many large enterprise builds suffer from.
                    </p></dd><dt><span class="term">Multi-project builds</span></dt><dd><p>Gradle's support for multi-project build is outstanding. Project dependencies are first class
                        citizens. We allow you to model the project relationships in a multi-project build as they really
                        are for your problem domain. Gradle follows your layout not vice versa.
                    </p><p>Gradle provides partial builds. If you build a single subproject Gradle takes care of building
                        all the subprojects that subproject 
                        depends on. You can also choose to rebuild the subprojects that depend on a particular subproject.
                        Together with incremental builds this is a big time saver for larger builds.
                    </p></dd><dt><span class="term">Many ways to manage your dependencies</span></dt><dd><p>Different teams prefer different ways to manage their external dependencies.
                        Gradle provides convenient support for any strategy. From transitive dependency 
                        management with remote Maven and Ivy repositories to jars or dirs on the local file system.</p></dd><dt><span class="term">Gradle is the first build integration tool</span></dt><dd><p>Ant tasks are first class citizens. Even more interesting, Ant projects are first class citizens as well.
                        Gradle provides a deep import for any Ant project, turning Ant targets into native Gradle tasks at runtime.
                        You can depend on them from Gradle, you can enhance them from Gradle, you can even declare dependencies on
                        Gradle tasks in your build.xml. The same integration is provided for properties, paths, etc ...</p><p>Gradle fully supports your existing Maven or Ivy repository infrastructure for publishing and retrieving
                        dependencies. Gradle also provides a converter for turning a Maven <code class="filename">pom.xml</code> into a Gradle script.
                        Runtime imports of Maven projects will come soon.</p></dd><dt><span class="term">Ease of migration</span></dt><dd><p>Gradle can adapt to any structure you have. Therefore you can always develop your Gradle build
                        in the same branch where your production build lives and both can evolve in parallel.
                        We usually recommend to write tests that make sure that the produced artifacts are similar.
                        That way migration is as less disruptive and as reliable as possible. This is following the best-practices
                        for refactoring by applying baby steps.
                    </p></dd><dt><span class="term">Groovy</span></dt><dd><p>Gradle's build scripts are written in Groovy, not XML. But unlike other approaches this is not
                        for simply exposing the raw scripting power of a dynamic language. That would just lead to a very
                        difficult to maintain build. The whole design of Gradle is oriented towards being used as a language,
                        not as a rigid framework. And Groovy is our glue that allows you to tell your individual story with
                        the abstractions Gradle (or you) provide. Gradle provides some standard stories but they are not
                        privileged in any form. This is for us a major distinguishing features compared to other declarative
                        build systems. Our Groovy support is also not just some simple coating sugar layer. The whole Gradle API
                        is fully groovynized. Only by that using Groovy is the fun and productivity gain it can be.
                    </p></dd><dt><span class="term">The Gradle wrapper</span></dt><dd><p>The Gradle Wrapper allows you to execute Gradle builds on machines where Gradle is not
                        installed. This is useful for example for some continuous integration servers. It is also
                        useful for an open source project to keep the barrier low for building it. The wrapper is also
                        very interesting for the enterprise. It is a zero administration approach for the client machines.
                        It also enforces the usage of a particular Gradle version thus minimizing support issues. 
                    </p></dd><dt><span class="term">Free and open source</span></dt><dd><p>Gradle is an open source project, and is licensed under the <a class="ulink" href="http://www.gradle.org/license" target="_top">ASL</a>.
                    </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:why_groovy"></a>2.2.&nbsp;Why Groovy?</h2></div></div></div><p>We think the advantages of an internal DSL (based on a dynamic language) over XML are tremendous in case
            of <span class="emphasis"><em>build scripts</em></span>. There are a couple of dynamic languages out there. Why Groovy? The
            answer lies in the context Gradle is operating in. Although Gradle is a general purpose build tool at its
            core, its main focus are Java projects.
            In such projects obviously the team members know Java. We think a build
            should be as transparent as possible to <span class="emphasis"><em>all</em></span> team members.
        </p><p>You might argue why not using Java then as the language for build scripts. We think this is a valid
            question. It would have the highest transparency for your team and the lowest learning curve. But due to
            limitations of Java such a build language would not be as nice, expressive and powerful as it could be.
            <sup>[<a href="#ftn.N100BF" name="N100BF" class="footnote">1</a>]</sup>
            Languages like Python, Groovy or Ruby do a much better job here. We have chosen Groovy as it offers by far
            the greatest transparency for Java people. Its base syntax is the same as Java's as well as its type system,
            its package structure and other things. Groovy builds a lot on top of that. But on a common ground with Java.
        </p><p>For Java teams which share also Python or Ruby knowledge or are happy to learn it, the above arguments
            don't apply. The Gradle design is well-suited for creating another build script engine in JRuby or Jython.
            It just doesn't have the highest priority for us at the moment. We happily support any community effort
            to create additional build script engines.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N100BF" name="ftn.N100BF" class="para">1</a>] </sup>At
                    <a class="ulink" href="http://www.defmacro.org/ramblings/lisp.html" target="_top">http://www.defmacro.org/ramblings/lisp.html</a>
                    you find an interesting article comparing Ant, XML, Java and Lisp. It's funny that the 'if Java had
                    that syntax' syntax in this article is actually the Groovy syntax.
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorials"></a>Chapter&nbsp;3.&nbsp;Tutorials</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N100CE"></a>3.1.&nbsp;Getting Started</h2></div></div></div><p>The following tutorials introduce some of the basics of Gradle, to help you get started.</p><div class="variablelist"><dl><dt><span class="term">
                    <a class="xref" href="#installation">Chapter&nbsp;4, <i>Installing Gradle</i></a>
                </span></dt><dd><p>Describes how to install Gradle.</p></dd><dt><span class="term">
                    <a class="xref" href="#tutorial_using_tasks">Chapter&nbsp;6, <i>Build Script Basics</i></a>
                </span></dt><dd><p>Introduces the basic build script elements:
                        <em class="firstterm">projects</em>
                        and
                        <em class="firstterm">tasks</em>.
                    </p></dd><dt><span class="term">
                    <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a>
                </span></dt><dd><p>Shows how to start using Gradle's build-by-convention support for Java projects.</p></dd><dt><span class="term">
                    <a class="xref" href="#artifact_dependencies_tutorial">Chapter&nbsp;8, <i>Dependency Management Basics</i></a>
                </span></dt><dd><p>Shows how to start using Gradle's dependency management.</p></dd><dt><span class="term">
                    <a class="xref" href="#tutorial_groovy_projects">Chapter&nbsp;9, <i>Groovy Quickstart</i></a>
                </span></dt><dd><p>Using Gradle's build-by-convention support for Groovy projects.</p></dd><dt><span class="term">
                    <a class="xref" href="#web_project_tutorial">Chapter&nbsp;10, <i>Web Application Quickstart</i></a>
                </span></dt><dd><p>Using Gradle's build-by-convention support for Web applications.</p></dd></dl></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="installation"></a>Chapter&nbsp;4.&nbsp;Installing Gradle</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10116"></a>4.1.&nbsp;Prerequisites</h2></div></div></div><p>Gradle requires a Java JDK or JRE to be installed. Gradle requires a Java version 6 or higher. Gradle ships with its own
        Groovy library, therefore no Groovy needs to be installed. Any existing Groovy installation is ignored by Gradle.
    </p><p>Gradle uses whichever JDK it finds in your path (to check, use <strong class="userinput"><code>java -version</code></strong>).
        Alternatively, you can set the <code class="envar">JAVA_HOME</code> environment variable to point to the install directory
        of the desired JDK.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10123"></a>4.2.&nbsp;Download</h2></div></div></div><p>You can download one of the Gradle distributions from the <a class="ulink" href="http://www.gradle.org/downloads" target="_top">Gradle web site</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1012C"></a>4.3.&nbsp;Unpacking</h2></div></div></div><p>The Gradle distribution comes packaged as a ZIP. The full distribution contains:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The Gradle binaries.</p></li><li class="listitem"><p>The user guide (HTML and PDF).</p></li><li class="listitem"><p>The DSL reference guide.</p></li><li class="listitem"><p>The API documentation (Javadoc and Groovydoc).</p></li><li class="listitem"><p>Extensive samples, including the examples referenced in the user guide, along with some complete and more
            complex builds you can use the starting point for your own build.
        </p></li><li class="listitem"><p>The binary sources. This is for reference only. If you want to build Gradle you need to download the source distribution
            or checkout the sources from the source repository. See the <a class="ulink" href="http://www.gradle.org/development" target="_top">Gradle web site</a> for details.
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10148"></a>4.4.&nbsp;Environment variables</h2></div></div></div><p>For running Gradle, add <code class="filename"><em class="replaceable"><code>GRADLE_HOME</code></em>/bin</code> to your <code class="envar">PATH</code>
    environment variable. Usually, this is sufficient to run Gradle.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10155"></a>4.5.&nbsp;Running and testing your installation</h2></div></div></div><p>You run Gradle via the <span class="command"><strong>gradle</strong></span> command. To check if Gradle is properly installed just type
<span class="command"><strong>gradle -v</strong></span>. The output shows Gradle version and also local environment configuration (groovy and JVM version, etc.).
    The displayed Gradle version should match the distribution you have downloaded.
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10160"></a>4.6.&nbsp;JVM options</h2></div></div></div><p>JVM options for running Gradle can be set via environment variables. You can use <code class="envar">GRADLE_OPTS</code>
or <code class="envar">JAVA_OPTS</code>. Those variables can be used together. <code class="envar">JAVA_OPTS</code> is by convention an environment
variable shared by many Java applications. A typical use case would be to set the HTTP proxy in <code class="envar">JAVA_OPTS</code>
and the memory options in <code class="envar">GRADLE_OPTS</code>. Those variables can also be set at the beginning
of the <span class="command"><strong>gradle</strong></span> or <span class="command"><strong>gradlew</strong></span> script.
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="troubleshooting"></a>Chapter&nbsp;5.&nbsp;Troubleshooting</h1></div></div></div><div class="note"><p>
            This chapter is currently a work in progress.
        </p></div><p>
        When using Gradle (or any software package), you can run into problems. You may not understand
        how to use a particular feature, or you may encounter a defect. Or, you may have a general question
        about Gradle.
    </p><p>
        This chapter gives some advice for troubleshooting problems and explains how to get help with your problems.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10187"></a>5.1.&nbsp;Working through problems</h2></div></div></div><p>
            If you are encountering problems, one of the first things to try is using the very latest release of Gradle. New versions of Gradle are
            released frequently with bug fixes and new features. The problem you are having may have been fixed in a new release.
        </p><p>
            If you are using the Gradle Daemon, try temporarily disabling the daemon (you can pass the command line switch <code class="literal">--no-daemon</code>).
            More information about troubleshooting daemon is located in <a class="xref" href="#gradle_daemon">Chapter&nbsp;19, <i>The Gradle Daemon</i></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10194"></a>5.2.&nbsp;Getting help</h2></div></div></div><p>
            The place to go for help with Gradle is <a class="ulink" href="http://forums.gradle.org" target="_top">http://forums.gradle.org</a>.
            The Gradle Forums is the place where you can report problems and ask questions to the Gradle 
            developers and other community members.
        </p><p>
            If something's not working for you, posting a question or problem report to the forums is the fastest way 
            to get help. It's also the place to post improvement suggestions or new ideas. The development team 
            frequently posts news items and announces releases via the forum, making it a great way to stay up to 
            date with the latest Gradle developments.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorial_using_tasks"></a>Chapter&nbsp;6.&nbsp;Build Script Basics</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N101A5"></a>6.1.&nbsp;Projects and tasks</h2></div></div></div><p>Everything in Gradle sits on top of two basic concepts: <em class="firstterm">projects</em> and <em class="firstterm">tasks</em>.</p><p>
        Every Gradle build is made up of one or more <em class="firstterm">projects</em>.
        What a project represents depends on what it is that you are doing with Gradle.
        For example, a project might represent a library JAR or a web application. It might represent a
        distribution ZIP assembled from the JARs produced by other projects. A project does not necessarily represent
        a thing to be built. It might represent a thing to be done, such as deploying your application to staging or
        production environments. Don't worry if this seems a little vague for now. Gradle's build-by-convention support adds
        a more concrete definition for what a project is.
    </p><p>Each project is made up of one or more <em class="firstterm">tasks</em>. A task represents some atomic piece
        of work which a build performs. This might be compiling some classes, creating a JAR, generating javadoc,
        or publishing some archives to a repository.</p><p>For now, we will look at defining some simple tasks in a build with one project. Later chapters will look at
        working with multiple projects and more about working with projects and tasks.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N101BC"></a>6.2.&nbsp;Hello world</h2></div></div></div><p>You run a Gradle build using the <span class="command"><strong>gradle</strong></span> command. The <span class="command"><strong>gradle</strong></span> command
            looks for a file called <code class="filename">build.gradle</code> in the current directory.
            <sup>[<a href="#ftn.N101CA" name="N101CA" class="footnote">2</a>]</sup>
            We call this <code class="filename">build.gradle</code> file a <em class="firstterm">build script</em>, although strictly speaking it is
            a build configuration script, as we will see later. The build script defines a project and its tasks.
        </p><p>To try this out, create the following build script named <code class="filename">build.gradle</code>.
        </p><div class="example"><a name="hello"></a><p class="title"><b>Example&nbsp;6.1.&nbsp;The first build script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello {
    doLast {
        println <span class="hl-string">'Hello world!'</span>
    }
}</pre></div></div><br class="example-break"><p>In a command-line shell, enter into the containing directory and execute the build script by running
            <strong class="userinput"><code>gradle -q hello</code></strong>:
        </p><div class="tip"><h3 class="title">What does <code class="option">-q</code> do?</h3><p>Most of the examples in this user guide are run with the <code class="option">-q</code> command-line option.
                This suppresses Gradle's log messages, so that only the output of the tasks is shown. This keeps the example
                output in this user guide a little clearer. You don't need to use this option if you don't want.
                See <a class="xref" href="#logging">Chapter&nbsp;18, <i>Logging</i></a> for more details about the command-line options which affect Gradle's output.
            </p></div><div class="example"><a name="hello"></a><p class="title"><b>Example&nbsp;6.2.&nbsp;Execution of a build script</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
Hello world!</pre></div></div><br class="example-break"><p>What's going on here? This build script defines a single task, called <code class="literal">hello</code>, and
            adds an action to it. When you run <strong class="userinput"><code>gradle hello</code></strong>, Gradle executes the
            <code class="literal">hello</code> task, which in turn executes the action you've provided. The action is simply a
            closure containing some Groovy code to execute.
        </p><p>If you think this looks similar to Ant's targets, well, you are right. Gradle tasks are the equivalent to
            Ant targets. But as you will see, they are much more powerful. We have used a different terminology than Ant
            as we think the word <span class="emphasis"><em>task</em></span> is more expressive than the word <span class="emphasis"><em>target</em></span>.
            Unfortunately this introduces a terminology clash with Ant, as Ant calls its commands, such as
            <code class="literal">javac</code> or <code class="literal">copy</code>, tasks. So when we talk about tasks,
            we <span class="emphasis"><em>always</em></span> mean Gradle tasks, which are the equivalent to Ant's targets. If we talk
            about Ant tasks (Ant commands), we explicitly say <span class="emphasis"><em>ant task</em></span>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10222"></a>6.3.&nbsp;A shortcut task definition</h2></div></div></div><p>There is a shorthand way to define a task like our <code class="literal">hello</code> task above, which is more
            concise.</p><div class="example"><a name="helloShortcut"></a><p class="title"><b>Example&nbsp;6.3.&nbsp;A task definition shortcut</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello world!'</span>
}</pre></div></div><br class="example-break"><p>Again, this defines a task called <code class="literal">hello</code> with a single closure to execute.
            We will use this task definition style throughout the user guide.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10239"></a>6.4.&nbsp;Build scripts are code</h2></div></div></div><p>Gradle's build scripts expose to you the full power of Groovy. As an appetizer, have a look at this:
        </p><div class="example"><a name="upper"></a><p class="title"><b>Example&nbsp;6.4.&nbsp;Using Groovy in Gradle's tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task upper &lt;&lt; {
    String someString = <span class="hl-string">'mY_nAmE'</span>
    println <span class="hl-string">"Original: "</span> + someString 
    println <span class="hl-string">"Upper case: "</span> + someString.toUpperCase()
}</pre><p>Output of <strong class="userinput"><code>gradle -q upper</code></strong></p><pre class="screen">&gt; gradle -q upper
Original: mY_nAmE
Upper case: MY_NAME</pre></div></div><br class="example-break"><p>or</p><div class="example"><a name="count"></a><p class="title"><b>Example&nbsp;6.5.&nbsp;Using Groovy in Gradle's tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task count &lt;&lt; {
    4.times { print <span class="hl-string">"$it "</span> }
}</pre><p>Output of <strong class="userinput"><code>gradle -q count</code></strong></p><pre class="screen">&gt; gradle -q count
0 1 2 3</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:task_dependencies"></a>6.5.&nbsp;Task dependencies</h2></div></div></div><p>As you probably have guessed, you can declare dependencies between your tasks.
        </p><div class="example"><a name="intro"></a><p class="title"><b>Example&nbsp;6.6.&nbsp;Declaration of dependencies between tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello world!'</span>
}
task intro(dependsOn: hello) &lt;&lt; {
    println <span class="hl-string">"I'm Gradle"</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q intro</code></strong></p><pre class="screen">&gt; gradle -q intro
Hello world!
I'm Gradle</pre></div></div><br class="example-break"><p>To add a dependency, the corresponding task does not need to exist.</p><div class="example"><a name="lazyDependsOn"></a><p class="title"><b>Example&nbsp;6.7.&nbsp;Lazy dependsOn - the other task does not exist (yet)</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX(dependsOn: <span class="hl-string">'taskY'</span>) &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>The dependency of <code class="literal">taskX</code> to <code class="literal">taskY</code> is declared before
            <code class="literal">taskY</code> is defined. This is very important for multi-project builds. Task dependencies are
            discussed in more detail in <a class="xref" href="#sec:adding_dependencies_to_tasks">Section&nbsp;15.4, &ldquo;Adding dependencies to a task&rdquo;</a>.
        </p><p>Please notice that you can't use shortcut notation (see <a class="xref" href="#sec:shortcut_notations">Section&nbsp;6.8, &ldquo;Shortcut notations&rdquo;</a>)
        when referring to a task that is not yet defined.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1029B"></a>6.6.&nbsp;Dynamic tasks</h2></div></div></div><p>The power of Groovy can be used for more than defining what a task does. For example, you can also use it
            to dynamically create tasks.
        </p><div class="example"><a name="dynamic"></a><p class="title"><b>Example&nbsp;6.8.&nbsp;Dynamic creation of a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">4.times { counter -&gt;
    task <span class="hl-string">"task$counter"</span> &lt;&lt; {
        println <span class="hl-string">"I'm task number $counter"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q task1</code></strong></p><pre class="screen">&gt; gradle -q task1
I'm task number 1</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N102B0"></a>6.7.&nbsp;Manipulating existing tasks</h2></div></div></div><p>Once tasks are created they can be accessed via an <span class="emphasis"><em>API</em></span>. This is different to Ant. For
            example you can create additional dependencies.
        </p><div class="example"><a name="dynamicDepends"></a><p class="title"><b>Example&nbsp;6.9.&nbsp;Accessing a task via API - adding a dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">4.times { counter -&gt;
    task <span class="hl-string">"task$counter"</span> &lt;&lt; {
        println <span class="hl-string">"I'm task number $counter"</span>
    }
}
task0.dependsOn task2, task3</pre><p>Output of <strong class="userinput"><code>gradle -q task0</code></strong></p><pre class="screen">&gt; gradle -q task0
I'm task number 2
I'm task number 3
I'm task number 0</pre></div></div><br class="example-break"><p>Or you can add behavior to an existing task.</p><div class="example"><a name="helloEnhanced"></a><p class="title"><b>Example&nbsp;6.10.&nbsp;Accessing a task via API - adding behaviour</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello Earth'</span>
}
hello.doFirst {
    println <span class="hl-string">'Hello Venus'</span>
}
hello.doLast {
    println <span class="hl-string">'Hello Mars'</span>
}
hello &lt;&lt; {
    println <span class="hl-string">'Hello Jupiter'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
Hello Venus
Hello Earth
Hello Mars
Hello Jupiter</pre></div></div><br class="example-break"><p>The calls <code class="literal">doFirst</code> and <code class="literal">doLast</code> can be executed multiple times.
            They add an action to the beginning or the end of the task's actions list. When the task executes, the
            actions in the action list are executed in order. The <code class="literal">&lt;&lt;</code> operator is simply an
            alias for <code class="literal">doLast</code>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:shortcut_notations"></a>6.8.&nbsp;Shortcut notations</h2></div></div></div><p>As you might have noticed in the previous examples, there is a convenient notation for accessing an
            <span class="emphasis"><em>existing</em></span> task. Each task is available as a property of the build script:
        </p><div class="example"><a name="helloWithShortCut"></a><p class="title"><b>Example&nbsp;6.11.&nbsp;Accessing task as a property of the build script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello world!'</span>
}
hello.doLast {
    println <span class="hl-string">"Greetings from the $hello.name task."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
Hello world!
Greetings from the hello task.</pre></div></div><br class="example-break"><p>This enables very readable code, especially when using the out of the box tasks provided by the plugins
            (e.g. <code class="literal">compile</code>).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:extra_task_properties"></a>6.9.&nbsp;Extra task properties</h2></div></div></div><p>You can add your own properties to a task. To add a property named <code class="literal">myProperty</code>,
            set <code class="literal">ext.myProperty</code> to an initial value. From that point on, the property can be read
            and set like a predefined task property.
        </p><div class="example"><a name="extraTaskProperties"></a><p class="title"><b>Example&nbsp;6.12.&nbsp;Adding extra properties to a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task myTask {
    ext.myProperty = <span class="hl-string">"myValue"</span>
}

task printTaskProperties &lt;&lt; {
    println myTask.myProperty
}</pre><p>Output of <strong class="userinput"><code>gradle -q printTaskProperties</code></strong></p><pre class="screen">&gt; gradle -q printTaskProperties
myValue</pre></div></div><br class="example-break">
        Extra properties aren't limited to tasks. You can read more about them in <a class="xref" href="#sec:extra_properties">Section&nbsp;13.4.2, &ldquo;Extra properties&rdquo;</a>.
    </div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10326"></a>6.10.&nbsp;Using Ant Tasks</h2></div></div></div><p>Ant tasks are first-class citizens in Gradle. Gradle provides excellent integration for Ant tasks by simply
            relying on Groovy. Groovy is shipped with the fantastic <code class="literal">AntBuilder</code>. Using Ant tasks
            from Gradle is as convenient and more powerful than using Ant tasks from a <code class="filename">build.xml</code>
            file. From the example below, you can learn how to execute ant tasks and how to access ant properties:
        </p><div class="example"><a name="antLoadfile"></a><p class="title"><b>Example&nbsp;6.13.&nbsp;Using AntBuilder to execute ant.loadfile target</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task loadfile &lt;&lt; {
    def files = file(<span class="hl-string">'../antLoadfileResources'</span>).listFiles().sort()
    files.each { File file -&gt;
        <span class="hl-keyword">if</span> (file.isFile()) {
            ant.loadfile(srcFile: file, property: file.name)
            println <span class="hl-string">" *** $file.name ***"</span>
            println <span class="hl-string">"${ant.properties[file.name]}"</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q loadfile</code></strong></p><pre class="screen">&gt; gradle -q loadfile
*** agile.manifesto.txt ***
Individuals and interactions over processes and tools
Working software over comprehensive documentation
Customer collaboration  over contract negotiation
Responding to change over following a plan
 *** gradle.manifesto.txt ***
Make the impossible possible, make the possible easy and make the easy elegant.
(inspired by Moshe Feldenkrais)</pre></div></div><br class="example-break"><p>There is lots more you can do with Ant in your build scripts. You can find out more in <a class="xref" href="#ant">Chapter&nbsp;17, <i>Using Ant from Gradle</i></a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10346"></a>6.11.&nbsp;Using methods</h2></div></div></div><p>Gradle scales in how you can organize your build logic. The first level of organizing your build logic for
            the example above, is extracting a method.
        </p><div class="example"><a name="antLoadfileWithMethod"></a><p class="title"><b>Example&nbsp;6.14.&nbsp;Using methods to organize your build logic</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task checksum &lt;&lt; {
    fileList(<span class="hl-string">'../antLoadfileResources'</span>).each {File file -&gt;
        ant.checksum(file: file, property: <span class="hl-string">"cs_$file.name"</span>)
        println <span class="hl-string">"$file.name Checksum: ${ant.properties["</span>cs_$file.name<span class="hl-string">"]}"</span>
    }
}

task loadfile &lt;&lt; {
    fileList(<span class="hl-string">'../antLoadfileResources'</span>).each {File file -&gt;
        ant.loadfile(srcFile: file, property: file.name)
        println <span class="hl-string">"I'm fond of $file.name"</span>
    }
}

File[] fileList(String dir) {
    file(dir).listFiles({file -&gt; file.isFile() } as FileFilter).sort()
}</pre><p>Output of <strong class="userinput"><code>gradle -q loadfile</code></strong></p><pre class="screen">&gt; gradle -q loadfile
I'm fond of agile.manifesto.txt
I'm fond of gradle.manifesto.txt</pre></div></div><br class="example-break"><p>Later you will see that such methods can be shared among subprojects in multi-project builds. If your
            build logic becomes more complex, Gradle offers you other very convenient ways to organize it. We have
            devoted a whole chapter to this. See <a class="xref" href="#organizing_build_logic">Chapter&nbsp;59, <i>Organizing Build Logic</i></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:default_tasks"></a>6.12.&nbsp;Default tasks</h2></div></div></div><p>Gradle allows you to define one or more default tasks for your build.
        </p><div class="example"><a name="defaultTasks"></a><p class="title"><b>Example&nbsp;6.15.&nbsp;Defining a default tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">defaultTasks <span class="hl-string">'clean'</span>, <span class="hl-string">'run'</span>

task clean &lt;&lt; {
    println <span class="hl-string">'Default Cleaning!'</span>
}

task run &lt;&lt; {
    println <span class="hl-string">'Default Running!'</span>
}

task other &lt;&lt; {
    println <span class="hl-string">"I'm not a default task!"</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q</code></strong></p><pre class="screen">&gt; gradle -q
Default Cleaning!
Default Running!</pre></div></div><br class="example-break"><p>This is equivalent to running <strong class="userinput"><code>gradle clean run</code></strong>. In a multi-project build every
            subproject can have its own specific default tasks. If a subproject does not specify default tasks, the
            default tasks of the parent project are used (if defined).
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="configure-by-dag"></a>6.13.&nbsp;Configure by DAG</h2></div></div></div><p>As we later describe in full detail (see <a class="xref" href="#build_lifecycle">Chapter&nbsp;55, <i>The Build Lifecycle</i></a>), Gradle has a
            configuration phase and an execution phase. After the configuration phase, Gradle knows all tasks that should
            be executed. Gradle offers you a hook to make use of this information. A use-case for this would be to check
            if the release task is among the tasks to be executed. Depending on this, you can assign different values
            to some variables.
        </p><p>In the following example, execution of the <code class="literal">distribution</code> and <code class="literal">release</code> tasks results in different value of the <code class="literal">version</code> variable.</p><div class="example"><a name="configByDagNoRelease"></a><p class="title"><b>Example&nbsp;6.16.&nbsp;Different outcomes of build depending on chosen tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task distribution &lt;&lt; {
    println <span class="hl-string">"We build the zip with version=$version"</span>
}

task release(dependsOn: <span class="hl-string">'distribution'</span>) &lt;&lt; {
    println <span class="hl-string">'We release now'</span>
}

gradle.taskGraph.whenReady {taskGraph -&gt;
    <span class="hl-keyword">if</span> (taskGraph.hasTask(release)) {
        version = <span class="hl-string">'1.0'</span>
    } <span class="hl-keyword">else</span> {
        version = <span class="hl-string">'1.0-SNAPSHOT'</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q distribution</code></strong></p><pre class="screen">&gt; gradle -q distribution
We build the zip with version=1.0-SNAPSHOT</pre><p>Output of <strong class="userinput"><code>gradle -q release</code></strong></p><pre class="screen">&gt; gradle -q release
We build the zip with version=1.0
We release now</pre></div></div><br class="example-break"><p>The important thing is that <code class="literal">whenReady</code> affects the release task <span class="emphasis"><em>before</em></span> the release task is executed.
        This works even when the release task is not the <span class="emphasis"><em>primary</em></span> task (i.e., the task passed to the <span class="command"><strong>gradle</strong></span> command).
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N103B3"></a>6.14.&nbsp;Where to next?</h2></div></div></div><p>
            In this chapter, we have had a first look at tasks. But this is not the end of the story for tasks. If you want to jump into more of the details,
            have a look at <a class="xref" href="#more_about_tasks">Chapter&nbsp;15, <i>More about Tasks</i></a>.
        </p><p>
            Otherwise, continue on to the tutorials in <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a> and <a class="xref" href="#artifact_dependencies_tutorial">Chapter&nbsp;8, <i>Dependency Management Basics</i></a>.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N101CA" name="ftn.N101CA" class="para">2</a>] </sup>There are command line switches to change this behavior. See <a class="xref" href="#gradle_command_line">Appendix&nbsp;D, <i>Gradle Command Line</i></a>)</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorial_java_projects"></a>Chapter&nbsp;7.&nbsp;Java Quickstart</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N103C9"></a>7.1.&nbsp;The Java plugin</h2></div></div></div><p>As we have seen, Gradle is a general-purpose build tool. It can build pretty much anything you care to
            implement in your build script. Out-of-the-box, however, it doesn't build anything unless you add code to
            your build script to do so.</p><p>Most Java projects are pretty similar as far as the basics go: you need to compile your Java
            source files, run some unit tests, and create a JAR file containing your classes. It would be nice if you
            didn't have to code all this up for every project. Luckily, you don't have to.
            Gradle solves this problem through the use of <em class="firstterm">plugins</em>. A plugin is an extension to Gradle
            which configures your project in some way, typically by adding some pre-configured tasks which together do
            something useful. Gradle ships with a number of plugins, and you can easily write your own and share them with
            others. One such plugin is the <em class="firstterm">Java plugin</em>. This plugin adds some tasks to your
            project which will compile and unit test your Java source code, and bundle it into a JAR file.
        </p><p>The Java plugin is convention based. This means that the plugin defines default values for many aspects of the
            project, such as where the Java source files are located. If you follow the convention in your project, you
            generally don't need to do much in your build script to get a useful build. Gradle allows you to customize your
            project if you don't want to or cannot follow the convention in some way. In fact, because support for Java
            projects is implemented as a plugin, you don't have to use the plugin at all to build a Java project, if
            you don't want to.
        </p><p>We have in-depth coverage with many examples about the Java plugin, dependency management and multi-project
            builds in later chapters. In this chapter we want to give you an initial idea of how to use the Java plugin to
            build a Java project.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N103DA"></a>7.2.&nbsp;A basic Java project</h2></div></div></div><p>Let's look at a simple example. To use the Java plugin, add the following to your build file:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.1.&nbsp;Using the Java plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span></pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/java/quickstart</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>This is all you need to define a Java project. This will apply the Java plugin to your project, which adds
            a number of tasks to your project.</p><div class="tip"><h3 class="title">What tasks are available?</h3><p>You can use <strong class="userinput"><code>gradle tasks</code></strong> to list the tasks of a project. This will let you see
            the tasks that the Java plugin has added to your project.
        </p></div><p>Gradle expects to find your production source code under <code class="filename">src/main/java</code> and your test
            source code under <code class="filename">src/test/java</code>. In addition, any files under
            <code class="filename">src/main/resources</code> will be included in the JAR file as resources, and any files under
            <code class="filename">src/test/resources</code> will be included in the classpath used to run the tests. All output
            files are created under the <code class="filename">build</code> directory, with the JAR file ending up in the
            <code class="filename">build/libs</code> directory.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10410"></a>7.2.1.&nbsp;Building the project</h3></div></div></div><p>The Java plugin adds quite a few tasks to your project. However, there are only a handful of tasks
                that you will need to use to build the project. The most commonly used task is the <code class="literal">build</code> task,
                which does a full build of the project. When you run <strong class="userinput"><code>gradle build</code></strong>, Gradle will
                compile and test your code, and create a JAR file containing your main classes and resources:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.2.&nbsp;Building a Java project</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle build</code></strong></p><pre class="screen">&gt; gradle build
:compileJava
:processResources
:classes
:jar
:assemble
:compileTestJava
:processTestResources
:testClasses
:test
:check
:build

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>Some other useful tasks are:</p><div class="variablelist"><dl><dt><span class="term">clean</span></dt><dd><p>Deletes the <code class="filename">build</code> directory, removing all built files.</p></dd><dt><span class="term">assemble</span></dt><dd><p>Compiles and jars your code, but does not run the unit tests. Other plugins add more
                            artifacts to this task. For example, if you use the War plugin, this task will also build
                            the WAR file for your project.
                        </p></dd><dt><span class="term">check</span></dt><dd><p>Compiles and tests your code. Other plugins add more checks to this task. For example, if
                            you use the <code class="literal">checkstyle</code> plugin, this task will also run Checkstyle against your source
                            code.
                        </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10440"></a>7.2.2.&nbsp;External dependencies</h3></div></div></div><p>Usually, a Java project will have some dependencies on external JAR files. To reference these JAR
                files in the project, you need to tell Gradle where to find them. In Gradle, artifacts such as JAR
                files, are located in a <em class="firstterm">repository</em>. A repository can be used for fetching the
                dependencies of a project, or for publishing the artifacts of a project, or both. For this example,
                we will use the public Maven repository:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.3.&nbsp;Adding Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}</pre></div></div><br class="example-break"><p>Let's add some dependencies. Here, we will declare that our production classes have a compile-time
                dependency on commons collections, and that our test classes have a compile-time dependency on junit:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.4.&nbsp;Adding dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile group: <span class="hl-string">'commons-collections'</span>, name: <span class="hl-string">'commons-collections'</span>, version: <span class="hl-string">'3.2'</span>
    testCompile group: <span class="hl-string">'junit'</span>, name: <span class="hl-string">'junit'</span>, version: <span class="hl-string">'4.+'</span>
}</pre></div></div><br class="example-break"><p>You can find out more in <a class="xref" href="#artifact_dependencies_tutorial">Chapter&nbsp;8, <i>Dependency Management Basics</i></a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10463"></a>7.2.3.&nbsp;customizing the project</h3></div></div></div><p>The Java plugin adds a number of properties to your project. These properties have default values
                which are usually sufficient to get started. It's easy to change these values if they don't suit. Let's
                look at this for our sample. Here we will specify the version number for our Java project, along
                with the Java version our source is written in. We also add some attributes to the JAR manifest.
            </p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.5.&nbsp;Customization of MANIFEST.MF</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceCompatibility = <span class="hl-number">1.5</span>
version = <span class="hl-string">'1.0'</span>
jar {
    manifest {
        attributes <span class="hl-string">'Implementation-Title'</span>: <span class="hl-string">'Gradle Quickstart'</span>, <span class="hl-string">'Implementation-Version'</span>: version
    }
}</pre></div></div><br class="example-break"><div class="tip"><h3 class="title">What properties are available?</h3><p>You can use <strong class="userinput"><code>gradle properties</code></strong> to list the properties of a project. This will allow
                you to see the properties added by the Java plugin, and their default values.</p></div><p>The tasks which the Java plugin adds are regular tasks, exactly the same as if they were declared in
                the build file. This means you can use any of the mechanisms shown in earlier chapters to customize
                these tasks. For example, you can set the properties of a task, add behaviour to a task, change the
                dependencies of a task, or replace a task entirely. In our sample, we will configure the
                <code class="literal">test</code> task, which is of type <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a>, to
                add a system property when the tests are executed: </p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.6.&nbsp;Adding a test system property</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">test {
    systemProperties <span class="hl-string">'property'</span>: <span class="hl-string">'value'</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1048E"></a>7.2.4.&nbsp;Publishing the JAR file</h3></div></div></div><p>Usually the JAR file needs to be published somewhere. To do this, you need to tell Gradle where to
                publish the JAR file. In Gradle, artifacts such as JAR files are published to repositories. In our
                sample, we will publish to a local directory. You can also publish to a remote location, or multiple
                locations.
            </p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.7.&nbsp;Publishing the JAR file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">uploadArchives {
    repositories {
       flatDir {
           dirs <span class="hl-string">'repos'</span>
       }
    }
}</pre></div></div><br class="example-break"><p>To publish the JAR file, run <strong class="userinput"><code>gradle uploadArchives</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N104A2"></a>7.2.5.&nbsp;Creating an Eclipse project</h3></div></div></div><p>To import your project into Eclipse, you need to add another plugin to your build file:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.8.&nbsp;Eclipse plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'eclipse'</span></pre></div></div><br class="example-break"><p>Now execute <strong class="userinput"><code>gradle eclipse</code></strong> command to generate Eclipse project files. More on Eclipse
                task can be found in <a class="xref" href="#eclipse_plugin">Chapter&nbsp;38, <i>The Eclipse Plugin</i></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N104B9"></a>7.2.6.&nbsp;Summary</h3></div></div></div><p>Here's the complete build file for our sample:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;7.9.&nbsp;Java example - complete build file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>
apply plugin: <span class="hl-string">'eclipse'</span>

sourceCompatibility = <span class="hl-number">1.5</span>
version = <span class="hl-string">'1.0'</span>
jar {
    manifest {
        attributes <span class="hl-string">'Implementation-Title'</span>: <span class="hl-string">'Gradle Quickstart'</span>, <span class="hl-string">'Implementation-Version'</span>: version
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile group: <span class="hl-string">'commons-collections'</span>, name: <span class="hl-string">'commons-collections'</span>, version: <span class="hl-string">'3.2'</span>
    testCompile group: <span class="hl-string">'junit'</span>, name: <span class="hl-string">'junit'</span>, version: <span class="hl-string">'4.+'</span>
}

test {
    systemProperties <span class="hl-string">'property'</span>: <span class="hl-string">'value'</span>
}

uploadArchives {
    repositories {
       flatDir {
           dirs <span class="hl-string">'repos'</span>
       }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:examples"></a>7.3.&nbsp;Multi-project Java build</h2></div></div></div><p>Now let's look at a typical multi-project build. Below is the layout for the project:
        </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;7.10.&nbsp;Multi-project build - hierarchical layout</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">multiproject/
  api/
  services/webservice/
  shared/</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/java/multiproject</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>Here we have three projects. Project <code class="literal">api</code> produces a JAR file which is shipped to the
            client to provide them a Java client for your XML webservice. Project <code class="literal">webservice</code> is a
            webapp which returns XML. Project <code class="literal">shared</code> contains code used both by <code class="literal">api</code>
            and <code class="literal">webservice</code>.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N104F0"></a>7.3.1.&nbsp;Defining a multi-project build</h3></div></div></div><p>To define a multi-project build, you need to create a <em class="firstterm">settings file</em>. The settings
                file lives in the root directory of the source tree, and specifies which projects to include in the
                build. It must be called <code class="filename">settings.gradle</code>. For this example, we are using a simple
                hierarchical layout. Here is the corresponding settings file:
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;7.11.&nbsp;Multi-project build - settings.gradle file</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">"shared"</span>, <span class="hl-string">"api"</span>, <span class="hl-string">"services:webservice"</span>, <span class="hl-string">"services:shared"</span></pre></div></div><br class="example-break"><p>You can find out more about the settings file in <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1050A"></a>7.3.2.&nbsp;Common configuration</h3></div></div></div><p>For most multi-project builds, there is some configuration which is common to all projects.
                In our sample, we will define this common configuration in the root project, using a technique called
                <em class="firstterm">configuration injection</em>. Here, the root project is like a container and the
                <code class="literal">subprojects</code> method iterates over the elements of this container - the projects in
                this instance - and injects the specified configuration. This way we can easily define the manifest
                content for all archives, and some common dependencies:
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;7.12.&nbsp;Multi-project build - common configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    apply plugin: <span class="hl-string">'java'</span>
    apply plugin: <span class="hl-string">'eclipse-wtp'</span>

    repositories {
       mavenCentral()
    }

    dependencies {
        testCompile <span class="hl-string">'junit:junit:4.11'</span>
    }

    version = <span class="hl-string">'1.0'</span>

    jar {
        manifest.attributes provider: <span class="hl-string">'gradle'</span>
    }
}</pre></div></div><br class="example-break"><p>Notice that our sample applies the Java plugin to each subproject. This means the tasks and
                configuration properties we have seen in the previous section are available in each subproject.
                So, you can compile, test, and JAR all the projects by running <strong class="userinput"><code>gradle build</code></strong> from
                the root project directory.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10524"></a>7.3.3.&nbsp;Dependencies between projects</h3></div></div></div><p>You can add dependencies between projects in the same build, so that, for example, the JAR file of one
                project is used to compile another project. In the <code class="literal">api</code> build file we will add a dependency
                on the JAR produced by the <code class="literal">shared</code> project. Due to this dependency, Gradle will
                ensure that project <code class="literal">shared</code> always gets built before project <code class="literal">api</code>.
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;7.13.&nbsp;Multi-project build - dependencies between projects</b></p><div class="example-contents"><p><code class="filename">api/build.gradle</code></p><pre class="programlisting">dependencies {
    compile project(<span class="hl-string">':shared'</span>)
}</pre></div></div><br class="example-break">
            See <a class="xref" href="#disable_dependency_projects">Section&nbsp;56.7.1, &ldquo;Disabling the build of dependency projects&rdquo;</a> for how to disable this functionality.
        </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10543"></a>7.3.4.&nbsp;Creating a distribution</h3></div></div></div><p>
                We also add a distribution, that gets shipped to the client:
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;7.14.&nbsp;Multi-project build - distribution file</b></p><div class="example-contents"><p><code class="filename">api/build.gradle</code></p><pre class="programlisting">task dist(type: Zip) {
    dependsOn spiJar
    from <span class="hl-string">'src/dist'</span>
    into(<span class="hl-string">'libs'</span>) {
        from spiJar.archivePath
        from configurations.runtime
    }
}

artifacts {
   archives dist
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10552"></a>7.4.&nbsp;Where to next?</h2></div></div></div><p>
            In this chapter, you have seen how to do some of the things you commonly need to build a Java based
            project. This chapter is not exhaustive, and there are many other things you can do with Java projects in
            Gradle.
            You can find out more about the Java plugin in <a class="xref" href="#java_plugin">Chapter&nbsp;23, <i>The Java Plugin</i></a>, and you can find more sample
            Java projects in the <code class="filename">samples/java</code> directory in the Gradle distribution.
        </p><p>
            Otherwise, continue on to <a class="xref" href="#artifact_dependencies_tutorial">Chapter&nbsp;8, <i>Dependency Management Basics</i></a>.
        </p><p>
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="artifact_dependencies_tutorial"></a>Chapter&nbsp;8.&nbsp;Dependency Management Basics</h1></div></div></div><p>
        This chapter introduces some of the basics of dependency management in Gradle.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1056B"></a>8.1.&nbsp;What is dependency management?</h2></div></div></div><p>
            Very roughly, dependency management is made up of two pieces. Firstly, Gradle needs to
            know about the things that your project needs to build or run, in order to find them. We call these incoming
            files the <em class="firstterm">dependencies</em> of the project.
            Secondly, Gradle needs to build and upload the things that your project produces. We call these outgoing files
            the <em class="firstterm">publications</em> of the project. Let's look at these two pieces in more detail:
        </p><p>Most projects are not completely self-contained. They need files built by other projects in order to
            be compiled or tested and so on. For example, in order to use Hibernate in my project, I need to include some
            Hibernate jars in the classpath when I compile my source. To run my tests, I might also need to include some
            additional jars in the test classpath, such as a particular JDBC driver or the Ehcache jars.
        </p><p>
            These incoming files form the dependencies of the project.
            Gradle allows you to tell it what the dependencies of your project are, so that it can take care of
            finding these dependencies, and making them available in your build.
            The dependencies might need to be downloaded from a remote Maven or Ivy repository, or located in a local directory, or
            may need to be built by another project in the same multi-project build.
            We call this process <em class="firstterm">dependency resolution</em>.
        </p><p>
            Often, the dependencies of a project will themselves have dependencies. For example, Hibernate core requires
            several other libraries to be present on the classpath with it runs. So, when Gradle runs the tests for your
            project, it also needs to find these dependencies and make them available. We call these <em class="firstterm">transitive dependencies</em>.
        </p><p>
            The main purpose of most projects is to build some files that are to be used outside the project.
            For example, if your project produces a java library, you need to build a jar, and maybe a source jar and
            some documentation, and publish them somewhere.
        </p><p>These outgoing files form the publications of the project. Gradle also takes care of this important work for you. You declare the
            publications of your project, and Gradle take care of building them and publishing them somewhere.
            Exactly what "publishing" means depends on what you want to do. You might want to copy the files to a local directory,
            or upload them to a remote Maven or Ivy repository. Or you might use the files in another project in the same
            multi-project build.
            We call this process <em class="firstterm">publication</em>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10589"></a>8.2.&nbsp;Declaring your dependencies</h2></div></div></div><p>
            Let's look at some dependency declarations. Here's a basic build script:
        </p><div class="example"><a name="basicDependencyDeclarations"></a><p class="title"><b>Example&nbsp;8.1.&nbsp;Declaring dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>

repositories {
    mavenCentral()
}

dependencies {
    compile group: <span class="hl-string">'org.hibernate'</span>, name: <span class="hl-string">'hibernate-core'</span>, version: <span class="hl-string">'3.6.7.Final'</span>
    testCompile group: <span class="hl-string">'junit'</span>, name: <span class="hl-string">'junit'</span>, version: <span class="hl-string">'4.+'</span>
}</pre></div></div><br class="example-break"><p>What's going on here? This build script says a few things about the project.
            Firstly, it states that Hibernate core 3.6.7.Final is required
            to compile the project's production source. By implication, Hibernate core and its dependencies are also required
            at runtime.
            The build script also states that any junit &gt;= 4.0 is required to compile the project's tests.
            It also tells Gradle to look in the Maven central repository for any dependencies that are required.
            The following sections go into the details.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="configurations"></a>8.3.&nbsp;Dependency configurations</h2></div></div></div><p>In Gradle dependencies are grouped into <em class="firstterm">configurations</em>. A configuration is simply a named set of dependencies.
            We will refer to them as <em class="firstterm">dependency configurations</em>. You can use them to declare the external dependencies of your project.
            As we will see later, they are also used to declare the publications of your project.</p><p>
            The Java plugin defines a number of standard configurations. These configurations represent the classpaths that the
            Java plugin uses. Some are listed below, and you can find more details in <a class="xref" href="#tab:configurations" title="Table&nbsp;23.5.&nbsp;Java plugin - dependency configurations">Table&nbsp;23.5, &ldquo;Java plugin - dependency configurations&rdquo;</a>.
        </p><div class="variablelist"><dl><dt><span class="term">compile</span></dt><dd><p>The dependencies required to compile the production source of the project.</p></dd><dt><span class="term">runtime</span></dt><dd><p>
                        The dependencies required by the production classes at runtime. By default, also includes the
                        compile time dependencies.
                    </p></dd><dt><span class="term">testCompile</span></dt><dd><p>
                        The dependencies required to compile the test source of the project. By default, also includes
                        the compiled production classes and the compile time dependencies.
                    </p></dd><dt><span class="term">testRuntime</span></dt><dd><p>
                        The dependencies required to run the tests. By default, also includes the compile, runtime and test compile
                        dependencies.
                    </p></dd></dl></div><p>
            Various plugins add further standard configurations. You can also define your own custom configurations to use in your
            build. Please see <a class="xref" href="#sub:configurations">Section&nbsp;50.3, &ldquo;Dependency configurations&rdquo;</a> for the details of defining and customizing dependency configurations.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N105C9"></a>8.4.&nbsp;External dependencies</h2></div></div></div><p>There are various types of dependencies that you can declare. One such type is an <em class="firstterm">external dependency</em>.
            This a dependency on some files built outside the current build, and stored in a repository of some kind, such as Maven central, or
            a corporate Maven or Ivy repository, or a directory in the local file system.
        </p><p>
            To define an external dependency, you add it to a dependency configuration:
        </p><div class="example"><a name="externalDependencies"></a><p class="title"><b>Example&nbsp;8.2.&nbsp;Definition of an external dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile group: <span class="hl-string">'org.hibernate'</span>, name: <span class="hl-string">'hibernate-core'</span>, version: <span class="hl-string">'3.6.7.Final'</span>
}</pre></div></div><br class="example-break"><p>
            An external dependency is identified using <code class="literal">group</code>, <code class="literal">name</code> and <code class="literal">version</code> attributes.
            Depending on which kind of repository you are using, <code class="literal">group</code> and <code class="literal">version</code> may be optional.
        </p><p>There is a shortcut form for declaring external dependencies, which uses a string of the form <code class="literal">"<em class="replaceable"><code>group</code></em>:<em class="replaceable"><code>name</code></em>:<em class="replaceable"><code>version</code></em>"</code>.
        </p><div class="example"><a name="externalDependencies"></a><p class="title"><b>Example&nbsp;8.3.&nbsp;Shortcut definition of an external dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile <span class="hl-string">'org.hibernate:hibernate-core:3.6.7.Final'</span>
}</pre></div></div><br class="example-break"><p>To find out more about defining and working with dependencies, have a look at <a class="xref" href="#sec:how_to_declare_your_dependencies">Section&nbsp;50.4, &ldquo;How to declare your dependencies&rdquo;</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1060B"></a>8.5.&nbsp;Repositories</h2></div></div></div><p>
            How does Gradle find the files for external dependencies? Gradle looks for them in a <em class="firstterm">repository</em>.
            A repository is really just a collection of files, organized by <code class="literal">group</code>, <code class="literal">name</code> and
            <code class="literal">version</code>. Gradle understands several different repository formats, such as Maven and Ivy, and several
            different ways of accessing the repository, such as using the local file system or HTTP.
        </p><p>By default, Gradle does not define any repositories. You need to define at least one before you can use external dependencies.
            One option is use the Maven central repository:</p><div class="example"><a name="defineMavenCentral"></a><p class="title"><b>Example&nbsp;8.4.&nbsp;Usage of Maven central repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}</pre></div></div><br class="example-break"><p>Or a remote Maven repository:</p><div class="example"><a name="defineRemoteMavenRepo"></a><p class="title"><b>Example&nbsp;8.5.&nbsp;Usage of a remote Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    maven {
        url <span class="hl-string">"http://repo.mycompany.com/maven2"</span>
    }
}</pre></div></div><br class="example-break"><p>Or a remote Ivy repository:</p><div class="example"><a name="defineRemoteIvyRepo"></a><p class="title"><b>Example&nbsp;8.6.&nbsp;Usage of a remote Ivy directory</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
    }
}</pre></div></div><br class="example-break"><p>You can also have repositories on the local file system. This works for both Maven and Ivy repositories.</p><div class="example"><a name="defineRemoteIvyRepo"></a><p class="title"><b>Example&nbsp;8.7.&nbsp;Usage of a local Ivy directory</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        <span class="hl-comment">// URL can refer to a local directory</span>
        url <span class="hl-string">"../local-repo"</span>
    }
}</pre></div></div><br class="example-break"><p>A project can have multiple repositories. Gradle will look for a dependency in each repository in the order they are specified, stopping
            at the first repository that contains the requested module.
        </p><p>To find out more about defining and working with repositories, have a look at <a class="xref" href="#sec:repositories">Section&nbsp;50.6, &ldquo;Repositories&rdquo;</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10653"></a>8.6.&nbsp;Publishing artifacts</h2></div></div></div><p>
            Dependency configurations are also used to publish files.<sup>[<a href="#ftn.N10658" name="N10658" class="footnote">3</a>]</sup>
            We call these files <em class="firstterm">publication artifacts</em>, or usually just <em class="firstterm">artifacts</em>.
        </p><p>
            The plugins do a pretty good job of defining the artifacts of a project, so you usually don't need to do anything special to tell Gradle
            what needs to be published. However, you do need to tell Gradle where to publish the artifacts. You do this by attaching repositories
            to the <code class="literal">uploadArchives</code> task. Here's an example of publishing to a remote Ivy repository:
        </p><div class="example"><a name="publishIvyRepository"></a><p class="title"><b>Example&nbsp;8.8.&nbsp;Publishing to an Ivy repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">uploadArchives {
    repositories {
        ivy {
            credentials {
                username <span class="hl-string">"username"</span>
                password <span class="hl-string">"pw"</span>
            }
            url <span class="hl-string">"http://repo.mycompany.com"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
            Now, when you run <strong class="userinput"><code>gradle uploadArchives</code></strong>, Gradle will build and upload your Jar.
            Gradle will also generate and upload an <code class="filename">ivy.xml</code> as well.
        </p><p>
            You can also publish to Maven repositories. The syntax is slightly different.<sup>[<a href="#ftn.N1067B" name="N1067B" class="footnote">4</a>]</sup>
            Note that you also need to apply the Maven plugin in order to publish to a Maven repository. In this instance, Gradle
            will generate and upload a <code class="filename">pom.xml</code>.
        </p><div class="example"><a name="publishMavenRepository"></a><p class="title"><b>Example&nbsp;8.9.&nbsp;Publishing to a Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'maven'</span>

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>To find out more about publication, have a look at <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10691"></a>8.7.&nbsp;Where to next?</h2></div></div></div><p>
            For all the details of dependency resolution, see <a class="xref" href="#dependency_management">Chapter&nbsp;50, <i>Dependency Management</i></a>, and for artifact publication see <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>.
        </p><p>
            If you are interested in the DSL elements mentioned here, have a look at <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:configurations(groovy.lang.Closure)" target="_top"><code class="classname">Project.configurations{}</code></a>,
            <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:repositories(groovy.lang.Closure)" target="_top"><code class="classname">Project.repositories{}</code></a> and <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:dependencies(groovy.lang.Closure)" target="_top"><code class="classname">Project.dependencies{}</code></a>.
        </p><p>Otherwise, continue on to some of the other <a class="link" href="#tutorials">tutorials</a>.</p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10658" name="ftn.N10658" class="para">3</a>] </sup>We think this is confusing, and we are gradually teasing apart the two concepts in the Gradle DSL.</p></div><div class="footnote"><p><sup>[<a href="#N1067B" name="ftn.N1067B" class="para">4</a>] </sup>We are working to make the syntax consistent for resolving from and publishing to Maven repositories.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorial_groovy_projects"></a>Chapter&nbsp;9.&nbsp;Groovy Quickstart</h1></div></div></div><p>To build a Groovy project, you use the <em class="firstterm">Groovy plugin</em>. This plugin extends the Java
        plugin to add Groovy compilation capabilities to your project. Your project can contain Groovy source code,
        Java source code, or a mix of the two. In every other respect, a Groovy project is identical to a Java project,
        which we have already seen in <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N106C1"></a>9.1.&nbsp;A basic Groovy project</h2></div></div></div><p>Let's look at an example. To use the Groovy plugin, add the following to your build file:</p><div class="example"><a name="groovyQuickstart"></a><p class="title"><b>Example&nbsp;9.1.&nbsp;Groovy plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'groovy'</span></pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/groovy/quickstart</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>This will also apply the Java plugin to the project, if it has not already been applied. The Groovy plugin
            extends the <code class="literal">compile</code> task to look for source files in directory
            <code class="filename">src/main/groovy</code>, and the <code class="literal">compileTest</code> task to look for test source
            files in directory <code class="filename">src/test/groovy</code>. The compile tasks use joint compilation for these
            directories, which means they can contain a mixture of java and groovy source files.
        </p><p>To use the groovy compilation tasks, you must also declare the Groovy version to use and where to find the
            Groovy libraries. You do this by adding a dependency to the <code class="literal">groovy</code> configuration.
            The <code class="literal">compile</code> configuration inherits this dependency, so the groovy libraries will
            be included in classpath when compiling Groovy and Java source.  For our sample, we will use Groovy 2.2.0
            from the public Maven repository:</p><div class="example"><a name="groovyQuickstart"></a><p class="title"><b>Example&nbsp;9.2.&nbsp;Dependency on Groovy 2.2.0</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    compile <span class="hl-string">'org.codehaus.groovy:groovy-all:2.3.3'</span>
}</pre></div></div><br class="example-break"><p>Here is our complete build file:</p><div class="example"><a name="groovyQuickstart"></a><p class="title"><b>Example&nbsp;9.3.&nbsp;Groovy example - complete build file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'eclipse'</span>
apply plugin: <span class="hl-string">'groovy'</span>

repositories {
    mavenCentral()
}

dependencies {
    compile <span class="hl-string">'org.codehaus.groovy:groovy-all:2.3.3'</span>
    testCompile <span class="hl-string">'junit:junit:4.11'</span>
}</pre></div></div><br class="example-break"><p>Running <strong class="userinput"><code>gradle build</code></strong> will compile, test and JAR your project.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1070A"></a>9.2.&nbsp;Summary</h2></div></div></div><p>This chapter describes a very simple Groovy project. Usually, a real project will require more than this.
            Because a Groovy project <span class="emphasis"><em>is</em></span> a Java project, whatever you can do with a Java project,
            you can also do with a Groovy project.
        </p><p>
            You can find out more about the Groovy plugin in <a class="xref" href="#groovy_plugin">Chapter&nbsp;24, <i>The Groovy Plugin</i></a>, and you can find more
            sample Groovy projects in the <code class="filename">samples/groovy</code> directory in the Gradle distribution.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="web_project_tutorial"></a>Chapter&nbsp;10.&nbsp;Web Application Quickstart</h1></div></div></div><div class="note"><p>This chapter is a work in progress.</p></div><p>This chapter introduces some of the Gradle's support for web applications. Gradle provides two plugins for web
        application development: the War plugin and the Jetty plugin. The War plugin extends the Java plugin to build a
        WAR file for your project. The Jetty plugin extends the War plugin to allow you to deploy your web application
        to an embedded Jetty web container.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10725"></a>10.1.&nbsp;Building a WAR file</h2></div></div></div><p>To build a WAR file, you apply the War plugin to your project:</p><div class="example"><a name="webQuickstart"></a><p class="title"><b>Example&nbsp;10.1.&nbsp;War plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'war'</span></pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/webApplication/quickstart</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>This also applies the Java plugin to your project. Running <strong class="userinput"><code>gradle build</code></strong> will compile,
            test and WAR your project. Gradle will look for the source files to include in the WAR file in
            <code class="filename">src/main/webapp</code>. Your compiled classes, and their runtime dependencies are also
            included in the WAR file.
        </p><div class="tip"><h3 class="title">Groovy web applications</h3><p>You can combine multiple plugins in a single project, so you
            can use the War and Groovy plugins together to build a Groovy based web application. The appropriate groovy
            libraries will be added to the WAR file for you.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1074A"></a>10.2.&nbsp;Running your web application</h2></div></div></div><p>To run your web application, you apply the Jetty plugin to your project:</p><div class="example"><a name="webQuickstart"></a><p class="title"><b>Example&nbsp;10.2.&nbsp;Running web application with Jetty plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'jetty'</span></pre></div></div><br class="example-break"><p>This also applies the War plugin to your project. Running <strong class="userinput"><code>gradle jettyRun</code></strong> will
            run your web application in an embedded Jetty web container. Running <strong class="userinput"><code>gradle jettyRunWar</code></strong>
            will build the WAR file, and then run it in an embedded web container.
        </p><p>TODO: which url, configure port, uses source files in place and can edit your files and reload.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10763"></a>10.3.&nbsp;Summary</h2></div></div></div><p>You can find out more about the War plugin in <a class="xref" href="#war_plugin">Chapter&nbsp;26, <i>The War Plugin</i></a> and the Jetty plugin in
            <a class="xref" href="#jetty_plugin">Chapter&nbsp;28, <i>The Jetty Plugin</i></a>. You can find more sample Java projects in the
            <code class="filename">samples/webApplication</code> directory in the Gradle distribution.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorial_gradle_command_line"></a>Chapter&nbsp;11.&nbsp;Using the Gradle Command-Line</h1></div></div></div><p>This chapter introduces the basics of the Gradle command-line. You run a build using the
        <span class="command"><strong>gradle</strong></span> command, which you have already seen in action in previous chapters.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1077C"></a>11.1.&nbsp;Executing multiple tasks</h2></div></div></div><p>You can execute multiple tasks in a single build by listing each of the tasks on the command-line. For example,
            the command <strong class="userinput"><code>gradle compile test</code></strong> will execute the <code class="literal">compile</code> and
            <code class="literal">test</code> tasks. Gradle will execute the tasks in the order that they are listed on the
            command-line, and will also execute the dependencies for each task. Each task is executed once only,
            regardless of how it came to be included in the build: whether it was specified on the command-line, or it a
            dependency of another task, or both. Let's look at an example.</p><p>
            Below four tasks are defined. Both <code class="literal">dist</code> and <code class="literal">test</code> depend on the
            <code class="literal">compile</code> task. Running <strong class="userinput"><code>gradle dist test</code></strong> for this build script
            results in the <code class="literal">compile</code> task being executed only once.</p><div class="figure"><a name="N1079B"></a><p class="title"><b>Figure&nbsp;11.1.&nbsp;Task dependencies</b></p><div class="figure-contents"><img src="img/commandLineTutorialTasks.png" alt="Task dependencies"></div></div><br class="figure-break"><div class="example"><a name="multipleTasksFromCommandLine"></a><p class="title"><b>Example&nbsp;11.1.&nbsp;Executing multiple tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task compile &lt;&lt; {
    println <span class="hl-string">'compiling source'</span>
}

task compileTest(dependsOn: compile) &lt;&lt; {
    println <span class="hl-string">'compiling unit tests'</span>
}

task test(dependsOn: [compile, compileTest]) &lt;&lt; {
    println <span class="hl-string">'running unit tests'</span>
}

task dist(dependsOn: [compile, test]) &lt;&lt; {
    println <span class="hl-string">'building the distribution'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle dist test</code></strong></p><pre class="screen">&gt; gradle dist test
:compile
compiling source
:compileTest
compiling unit tests
:test
running unit tests
:dist
building the distribution

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            Because each task is executed once only, executing <strong class="userinput"><code>gradle test test</code></strong> is exactly the same
            as executing <strong class="userinput"><code>gradle test</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:excluding_tasks_from_the_command_line"></a>11.2.&nbsp;Excluding tasks</h2></div></div></div><p>You can exclude a task from being executed using the <code class="option">-x</code> command-line option and providing
            the name of the task to exclude. Let's try this with the sample build file above.</p><div class="example"><a name="excludeTask"></a><p class="title"><b>Example&nbsp;11.2.&nbsp;Excluding tasks</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle dist -x test</code></strong></p><pre class="screen">&gt; gradle dist -x test
:compile
compiling source
:dist
building the distribution

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can see from the output of this example, that the <code class="literal">test</code> task is not executed, even
            though it is a dependency of the <code class="literal">dist</code> task. You will also notice that the
            <code class="literal">test</code> task's dependencies, such as <code class="literal">compileTest</code>
            are not executed either. Those dependencies of <code class="literal">test</code> that are required by another task, such as
            <code class="literal">compile</code>, are still executed.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:continue_build_on_failure"></a>11.3.&nbsp;Continuing the build when a failure occurs</h2></div></div></div><p>By default, Gradle will abort execution and fail the build as soon as any task fails. This allows the build to complete sooner, but hides other failures
            that would have occurred. In order to discover as many failures as possible in a single build execution, you can use the <code class="literal">--continue</code> option.
        </p><p>When executed with <code class="literal">--continue</code>, Gradle will execute <span class="emphasis"><em>every</em></span> task to be executed where all of the dependencies for that task completed without failure,
            instead of stopping as soon as the first failure is encountered. Each of the encountered failures will be reported at the end of the build.
        </p><p>If a task fails, any subsequent tasks that were depending on it will not be executed, as it is not safe to do so. For example, tests will not
            run if there is a compilation failure in the code under test; because the test task will depend on the compilation task (either directly or indirectly).
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N107F3"></a>11.4.&nbsp;Task name abbreviation</h2></div></div></div><p>When you specify tasks on the command-line, you don't have to provide the full name of the task. You only need to provide enough of the
            task name to uniquely identify the task. For example, in the sample build above, you can execute task
            <code class="literal">dist</code> by running <strong class="userinput"><code>gradle d</code></strong>:</p><div class="example"><a name="abbreviateTaskName"></a><p class="title"><b>Example&nbsp;11.3.&nbsp;Abbreviated task name</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle di</code></strong></p><pre class="screen">&gt; gradle di
:compile
compiling source
:compileTest
compiling unit tests
:test
running unit tests
:dist
building the distribution

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can also abbreviate each word in a camel case task name. For example, you can execute task <code class="literal">compileTest</code>
            by running <strong class="userinput"><code>gradle compTest</code></strong> or even <strong class="userinput"><code>gradle cT</code></strong></p><div class="example"><a name="abbreviateCamelCaseTaskName"></a><p class="title"><b>Example&nbsp;11.4.&nbsp;Abbreviated camel case task name</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle cT</code></strong></p><pre class="screen">&gt; gradle cT
:compile
compiling source
:compileTest
compiling unit tests

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can also use these abbreviations with the <code class="option">-x</code> command-line option.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:selecting_build"></a>11.5.&nbsp;Selecting which build to execute</h2></div></div></div><p>When you run the <span class="command"><strong>gradle</strong></span> command, it looks for a build file in the current directory.
            You can use the <code class="option">-b</code> option to select another build file.
            If you use <code class="option">-b</code> option then <code class="filename">settings.gradle</code> file is not used. Example:
        </p><div class="example"><a name="selectProjectUsingBuildFile"></a><p class="title"><b>Example&nbsp;11.5.&nbsp;Selecting the project using a build file</b></p><div class="example-contents"><p><code class="filename">subdir/myproject.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">"using build file '$buildFile.name' in '$buildFile.parentFile.name'."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q -b subdir/myproject.gradle hello</code></strong></p><pre class="screen">&gt; gradle -q -b subdir/myproject.gradle hello
using build file 'myproject.gradle' in 'subdir'.</pre></div></div><br class="example-break"><p>Alternatively, you can use the <code class="option">-p</code> option to specify the project directory to use.
        For multi-project builds you should use <code class="option">-p</code> option instead of <code class="option">-b</code> option.
        </p><div class="example"><a name="selectProjectUsingProjectDir"></a><p class="title"><b>Example&nbsp;11.6.&nbsp;Selecting the project using project directory</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q -p subdir hello</code></strong></p><pre class="screen">&gt; gradle -q -p subdir hello
using build file 'build.gradle' in 'subdir'.</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:obtaining_information_about_your_build"></a>11.6.&nbsp;Obtaining information about your build</h2></div></div></div><p>Gradle provides several built-in tasks which show particular details of your build. This can be
            useful for understanding the structure and dependencies of your build, and for debugging problems.
        </p><p>In addition to the built-in tasks shown below, you can also use the
            <a class="link" href="#project_reports_plugin">project report plugin</a> to add tasks to your project which will
            generate these reports.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10864"></a>11.6.1.&nbsp;Listing projects</h3></div></div></div><p>Running <strong class="userinput"><code>gradle projects</code></strong> gives you a list of the sub-projects of the selected project,
                displayed in a hierarchy. Here is an example:
            </p><div class="example"><a name="projectListReport"></a><p class="title"><b>Example&nbsp;11.7.&nbsp;Obtaining information about projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q projects</code></strong></p><pre class="screen">&gt; gradle -q projects
------------------------------------------------------------
Root project
------------------------------------------------------------

Root project 'projectReports'
+--- Project ':api' - The shared API for the application
\--- Project ':webapp' - The Web application implementation

To see a list of the tasks of a project, run gradle &lt;project-path&gt;:tasks
For example, try running gradle :api:tasks</pre></div></div><br class="example-break"><p>The report shows the description of each project, if specified. You can provide a description for a project
                by setting the <code class="literal">description</code> property:
            </p><div class="example"><a name="projectListReport"></a><p class="title"><b>Example&nbsp;11.8.&nbsp;Providing a description for a project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">description = <span class="hl-string">'The shared API for the application'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:listing_tasks"></a>11.6.2.&nbsp;Listing tasks</h3></div></div></div><p>Running <strong class="userinput"><code>gradle tasks</code></strong> gives you a list of the main tasks of the
                selected project. This report shows the default tasks for the project, if any, and a description for
                each task. Below is an example of this report:
            </p><div class="example"><a name="taskListReport"></a><p class="title"><b>Example&nbsp;11.9.&nbsp;Obtaining information about tasks</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q tasks</code></strong></p><pre class="screen">&gt; gradle -q tasks
------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

Default tasks: dists

Build tasks
-----------
clean - Deletes the build directory (build)
dists - Builds the distribution
libs - Builds the JAR

Build Setup tasks
-----------------
init - Initializes a new Gradle build. [incubating]
wrapper - Generates Gradle wrapper files. [incubating]

Help tasks
----------
dependencies - Displays all dependencies declared in root project 'projectReports'.
dependencyInsight - Displays the insight into a specific dependency in root project 'projectReports'.
help - Displays a help message
projects - Displays the sub-projects of root project 'projectReports'.
properties - Displays the properties of root project 'projectReports'.
tasks - Displays the tasks runnable from root project 'projectReports' (some of the displayed tasks may belong to subprojects).

To see all tasks and more detail, run with --all.</pre></div></div><br class="example-break"><p>By default, this report shows only those tasks which have been assigned to a task group. You can do this
                by setting the <code class="literal">group</code> property for the task. You can also set the <code class="literal">description</code>
                property, to provide a description to be included in the report.
            </p><div class="example"><a name="taskListReport"></a><p class="title"><b>Example&nbsp;11.10.&nbsp;Changing the content of the task report</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dists {
    description = <span class="hl-string">'Builds the distribution'</span>
    group = <span class="hl-string">'build'</span>
}</pre></div></div><br class="example-break"><p>You can obtain more information in the task listing using the <code class="option">--all</code> option. With
                this option, the task report lists all tasks in the project, grouped by main task, and the dependencies
                for each task. Here is an example:
            </p><div class="example"><a name="taskListAllReport"></a><p class="title"><b>Example&nbsp;11.11.&nbsp;Obtaining more information about tasks</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q tasks --all</code></strong></p><pre class="screen">&gt; gradle -q tasks --all
------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

Default tasks: dists

Build tasks
-----------
clean - Deletes the build directory (build)
api:clean - Deletes the build directory (build)
webapp:clean - Deletes the build directory (build)
dists - Builds the distribution [api:libs, webapp:libs]
    docs - Builds the documentation
api:libs - Builds the JAR
    api:compile - Compiles the source files
webapp:libs - Builds the JAR [api:libs]
    webapp:compile - Compiles the source files

Build Setup tasks
-----------------
init - Initializes a new Gradle build. [incubating]
wrapper - Generates Gradle wrapper files. [incubating]

Help tasks
----------
dependencies - Displays all dependencies declared in root project 'projectReports'.
api:dependencies - Displays all dependencies declared in project ':api'.
webapp:dependencies - Displays all dependencies declared in project ':webapp'.
dependencyInsight - Displays the insight into a specific dependency in root project 'projectReports'.
api:dependencyInsight - Displays the insight into a specific dependency in project ':api'.
webapp:dependencyInsight - Displays the insight into a specific dependency in project ':webapp'.
help - Displays a help message
api:help - Displays a help message
webapp:help - Displays a help message
projects - Displays the sub-projects of root project 'projectReports'.
api:projects - Displays the sub-projects of project ':api'.
webapp:projects - Displays the sub-projects of project ':webapp'.
properties - Displays the properties of root project 'projectReports'.
api:properties - Displays the properties of project ':api'.
webapp:properties - Displays the properties of project ':webapp'.
tasks - Displays the tasks runnable from root project 'projectReports' (some of the displayed tasks may belong to subprojects).
api:tasks - Displays the tasks runnable from project ':api'.
webapp:tasks - Displays the tasks runnable from project ':webapp'.</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:show_task_details"></a>11.6.3.&nbsp;Show task usage details</h3></div></div></div><p>Running <strong class="userinput"><code>gradle help --task someTask</code></strong> gives you detailed information about a specific task or multiple
                tasks matching the given task name in your multiproject build.
                Below is an example of this detailed information:
            </p><div class="example"><a name="taskHelp"></a><p class="title"><b>Example&nbsp;11.12.&nbsp;Obtaining detailed help for tasks</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q help --task libs</code></strong></p><pre class="screen">&gt; gradle -q help --task libs
Detailed task information for libs

Paths
     :api:libs
     :webapp:libs

Type
     Task (org.gradle.api.Task)

Description
     Builds the JAR</pre></div></div><br class="example-break"><p>This information includes the full task path, the task type, possible commandline options and the description of the given task.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:listing_dependencies"></a>11.6.4.&nbsp;Listing project dependencies</h3></div></div></div><p><a name="para:commandline_dependency_report"></a>Running <strong class="userinput"><code>gradle dependencies</code></strong>
                gives you a list of the dependencies of the selected project, broken down by configuration. For each
                configuration, the direct and transitive dependencies of that configuration are shown in a tree. Below
                is an example of this report:
            </p><div class="example"><a name="dependencyListReport"></a><p class="title"><b>Example&nbsp;11.13.&nbsp;Obtaining information about dependencies</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q dependencies api:dependencies webapp:dependencies</code></strong></p><pre class="screen">&gt; gradle -q dependencies api:dependencies webapp:dependencies
------------------------------------------------------------
Root project
------------------------------------------------------------

No configurations

------------------------------------------------------------
Project :api - The shared API for the application
------------------------------------------------------------

compile
\--- org.codehaus.groovy:groovy-all:2.3.3

testCompile
\--- junit:junit:4.11
     \--- org.hamcrest:hamcrest-core:1.3

------------------------------------------------------------
Project :webapp - The Web application implementation
------------------------------------------------------------

compile
+--- project :api
|    \--- org.codehaus.groovy:groovy-all:2.3.3
\--- commons-io:commons-io:1.2

testCompile
No dependencies</pre></div></div><br class="example-break"><p>
                Since a dependency report can get large, it can be useful to restrict the report to a particular configuration.
                This is achieved with the optional <strong class="userinput"><code>--configuration</code></strong> parameter:
            </p><div class="example"><a name="dependencyListReportFiltered"></a><p class="title"><b>Example&nbsp;11.14.&nbsp;Filtering dependency report by configuration</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q api:dependencies --configuration testCompile</code></strong></p><pre class="screen">&gt; gradle -q api:dependencies --configuration testCompile
------------------------------------------------------------
Project :api - The shared API for the application
------------------------------------------------------------

testCompile
\--- junit:junit:4.11
     \--- org.hamcrest:hamcrest-core:1.3</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:dependency_insight"></a>11.6.5.&nbsp;Getting the insight into a particular dependency</h3></div></div></div><p><a name="para:commandline_dependency_insight_report"></a>Running <strong class="userinput"><code>gradle dependencyInsight</code></strong>
                gives you an insight into a particular dependency (or dependencies) that match specified input.
                Below is an example of this report:
            </p><div class="example"><a name="dependencyInsightReport"></a><p class="title"><b>Example&nbsp;11.15.&nbsp;Getting the insight into a particular dependency</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q webapp:dependencyInsight --dependency groovy --configuration compile</code></strong></p><pre class="screen">&gt; gradle -q webapp:dependencyInsight --dependency groovy --configuration compile
org.codehaus.groovy:groovy-all:2.3.3
\--- project :api
     \--- compile</pre></div></div><br class="example-break"><p>
                This task is extremely useful for investigating the dependency resolution,
                finding out where certain dependencies are coming from and why certain versions are selected.
                For more information please see <a class="ulink" href="../dsl/org.gradle.api.tasks.diagnostics.DependencyInsightReportTask.html" target="_top"><code class="classname">DependencyInsightReportTask</code></a>.
            </p><p>
                The built-in dependencyInsight task is a part of the 'Help' tasks group.
                The task needs to configured with the dependency and the configuration.
                The report looks for the dependencies that match the specified dependency spec in the specified configuration.
                If java related plugin is applied, the dependencyInsight task is pre-configured with 'compile' configuration because typically it's the compile dependencies we are interested in.
                You should specify the dependency you are interested in via the command line '--dependency' option.
                If you don't like the defaults you may select the configuration via '--configuration' option.
                For more information see <a class="ulink" href="../dsl/org.gradle.api.tasks.diagnostics.DependencyInsightReportTask.html" target="_top"><code class="classname">DependencyInsightReportTask</code></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:listing_properties"></a>11.6.6.&nbsp;Listing project properties</h3></div></div></div><p>Running <strong class="userinput"><code>gradle properties</code></strong> gives you a list of the properties of the selected
                project. This is a snippet from the output:
            </p><div class="example"><a name="propertyListReport"></a><p class="title"><b>Example&nbsp;11.16.&nbsp;Information about properties</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q api:properties</code></strong></p><pre class="screen">&gt; gradle -q api:properties
------------------------------------------------------------
Project :api - The shared API for the application
------------------------------------------------------------

allprojects: [project ':api']
ant: org.gradle.api.internal.project.DefaultAntBuilder@12345
antBuilderFactory: org.gradle.api.internal.project.DefaultAntBuilderFactory@12345
artifacts: org.gradle.api.internal.artifacts.dsl.DefaultArtifactHandler@12345
asDynamicObject: org.gradle.api.internal.ExtensibleDynamicObject@12345
baseClassLoaderScope: org.gradle.api.internal.initialization.DefaultClassLoaderScope@12345
buildDir: /home/user/gradle/samples/userguide/tutorial/projectReports/api/build
buildFile: /home/user/gradle/samples/userguide/tutorial/projectReports/api/build.gradle</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:profiling_build"></a>11.6.7.&nbsp;Profiling a build</h3></div></div></div><p>The <strong class="userinput"><code>--profile</code></strong> command line option will record some useful timing information
            while your build is running and write a report to the <code class="filename">build/reports/profile</code> directory.
            The report will be named using the time when the build was run.
            </p><p>This report lists summary times and details for both the configuration phase and task execution.  The
                times for configuration and task execution are sorted with the most expensive operations first.  The task
                execution results also indicate if any tasks were skipped (and the reason) or if tasks that were not skipped
                did no work.
            </p><p>Builds which utilize a buildSrc directory will generate a second profile report for buildSrc in the
                <code class="filename">buildSrc/build</code> directory.                
            </p><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="903"><tr height="477"><td><img src="img/profile.png" height="477"></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dry_run"></a>11.7.&nbsp;Dry Run</h2></div></div></div><p>Sometimes you are interested in which tasks are executed in which order for a given set of tasks specified on the
            command line, but you don't want the tasks to be executed. You can use the <code class="option">-m</code> option for this.
            For example <strong class="userinput"><code>gradle -m clean compile</code></strong> shows you all tasks to be executed as
            part of the <code class="literal">clean</code> and <code class="literal">compile</code> tasks.
            This is complementary to the <code class="option">tasks</code> task, which shows you the tasks which are available for
            execution.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10953"></a>11.8.&nbsp;Summary</h2></div></div></div><p>In this chapter, you have seen some of the things you can do with Gradle from the command-line. You can
            find out more about the <span class="command"><strong>gradle</strong></span> command in <a class="xref" href="#gradle_command_line">Appendix&nbsp;D, <i>Gradle Command Line</i></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorial_gradle_gui"></a>Chapter&nbsp;12.&nbsp;Using the Gradle Graphical User Interface</h1></div></div></div><p>In addition to supporting a traditional command line interface, Gradle offers
    a graphical user interface.  This is a stand alone user interface that can be launched with the
    <span class="command"><strong>--gui</strong></span> option.</p><div class="example"><a name="N10969"></a><p class="title"><b>Example&nbsp;12.1.&nbsp;Launching the GUI</b></p><div class="example-contents"><pre class="programlisting">gradle --gui</pre></div></div><br class="example-break"><p>Note that this command blocks until the Gradle GUI is closed.  Under *nix it is probably preferable to run
        this as a background task (<span class="command"><strong>gradle --gui&amp;</strong></span>)</p><p>If you run this from your Gradle project working directory, you should see a tree of tasks.</p><div class="figure"><a name="N10975"></a><p class="title"><b>Figure&nbsp;12.1.&nbsp;GUI Task Tree</b></p><div class="figure-contents"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="586"><tr height="597"><td><img src="img/guiTaskTree.png" width="586" alt="GUI Task Tree"></td></tr></table></div></div><br class="figure-break"><p>It is preferable to run this command from your Gradle project directory so that the settings of the UI will be
        stored in your project directory. However, you can run it then change the working directory via the Setup tab in
        the UI.
    </p><p>The UI displays 4 tabs along the top and an output window along the bottom.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10981"></a>12.1.&nbsp;Task Tree</h2></div></div></div><p>
            The Task Tree shows a hierarchical display of all projects and their tasks.
            Double clicking a task executes it.
        </p><p>
            There is also a filter so that uncommon tasks can be hidden. You can toggle the filter via the Filter button. 
            Editing the filter allows you to configure which tasks and projects are shown. Hidden tasks show up in red.
            Note: newly created tasks will show up by default (versus being hidden by default).
        </p><p>The Task Tree context menu provides the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Execute ignoring dependencies. This does not require dependent projects to be rebuilt (same as the -a option).</p></li><li class="listitem"><p>Add tasks to the favorites (see Favorites tab)</p></li><li class="listitem"><p>Hide the selected tasks. This adds them to the filter.</p></li><li class="listitem"><p>Edit the build.gradle file.
                Note: this requires Java 1.6 or higher and requires that you have .gradle files associated in your OS.
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10997"></a>12.2.&nbsp;Favorites</h2></div></div></div><p>
            The Favorites tab is place to store commonly-executed commands. These can be complex commands
            (anything that's legal to Gradle) and you can provide them with a display name. This is useful for creating,
            say, a custom build command that explicitly skips tests, documentation, and samples that you could call
            "fast build".
        </p><p>
            You can reorder favorites to your liking and even export them to disk so they can imported by others.
            If you edit them, you are given options to "Always Show Live Output."
            This only applies if you have 'Only Show Output When Errors Occur'.
            This override always forces the output to be shown.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1099E"></a>12.3.&nbsp;Command Line</h2></div></div></div><p>
            The Command Line tab is place to execute a single Gradle command directly.
            Just enter whatever you would normally enter after 'gradle' on the command line.  This also provides
            a place to try out commands before adding them to favorites.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N109A3"></a>12.4.&nbsp;Setup</h2></div></div></div><p>The Setup tab allows configuration of some general settings.</p><div class="figure"><a name="N109A8"></a><p class="title"><b>Figure&nbsp;12.2.&nbsp;GUI Setup</b></p><div class="figure-contents"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="586"><tr height="597"><td><img src="img/guiSetup.png" width="586" alt="GUI Setup"></td></tr></table></div></div><br class="figure-break"><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Current Directory</p><p>Defines the root directory of your Gradle project (typically where build.gradle is located).</p></li><li class="listitem"><p>Stack Trace Output</p><p>
                    This determines how much information to write out stack traces when errors occur.
                    Note: if you specify a stack trace level on either  the Command Line or Favorites tab, it will override
                    this stack trace level.
                </p></li><li class="listitem"><p>Only Show Output When Errors Occur</p><p>Enabling this option hides any output when a task is executed unless the build fails.</p></li><li class="listitem"><p>Use Custom Gradle Executor - Advanced feature</p><p>
                    This provides you with an alternate way to launch Gradle commands.
                    This is useful if your project requires some extra setup that is done inside another batch file or shell script
                    (such as specifying an init script).
                </p></li></ul></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="writing_build_scripts"></a>Chapter&nbsp;13.&nbsp;Writing Build Scripts</h1></div></div></div><p>This chapter looks at some of the details of writing a build script.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N109CD"></a>13.1.&nbsp;The Gradle build language</h2></div></div></div><p>Gradle provides a <em class="firstterm">domain specific language</em>, or DSL, for describing builds.
            This build language is based on Groovy, with some additions to make it easier to describe a build.
        </p><p>
            A build script can contain any Groovy language element.
            <sup>[<a href="#ftn.N109D7" name="N109D7" class="footnote">5</a>]</sup>
            Gradle assumes that each build script is encoded using UTF-8.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:project_api"></a>13.2.&nbsp;The Project API</h2></div></div></div><p>In the tutorial in <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a> we used, for example, the
            <code class="literal">apply()</code> method. Where does this method come from? We said earlier that the build script
            defines a project in Gradle. For each project in the build, Gradle creates an object of type
            <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a> and associates this <code class="classname">Project</code> object with
            the build script. As the build script executes, it configures this <code class="classname">Project</code> object:
        </p><div class="tip"><h3 class="title">Getting help writing build scripts</h3><p>Don't forget that your build script is simply Groovy code that drives the Gradle API. And the
                <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a> interface is your starting point for accessing everything
                in the Gradle API. So, if you're wondering what 'tags' are available in your build script, you can
                start with the documentation for the <code class="classname">Project</code> interface.
            </p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Any method you call in your build script, which <span class="emphasis"><em>is not defined</em></span>
                    in the build script, is delegated to the <code class="classname">Project</code> object.
                </p></li><li class="listitem"><p>Any property you access in your build script, which <span class="emphasis"><em>is not defined</em></span>
                    in the build script, is delegated to the <code class="classname">Project</code> object.
                </p></li></ul></div><p>Let's try this out and try to access the <code class="literal">name</code> property of the
            <code class="classname">Project</code> object.
        </p><div class="example"><a name="projectApi"></a><p class="title"><b>Example&nbsp;13.1.&nbsp;Accessing property of the Project object</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">println name
println project.name</pre><p>Output of <strong class="userinput"><code>gradle -q check</code></strong></p><pre class="screen">&gt; gradle -q check
projectApi
projectApi</pre></div></div><br class="example-break"><p>Both <code class="literal">println</code> statements print out the same property. The first uses auto-delegation to
            the <code class="classname">Project</code> object, for properties not defined in the build script. The other
            statement uses the <code class="literal">project</code> property available to any build script, which returns the
            associated <code class="classname">Project</code> object. Only if you define a property or a method which has the
            same name as a member of the <code class="classname">Project</code> object, you need to use the <code class="literal">project</code>
            property.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10A3E"></a>13.2.1.&nbsp;Standard project properties</h3></div></div></div><p>The <code class="classname">Project</code> object provides some standard properties, which are available in
                your build script. The following table lists a few of the commonly used ones.
            </p><div class="table"><p class="title"><b>Table&nbsp;13.1.&nbsp;Project Properties</b></p><div class="table-contents"><table id="N10A46"><thead><tr>
                        <td>Name</td>
                        <td>Type</td>
                        <td>Default Value</td>
                    </tr></thead><tr>
                    <td><code class="literal">project</code></td>
                    <td><a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a></td>
                    <td>The <code class="classname">Project</code> instance</td>
                </tr><tr>
                    <td><code class="literal">name</code></td>
                    <td><code class="classname">String</code></td>
                    <td>The name of the project directory.</td>
                </tr><tr>
                    <td><code class="literal">path</code></td>
                    <td><code class="classname">String</code></td>
                    <td>The absolute path of the project.</td>
                </tr><tr>
                    <td><code class="literal">description</code></td>
                    <td><code class="classname">String</code></td>
                    <td>A description for the project.</td>
                </tr><tr>
                    <td><code class="literal">projectDir</code></td>
                    <td><code class="classname">File</code></td>
                    <td>The directory containing the build script.</td>
                </tr><tr>
                    <td><code class="literal">buildDir</code></td>
                    <td><code class="classname">File</code></td>
                    <td><code class="filename"><em class="replaceable"><code>projectDir</code></em>/build</code></td>
                </tr><tr>
                    <td><code class="literal">group</code></td>
                    <td><code class="classname">Object</code></td>
                    <td><code class="literal">unspecified</code></td>
                </tr><tr>
                    <td><code class="literal">version</code></td>
                    <td><code class="classname">Object</code></td>
                    <td><code class="literal">unspecified</code></td>
                </tr><tr>
                    <td><code class="literal">ant</code></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/AntBuilder.html" target="_top"><code class="classname">AntBuilder</code></a></td>
                    <td>An <code class="classname">AntBuilder</code> instance</td>
                </tr></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10AD9"></a>13.3.&nbsp;The Script API</h2></div></div></div><p>When Gradle executes a script, it compiles the script into a class which implements <a class="ulink" href="../dsl/org.gradle.api.Script.html" target="_top"><code class="classname">Script</code></a>.
            This means that all of the properties and methods declared by the <code class="classname">Script</code> interface
            are available in your script.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10AE6"></a>13.4.&nbsp;Declaring variables</h2></div></div></div><p>There are two kinds of variables that can be declared in a build script: local variables and extra properties.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10AEB"></a>13.4.1.&nbsp;Local variables</h3></div></div></div><p>Local variables are declared with the <code class="literal">def</code> keyword. They are only visible in the scope where they have been declared.
                Local variables are a feature of the underlying Groovy language.
            </p><div class="example"><a name="localVariables"></a><p class="title"><b>Example&nbsp;13.2.&nbsp;Using local variables</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">def dest = <span class="hl-string">"dest"</span>

task copy(type: Copy) {
    from <span class="hl-string">"source"</span>
    into dest
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:extra_properties"></a>13.4.2.&nbsp;Extra properties</h3></div></div></div><p>All enhanced objects in Gradle's domain model can hold extra user-defined properties. This includes, but is not limited to, projects, tasks,
                and source sets. Extra properties can be added, read and set via the owning object's <code class="literal">ext</code> property. Alternatively, an
                <code class="literal">ext</code> block can be used to add multiple properties at once.
            </p><div class="example"><a name="extraProperties"></a><p class="title"><b>Example&nbsp;13.3.&nbsp;Using extra properties</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"java"</span>

ext {
    springVersion = <span class="hl-string">"3.1.0.RELEASE"</span>
    emailNotification = <span class="hl-string">"build@master.org"</span>
}

sourceSets.all { ext.purpose = null }

sourceSets {
    main {
        purpose = <span class="hl-string">"production"</span>
    }
    test {
        purpose = <span class="hl-string">"test"</span>
    }
    plugin {
        purpose = <span class="hl-string">"production"</span>
    }
}

task printProperties &lt;&lt; {
    println springVersion
    println emailNotification
    sourceSets.matching { it.purpose == <span class="hl-string">"production"</span> }.each { println it.name }
}</pre><p>Output of <strong class="userinput"><code>gradle -q printProperties</code></strong></p><pre class="screen">&gt; gradle -q printProperties
3.1.0.RELEASE
build@master.org
main
plugin</pre></div></div><br class="example-break"><p>In this example, an <code class="literal">ext</code> block adds two extra properties to the <code class="literal">project</code> object. Additionally,
                a property named <code class="literal">purpose</code> is added to each source set by setting <code class="literal">ext.purpose</code> to
                <code class="literal">null</code> (<code class="literal">null</code> is a permissible value). Once the properties have been added, they can be read and set like
                predefined properties.
            </p><p>By requiring special syntax for adding a property, Gradle can fail fast when an attempt is made to set a (predefined or extra) property
                but the property is misspelled or does not exist.
                Extra properties can be accessed from anywhere their owning object can be accessed, giving them a wider scope than local variables.
                Extra properties on a project are visible from its subprojects.
            </p><p>For further details on extra properties and their API, see <a class="ulink" href="../dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html" target="_top"><code class="classname">ExtraPropertiesExtension</code></a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10B36"></a>13.5.&nbsp;Some Groovy basics</h2></div></div></div><p>Groovy provides plenty of features for creating DSLs, and the Gradle build language takes advantage of these.
            Understanding how the build language works will help you when you write your build script, and in particular,
            when you start to write custom plugins and tasks.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10B3B"></a>13.5.1.&nbsp;Groovy JDK</h3></div></div></div><p>
                Groovy adds lots of useful methods to the standard Java classes. For example, <code class="classname">Iterable</code> gets
                an <code class="literal">each</code> method, which iterates over the elements of the <code class="classname">Iterable</code>:
            </p><div class="example"><a name="groovyBasics"></a><p class="title"><b>Example&nbsp;13.4.&nbsp;Groovy JDK methods</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Iterable gets an each() method</span>
configurations.runtime.each { File f -&gt; println f }</pre></div></div><br class="example-break"><p>Have a look at <a class="ulink" href="http://groovy.codehaus.org/groovy-jdk/" target="_top">http://groovy.codehaus.org/groovy-jdk/</a> for more details.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10B58"></a>13.5.2.&nbsp;Property accessors</h3></div></div></div><p>
               Groovy automatically converts a property reference into a call to the appropriate getter or setter method.
            </p><div class="example"><a name="groovyBasics"></a><p class="title"><b>Example&nbsp;13.5.&nbsp;Property accessors</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Using a getter method</span>
println project.buildDir
println getProject().getBuildDir()

<span class="hl-comment">// Using a setter method</span>
project.buildDir = <span class="hl-string">'target'</span>
getProject().setBuildDir(<span class="hl-string">'target'</span>)</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10B67"></a>13.5.3.&nbsp;Optional parentheses on method calls</h3></div></div></div><p>
                Parentheses are optional for method calls.
            </p><div class="example"><a name="groovyBasics"></a><p class="title"><b>Example&nbsp;13.6.&nbsp;Method call without parentheses</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">test.systemProperty <span class="hl-string">'some.prop'</span>, <span class="hl-string">'value'</span>
test.systemProperty(<span class="hl-string">'some.prop'</span>, <span class="hl-string">'value'</span>)</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10B76"></a>13.5.4.&nbsp;List and map literals</h3></div></div></div><p>
                Groovy provides some shortcuts for defining <code class="classname">List</code> and <code class="classname">Map</code>
                instances.
            </p><div class="example"><a name="groovyBasics"></a><p class="title"><b>Example&nbsp;13.7.&nbsp;List and map literals</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// List literal</span>
test.includes = [<span class="hl-string">'org/gradle/api/**'</span>, <span class="hl-string">'org/gradle/internal/**'</span>]

List&lt;String&gt; list = <span class="hl-keyword">new</span> ArrayList&lt;String&gt;()
list.add(<span class="hl-string">'org/gradle/api/**'</span>)
list.add(<span class="hl-string">'org/gradle/internal/**'</span>)
test.includes = list

<span class="hl-comment">// Map literal</span>
apply plugin: <span class="hl-string">'java'</span>

Map&lt;String, String&gt; map = <span class="hl-keyword">new</span> HashMap&lt;String, String&gt;()
map.put(<span class="hl-string">'plugin'</span>, <span class="hl-string">'java'</span>)
apply(map)</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10B8B"></a>13.5.5.&nbsp;Closures as the last parameter in a method</h3></div></div></div><p>The Gradle DSL uses closures in many places. You can find out more about closures <a class="ulink" href="http://groovy.codehaus.org/Closures" target="_top">here</a>.
                When the last parameter of a method is a closure, you can place the closure after the method call:
            </p><div class="example"><a name="groovyBasics"></a><p class="title"><b>Example&nbsp;13.8.&nbsp;Closure as method parameter</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    println <span class="hl-string">"in a closure"</span>
}
repositories() { println <span class="hl-string">"in a closure"</span> }
repositories({ println <span class="hl-string">"in a closure"</span> })</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10B9E"></a>13.5.6.&nbsp;Closure delegate</h3></div></div></div><p>
                Each closure has a <code class="literal">delegate</code> object, which Groovy uses to look up variable and method
                references which are not local variables or parameters of the closure. Gradle uses this for
                <em class="firstterm">configuration closures</em>, where the <code class="literal">delegate</code> object is set to
                the object to be configured.
            </p><div class="example"><a name="groovyBasics"></a><p class="title"><b>Example&nbsp;13.9.&nbsp;Closure delegates</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    assert delegate == project.dependencies
    compile(<span class="hl-string">'junit:junit:4.11'</span>)
    delegate.compile(<span class="hl-string">'junit:junit:4.11'</span>)
}</pre></div></div><br class="example-break"></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N109D7" name="ftn.N109D7" class="para">5</a>] </sup>Any language element except for statement labels.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="tutorial_this_and_that"></a>Chapter&nbsp;14.&nbsp;Tutorial - 'This and That'</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:directory_creation"></a>14.1.&nbsp;Directory creation</h2></div></div></div><p>There is a common situation, that multiple tasks depend on the existence of a directory. Of course you can
            deal with this by adding a
            <code class="literal">mkdir</code>
            to the beginning of those tasks. But this is kind of bloated. There is a better solution (works only if the
            tasks that need the directory have a
            <span class="emphasis"><em>dependsOn</em></span>
            relationship):
        </p><div class="example"><a name="makeDirectory"></a><p class="title"><b>Example&nbsp;14.1.&nbsp;Directory creation with mkdir</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">def classesDir = <span class="hl-keyword">new</span> File(<span class="hl-string">'build/classes'</span>)

task resources &lt;&lt; {
    classesDir.mkdirs()
    <span class="hl-comment">// do something</span>
}
task compile(dependsOn: <span class="hl-string">'resources'</span>) &lt;&lt; {
    <span class="hl-keyword">if</span> (classesDir.isDirectory()) {
        println <span class="hl-string">'The class directory exists. I can operate'</span>
    }
    <span class="hl-comment">// do something</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q compile</code></strong></p><pre class="screen">&gt; gradle -q compile
The class directory exists. I can operate</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:gradle_properties_and_system_properties"></a>14.2.&nbsp;Gradle properties and system properties</h2></div></div></div><p>Gradle offers a variety of ways to add properties to your build. With the <code class="option">-D</code> command line
            option you can pass a system property to the JVM which runs Gradle. The <code class="option">-D</code> option of the
            <span class="command"><strong>gradle</strong></span> command has the same effect as the <code class="option">-D</code> option of the
            <span class="command"><strong>java</strong></span> command.
        </p><p>You can also directly add properties to your project objects using properties files. You can place a
            <code class="filename">gradle.properties</code> file in the Gradle user home directory (defaults to
            <code class="filename"><em class="replaceable"><code>USER_HOME</code></em>/.gradle</code>) or in your project directory. For
            multi-project builds you can place <code class="filename">gradle.properties</code> files in any subproject directory.
            The properties of the <code class="filename">gradle.properties</code> can be accessed via the project object. The
            properties file in the user's home directory has precedence over property files in the project directories.
        </p><p>You can also add properties directly to your project object via the <code class="option">-P</code>
            command line option. For more exotic use cases you can even pass properties <span class="emphasis"><em>directly</em></span>
            to the project object via system and environment properties. For example if you run a build on a continuous
            integration server where you have no admin rights for the <span class="emphasis"><em>machine</em></span>. Your build script
            needs properties which values should not be seen by others. Therefore you can't use the <code class="option">-P</code>
            option. In this case you can add an environment property in the project administration section (invisible to
            normal users).
            <sup>[<a href="#ftn.N10C0B" name="N10C0B" class="footnote">6</a>]</sup>
            If the environment property follows the pattern
            <code class="literal">ORG_GRADLE_PROJECT_<em class="replaceable"><code>propertyName</code></em>=somevalue</code>,
            <code class="literal">propertyName</code> is added to your project object. We also support the same mechanism for
            system properties. The only difference is the pattern, which is
            <code class="literal">org.gradle.project.<em class="replaceable"><code>propertyName</code></em></code>.
        </p><p>With the <code class="filename">gradle.properties</code> files you can also set system properties. If a property
            in such a file has the prefix <code class="literal">systemProp.</code> the property and its value are added to the 
            system properties, without the prefix.
            In a multi project build, <code class="literal">systemProp.</code> properties set in any project except the root will be ignored.
            That is, only <code class="literal">systemProp.</code> in the root project's <code class="filename">gradle.properties</code> file will be set as system properties.
        </p><div class="example"><a name="properties"></a><p class="title"><b>Example&nbsp;14.2.&nbsp;Setting properties with a gradle.properties file</b></p><div class="example-contents"><p><code class="filename">gradle.properties</code></p><pre class="programlisting">gradlePropertiesProp=gradlePropertiesValue
systemProjectProp=shouldBeOverWrittenBySystemProp
envProjectProp=shouldBeOverWrittenByEnvProp
systemProp.system=systemValue</pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">task printProps &lt;&lt; {
    println commandLineProjectProp
    println gradlePropertiesProp
    println systemProjectProp
    println envProjectProp
    println System.properties[<span class="hl-string">'system'</span>]
}</pre><p>Output of <strong class="userinput"><code>gradle -q -PcommandLineProjectProp=commandLineProjectPropValue -Dorg.gradle.project.systemProjectProp=systemPropertyValue printProps</code></strong></p><pre class="screen">&gt; gradle -q -PcommandLineProjectProp=commandLineProjectPropValue -Dorg.gradle.project.systemProjectProp=systemPropertyValue printProps
commandLineProjectPropValue
gradlePropertiesValue
systemPropertyValue
envPropertyValue
systemValue</pre></div></div><br class="example-break"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:checking_for_project_properties"></a>14.2.1.&nbsp;Checking for project properties</h3></div></div></div><p>You can access a project property in your build script simply by using its name as you would use a
                variable. In case this property does not exists, an exception is thrown and the build fails. If your
                build script relies on optional properties the user might set for example in a gradle.properties file,
                you need to check for existence before you can access them. You can do this by using the method
                <code class="literal">hasProperty('propertyName')</code>
                which returns
                <code class="literal">true</code>
                or <code class="literal">false</code>.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuring_using_external_script"></a>14.3.&nbsp;Configuring the project using an external build script</h2></div></div></div><p>You can configure the current project using an external build script. All of the Gradle build language
            is available in the external script. You can even apply other scripts from the external script.
        </p><div class="example"><a name="configureProjectUsingScript"></a><p class="title"><b>Example&nbsp;14.3.&nbsp;Configuring the project using an external build script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply from: <span class="hl-string">'other.gradle'</span></pre><p><code class="filename">other.gradle</code></p><pre class="programlisting">println <span class="hl-string">"configuring $project"</span>
task hello &lt;&lt; {
    println <span class="hl-string">'hello from other script'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
configuring root project 'configureProjectUsingScript'
hello from other script</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuring_arbitrary_objects"></a>14.4.&nbsp;Configuring arbitrary objects</h2></div></div></div><p>You can configure arbitrary objects in the following very readable way.
        </p><div class="example"><a name="configureObject"></a><p class="title"><b>Example&nbsp;14.4.&nbsp;Configuring arbitrary objects</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task configure &lt;&lt; {
    def pos = configure(<span class="hl-keyword">new</span> java.text.FieldPosition(<span class="hl-number">10</span>)) {
        beginIndex = <span class="hl-number">1</span>
        endIndex = <span class="hl-number">5</span>
    }
    println pos.beginIndex
    println pos.endIndex
}</pre><p>Output of <strong class="userinput"><code>gradle -q configure</code></strong></p><pre class="screen">&gt; gradle -q configure
1
5</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10C8A"></a>14.5.&nbsp;Configuring arbitrary objects using an external script</h2></div></div></div><p>You can also configure arbitrary objects using an external script.
        </p><div class="example"><a name="configureObjectUsingScript"></a><p class="title"><b>Example&nbsp;14.5.&nbsp;Configuring arbitrary objects using a script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task configure &lt;&lt; {
    def pos = <span class="hl-keyword">new</span> java.text.FieldPosition(<span class="hl-number">10</span>)
    <span class="hl-comment">// Apply the script</span>
    apply from: <span class="hl-string">'other.gradle'</span>, to: pos
    println pos.beginIndex
    println pos.endIndex
}</pre><p><code class="filename">other.gradle</code></p><pre class="programlisting"></pre><p>Output of <strong class="userinput"><code>gradle -q configure</code></strong></p><pre class="screen">&gt; gradle -q configure
1
5</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:caching"></a>14.6.&nbsp;Caching</h2></div></div></div><p>To improve responsiveness Gradle caches all compiled scripts by default. This includes all build scripts,
            initialization scripts, and other scripts. The first time you run a build for a project, Gradle creates a
            <code class="filename">.gradle</code> directory in which it puts the compiled script. The next time you run this
            build, Gradle uses the compiled script, if the script has not changed since it was compiled.  Otherwise the
            script gets compiled and the new version is stored in the cache. If you run Gradle with the
            <code class="option">--recompile-scripts</code> option, the cached script is discarded and the script is compiled and stored
            in the cache. This way you can force Gradle to rebuild the cache.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10C0B" name="ftn.N10C0B" class="para">6</a>] </sup>
                    <span class="emphasis"><em>Teamcity</em></span> or <span class="emphasis"><em>Bamboo</em></span> are for example CI servers which
                    offer this functionality.
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="more_about_tasks"></a>Chapter&nbsp;15.&nbsp;More about Tasks</h1></div></div></div><p>In the introductory tutorial (<a class="xref" href="#tutorial_using_tasks">Chapter&nbsp;6, <i>Build Script Basics</i></a>) you have learned how to
        create simple tasks. You have also learned how to add additional behavior to these tasks later on. And you have
        learned how to create dependencies between tasks. This was all about simple tasks. But Gradle takes the concept
        of tasks further. Gradle supports <em class="firstterm">enhanced tasks</em>, that is, tasks which have their own
        properties and methods. This is really different to what you are used to with Ant targets. Such enhanced tasks are
        either provided by you or are provided by Gradle.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10CBF"></a>15.1.&nbsp;Defining tasks</h2></div></div></div><p>We have already seen how to define tasks using a keyword style in <a class="xref" href="#tutorial_using_tasks">Chapter&nbsp;6, <i>Build Script Basics</i></a>.
            There are a few variations on this style, which you may need to use in certain situations. For example,
            the keyword style does not work in expressions.
        </p><div class="example"><a name="defineAsExpression"></a><p class="title"><b>Example&nbsp;15.1.&nbsp;Defining tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task(hello) &lt;&lt; {
    println <span class="hl-string">"hello"</span>
}

task(copy, type: Copy) {
    from(file(<span class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>You can also use strings for the task names:</p><div class="example"><a name="defineUsingStringTaskNames"></a><p class="title"><b>Example&nbsp;15.2.&nbsp;Defining tasks - using strings for task names</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task(<span class="hl-string">'hello'</span>) &lt;&lt;
{
    println <span class="hl-string">"hello"</span>
}

task(<span class="hl-string">'copy'</span>, type: Copy) {
    from(file(<span class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>There is an alternative syntax for defining tasks, which you may prefer to use:</p><div class="example"><a name="addToTaskContainer"></a><p class="title"><b>Example&nbsp;15.3.&nbsp;Defining tasks with alternative syntax</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">tasks.create(name: <span class="hl-string">'hello'</span>) &lt;&lt; {
    println <span class="hl-string">"hello"</span>
}

tasks.create(name: <span class="hl-string">'copy'</span>, type: Copy) {
    from(file(<span class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>Here we add tasks to the <code class="literal">tasks</code> collection. Have a look at
            <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top"><code class="classname">TaskContainer</code></a> for more variations of the <code class="literal">create()</code>
            method.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10CF6"></a>15.2.&nbsp;Locating tasks</h2></div></div></div><p>You often need to locate the tasks that you have defined in the build file, for example, to configure them
            or use them for dependencies. There are a number of ways of doing this. Firstly, each task is available as
            a property of the project, using the task name as the property name:
        </p><div class="example"><a name="accessAsProperty"></a><p class="title"><b>Example&nbsp;15.4.&nbsp;Accessing tasks as properties</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello

println hello.name
println project.hello.name</pre></div></div><br class="example-break"><p>Tasks are also available through the <code class="literal">tasks</code> collection.</p><div class="example"><a name="accessFromTaskContainer"></a><p class="title"><b>Example&nbsp;15.5.&nbsp;Accessing tasks via tasks collection</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello

println tasks.hello.name
println tasks[<span class="hl-string">'hello'</span>].name</pre></div></div><br class="example-break"><p>You can access tasks from any project using the task's path using the <code class="literal">tasks.getByPath()</code>
            method. You can call the <code class="literal">getByPath()</code> method with a task name, or a relative path, or an
            absolute path.</p><div class="example"><a name="accessUsingPath"></a><p class="title"><b>Example&nbsp;15.6.&nbsp;Accessing tasks by path</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">':projectA'</span>) {
    task hello
}

task hello

println tasks.getByPath(<span class="hl-string">'hello'</span>).path
println tasks.getByPath(<span class="hl-string">':hello'</span>).path
println tasks.getByPath(<span class="hl-string">'projectA:hello'</span>).path
println tasks.getByPath(<span class="hl-string">':projectA:hello'</span>).path</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
:hello
:hello
:projectA:hello
:projectA:hello</pre></div></div><br class="example-break"><p>Have a look at <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top"><code class="classname">TaskContainer</code></a> for more options for locating tasks.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuring_tasks"></a>15.3.&nbsp;Configuring tasks</h2></div></div></div><p>As an example, let's look at the <code class="classname">Copy</code> task provided by Gradle. To create a
            <code class="classname">Copy</code> task for your build, you can declare in your build script:
        </p><div class="example"><a name="declareTask"></a><p class="title"><b>Example&nbsp;15.7.&nbsp;Creating a copy task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task myCopy(type: Copy)</pre></div></div><br class="example-break"><p>This creates a copy task with no default behavior.
            The task can be configured using its API (see <a class="ulink" href="../dsl/org.gradle.api.tasks.Copy.html" target="_top"><code class="classname">Copy</code></a>).
			The following examples show several different ways to achieve the same configuration.
        </p><div class="example"><a name="configureUsingVar"></a><p class="title"><b>Example&nbsp;15.8.&nbsp;Configuring a task - various ways</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">Copy myCopy = task(myCopy, type: Copy)
myCopy.from <span class="hl-string">'resources'</span>
myCopy.into <span class="hl-string">'target'</span>
myCopy.include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)</pre></div></div><br class="example-break"><p>This is similar to the way we would normally configure objects in Java. You have to repeat the context
            (<code class="literal">myCopy</code>) in the configuration statement every time. This is a redundancy and not very
            nice to read.
        </p><p>There is another way of configuring a task. It also preserves the context and it is arguably the
            most readable. It is usually our favorite.
        </p><div class="example"><a name="configureUsingClosure"></a><p class="title"><b>Example&nbsp;15.9.&nbsp;Configuring a task - with closure</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task myCopy(type: Copy)

myCopy {
   from <span class="hl-string">'resources'</span>
   into <span class="hl-string">'target'</span>
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"><p>This works for <span class="emphasis"><em>any</em></span> task. Line 3 of the example is just a shortcut for the
            <code class="literal">tasks.getByName()</code> method. It is important to note that if you pass a closure to the
            <code class="literal">getByName()</code> method, this closure is applied to <span class="emphasis"><em>configure</em></span> the task, not when
            the task executes.
        </p><p>You can also use a configuration closure when you define a task.</p><div class="example"><a name="defineAndConfigure"></a><p class="title"><b>Example&nbsp;15.10.&nbsp;Defining a task with closure</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copy(type: Copy) {
   from <span class="hl-string">'resources'</span>
   into <span class="hl-string">'target'</span>
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:adding_dependencies_to_tasks"></a>15.4.&nbsp;Adding dependencies to a task</h2></div></div></div><p>There are several ways you can define the dependencies of a task. In
            <a class="xref" href="#sec:task_dependencies">Section&nbsp;6.5, &ldquo;Task dependencies&rdquo;</a>
            you were introduced to defining dependencies using task names. Task names can refer to tasks in the same
            project as the task, or to tasks in other projects. To refer to a task in another project, you prefix the
            name of the task with the path of the project it belongs to. Below is an example which adds a dependency
            from
            <code class="literal">projectA:taskX</code>
            to
            <code class="literal">projectB:taskY</code>:
        </p><div class="example"><a name="addDependencyUsingPath"></a><p class="title"><b>Example&nbsp;15.11.&nbsp;Adding dependency on task from another project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">'projectA'</span>) {
    task taskX(dependsOn: <span class="hl-string">':projectB:taskY'</span>) &lt;&lt; {
        println <span class="hl-string">'taskX'</span>
    }
}

project(<span class="hl-string">'projectB'</span>) {
    task taskY &lt;&lt; {
        println <span class="hl-string">'taskY'</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>Instead of using a task name, you can define a dependency using a
            <code class="classname">Task</code> object, as shown in this example:
        </p><div class="example"><a name="addDependencyUsingTask"></a><p class="title"><b>Example&nbsp;15.12.&nbsp;Adding dependency using task object</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}

task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}

taskX.dependsOn taskY</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>For more advanced uses, you can define a task dependency using a closure. When evaluated, the closure is
            passed the task whose dependencies are being calculated. The closure should return a single
            <code class="classname">Task</code> or collection of <code class="classname">Task</code> objects, which are then treated
            as dependencies of the task. The following example adds a dependency from <code class="literal">taskX</code>
            to all the tasks in the project whose name starts with <code class="literal">lib</code>:
        </p><div class="example"><a name="addDependencyUsingClosure"></a><p class="title"><b>Example&nbsp;15.13.&nbsp;Adding dependency using closure</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}

taskX.dependsOn {
    tasks.findAll { task -&gt; task.name.startsWith(<span class="hl-string">'lib'</span>) }
}

task lib1 &lt;&lt; {
    println <span class="hl-string">'lib1'</span>
}

task lib2 &lt;&lt; {
    println <span class="hl-string">'lib2'</span>
}

task notALib &lt;&lt; {
    println <span class="hl-string">'notALib'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
lib1
lib2
taskX</pre></div></div><br class="example-break"><p>For more information about task dependencies, see the <a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a> API.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:ordering_tasks"></a>15.5.&nbsp;Ordering tasks</h2></div></div></div><div class="note"><p>
                Task ordering is an <a class="link" href="#feature_lifecycle">incubating</a> feature. Please be aware that this feature may change in later Gradle versions.
            </p></div><p>
            In some cases it is useful to control the <span class="emphasis"><em>order</em></span> in which 2 tasks will execute, without introducing an explicit dependency between those tasks.
            The primary difference between a task <span class="emphasis"><em>ordering</em></span> and a task <span class="emphasis"><em>dependency</em></span> is that an ordering rule does not influence which tasks
            will be executed, only the order in which they will be executed.
        </p><p>
            Task ordering can be useful in a number of scenarios:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Enforce sequential ordering of tasks: eg. 'build' never runs before 'clean'.</li><li class="listitem">Run build validations early in the build: eg. validate I have the correct credentials before starting the work for a release build.</li><li class="listitem">Get feedback faster by running quick verification tasks before long verification tasks: eg. unit tests should run before integration tests.</li><li class="listitem">A task that aggregates the results of all tasks of a particular type: eg. test report task combines the outputs of all executed test tasks.</li></ul></div><p>
            There are two ordering rules available: "<span class="emphasis"><em>must run after</em></span>" and "<span class="emphasis"><em>should run after</em></span>".
        </p><p>By using 'must run after" ordering rule you can specify that <code class="literal">taskB</code> must always run after <code class="literal">taskA</code>,
            whenever both <code class="literal">taskA</code> and <code class="literal">taskB</code> are scheduled for execution. This is expressed as <code class="literal">taskB.mustRunAfter(taskA)</code>. The 'should run after' ordering rule is similar but less strict as it will be ignored in two situations. Firstly if using that rule introduces an ordering cycle. Secondly when using parallel execution and all dependencies of a task have been satisfied apart from should run after then this task will be run regardless of weather its 'should run after' dependencies have been run or not. You would use 'should run after' rule when ordering preference for faster feedback, where the ordering is helpful but not strictly required.
        </p><p>
            With these rules present it is still possible to execute <code class="literal">taskA</code> without <code class="literal">taskB</code> and vice-versa.
        </p><div class="example"><a name="mustRunAfter"></a><p class="title"><b>Example&nbsp;15.14.&nbsp;Adding a 'must run after' task ordering</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}
taskY.mustRunAfter taskX</pre><p>Output of <strong class="userinput"><code>gradle -q taskY taskX</code></strong></p><pre class="screen">&gt; gradle -q taskY taskX
taskX
taskY</pre></div></div><br class="example-break"><div class="example"><a name="shouldRunAfter"></a><p class="title"><b>Example&nbsp;15.15.&nbsp;Adding a 'should run after' task ordering</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}
taskY.shouldRunAfter taskX</pre><p>Output of <strong class="userinput"><code>gradle -q taskY taskX</code></strong></p><pre class="screen">&gt; gradle -q taskY taskX
taskX
taskY</pre></div></div><br class="example-break"><p>In the examples above, it is still possible to execute <code class="literal">taskY</code> without causing <code class="literal">taskX</code> to run:</p><div class="example"><a name="mustRunAfterSingleTask"></a><p class="title"><b>Example&nbsp;15.16.&nbsp;Task ordering does not imply task execution</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q taskY</code></strong></p><pre class="screen">&gt; gradle -q taskY
taskY</pre></div></div><br class="example-break"><p>To specify a "must run after" or "should run after" ordering between 2 tasks, you use the <a class="ulink" href="../dsl/org.gradle.api.Task.html#org.gradle.api.Task:mustRunAfter(java.lang.Object[])" target="_top"><code class="classname">Task.mustRunAfter()</code></a> and <a class="ulink" href="../javadoc/org/gradle/api/Task.html#shouldRunAfter(java.lang.Object[])" target="_top"><code class="classname">Task.shouldRunAfter()</code></a> methods.
            These method accept a task instance, a task name or any other input accepted by <a class="ulink" href="../dsl/org.gradle.api.Task.html#org.gradle.api.Task:dependsOn(java.lang.Object[])" target="_top"><code class="classname">Task.dependsOn()</code></a>.
        </p><p>
            Note that "<code class="literal">B.mustRunAfter(A)</code>" or "<code class="literal">B.shouldRunAfter(A)</code>" does not imply any execution dependency between the tasks:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">It is possible to execute tasks <code class="literal">A</code> and <code class="literal">B</code> independently. The ordering rule only has an effect when both tasks are scheduled for execution.</li><li class="listitem">When run with <code class="literal">--continue</code>, it is possible for <code class="literal">B</code> to execute in the event that <code class="literal">A</code> fails.</li></ul></div><p>As mentioned before 'should run after' ordering rule will be ignored if it introduces an ordering cycle:</p><div class="example"><a name="shouldRunAfterWithCycle"></a><p class="title"><b>Example&nbsp;15.17.&nbsp;A 'should run after' task ordering is ignored if it introduces an ordering cycle</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}
task taskZ &lt;&lt; {
    println <span class="hl-string">'taskZ'</span>
}
taskX.dependsOn taskY
taskY.dependsOn taskZ
taskZ.shouldRunAfter taskX</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
taskZ
taskY
taskX</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10E91"></a>15.6.&nbsp;Adding a description to a task</h2></div></div></div><p>You can add a description to your task. This description is for example displayed when executing
            <strong class="userinput"><code>gradle tasks</code></strong>.
        </p><div class="example"><a name="describeTask"></a><p class="title"><b>Example&nbsp;15.18.&nbsp;Adding a description to a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copy(type: Copy) {
   description <span class="hl-string">'Copies the resource directory to the target directory.'</span>
   from <span class="hl-string">'resources'</span>
   into <span class="hl-string">'target'</span>
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10EA3"></a>15.7.&nbsp;Replacing tasks</h2></div></div></div><p>Sometimes you want to replace a task. For example if you want to exchange a task added by the Java plugin
            with a custom task of a different type. You can achieve this with:
        </p><div class="example"><a name="replaceTask"></a><p class="title"><b>Example&nbsp;15.19.&nbsp;Overwriting a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copy(type: Copy)

task copy(overwrite: true) &lt;&lt; {
    println(<span class="hl-string">'I am the new one.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q copy</code></strong></p><pre class="screen">&gt; gradle -q copy
I am the new one.</pre></div></div><br class="example-break"><p>Here we replace a task of type <code class="literal">Copy</code> with a simple task. When creating the simple
            task, you have to set the <code class="literal">overwrite</code> property to true. Otherwise Gradle throws an
            exception, saying that a task with such a name already exists.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10EC0"></a>15.8.&nbsp;Skipping tasks</h2></div></div></div><p>Gradle offers multiple ways to skip the execution of a task.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10EC5"></a>15.8.1.&nbsp;Using a predicate</h3></div></div></div><p>You can use the <code class="literal">onlyIf()</code> method to attach a predicate to a task. The task's
                actions are only executed if the predicate evaluates to true. You implement the predicate as a closure.
                The closure is passed the task as a parameter, and should return true if the task should execute
                and false if the task should be skipped. The predicate is evaluated just before the task is due
                to be executed.
                </p><div class="example"><a name="taskOnlyIf"></a><p class="title"><b>Example&nbsp;15.20.&nbsp;Skipping a task using a predicate</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'hello world'</span>
}

hello.onlyIf { !project.hasProperty(<span class="hl-string">'skipHello'</span>) }</pre><p>Output of <strong class="userinput"><code>gradle hello -PskipHello</code></strong></p><pre class="screen">&gt; gradle hello -PskipHello
:hello SKIPPED

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10EDD"></a>15.8.2.&nbsp;Using StopExecutionException</h3></div></div></div><p>If the rules for skipping a task can't be expressed with predicate, you can use the
            <a class="ulink" href="../javadoc/org/gradle/api/tasks/StopExecutionException.html" target="_top"><code class="classname">StopExecutionException</code></a>. If this exception is thrown by an action,
            the further execution of this action as well as the execution of
            any following action of this task is skipped. The build continues with executing the next task.
        </p><div class="example"><a name="stopExecutionException"></a><p class="title"><b>Example&nbsp;15.21.&nbsp;Skipping tasks with StopExecutionException</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task compile &lt;&lt; {
    println <span class="hl-string">'We are doing the compile.'</span>
}

compile.doFirst {
    <span class="hl-comment">// Here you would put arbitrary conditions in real life. But we use this as an integration test, so we want defined behavior.</span>
    <span class="hl-keyword">if</span> (true) { <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> StopExecutionException() }
}
task myTask(dependsOn: <span class="hl-string">'compile'</span>) &lt;&lt; {
   println <span class="hl-string">'I am not affected'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q myTask</code></strong></p><pre class="screen">&gt; gradle -q myTask
I am not affected</pre></div></div><br class="example-break"><p>This feature is helpful if you work with tasks provided by Gradle. It allows you to add
            <span class="emphasis"><em>conditional</em></span> execution of the built-in actions of such a task.
            <sup>[<a href="#ftn.N10EFC" name="N10EFC" class="footnote">7</a>]</sup>
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10F06"></a>15.8.3.&nbsp;Enabling and disabling tasks</h3></div></div></div><p>Every task has also an <code class="literal">enabled</code>
            flag which defaults to <code class="literal">true</code>. Setting it to <code class="literal">false</code> prevents the
            execution of any of the task's actions.
        </p><div class="example"><a name="disableTask"></a><p class="title"><b>Example&nbsp;15.22.&nbsp;Enabling and disabling tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task disableMe &lt;&lt; {
    println <span class="hl-string">'This should not be printed if the task is disabled.'</span>
}
disableMe.enabled = false</pre><p>Output of <strong class="userinput"><code>gradle disableMe</code></strong></p><pre class="screen">&gt; gradle disableMe
:disableMe SKIPPED

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:up_to_date_checks"></a>15.9.&nbsp;Skipping tasks that are up-to-date</h2></div></div></div><p>If you are using one of the tasks that come with Gradle, such as a task added by the Java plugin,
            you might have noticed that Gradle will skip tasks that are up-to-date. This behaviour is also available
            for your tasks, not just for built-in tasks.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:task_inputs_outputs"></a>15.9.1.&nbsp;Declaring a task's inputs and outputs</h3></div></div></div><p>
                Let's have a look at an example. Here our task generates several output files from a source XML file. Let's
                run it a couple of times.
            </p><div class="example"><a name="generatorTask"></a><p class="title"><b>Example&nbsp;15.23.&nbsp;A generator task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task transform {
    ext.srcFile = file(<span class="hl-string">'mountains.xml'</span>)
    ext.destDir = <span class="hl-keyword">new</span> File(buildDir, <span class="hl-string">'generated'</span>)
    doLast {
        println <span class="hl-string">"Transforming source file."</span>
        destDir.mkdirs()
        def mountains = <span class="hl-keyword">new</span> XmlParser().parse(srcFile)
        mountains.mountain.each { mountain -&gt;
            def name = mountain.name[<span class="hl-number">0</span>].text()
            def height = mountain.height[<span class="hl-number">0</span>].text()
            def destFile = <span class="hl-keyword">new</span> File(destDir, <span class="hl-string">"${name}.txt"</span>)
            destFile.text = <span class="hl-string">"$name -&gt; ${height}\n"</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle transform</code></strong></p><pre class="screen">&gt; gradle transform
:transform
Transforming source file.</pre><p>Output of <strong class="userinput"><code>gradle transform</code></strong></p><pre class="screen">&gt; gradle transform
:transform
Transforming source file.</pre></div></div><br class="example-break"><p>Notice that Gradle executes this task a second time, and does not skip the task even though nothing has
                changed. Our example task was defined using an action closure. Gradle has no idea what the closure does and
                cannot automatically figure out whether the task is up-to-date or not. To use Gradle's up-to-date checking,
                you need to declare the inputs and outputs of the task.
            </p><p>Each task has an <code class="literal">inputs</code> and <code class="literal">outputs</code> property, which you use to
                declare the inputs and outputs of the task. Below, we have changed our example to declare that it takes
                the source XML file as an input and produces output to a destination directory. Let's run it a couple
                of times.
            </p><div class="example"><a name="incrementalTask"></a><p class="title"><b>Example&nbsp;15.24.&nbsp;Declaring the inputs and outputs of a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task transform {
    ext.srcFile = file(<span class="hl-string">'mountains.xml'</span>)
    ext.destDir = <span class="hl-keyword">new</span> File(buildDir, <span class="hl-string">'generated'</span>)
    inputs.file srcFile
    outputs.dir destDir
    doLast {
        println <span class="hl-string">"Transforming source file."</span>
        destDir.mkdirs()
        def mountains = <span class="hl-keyword">new</span> XmlParser().parse(srcFile)
        mountains.mountain.each { mountain -&gt;
            def name = mountain.name[<span class="hl-number">0</span>].text()
            def height = mountain.height[<span class="hl-number">0</span>].text()
            def destFile = <span class="hl-keyword">new</span> File(destDir, <span class="hl-string">"${name}.txt"</span>)
            destFile.text = <span class="hl-string">"$name -&gt; ${height}\n"</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle transform</code></strong></p><pre class="screen">&gt; gradle transform
:transform
Transforming source file.</pre><p>Output of <strong class="userinput"><code>gradle transform</code></strong></p><pre class="screen">&gt; gradle transform
:transform UP-TO-DATE</pre></div></div><br class="example-break"><p>Now, Gradle knows which files to check to determine whether the task is up-to-date or not.</p><p>
                The task's <code class="literal">inputs</code> property is of type <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskInputs.html" target="_top"><code class="classname">TaskInputs</code></a>.
                The task's <code class="literal">outputs</code> property is of type <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskOutputs.html" target="_top"><code class="classname">TaskOutputs</code></a>.
            </p><p>
                A task with no defined outputs will <span class="emphasis"><em>never</em></span> be considered up-to-date.
                For scenarios where the outputs of a task are not files, or for more complex scenarios, the
                <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskOutputs.html#upToDateWhen(groovy.lang.Closure)" target="_top"><code class="classname">TaskOutputs.upToDateWhen()</code></a> method allows you to calculate programmatically if
                the tasks outputs should be considered up to date.
            </p><p>
                A task with only outputs defined will be considered up-to-date if those outputs are unchanged since the previous build.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N10F86"></a>15.9.2.&nbsp;How does it work?</h3></div></div></div><p>
                Before a task is executed for the first time, Gradle takes a snapshot of the inputs. This snapshot contains
                the set of input files and a hash of the contents of each file. Gradle then executes the task. If the
                task completes successfully, Gradle takes a snapshot of the outputs. This snapshot contains the set of
                output files and a hash of the contents of each file. Gradle persists both snapshots for next time the task
                is executed.
            </p><p>
                Each time after that, before the task is executed, Gradle takes a new snapshot of the inputs and outputs.
                If the new snapshots are the same as the previous snapshots, Gradle assumes that the outputs are up to
                date and skips the task. If they are not the same, Gradle executes the task. Gradle persists both snapshots
                for next time the task is executed.
            </p><p>
                Note that if a task has an output directory specified, any files added to that directory since the last time it was executed
                are ignored and will NOT cause the task to be out of date. This is so unrelated tasks may share an output directory without interfering with each other.
                If this is not the behaviour you want for some reason, consider using <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskOutputs.html#upToDateWhen(groovy.lang.Closure)" target="_top"><code class="classname">TaskOutputs.upToDateWhen()</code></a>
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10F94"></a>15.10.&nbsp;Task rules</h2></div></div></div><p>Sometimes you want to have a task whose behavior depends on a large or infinite number value range
            of parameters. A very nice and expressive way to provide such tasks are task rules:
        </p><div class="example"><a name="taskRule"></a><p class="title"><b>Example&nbsp;15.25.&nbsp;Task rule</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">tasks.addRule(<span class="hl-string">"Pattern: ping&lt;ID&gt;"</span>) { String taskName -&gt;
    <span class="hl-keyword">if</span> (taskName.startsWith(<span class="hl-string">"ping"</span>)) {
        task(taskName) &lt;&lt; {
            println <span class="hl-string">"Pinging: "</span> + (taskName - <span class="hl-string">'ping'</span>)
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q pingServer1</code></strong></p><pre class="screen">&gt; gradle -q pingServer1
Pinging: Server1</pre></div></div><br class="example-break"><p>The String parameter is used as a description for the rule. This description is shown when running
            for example <strong class="userinput"><code>gradle tasks</code></strong>.
        </p><p>Rules not just work when calling tasks from the command line. You can also create dependsOn relations
            on rule based tasks:
        </p><div class="example"><a name="taskRuleDependsOn"></a><p class="title"><b>Example&nbsp;15.26.&nbsp;Dependency on rule based tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">tasks.addRule(<span class="hl-string">"Pattern: ping&lt;ID&gt;"</span>) { String taskName -&gt;
    <span class="hl-keyword">if</span> (taskName.startsWith(<span class="hl-string">"ping"</span>)) {
        task(taskName) &lt;&lt; {
            println <span class="hl-string">"Pinging: "</span> + (taskName - <span class="hl-string">'ping'</span>)
        }
    }
}

task groupPing {
    dependsOn pingServer1, pingServer2
}</pre><p>Output of <strong class="userinput"><code>gradle -q groupPing</code></strong></p><pre class="screen">&gt; gradle -q groupPing
Pinging: Server1
Pinging: Server2</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N10FC0"></a>15.11.&nbsp;Finalizer tasks</h2></div></div></div><div class="note"><p>
                Finalizers tasks are an <em class="firstterm">incubating</em> feature (see <a class="xref" href="#sec:incubating_state">Section&nbsp;C.1.2, &ldquo;Incubating&rdquo;</a>).
            </p></div><p>Finalizer tasks are automatically added to the task graph when the finalized task is scheduled to run.</p><div class="example"><a name="taskFinalizers"></a><p class="title"><b>Example&nbsp;15.27.&nbsp;Adding a task finalizer</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}

taskX.finalizedBy taskY</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
taskX
taskY</pre></div></div><br class="example-break"><p>Finalizer task will be executed even if the finalized task fails.</p><div class="example"><a name="taskFinalizersWithFailure"></a><p class="title"><b>Example&nbsp;15.28.&nbsp;Task finalizer for a failing task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
    <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> RuntimeException()
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}

taskX.finalizedBy taskY</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong></p><pre class="screen">&gt; gradle -q taskX
taskX
taskY</pre></div></div><br class="example-break"><p>On the other hand, finalizer tasks are not executed if the finalized task didn't do any work, for example due to failed
            task dependency or if it's considered up to date.</p><p>Finalizer tasks are useful in situations where build creates a resource that has to be cleaned up regardless
            of the build failing or succeeding. An example of such resource is a web container started before an integration test task
            and which should be always shut down, even if some of the tests fail.</p><p>To specify a finalizer task you use the <a class="ulink" href="../dsl/org.gradle.api.Task.html#org.gradle.api.Task:finalizedBy(java.lang.Object[])" target="_top"><code class="classname">Task.finalizedBy()</code></a> method.
            This method accepts a task instance, a task name or any other input accepted by <a class="ulink" href="../dsl/org.gradle.api.Task.html#org.gradle.api.Task:dependsOn(java.lang.Object[])" target="_top"><code class="classname">Task.dependsOn()</code></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:the_idea_behind_gradle_tasks"></a>15.12.&nbsp;Summary</h2></div></div></div><p>If you are coming from Ant, such an enhanced Gradle task as <span class="emphasis"><em>Copy</em></span> looks like a mixture
            between an Ant target and an Ant task. And this is actually the case. The separation that Ant does between
            tasks and targets is not done by Gradle. The simple Gradle tasks are like Ant's targets and the enhanced
            Gradle tasks also include the Ant task aspects. All of Gradle's tasks share a common API and you can create
            dependencies between them. Such a task might be nicer to configure than an Ant task.
            It makes full use of the type system, is more expressive and easier to maintain.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10EFC" name="ftn.N10EFC" class="para">7</a>] </sup>You might be wondering why there is neither an import for the
                    <code class="literal">StopExecutionException</code>
                    nor do we access it via its fully qualified name. The reason is, that Gradle adds a set of default imports
                    to your script. These imports are customizable (see <a class="xref" href="#ide_support">Appendix&nbsp;E, <i>Existing IDE Support and how to cope without it</i></a>).
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="working_with_files"></a>Chapter&nbsp;16.&nbsp;Working With Files</h1></div></div></div><p>
        Most builds work with files. Gradle adds some concepts and APIs to help you achieve this.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:locating_files"></a>16.1.&nbsp;Locating files</h2></div></div></div><p>You can locate a file relative to the project directory using the
            <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:file(java.lang.Object)" target="_top"><code class="classname">Project.file()</code></a> method.
        </p><div class="example"><a name="resolveFile"></a><p class="title"><b>Example&nbsp;16.1.&nbsp;Locating files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Using a relative path</span>
File configFile = file(<span class="hl-string">'src/config.xml'</span>)

<span class="hl-comment">// Using an absolute path</span>
configFile = file(configFile.absolutePath)

<span class="hl-comment">// Using a File object with a relative path</span>
configFile = file(<span class="hl-keyword">new</span> File(<span class="hl-string">'src/config.xml'</span>))</pre></div></div><br class="example-break"><p>You can pass any object to the <code class="literal">file()</code> method, and it will attempt to convert the value
            to an absolute <code class="classname">File</code> object. Usually, you would pass it a
            <code class="classname">String</code> or <code class="classname">File</code> instance. If this path is an absolute path, it is used
            to construct a <code class="classname">File</code> instance. Otherwise, a <code class="classname">File</code> instance is
            constructed by prepending the project directory path to the supplied path. The <code class="literal">file()</code>
            method also understands URLs, such as <code class="literal">file:/some/path.xml</code>.
        </p><p>Using this method is a useful way to convert some user provided value into an absolute <code class="classname">File</code>.
            It is preferable to using <code class="literal">new File(somePath)</code>, as <code class="literal">file()</code> always evaluates
            the supplied path relative to the project directory, which is fixed, rather than the current working
            directory, which can change depending on how the user runs Gradle.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:file_collections"></a>16.2.&nbsp;File collections</h2></div></div></div><p>
            A <em class="firstterm">file collection</em> is simply a set of files. It is represented by the
            <a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a> interface. Many objects in the Gradle API implement
            this interface. For example, <a class="link" href="#sub:configurations">dependency configurations</a> implement
            <code class="literal">FileCollection</code>.
        </p><p>
            One way to obtain a <code class="literal">FileCollection</code> instance is to use the
            <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:files(java.lang.Object[])" target="_top"><code class="classname">Project.files()</code></a> method. You can pass this method any number of
            objects, which are then converted into a set of <code class="classname">File</code> objects. The
            <code class="literal">files()</code> method accepts any type of object as its parameters. These are evaluated relative
            to the project directory, as per the <code class="literal">file()</code> method, described in <a class="xref" href="#sec:locating_files">Section&nbsp;16.1, &ldquo;Locating files&rdquo;</a>.
            You can also pass collections, iterables, maps and arrays to the <code class="literal">files()</code> method. These are flattened
            and the contents converted to <code class="classname">File</code> instances.
        </p><div class="example"><a name="fileCollections"></a><p class="title"><b>Example&nbsp;16.2.&nbsp;Creating a file collection</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">FileCollection collection = files(<span class="hl-string">'src/file1.txt'</span>, <span class="hl-keyword">new</span> File(<span class="hl-string">'src/file2.txt'</span>), [<span class="hl-string">'src/file3.txt'</span>, <span class="hl-string">'src/file4.txt'</span>])</pre></div></div><br class="example-break"><p>A file collection is iterable, and can be converted to a number of other types using the <code class="literal">as</code>
            operator. You can also add 2 file collections together using the <code class="literal">+</code> operator, or subtract one
            file collection from another using the <code class="literal">-</code> operator.
            Here are some examples of what you can do with a file collection.
        </p><div class="example"><a name="fileCollections"></a><p class="title"><b>Example&nbsp;16.3.&nbsp;Using a file collection</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Iterate over the files in the collection</span>
collection.each {File file -&gt;
    println file.name
}

<span class="hl-comment">// Convert the collection to various types</span>
Set set = collection.files
Set set2 = collection as Set
List list = collection as List
String path = collection.asPath
File file = collection.singleFile
File file2 = collection as File

<span class="hl-comment">// Add and subtract collections</span>
def union = collection + files(<span class="hl-string">'src/file3.txt'</span>)
def different = collection - files(<span class="hl-string">'src/file3.txt'</span>)</pre></div></div><br class="example-break"><p>You can also pass the <code class="literal">files()</code> method a closure or a <code class="classname">Callable</code>
            instance. This is called when the contents of the collection are queried, and its return value is converted
            to a set of <code class="classname">File</code> instances. The return value can be an object of any of the types
            supported by the <code class="literal">files()</code> method. This is a simple way to 'implement' the
            <code class="classname">FileCollection</code> interface.
        </p><div class="example"><a name="fileCollections"></a><p class="title"><b>Example&nbsp;16.4.&nbsp;Implementing a file collection</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task list &lt;&lt; {
    File srcDir

    <span class="hl-comment">// Create a file collection using a closure</span>
    collection = files { srcDir.listFiles() }

    srcDir = file(<span class="hl-string">'src'</span>)
    println <span class="hl-string">"Contents of $srcDir.name"</span>
    collection.collect { relativePath(it) }.sort().each { println it }

    srcDir = file(<span class="hl-string">'src2'</span>)
    println <span class="hl-string">"Contents of $srcDir.name"</span>
    collection.collect { relativePath(it) }.sort().each { println it }
}</pre><p>Output of <strong class="userinput"><code>gradle -q list</code></strong></p><pre class="screen">&gt; gradle -q list
Contents of src
src/dir1
src/file1.txt
Contents of src2
src2/dir1
src2/dir2</pre></div></div><br class="example-break"><p>
            Some other types of things you can pass to <code class="literal">files()</code>:
        </p><div class="variablelist"><dl><dt><span class="term"><code class="classname">FileCollection</code></span></dt><dd><p>These are flattened and the contents included in the file collection.</p></dd><dt><span class="term"><code class="classname">Task</code></span></dt><dd><p>The output files of the task are included in the file collection.</p></dd><dt><span class="term"><code class="classname">TaskOutputs</code></span></dt><dd><p>The output files of the TaskOutputs are included in the file collection.</p></dd></dl></div><p>It is important to note that the content of a file collection is evaluated lazily, when it is needed.
            This means you can, for example, create a <code class="literal">FileCollection</code> that represents files which
            will be created in the future by, say, some task.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:file_trees"></a>16.3.&nbsp;File trees</h2></div></div></div><p>
            A <em class="firstterm">file tree</em> is a collection of files arranged in a hierarchy. For example, a file tree
            might represent a directory tree or the contents of a ZIP file. It is represented
            by the <a class="ulink" href="../javadoc/org/gradle/api/file/FileTree.html" target="_top"><code class="classname">FileTree</code></a> interface. The <code class="literal">FileTree</code> interface
            extends <code class="literal">FileCollection</code>, so you can treat a file tree exactly the same way as you would a
            file collection. Several objects in Gradle implement the <code class="literal">FileTree</code> interface, such as
            <a class="link" href="#sec:source_sets">source sets</a>.
        </p><p>
            One way to obtain a <code class="literal">FileTree</code> instance is to use the
            <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:fileTree(java.util.Map)" target="_top"><code class="classname">Project.fileTree()</code></a> method.
            This creates a <code class="literal">FileTree</code> defined with a base directory, and optionally some Ant-style
            include and exclude patterns.
        </p><div class="example"><a name="fileTrees"></a><p class="title"><b>Example&nbsp;16.5.&nbsp;Creating a file tree</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Create a file tree with a base directory</span>
FileTree tree = fileTree(dir: <span class="hl-string">'src/main'</span>)

<span class="hl-comment">// Add include and exclude patterns to the tree</span>
tree.include <span class="hl-string">'**/*.java'</span>
tree.exclude <span class="hl-string">'**/Abstract*'</span>

<span class="hl-comment">// Create a tree using path</span>
tree = fileTree(<span class="hl-string">'src'</span>).include(<span class="hl-string">'**/*.java'</span>)

<span class="hl-comment">// Create a tree using closure</span>
tree = fileTree(<span class="hl-string">'src'</span>) {
    include <span class="hl-string">'**/*.java'</span>
}

<span class="hl-comment">// Create a tree using a map</span>
tree = fileTree(dir: <span class="hl-string">'src'</span>, include: <span class="hl-string">'**/*.java'</span>)
tree = fileTree(dir: <span class="hl-string">'src'</span>, includes: [<span class="hl-string">'**/*.java'</span>, <span class="hl-string">'**/*.xml'</span>])
tree = fileTree(dir: <span class="hl-string">'src'</span>, include: <span class="hl-string">'**/*.java'</span>, exclude: <span class="hl-string">'**/*test*/**'</span>)</pre></div></div><br class="example-break"><p>You use a file tree in the same way you use a file collection. You can also visit the contents of the
            tree, and select a sub-tree using Ant-style patterns:
        </p><div class="example"><a name="fileTrees"></a><p class="title"><b>Example&nbsp;16.6.&nbsp;Using a file tree</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Iterate over the contents of a tree</span>
tree.each {File file -&gt;
    println file
}

<span class="hl-comment">// Filter a tree</span>
FileTree filtered = tree.matching {
    include <span class="hl-string">'org/gradle/api/**'</span>
}

<span class="hl-comment">// Add trees together</span>
FileTree sum = tree + fileTree(dir: <span class="hl-string">'src/test'</span>)

<span class="hl-comment">// Visit the elements of the tree</span>
tree.visit {element -&gt;
    println <span class="hl-string">"$element.relativePath =&gt; $element.file"</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:archive_contents"></a>16.4.&nbsp;Using the contents of an archive as a file tree</h2></div></div></div><p>You can use the contents of an archive, such as a ZIP or TAR file, as a file tree. You do this using
            the <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:zipTree(java.lang.Object)" target="_top"><code class="classname">Project.zipTree()</code></a> and
            <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:tarTree(java.lang.Object)" target="_top"><code class="classname">Project.tarTree()</code></a> methods. These methods return a <code class="literal">FileTree</code>
            instance which you can use like any other file tree or file collection. For example, you can use it to expand
            the archive by copying the contents, or to merge some archives into another.
        </p><div class="example"><a name="fileTrees"></a><p class="title"><b>Example&nbsp;16.7.&nbsp;Using an archive as a file tree</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Create a ZIP file tree using path</span>
FileTree zip = zipTree(<span class="hl-string">'someFile.zip'</span>)

<span class="hl-comment">// Create a TAR file tree using path</span>
FileTree tar = tarTree(<span class="hl-string">'someFile.tar'</span>)

<span class="hl-comment">//tar tree attempts to guess the compression based on the file extension</span>
<span class="hl-comment">//however if you must specify the compression explicitly you can:</span>
FileTree someTar = tarTree(resources.gzip(<span class="hl-string">'someTar.ext'</span>))</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:specifying_multiple_files"></a>16.5.&nbsp;Specifying a set of input files</h2></div></div></div><p>Many objects in Gradle have properties which accept a set of input files. For example, the
            <a class="ulink" href="../dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_top"><code class="classname">JavaCompile</code></a> task has a <code class="literal">source</code> property,
            which defines the source files to compile. You can set the value of this property using any of the types
            supported by the <a class="link" href="#sec:file_collections">files()</a> method, which was shown above.
            This means you can set the property using, for example, a <code class="classname">File</code>, <code class="classname">String</code>,
            collection, <code class="classname">FileCollection</code> or even a closure.
            Here are some examples:
        </p><div class="example"><a name="inputFiles"></a><p class="title"><b>Example&nbsp;16.8.&nbsp;Specifying a set of files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Use a File object to specify the source directory</span>
compile {
    source = file(<span class="hl-string">'src/main/java'</span>)
}

<span class="hl-comment">// Use a String path to specify the source directory</span>
compile {
    source = <span class="hl-string">'src/main/java'</span>
}

<span class="hl-comment">// Use a collection to specify multiple source directories</span>
compile {
    source = [<span class="hl-string">'src/main/java'</span>, <span class="hl-string">'../shared/java'</span>]
}

<span class="hl-comment">// Use a FileCollection (or FileTree in this case) to specify the source files</span>
compile {
    source = fileTree(dir: <span class="hl-string">'src/main/java'</span>).matching { include <span class="hl-string">'org/gradle/api/**'</span> }
}

<span class="hl-comment">// Using a closure to specify the source files.</span>
compile {
    source = {
        <span class="hl-comment">// Use the contents of each zip file in the src dir</span>
        file(<span class="hl-string">'src'</span>).listFiles().findAll {it.name.endsWith(<span class="hl-string">'.zip'</span>)}.collect { zipTree(it) }
    }
}</pre></div></div><br class="example-break"><p>Usually, there is a method with the same name as the property, which appends to the set of files. Again,
            this method accepts any of the types supported by the <a class="link" href="#sec:file_collections">files()</a>
            method.
        </p><div class="example"><a name="inputFiles"></a><p class="title"><b>Example&nbsp;16.9.&nbsp;Specifying a set of files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">compile {
    <span class="hl-comment">// Add some source directories use String paths</span>
    source <span class="hl-string">'src/main/java'</span>, <span class="hl-string">'src/main/groovy'</span>

    <span class="hl-comment">// Add a source directory using a File object</span>
    source file(<span class="hl-string">'../shared/java'</span>)

    <span class="hl-comment">// Add some source directories using a closure</span>
    source { file(<span class="hl-string">'src/test/'</span>).listFiles() }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:copying_files"></a>16.6.&nbsp;Copying files</h2></div></div></div><p>You can use the <a class="ulink" href="../dsl/org.gradle.api.tasks.Copy.html" target="_top"><code class="classname">Copy</code></a> task to copy files. The copy task is very flexible, and allows
            you to, for example, filter the contents of the files as they are copied, and map to the file names.
        </p><p>To use the <code class="literal">Copy</code> task, you must provide a set of source files to copy, and a destination directory to copy
            the files to. You may also specify how to transform the files as they are copied. You do all this using a
            <em class="firstterm">copy spec</em>. A copy spec is represented by the <a class="ulink" href="../javadoc/org/gradle/api/file/CopySpec.html" target="_top"><code class="classname">CopySpec</code></a> interface. The
            <code class="literal">Copy</code> task implements this interface.
            You specify the source files using the <a class="ulink" href="../javadoc/org/gradle/api/file/CopySpec.html#from(java.lang.Object[])" target="_top"><code class="classname">CopySpec.from()</code></a>
            method. To specify the destination directory, use the <a class="ulink" href="../javadoc/org/gradle/api/file/CopySpec.html#into(java.lang.Object)" target="_top"><code class="classname">CopySpec.into()</code></a>
            method.
        </p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;16.10.&nbsp;Copying files using the copy task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copyTask(type: Copy) {
    from <span class="hl-string">'src/main/webapp'</span>
    into <span class="hl-string">'build/explodedWar'</span>
}</pre></div></div><br class="example-break"><p>The <code class="literal">from()</code> method accepts any of the arguments that the
            <a class="link" href="#sec:file_collections">files()</a> method does. When an argument resolves to a directory,
            everything under that directory (but not the directory itself) is recursively copied into the destination
            directory. When an argument resolves to a file, that file is copied into the destination directory.
            When an argument resolves to a non-existing file, that argument is ignored. If the argument is
            a task, the output files (i.e. the files the task creates) of the task are copied and the task is automatically
            added as a dependency of the <code class="literal">Copy</code> task.
            The <code class="literal">into()</code> accepts
            any of the arguments that the <a class="link" href="#sec:locating_files">file()</a> method does. Here is another
            example:
        </p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;16.11.&nbsp;Specifying copy task source files and destination directory</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task anotherCopyTask(type: Copy) {
    <span class="hl-comment">// Copy everything under src/main/webapp</span>
    from <span class="hl-string">'src/main/webapp'</span>
    <span class="hl-comment">// Copy a single file</span>
    from <span class="hl-string">'src/staging/index.html'</span>
    <span class="hl-comment">// Copy the output of a task</span>
    from copyTask
    <span class="hl-comment">// Copy the output of a task using Task outputs explicitly.</span>
    from copyTaskWithPatterns.outputs
    <span class="hl-comment">// Copy the contents of a Zip file</span>
    from zipTree(<span class="hl-string">'src/main/assets.zip'</span>)
    <span class="hl-comment">// Determine the destination directory later</span>
    into { getDestDir() }
}</pre></div></div><br class="example-break"><p>You can select the files to copy using Ant-style include or exclude patterns, or using a closure:</p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;16.12.&nbsp;Selecting the files to copy</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copyTaskWithPatterns(type: Copy) {
    from <span class="hl-string">'src/main/webapp'</span>
    into <span class="hl-string">'build/explodedWar'</span>
    include <span class="hl-string">'**/*.html'</span>
    include <span class="hl-string">'**/*.jsp'</span>
    exclude { details -&gt; details.file.name.endsWith(<span class="hl-string">'.html'</span>) &amp;&amp; details.file.text.contains(<span class="hl-string">'staging'</span>) }
}</pre></div></div><br class="example-break"><p>You can also use the <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:copy(groovy.lang.Closure)" target="_top"><code class="classname">Project.copy()</code></a> method to copy files. It works the
            same way as the task with some major limitations though. First, the <code class="literal">copy()</code> is not incremental
            (see <a class="xref" href="#sec:up_to_date_checks">Section&nbsp;15.9, &ldquo;Skipping tasks that are up-to-date&rdquo;</a>).
        </p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;16.13.&nbsp;Copying files using the copy() method without up-to-date check</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copyMethod &lt;&lt; {
    copy {
        from <span class="hl-string">'src/main/webapp'</span>
        into <span class="hl-string">'build/explodedWar'</span>
        include <span class="hl-string">'**/*.html'</span>
        include <span class="hl-string">'**/*.jsp'</span>
    }
}</pre></div></div><br class="example-break"><p>Secondly, the <code class="literal">copy()</code> method can not honor task dependencies when a task is used as a copy source
            (i.e. as an argument to <code class="literal">from()</code>) because it's a method and not a task.
            As such, if you are using the <code class="literal">copy()</code> method as part of a task action, you must explicitly
            declare all inputs and outputs in order to get the correct behavior.
        </p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;16.14.&nbsp;Copying files using the copy() method with up-to-date check</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copyMethodWithExplicitDependencies{
    inputs.file copyTask <span class="hl-comment">// up-to-date check for inputs, plus add copyTask as dependency</span>
    outputs.dir <span class="hl-string">'some-dir'</span> <span class="hl-comment">// up-to-date check for outputs</span>
    doLast{
        copy {
            <span class="hl-comment">// Copy the output of copyTask</span>
            from copyTask
            into <span class="hl-string">'some-dir'</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
            It is preferable to use the <code class="literal">Copy</code> task wherever possible, as it support incremental building and task dependency inference
            without any extra effort on your part. The <code class="literal">copy()</code> method can be used to copy files as <span class="emphasis"><em>part</em></span> of a task's
            implementation. That is, the copy method is intended to be used by custom tasks (see <a class="xref" href="#custom_tasks">Chapter&nbsp;57, <i>Writing Custom Task Classes</i></a>) that need to copy files
            as part of their function. In such a scenario, the custom task should sufficiently declare the inputs/outputs relevant to the copy action.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N111FE"></a>16.6.1.&nbsp;Renaming files</h3></div></div></div><div class="example"><a name="renameOnCopy"></a><p class="title"><b>Example&nbsp;16.15.&nbsp;Renaming files as they are copied</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task rename(type: Copy) {
    from <span class="hl-string">'src/main/webapp'</span>
    into <span class="hl-string">'build/explodedWar'</span>
    <span class="hl-comment">// Use a closure to map the file name</span>
    rename { String fileName -&gt;
        fileName.replace(<span class="hl-string">'-staging-'</span>, <span class="hl-string">''</span>)
    }
    <span class="hl-comment">// Use a regular expression to map the file name</span>
    rename <span class="hl-string">'(.+)-staging-(.+)'</span>, <span class="hl-string">'$1$2'</span>
    rename(/(.+)-staging-(.+)/, <span class="hl-string">'$1$2'</span>)
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1120B"></a>16.6.2.&nbsp;Filtering files</h3></div></div></div><div class="example"><a name="filterOnCopy"></a><p class="title"><b>Example&nbsp;16.16.&nbsp;Filtering files as they are copied</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-keyword">import</span> org.apache.tools.ant.filters.FixCrLfFilter
<span class="hl-keyword">import</span> org.apache.tools.ant.filters.ReplaceTokens

task filter(type: Copy) {
    from <span class="hl-string">'src/main/webapp'</span>
    into <span class="hl-string">'build/explodedWar'</span>
    <span class="hl-comment">// Substitute property references in files</span>
    expand(copyright: <span class="hl-string">'2009'</span>, version: <span class="hl-string">'2.3.1'</span>)
    expand(project.properties)
    <span class="hl-comment">// Use some of the filters provided by Ant</span>
    filter(FixCrLfFilter)
    filter(ReplaceTokens, tokens: [copyright: <span class="hl-string">'2009'</span>, version: <span class="hl-string">'2.3.1'</span>])
    <span class="hl-comment">// Use a closure to filter each line</span>
    filter { String line -&gt;
        <span class="hl-string">"[$line]"</span>
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N11218"></a>16.6.3.&nbsp;Using the <code class="classname">CopySpec</code> class</h3></div></div></div><p>Copy specs form a hierarchy. A copy spec inherits its destination path, include patterns, exclude patterns, copy actions,
                name mappings and filters.</p><div class="example"><a name="nestedCopySpecs"></a><p class="title"><b>Example&nbsp;16.17.&nbsp;Nested copy specs</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task nestedSpecs(type: Copy) {
    into <span class="hl-string">'build/explodedWar'</span>
    exclude <span class="hl-string">'**/*staging*'</span>
    from(<span class="hl-string">'src/dist'</span>) {
        include <span class="hl-string">'**/*.html'</span>
    }
    into(<span class="hl-string">'libs'</span>) {
        from configurations.runtime
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:sync_task"></a>16.7.&nbsp;Using the <code class="literal">Sync</code> task</h2></div></div></div><p>The <a class="ulink" href="../dsl/org.gradle.api.tasks.Sync.html" target="_top"><code class="classname">Sync</code></a> task extends the <code class="literal">Copy</code> task. When it
            executes, it copies the source files into the destination directory, and then removes any files from the
            destination directory which it did not copy. This can be useful for doing things such as installing your
            application, creating an exploded copy of your archives, or maintaining a copy of the project's dependencies.
        </p><p>Here is an example which maintains a copy of the project's runtime dependencies in the <code class="filename">build/libs</code>
            directory.</p><div class="example"><a name="syncDependencies"></a><p class="title"><b>Example&nbsp;16.18.&nbsp;Using the Sync task to copy dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task libs(type: Sync) {
    from configurations.runtime
    into <span class="hl-string">"$buildDir/libs"</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:archives"></a>16.8.&nbsp;Creating archives</h2></div></div></div><p>
            A project can have as many as JAR archives as you want. You can also add WAR, ZIP and TAR archives to your project.
            Archives are created using the various archive tasks:
            <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>,
            <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Tar.html" target="_top"><code class="classname">Tar</code></a>,
            <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Jar.html" target="_top"><code class="classname">Jar</code></a>,
            <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.War.html" target="_top"><code class="classname">War</code></a>, and
            <a class="ulink" href="../dsl/org.gradle.plugins.ear.Ear.html" target="_top"><code class="classname">Ear</code></a>.
            They all work the same way, so let's look at how you create a ZIP file.
        </p><div class="example"><a name="createZip"></a><p class="title"><b>Example&nbsp;16.19.&nbsp;Creating a ZIP archive</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>

task zip(type: Zip) {
    from <span class="hl-string">'src/dist'</span>
    into(<span class="hl-string">'libs'</span>) {
        from configurations.runtime
    }
}</pre></div></div><br class="example-break"><div class="tip"><h3 class="title">Why are you using the Java plugin?</h3><p>The Java plugin adds a number of default values for the archive tasks. You can use the archive
                tasks without using the Java plugin, if you like. You will need to provide values for some additional
                properties.
            </p></div><p>
            The archive tasks all work exactly the same way as the <code class="literal">Copy</code> task, and implement the same
            <code class="classname">CopySpec</code> interface. As with the <code class="literal">Copy</code> task, you specify the input
            files using the <code class="literal">from()</code> method, and can optionally specify where they end up in the
            archive using the <code class="literal">into()</code> method. You can filter the contents of file, rename files, and
            all the other things you can do with a copy spec.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N11289"></a>16.8.1.&nbsp;Archive naming</h3></div></div></div><p>The default name for a generated archive is <code class="filename"><em class="replaceable"><code>projectName</code></em>-<em class="replaceable"><code>version</code></em>.<em class="replaceable"><code>type</code></em></code>
                For example:
            </p><div class="example"><a name="archiveNaming"></a><p class="title"><b>Example&nbsp;16.20.&nbsp;Creation of ZIP archive</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>

version = <span class="hl-number">1.0</span>

task myZip(type: Zip) {
    from <span class="hl-string">'somedir'</span>
}

println myZip.archiveName
println relativePath(myZip.destinationDir)
println relativePath(myZip.archivePath)</pre><p>Output of <strong class="userinput"><code>gradle -q myZip</code></strong></p><pre class="screen">&gt; gradle -q myZip
zipProject-1.0.zip
build/distributions
build/distributions/zipProject-1.0.zip</pre></div></div><br class="example-break"><p>This adds a <code class="classname">Zip</code> archive task with the name <code class="literal">myZip</code> which produces
                ZIP file <code class="filename">zipProject-1.0.zip</code>. It is important to distinguish between the name of the archive task
                and the name of the archive generated by the archive task. The default name for archives can be
                changed with the <code class="literal">archivesBaseName</code> project property. The name of the archive can also be
                changed at any time later on.</p><p>There are a number of properties which you can set on an archive task. These are listed below in <a class="xref" href="#archiveTasksNamingProperties" title="Table&nbsp;16.1.&nbsp;Archive tasks - naming properties">Table&nbsp;16.1, &ldquo;Archive tasks - naming properties&rdquo;</a>.
                You can, for example, change the name of the archive:
            </p><div class="example"><a name="zipWithCustomName"></a><p class="title"><b>Example&nbsp;16.21.&nbsp;Configuration of archive task - custom archive name</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>
version = <span class="hl-number">1.0</span>

task myZip(type: Zip) {
    from <span class="hl-string">'somedir'</span>
    baseName = <span class="hl-string">'customName'</span>
}

println myZip.archiveName</pre><p>Output of <strong class="userinput"><code>gradle -q myZip</code></strong></p><pre class="screen">&gt; gradle -q myZip
customName-1.0.zip</pre></div></div><br class="example-break"><p>You can further customize the archive names:</p><div class="example"><a name="zipWithArguments"></a><p class="title"><b>Example&nbsp;16.22.&nbsp;Configuration of archive task - appendix &amp; classifier</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>
archivesBaseName = <span class="hl-string">'gradle'</span>
version = <span class="hl-number">1.0</span>

task myZip(type: Zip) {
    appendix = <span class="hl-string">'wrapper'</span>
    classifier = <span class="hl-string">'src'</span>
    from <span class="hl-string">'somedir'</span>
}

println myZip.archiveName</pre><p>Output of <strong class="userinput"><code>gradle -q myZip</code></strong></p><pre class="screen">&gt; gradle -q myZip
gradle-wrapper-1.0-src.zip</pre></div></div><br class="example-break"><div class="table"><p class="title"><b>Table&nbsp;16.1.&nbsp;Archive tasks - naming properties</b></p><div class="table-contents"><table id="archiveTasksNamingProperties"><thead><tr>
                        <td>Property name</td>
                        <td>Type</td>
                        <td>Default value</td>
                        <td>Description</td>
                    </tr></thead><tr>
                    <td><code class="literal">archiveName</code></td>
                    <td><code class="classname">String</code></td>
                    <td>
                        <code class="filename"><em class="replaceable"><code>baseName</code></em>-<em class="replaceable"><code>appendix</code></em>-<em class="replaceable"><code>version</code></em>-<em class="replaceable"><code>classifier</code></em>.<em class="replaceable"><code>extension</code></em></code>
                        <p>If any of these properties is empty the trailing <code class="filename">-</code> is not added to the name.</p>
                    </td>
                    <td>The base file name of the generated archive</td>
                </tr><tr>
                    <td><code class="literal">archivePath</code></td>
                    <td><code class="classname">File</code></td>
                    <td><code class="filename"><em class="replaceable"><code>destinationDir</code></em>/<em class="replaceable"><code>archiveName</code></em></code></td>
                    <td>The absolute path of the generated archive.</td>
                </tr><tr>
                    <td><code class="literal">destinationDir</code></td>
                    <td><code class="classname">File</code></td>
                    <td>Depends on the archive type. JARs and WARs are generated into <code class="filename"><em class="replaceable"><code>project.buildDir</code></em>/libraries</code>.
                        ZIPs and TARs are generated into <code class="filename"><em class="replaceable"><code>project.buildDir</code></em>/distributions</code>.
                    </td>
                    <td>The directory to generate the archive into</td>
                </tr><tr>
                    <td><code class="literal">baseName</code></td>
                    <td><code class="classname">String</code></td>
                    <td><code class="filename"><em class="replaceable"><code>project.name</code></em></code></td>
                    <td>The base name portion of the archive file name.</td>
                </tr><tr>
                    <td><code class="literal">appendix</code></td>
                    <td><code class="classname">String</code></td>
                    <td><code class="literal">null</code></td>
                    <td>The appendix portion of the archive file name.</td>
                </tr><tr>
                    <td><code class="literal">version</code></td>
                    <td><code class="classname">String</code></td>
                    <td><code class="filename"><em class="replaceable"><code>project.version</code></em></code></td>
                    <td>The version portion of the archive file name.</td>
                </tr><tr>
                    <td><code class="literal">classifier</code></td>
                    <td><code class="classname">String</code></td>
                    <td><code class="literal">null</code></td>
                    <td>The classifier portion of the archive file name,</td>
                </tr><tr>
                    <td><code class="literal">extension</code></td>
                    <td><code class="classname">String</code></td>
                    <td>Depends on the archive type, and for TAR files, the compression type as well: <code class="filename">zip</code>, <code class="filename">jar</code>,
                        <code class="filename">war</code>, <code class="filename">tar</code>, <code class="filename">tgz</code> or <code class="filename">tbz2</code>.</td>
                    <td>The extension of the archive file name.</td>
                </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N113AD"></a>16.8.2.&nbsp;Sharing content between multiple archives</h3></div></div></div><p>You can use the <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:copySpec(groovy.lang.Closure)" target="_top"><code class="classname">Project.copySpec()</code></a> method to share content between archives.</p></div><p>Often you will want to publish an archive, so that it is usable from another project. This process is
            described in <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="ant"></a>Chapter&nbsp;17.&nbsp;Using Ant from Gradle</h1></div></div></div><p>Gradle provides excellent integration with Ant. You can use individual Ant tasks or entire Ant builds in your
        Gradle builds. In fact, you will find that it's far easier and more powerful using Ant tasks in a Gradle build
        script, than it is to use Ant's XML format. You could even use Gradle simply as a powerful Ant task scripting
        tool.
    </p><p>Ant can be divided into two layers. The first layer is the Ant language. It provides the syntax for the
        <code class="filename">build.xml</code>, the handling of the targets, special constructs like macrodefs, and so on.
        In other words, everything except the Ant tasks and types. Gradle understands this language, and allows you to
        import your Ant <code class="filename">build.xml</code> directly into a Gradle project. You can then use the targets of
        your Ant build as if they were Gradle tasks.
    </p><p>The second layer of Ant is its wealth of Ant tasks and types, like <code class="literal">javac</code>,
        <code class="literal">copy</code> or <code class="literal">jar</code>. For this layer Gradle provides integration
        simply by relying on Groovy, and the fantastic <code class="literal">AntBuilder</code>.
    </p><p>Finally, since build scripts are Groovy scripts, you can always execute an Ant build as an external process.
        Your build script may contain statements like:<code class="literal">"ant clean compile".execute()</code>.
        <sup>[<a href="#ftn.N113DF" name="N113DF" class="footnote">8</a>]</sup>
    </p><p>You can use Gradle's Ant integration as a path for migrating your build from Ant to Gradle. For example, you
        could start by importing your existing Ant build. Then you could move your dependency declarations from the Ant
        script to your build file. Finally, you could move your tasks across to your build file, or replace them with
        some of Gradle's plugins. This process can be done in parts over time, and you can have a working Gradle build
        during the entire process.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N113E5"></a>17.1.&nbsp;Using Ant tasks and types in your build</h2></div></div></div><p>In your build script, a property called <code class="literal">ant</code> is provided by Gradle. This is a reference
            to an <a class="ulink" href="../javadoc/org/gradle/api/AntBuilder.html" target="_top"><code class="classname">AntBuilder</code></a> instance. This <code class="literal">AntBuilder</code> is used to
            access Ant tasks, types and properties from your build script. There is a very simple mapping from Ant's
            <code class="filename">build.xml</code> format to Groovy, which is explained below.
        </p><p>You execute an Ant task by calling a method on the <code class="literal">AntBuilder</code> instance. You use the task
            name as the method name. For example, you execute the Ant <code class="literal">echo</code> task by calling the
            <code class="literal">ant.echo()</code> method. The attributes of the Ant task are passed as Map parameters to the
            method. Below is an example which executes the <code class="literal">echo</code> task. Notice that we can also mix
            Groovy code and the Ant task markup. This can be extremely powerful.</p><div class="example"><a name="useAntTask"></a><p class="title"><b>Example&nbsp;17.1.&nbsp;Using an Ant task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    String greeting = <span class="hl-string">'hello from Ant'</span>
    ant.echo(message: greeting)
}</pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong></p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] hello from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            You pass nested text to an Ant task by passing it as a parameter of the task method call. In this example, we
            pass the message for the <code class="literal">echo</code> task as nested text:
        </p><div class="example"><a name="taskWithNestedText"></a><p class="title"><b>Example&nbsp;17.2.&nbsp;Passing nested text to an Ant task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    ant.echo(<span class="hl-string">'hello from Ant'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong></p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] hello from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You pass nested elements to an Ant task inside a closure. Nested elements are defined in the same way
            as tasks, by calling a method with the same name as the element we want to define.</p><div class="example"><a name="taskWithNestedElements"></a><p class="title"><b>Example&nbsp;17.3.&nbsp;Passing nested elements to an Ant task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task zip &lt;&lt; {
    ant.zip(destfile: <span class="hl-string">'archive.zip'</span>) {
        fileset(dir: <span class="hl-string">'src'</span>) {
            include(name: <span class="hl-string">'**.xml'</span>)
            exclude(name: <span class="hl-string">'**.java'</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>You can access Ant types in the same way that you access tasks, using the name of the type as the
            method name. The method call returns the Ant data type, which you can then use directly in your build script. In the
            following example, we create an Ant <code class="literal">path</code> object, then iterate over the contents of it.</p><div class="example"><a name="useAntType"></a><p class="title"><b>Example&nbsp;17.4.&nbsp;Using an Ant type</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task list &lt;&lt; {
    def path = ant.path {
        fileset(dir: <span class="hl-string">'libs'</span>, includes: <span class="hl-string">'*.jar'</span>)
    }
    path.list().each {
        println it
    }
}</pre></div></div><br class="example-break"><p>More information about <code class="literal">AntBuilder</code> can be found in 'Groovy in Action' 8.4 or at the
            <a class="ulink" href="http://groovy.codehaus.org/Using+Ant+from+Groovy" target="_top">Groovy Wiki</a>
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1144F"></a>17.1.1.&nbsp;Using custom Ant tasks in your build</h3></div></div></div><p>To make custom tasks available in your build,
                you can use the <code class="literal">taskdef</code> (usually easier) or <code class="literal">typedef</code> Ant task,
                just as you would in a <code class="literal">build.xml</code> file. You can then refer to the custom Ant task as you
                would a built-in Ant task.
            </p><div class="example"><a name="useExternalAntTask"></a><p class="title"><b>Example&nbsp;17.5.&nbsp;Using a custom Ant task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task check &lt;&lt; {
    ant.taskdef(resource: <span class="hl-string">'checkstyletask.properties'</span>) {
        classpath {
            fileset(dir: <span class="hl-string">'libs'</span>, includes: <span class="hl-string">'*.jar'</span>)
        }
    }
    ant.checkstyle(config: <span class="hl-string">'checkstyle.xml'</span>) {
        fileset(dir: <span class="hl-string">'src'</span>)
    }
}</pre></div></div><br class="example-break"><p>
                You can use Gradle's dependency management to assemble the classpath to use for the custom tasks.
                To do this, you need to define a custom configuration for the classpath, then add some dependencies 
                to the configuration. This is described in more detail in <a class="xref" href="#sec:how_to_declare_your_dependencies">Section&nbsp;50.4, &ldquo;How to declare your dependencies&rdquo;</a>.
            </p><div class="example"><a name="useExternalAntTaskWithConfig"></a><p class="title"><b>Example&nbsp;17.6.&nbsp;Declaring the classpath for a custom Ant task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    pmd
}

dependencies {
    pmd group: <span class="hl-string">'pmd'</span>, name: <span class="hl-string">'pmd'</span>, version: <span class="hl-string">'4.2.5'</span>
}</pre></div></div><br class="example-break"><p>To use the classpath configuration, use the <code class="literal">asPath</code> property of the custom configuration.</p><div class="example"><a name="useExternalAntTaskWithConfig"></a><p class="title"><b>Example&nbsp;17.7.&nbsp;Using a custom Ant task and dependency management together</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task check &lt;&lt; {
    ant.taskdef(name: <span class="hl-string">'pmd'</span>, classname: <span class="hl-string">'net.sourceforge.pmd.ant.PMDTask'</span>, classpath: configurations.pmd.asPath)
    ant.pmd(shortFilenames: <span class="hl-string">'true'</span>, failonruleviolation: <span class="hl-string">'true'</span>, rulesetfiles: file(<span class="hl-string">'pmd-rules.xml'</span>).toURI().toString()) {
        formatter(type: <span class="hl-string">'text'</span>, toConsole: <span class="hl-string">'true'</span>)
        fileset(dir: <span class="hl-string">'src'</span>)
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11485"></a>17.2.&nbsp;Importing an Ant build</h2></div></div></div><p>You can use the <code class="literal">ant.importBuild()</code> method to import an Ant build into your Gradle
            project. When you import an Ant build, each Ant target is treated as a Gradle task. This means you can
            manipulate and execute the Ant targets in exactly the same way as Gradle tasks.
        </p><div class="example"><a name="antHello"></a><p class="title"><b>Example&nbsp;17.8.&nbsp;Importing an Ant build</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span></pre><p><code class="filename">build.xml</code></p><pre class="programlisting"><span class="hl-tag">&lt;project&gt;</span>
    <span class="hl-tag">&lt;target</span> <span class="hl-attribute">name</span>=<span class="hl-value">"hello"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;echo&gt;</span>Hello, from Ant<span class="hl-tag">&lt;/echo&gt;</span>
    <span class="hl-tag">&lt;/target&gt;</span>
<span class="hl-tag">&lt;/project&gt;</span></pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong></p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] Hello, from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can add a task which depends on an Ant target:
        </p><div class="example"><a name="dependsOnAntTarget"></a><p class="title"><b>Example&nbsp;17.9.&nbsp;Task that depends on Ant target</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span>

task intro(dependsOn: hello) &lt;&lt; {
    println <span class="hl-string">'Hello, from Gradle'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle intro</code></strong></p><pre class="screen">&gt; gradle intro
:hello
[ant:echo] Hello, from Ant
:intro
Hello, from Gradle

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>Or, you can add behaviour to an Ant target:</p><div class="example"><a name="addBehaviourToAntTarget"></a><p class="title"><b>Example&nbsp;17.10.&nbsp;Adding behaviour to an Ant target</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span>

hello &lt;&lt; {
    println <span class="hl-string">'Hello, from Gradle'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong></p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] Hello, from Ant
Hello, from Gradle

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>It is also possible for an Ant target to depend on a Gradle task:</p><div class="example"><a name="dependsOnTask"></a><p class="title"><b>Example&nbsp;17.11.&nbsp;Ant target that depends on Gradle task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span>

task intro &lt;&lt; {
    println <span class="hl-string">'Hello, from Gradle'</span>
}</pre><p><code class="filename">build.xml</code></p><pre class="programlisting"><span class="hl-tag">&lt;project&gt;</span>
    <span class="hl-tag">&lt;target</span> <span class="hl-attribute">name</span>=<span class="hl-value">"hello"</span> <span class="hl-attribute">depends</span>=<span class="hl-value">"intro"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;echo&gt;</span>Hello, from Ant<span class="hl-tag">&lt;/echo&gt;</span>
    <span class="hl-tag">&lt;/target&gt;</span>
<span class="hl-tag">&lt;/project&gt;</span></pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong></p><pre class="screen">&gt; gradle hello
:intro
Hello, from Gradle
:hello
[ant:echo] Hello, from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N114DF"></a>17.3.&nbsp;Ant properties and references</h2></div></div></div><p>There are several ways to set an Ant property, so that the property can be used by Ant tasks. You can
            set the property directly on the <code class="literal">AntBuilder</code> instance. The Ant properties are also
            available as a Map which you can change. You can also use the Ant <code class="literal">property</code> task.
            Below are some examples of how to do this.
        </p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;17.12.&nbsp;Setting an Ant property</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ant.buildDir = buildDir
ant.properties.buildDir = buildDir
ant.properties[<span class="hl-string">'buildDir'</span>] = buildDir
ant.property(name: <span class="hl-string">'buildDir'</span>, location: buildDir)</pre><p><code class="filename">build.xml</code></p><pre class="programlisting"><span class="hl-tag">&lt;echo&gt;</span>buildDir = ${buildDir}<span class="hl-tag">&lt;/echo&gt;</span></pre></div></div><br class="example-break"><p>Many Ant tasks set properties when they execute. There are several ways to get the value of these properties.
            You can get the property directly from the <code class="literal">AntBuilder</code> instance. The Ant properties are
            also available as a Map. Below are some examples.</p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;17.13.&nbsp;Getting an Ant property</b></p><div class="example-contents"><p><code class="filename">build.xml</code></p><pre class="programlisting"><span class="hl-tag">&lt;property</span> <span class="hl-attribute">name</span>=<span class="hl-value">"antProp"</span> <span class="hl-attribute">value</span>=<span class="hl-value">"a property defined in an Ant build"</span><span class="hl-tag">/&gt;</span></pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">println ant.antProp
println ant.properties.antProp
println ant.properties[<span class="hl-string">'antProp'</span>]</pre></div></div><br class="example-break"><p>There are several ways to set an Ant reference:</p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;17.14.&nbsp;Setting an Ant reference</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ant.path(id: <span class="hl-string">'classpath'</span>, location: <span class="hl-string">'libs'</span>)
ant.references.classpath = ant.path(location: <span class="hl-string">'libs'</span>)
ant.references[<span class="hl-string">'classpath'</span>] = ant.path(location: <span class="hl-string">'libs'</span>)</pre><p><code class="filename">build.xml</code></p><pre class="programlisting"><span class="hl-tag">&lt;path</span> <span class="hl-attribute">refid</span>=<span class="hl-value">"classpath"</span><span class="hl-tag">/&gt;</span></pre></div></div><br class="example-break"><p>There are several ways to get an Ant reference:</p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;17.15.&nbsp;Getting an Ant reference</b></p><div class="example-contents"><p><code class="filename">build.xml</code></p><pre class="programlisting"><span class="hl-tag">&lt;path</span> <span class="hl-attribute">id</span>=<span class="hl-value">"antPath"</span> <span class="hl-attribute">location</span>=<span class="hl-value">"libs"</span><span class="hl-tag">/&gt;</span></pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">println ant.references.antPath
println ant.references[<span class="hl-string">'antPath'</span>]</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11533"></a>17.4.&nbsp;API</h2></div></div></div><p>The Ant integration is provided by <a class="ulink" href="../javadoc/org/gradle/api/AntBuilder.html" target="_top"><code class="classname">AntBuilder</code></a>.</p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N113DF" name="ftn.N113DF" class="para">8</a>] </sup>In Groovy you can execute Strings. To learn more about executing external processes with Groovy have a
                look in 'Groovy in Action' 9.3.2 or at the Groovy wiki
            </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="logging"></a>Chapter&nbsp;18.&nbsp;Logging</h1></div></div></div><p>The log is the main 'UI' of a build tool. If it is too verbose, real warnings and problems are easily hidden
        by this. On the other hand you need the relevant information for figuring out if things have gone wrong. Gradle
        defines 6 log levels, as shown in <a class="xref" href="#logLevels" title="Table&nbsp;18.1.&nbsp;Log levels">Table&nbsp;18.1, &ldquo;Log levels&rdquo;</a>. There are two Gradle-specific log levels, in
        addition to the ones you might normally see. Those levels are <span class="emphasis"><em>QUIET</em></span> and
        <span class="emphasis"><em>LIFECYCLE</em></span>. The latter is the default, and is used to report build progress.
    </p><div class="table"><p class="title"><b>Table&nbsp;18.1.&nbsp;Log levels</b></p><div class="table-contents"><table id="logLevels"><thead><tr>
                <td>Level</td>
                <td>Used for</td>
            </tr></thead><tr>
            <td>ERROR</td>
            <td>Error messages</td>
        </tr><tr>
            <td>QUIET</td>
            <td>Important information messages</td>
        </tr><tr>
            <td>WARNING</td>
            <td>Warning messages</td>
        </tr><tr>
            <td>LIFECYCLE</td>
            <td>Progress information messages</td>
        </tr><tr>
            <td>INFO</td>
            <td>Information messages</td>
        </tr><tr>
            <td>DEBUG</td>
            <td>Debug messages</td>
        </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:choosing_a_log_level"></a>18.1.&nbsp;Choosing a log level</h2></div></div></div><p>You can use the command line switches shown in <a class="xref" href="#logLevelCommandLineOptions" title="Table&nbsp;18.2.&nbsp;Log level command-line options">Table&nbsp;18.2, &ldquo;Log level command-line options&rdquo;</a> to choose
            different log levels. In <a class="xref" href="#stacktraces" title="Table&nbsp;18.3.&nbsp;Stacktrace command-line options">Table&nbsp;18.3, &ldquo;Stacktrace command-line options&rdquo;</a> you find the command line switches which affect
            stacktrace logging.
        </p><div class="table"><p class="title"><b>Table&nbsp;18.2.&nbsp;Log level command-line options</b></p><div class="table-contents"><table id="logLevelCommandLineOptions"><thead><tr>
                    <td>Option</td>
                    <td>Outputs Log Levels</td>
                </tr></thead><tr>
                <td>no logging options</td>
                <td>LIFECYCLE and higher</td>
            </tr><tr>
                <td>
                    <code class="literal">-q</code> or <code class="literal">--quiet</code>
                </td>
                <td>QUIET and higher</td>
            </tr><tr>
                <td>
                    <code class="literal">-i</code> or <code class="literal">--info</code>
                </td>
                <td>INFO and higher</td>
            </tr><tr>
                <td>
                    <code class="literal">-d</code> or <code class="literal">--debug</code>
                </td>
                <td>DEBUG and higher (that is, all log messages)</td>
            </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;18.3.&nbsp;Stacktrace command-line options</b></p><div class="table-contents"><table id="stacktraces"><thead><tr>
                    <td>Option</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>No stacktrace options</td>
                <td>No stacktraces are printed to the console in case of a build error (e.g. a compile error). Only in
                    case of internal exceptions will stacktraces be printed. If the <code class="literal">DEBUG</code> log level
                    is chosen, truncated stacktraces are always printed.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">-s</code> or <code class="literal">--stacktrace</code>
                </td>
                <td>Truncated stacktraces are printed. We recommend this over full stacktraces. Groovy full stacktraces
                    are extremely verbose (Due to the underlying dynamic invocation mechanisms. Yet they usually do not
                    contain relevant information for what has gone wrong in <span class="emphasis"><em>your</em></span> code.)
                </td>
            </tr><tr>
                <td>
                    <code class="literal">-S</code> or <code class="literal">--full-stacktrace</code>
                </td>
                <td>The full stacktraces are printed out.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:sending_your_own_log_messages"></a>18.2.&nbsp;Writing your own log messages</h2></div></div></div><p>A simple option for logging in your build file is to write messages to standard output. Gradle redirects
            anything written to standard output to it's logging system at the <code class="literal">QUIET</code> log level.</p><div class="example"><a name="logging_to_stdout"></a><p class="title"><b>Example&nbsp;18.1.&nbsp;Using stdout to write log messages</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">println <span class="hl-string">'A message which is logged at QUIET level'</span></pre></div></div><br class="example-break"><p>Gradle also provides a <code class="literal">logger</code> property to a build script, which is an instance of
            <a class="ulink" href="../javadoc/org/gradle/api/logging/Logger.html" target="_top"><code class="classname">Logger</code></a>. This interface extends the SLF4J
            <code class="classname">Logger</code> interface and adds a few Gradle specific methods to it. Below is an example
            of how this is used in the build script:
        </p><div class="example"><a name="logging_ex"></a><p class="title"><b>Example&nbsp;18.2.&nbsp;Writing your own log messages</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">logger.quiet(<span class="hl-string">'An info log message which is always logged.'</span>)
logger.error(<span class="hl-string">'An error log message.'</span>)
logger.warn(<span class="hl-string">'A warning log message.'</span>)
logger.lifecycle(<span class="hl-string">'A lifecycle info log message.'</span>)
logger.info(<span class="hl-string">'An info log message.'</span>)
logger.debug(<span class="hl-string">'A debug log message.'</span>)
logger.trace(<span class="hl-string">'A trace log message.'</span>)</pre></div></div><br class="example-break"><p>You can also hook into Gradle's logging system from within other classes used in the build (classes from
            the <code class="filename">buildSrc</code> directory for example). Simply use an SLF4J logger. You can use this
            logger the same way as you use the provided logger in the build script.
        </p><div class="example"><a name="logging_with_slf4j"></a><p class="title"><b>Example&nbsp;18.3.&nbsp;Using SLF4J to write log messages</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-keyword">import</span> org.slf4j.Logger
<span class="hl-keyword">import</span> org.slf4j.LoggerFactory

Logger slf4jLogger = LoggerFactory.getLogger(<span class="hl-string">'some-logger'</span>)
slf4jLogger.info(<span class="hl-string">'An info log message logged using SLF4j'</span>)</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:external_tools"></a>18.3.&nbsp;Logging from external tools and libraries</h2></div></div></div><p>Internally, Gradle uses Ant and Ivy. Both have their own logging system. Gradle redirects their logging
            output into the Gradle logging system. There is a 1:1 mapping from the Ant/Ivy log levels to the Gradle log
            levels, except the Ant/Ivy <code class="literal">TRACE</code> log level, which is mapped to Gradle
            <code class="literal">DEBUG</code> log level. This means the default Gradle log level will not show any Ant/Ivy output
            unless it is an error or a warning.
        </p><p>There are many tools out there which still use standard output for logging. By default, Gradle redirects
            standard output to the <code class="literal">QUIET</code> log level and standard error to the <code class="literal">ERROR</code>
            level. This behavior is configurable. The project object provides a
            <a class="ulink" href="../javadoc/org/gradle/api/logging/LoggingManager.html" target="_top"><code class="classname">LoggingManager</code></a>, which allows you to change the log levels that
            standard out or error are redirected to when your build script is evaluated.</p><div class="example"><a name="project_stdout_capture"></a><p class="title"><b>Example&nbsp;18.4.&nbsp;Configuring standard output capture</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">logging.captureStandardOutput LogLevel.INFO
println <span class="hl-string">'A message which is logged at INFO level'</span></pre></div></div><br class="example-break"><p>
            To change the log level for standard out or error during task execution, tasks also provide a <a class="ulink" href="../javadoc/org/gradle/api/logging/LoggingManager.html" target="_top"><code class="classname">LoggingManager</code></a>.
        </p><div class="example"><a name="task_stdout_capture"></a><p class="title"><b>Example&nbsp;18.5.&nbsp;Configuring standard output capture for a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task logInfo {
    logging.captureStandardOutput LogLevel.INFO
    doFirst {
        println <span class="hl-string">'A task message which is logged at INFO level'</span>
    }
}</pre></div></div><br class="example-break"><p>Gradle also provides integration with the Java Util Logging, Jakarta Commons Logging and Log4j logging
            toolkits. Any log messages which your build classes write using these logging toolkits will be redirected to
            Gradle's logging system.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:changing_what_gradle_logs"></a>18.4.&nbsp;Changing what Gradle logs</h2></div></div></div><p>You can replace much of Gradle's logging UI with your own. You might do this, for example, if you want to
            customize the UI in some way - to log more or less information, or to change the formatting. You replace
            the logging using the <a class="ulink" href="../dsl/org.gradle.api.invocation.Gradle.html#org.gradle.api.invocation.Gradle:useLogger(java.lang.Object)" target="_top"><code class="classname">Gradle.useLogger()</code></a> method. This
            is accessible from a build script, or an init script, or via the embedding API.
            Note that this completely disables Gradle's default output.
            Below is an example init script which changes how task execution and build completion is logged.
        </p><div class="example"><a name="custom_logging_ui"></a><p class="title"><b>Example&nbsp;18.6.&nbsp;Customizing what Gradle logs</b></p><div class="example-contents"><p><code class="filename">init.gradle</code></p><pre class="programlisting">useLogger(<span class="hl-keyword">new</span> CustomEventLogger())

<span class="hl-keyword">class</span> CustomEventLogger <span class="hl-keyword">extends</span> BuildAdapter <span class="hl-keyword">implements</span> TaskExecutionListener {

    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> beforeExecute(Task task) {
        println <span class="hl-string">"[$task.name]"</span>
    }

    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> afterExecute(Task task, TaskState state) {
        println()
    }
    
    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> buildFinished(BuildResult result) {
        println <span class="hl-string">'build completed'</span>
        <span class="hl-keyword">if</span> (result.failure != null) {
            result.failure.printStackTrace()
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -I init.gradle build</code></strong></p><pre class="screen">&gt; gradle -I init.gradle build
[compile]
compiling source

[testCompile]
compiling test source

[test]
running unit tests

[build]

build completed</pre></div></div><br class="example-break"><p>Your logger can implement any of the listener interfaces listed below.
            When you register a logger, only the logging for the interfaces that it implements is replaced. Logging
            for the other interfaces is left untouched.
            You can find out more about the listener interfaces in <a class="xref" href="#build_lifecycle_events">Section&nbsp;55.6, &ldquo;Responding to the lifecycle in the build script&rdquo;</a>.
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><a class="ulink" href="../javadoc/org/gradle/BuildListener.html" target="_top"><code class="classname">BuildListener</code></a></p></li><li class="listitem"><p><a class="ulink" href="../javadoc/org/gradle/api/ProjectEvaluationListener.html" target="_top"><code class="classname">ProjectEvaluationListener</code></a></p></li><li class="listitem"><p><a class="ulink" href="../javadoc/org/gradle/api/execution/TaskExecutionGraphListener.html" target="_top"><code class="classname">TaskExecutionGraphListener</code></a></p></li><li class="listitem"><p><a class="ulink" href="../javadoc/org/gradle/api/execution/TaskExecutionListener.html" target="_top"><code class="classname">TaskExecutionListener</code></a></p></li><li class="listitem"><p><a class="ulink" href="../javadoc/org/gradle/api/execution/TaskActionListener.html" target="_top"><code class="classname">TaskActionListener</code></a></p></li></ul></div><p>
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="gradle_daemon"></a>Chapter&nbsp;19.&nbsp;The Gradle Daemon</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="enter_the_daemon"></a>19.1.&nbsp;Enter the daemon</h2></div></div></div><p><span class="emphasis"><em>The Gradle daemon</em></span> (sometimes referred as <span class="emphasis"><em>the build daemon</em></span>)
            aims to improve the startup and execution time of Gradle.
        </p><p>
            We came up with several use cases where the daemon is very useful.
            For some workflows, the user invokes Gradle many times to execute a small number of relatively quick tasks.
            For example:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">When using test driven development, where the unit tests are executed many times.</li><li class="listitem">When developing a web application, where the application is assembled many times.</li><li class="listitem">When discovering what a build can do, where <strong class="userinput"><code>gradle tasks</code></strong> is executed a number of times.</li></ul></div><p>
            For above sorts of workflows, it is important that the startup cost of invoking Gradle is as small as possible.
        </p><p>
            In addition, user interfaces can provide some interesting features if the Gradle model can be built relatively quickly.
            For example, the daemon might be useful for following scenarios:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Content assistance in the IDE</li><li class="listitem">Live visualisation of the build in a GUI</li><li class="listitem">Tab completion in a CLI</li></ul></div><p>
        </p><p>
            In general, snappy behavior of the build tool is always handy.
            If you try using the daemon for your local builds it's going to be hard
            for you to go back to regular use of Gradle.
        </p><p>
            The Tooling API (see <a class="xref" href="#embedding">Chapter&nbsp;62, <i>Embedding Gradle</i></a>)
            uses the daemon all the time, e.g. you cannot officially use the Tooling API without the daemon.
            This means that whenever you are using the STS Gradle plugin for Eclipse or the Gradle support in Intellij IDEA,
            you're already using the Gradle Daemon.
        </p><p>In future the daemon will offer more features:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Snappy up-to-date checks: use native file system change notifications (e.g. via jdk7 nio.2)
                    to preemptively perform up-to-date analysis.</li><li class="listitem">Even faster builds: preemptively evaluate projects, so that the model is ready
                    when the user next invokes Gradle.</li><li class="listitem">Did we mention faster builds? The daemon can potentially preemptively download dependencies
                    or check for new versions of snapshot dependencies.</li><li class="listitem">Utilize a pool of reusable processes available for compilation and testing.
                    For example, both the Groovy and Scala compilers have a large startup cost.
                    The build daemon could maintain a process with Groovy and/or Scala already loaded.</li><li class="listitem">Preemptive execution of certain tasks, for example compilation. Quicker feedback.</li><li class="listitem">Fast and accurate bash tab completion.</li><li class="listitem">Periodically garbage collect the Gradle caches.</li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="reusing_daemons"></a>19.2.&nbsp;Reusing and expiration of daemons</h2></div></div></div><p>The basic idea is that the Gradle command forks a daemon process, which performs the actual build.
            Subsequent invocations of the Gradle command will reuse the daemon, avoiding the startup costs.
            Sometimes we cannot use an existing daemon because it is busy or its java version or jvm arguments are different.
            For exact details on when exactly new daemon process is forked read the dedicated section below.
            The daemon process automatically expire after 3 hours of idle time.
        </p><p>
            Here're all situations in which we fork a new daemon process:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">If the daemon process is currently busy running some job, a brand new daemon process will be started.</li><li class="listitem">We fork a separate daemon process per java home. So even if there is some idle daemon waiting
                    for build requests but you happen to run build with a different java home then a brand new daemon will be forked.</li><li class="listitem">We fork a separate daemon process if the jvm arguments for the build are sufficiently different.
                    For example we will not fork a new daemon if a some system property has changed.
                    However if -Xmx memory setting change or some fundamental immutable system property changes (e.g. file.encoding)
                    then new daemon will be forked.
                </li><li class="listitem">At the moment daemon is coupled with particular version of Gradle.
                    This means that even if some daemon is idle but you are running the build
                    with a different version of Gradle, a new daemon will be started.
                    This also has a consequence for the <code class="literal">--stop</code> command line instruction:
                    You can only stop daemons that were started with the Gradle version you use when running <code class="literal">--stop</code>.
                </li></ul></div><p>
            We plan to improve the ways of managing / pooling the daemons in future.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="daemon_usage_and_troubleshooting"></a>19.3.&nbsp;Usage and troubleshooting</h2></div></div></div><p>For command line usage take a look dedicated section in <a class="xref" href="#gradle_command_line">Appendix&nbsp;D, <i>Gradle Command Line</i></a>.
            If you are tired of using the same command line options again and again, take a look at
            <a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a>.
            The section contains information on how to configure certain behavior of the daemon
            (including turning on the daemon by default) in a more 'persistent' way.
        </p><p>
            Some ways of troubleshooting the Gradle daemon:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">If you have a problem with your build, try temporarily disabling the daemon
                    (you can pass the command line switch <code class="literal">--no-daemon</code>).</li><li class="listitem">Occasionally, you may want to stop the daemons either via the <code class="literal">--stop</code>
                    command line option or in a more forceful way.</li><li class="listitem">There is a daemon log file, which by default is located in the
                    Gradle user home directory.</li><li class="listitem">You may want to start the daemon in <code class="literal">--foreground</code>
                    mode to observe how the build is executed.</li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:daemon_properties"></a>19.4.&nbsp;Configuring the daemon</h2></div></div></div><p>Some daemon settings, such as JVM arguments, memory settings or the Java home, can be configured.
            Please find more information in <a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a>
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="build_environment"></a>Chapter&nbsp;20.&nbsp;The Build Environment</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:gradle_configuration_properties"></a>20.1.&nbsp;Configuring the build environment via gradle.properties</h2></div></div></div><p>Gradle provides several options that make it easy to configure the Java process that will be used to execute your build.
            While it's possible to configure these in your local environment via GRADLE_OPTS or JAVA_OPTS,
            certain settings like JVM memory settings, Java home, daemon on/off
            can be more useful if they can versioned with the project in your VCS so that
            the entire team can work with consistent environment.
            Setting up a consistent environment for your build is as simple as placing those settings into a <code class="filename">gradle.properties</code> file.
            The configuration is applied in following order
            (in case an option is configured in multiple locations the last one wins):
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">from <code class="filename">gradle.properties</code> located in project build dir.</li><li class="listitem">from <code class="filename">gradle.properties</code> located in <code class="literal">gradle user home</code>.</li><li class="listitem">from system properties, e.g. when <code class="literal">-Dsome.property</code> is used in the command line.</li></ul></div><p>
        </p><p>
            The following properties can be used to configure the Gradle build environment:
            <dt><span class="term"><code class="literal">org.gradle.daemon</code></span></dt><dd><p>When set to <code class="literal">true</code> the Gradle daemon is to run the build.
                    For local developer builds this is our favorite property. The developer environment is optimized for speed and feedback
                    so we nearly always run Gradle jobs with the daemon.
                    We don't run CI builds with the daemon (i.e. a long running process)
                    as the CI environment is optimized for consistency and reliability.
                </p></dd>
            <dt><span class="term"><code class="literal">org.gradle.java.home</code></span></dt><dd><p>Specifies the java home for the Gradle build process.
                    The value can be set to either <code class="literal">jdk</code> or <code class="literal">jre</code> location,
                    however, depending on what does your build do, <code class="literal">jdk</code> is safer.
                    Reasonable default is used if the setting is unspecified.</p></dd>
            <dt><span class="term"><code class="literal">org.gradle.jvmargs</code></span></dt><dd><p>Specifies the jvmargs used for the daemon process.
                    The setting is particularly useful for tweaking memory settings.
                    At the moment the default settings are pretty generous with regards to memory.</p></dd>
            <dt><span class="term"><code class="literal">org.gradle.configureondemand</code></span></dt><dd><p>Enables new incubating mode that makes Gradle selective when configuring projects.
                    Only relevant projects are configured which results in faster builds for large multi-projects.
                    See <a class="xref" href="#sec:configuration_on_demand">Section&nbsp;56.1.1.1, &ldquo;Configuration on demand&rdquo;</a>.</p></dd>
            <dt><span class="term"><code class="literal">org.gradle.parallel</code></span></dt><dd><p>When configured, Gradle will run in incubating parallel mode.</p></dd>
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1179B"></a>20.1.1.&nbsp;Forked java processes</h3></div></div></div><p>Many settings (like the java version and maximum heap size) can only be specified when launching a new JVM for the build process. This means that Gradle
                must launch a separate JVM process to execute the build after parsing the various <code class="filename">gradle.properties</code> files.
                When running with the daemon, a JVM with the correct parameters is started once and reused for each daemon build execution.
                When Gradle is executed without the daemon, then a new JVM must be launched for every build execution,
                unless the JVM launched by the Gradle start script happens to have the same parameters.
            </p><p>
            This launching of an extra JVM on every build execution is quite expensive, which is why we highly recommend that you use the Gradle Daemon if you are
            specifying <code class="literal">org.gradle.java.home</code> or <code class="literal">org.gradle.jvmargs</code>. See <a class="xref" href="#gradle_daemon">Chapter&nbsp;19, <i>The Gradle Daemon</i></a> for more details.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:accessing_the_web_via_a_proxy"></a>20.2.&nbsp;Accessing the web via a proxy</h2></div></div></div><p>Configuring an HTTP proxy (for example for downloading dependencies) is done via standard JVM system properties. These properties can be set directly in the build script; for example <code class="literal">
                System.setProperty('http.proxyHost', 'www.somehost.org')</code> for the proxy host. Alternatively, the properties can be specified in a gradle.properties file,
            either in the build's root directory or in the Gradle home directory.
        </p><div class="example"><a name="N117B7"></a><p class="title"><b>Example&nbsp;20.1.&nbsp;Configuring an HTTP proxy</b></p><div class="example-contents"><p><code class="filename">gradle.properties</code></p><pre class="programlisting">systemProp.http.proxyHost=www.somehost.org
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=userid
systemProp.http.proxyPassword=password
systemProp.http.nonProxyHosts=*.nonproxyrepos.com|localhost</pre></div></div><br class="example-break"><p>There are separate settings for HTTPS.</p><div class="example"><a name="N117C1"></a><p class="title"><b>Example&nbsp;20.2.&nbsp;Configuring an HTTPS proxy</b></p><div class="example-contents"><p><code class="filename">gradle.properties</code></p><pre class="programlisting">systemProp.https.proxyHost=www.somehost.org
systemProp.https.proxyPort=8080
systemProp.https.proxyUser=userid
systemProp.https.proxyPassword=password
systemProp.https.nonProxyHosts=*.nonproxyrepos.com|localhost</pre></div></div><br class="example-break"><p>We could not find a good overview for all possible proxy settings. One place to look are the constants
            in a file from the Ant project. Here a
            <a class="ulink" href="http://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/util/ProxySetup.java?view=markup&amp;pathrev=556977" target="_top">
                link
            </a> to the Subversion view. The other is a
            <a class="ulink" href="http://download.oracle.com/javase/6/docs/technotes/guides/net/properties.html" target="_top">
                Networking Properties page
            </a> from the JDK docs. If anyone knows a better overview, please let us know via the mailing list.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:ntlm_authentication"></a>20.2.1.&nbsp;NTLM Authentication</h3></div></div></div><p>If your proxy requires NTLM authentication, you may need to provide the authentication domain as well as the username and password.
                There are 2 ways that you can provide the domain for authenticating to a NTLM proxy:
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Set the <code class="literal">http.proxyUser</code> system property to a value like <code class="literal"><em class="replaceable"><code>domain</code></em>/<em class="replaceable"><code>username</code></em></code>.
                    </li><li class="listitem">Provide the authentication domain via the <code class="literal">http.auth.ntlm.domain</code> system property.
                    </li></ul></div><p>
            </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="plugins"></a>Chapter&nbsp;21.&nbsp;Gradle Plugins</h1></div></div></div><p>
        Gradle at its core intentionally provides little useful functionality for real world automation. All of the useful
        features, such as the ability to compile Java code for example, are added by <span class="emphasis"><em>plugins</em></span>.
        Plugins add new tasks (e.g. <a class="ulink" href="../dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_top"><code class="classname">JavaCompile</code></a>), domain objects (e.g.
        <a class="ulink" href="../dsl/org.gradle.api.tasks.SourceSet.html" target="_top"><code class="classname">SourceSet</code></a>), conventions (e.g. main Java source is located at
        <code class="literal">src/main/java</code>) as well as extending core objects and objects from other plugins.
    </p><p>
        In this chapter we will discuss how to use plugins and the terminology and concepts surrounding plugins.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:using_plugins"></a>21.1.&nbsp;Applying plugins</h2></div></div></div><p>
            Plugins are said to be <span class="emphasis"><em>applied</em></span>, which is done via the <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:apply(java.util.Map)" target="_top"><code class="classname">Project.apply()</code></a> method.
        </p><div class="example"><a name="useJavaPlugin"></a><p class="title"><b>Example&nbsp;21.1.&nbsp;Applying a plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span></pre></div></div><br class="example-break"><p>
            Plugins advertise a short name for themselves. In the above case, we are using the short name &lsquo;<code class="literal">java</code>&rsquo; to apply
            the <a class="ulink" href="../javadoc/org/gradle/api/plugins/JavaPlugin.html" target="_top"><code class="classname">JavaPlugin</code></a>.
        </p><p>
            We could also have used the following syntax:
        </p><div class="example"><a name="pluginIntro"></a><p class="title"><b>Example&nbsp;21.2.&nbsp;Applying a plugin by type</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: org.gradle.api.plugins.JavaPlugin</pre></div></div><br class="example-break"><p>
            Thanks to Gradle's default imports (see <a class="xref" href="#ide_support">Appendix&nbsp;E, <i>Existing IDE Support and how to cope without it</i></a>) you could also write:
        </p><div class="example"><a name="pluginIntro"></a><p class="title"><b>Example&nbsp;21.3.&nbsp;Applying a plugin by type</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: JavaPlugin</pre></div></div><br class="example-break"><p>
            The application of plugins is <span class="emphasis"><em>idempotent</em></span>. That is, a plugin can be applied multiple times. If the plugin
            has previously been applied, any further applications will have no effect.
        </p><p>
            A plugin is simply any class that implements the <a class="ulink" href="../javadoc/org/gradle/api/Plugin.html" target="_top"><code class="classname">Plugin</code></a> interface. Gradle provides
            the core plugins as part of its distribution so simply applying the plugin as above is all you need to do.
            For 3rd party plugins however, you need to make the plugins available to the build classpath. For more information
            on how to do this, see <a class="xref" href="#sec:external_dependencies">Section&nbsp;59.5, &ldquo;External dependencies for the build script&rdquo;</a>.
        </p><p>
            For more on writing your own plugins, see <a class="xref" href="#custom_plugins">Chapter&nbsp;58, <i>Writing Custom Plugins</i></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11857"></a>21.2.&nbsp;What plugins do</h2></div></div></div><p>
            Applying a plugin to the project allows the plugin to extend the project's capabilities. It can do things
            such as:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Add tasks to the project (e.g. compile, test)</li><li class="listitem">Pre-configure added tasks with useful defaults.</li><li class="listitem">Add dependency configurations to the project (see <a class="xref" href="#configurations">Section&nbsp;8.3, &ldquo;Dependency configurations&rdquo;</a>).</li><li class="listitem">Add new properties and methods to existing type via extensions.</li></ul></div><p>
            Let's check this out:
        </p><div class="example"><a name="pluginIntro"></a><p class="title"><b>Example&nbsp;21.4.&nbsp;Tasks added by a plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>

task show &lt;&lt; {
    println relativePath(compileJava.destinationDir)
    println relativePath(processResources.destinationDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong></p><pre class="screen">&gt; gradle -q show
build/classes/main
build/resources/main</pre></div></div><br class="example-break"><p>
            The Java plugin has added a <code class="literal">compileJava</code> task and a <code class="literal">processResources</code> task
            to the project and configured the <code class="literal">destinationDir</code> property of both of these tasks.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sub:more_about_convention_objects"></a>21.3.&nbsp;Conventions</h2></div></div></div><p>
            Plugins can pre-configure the project in smart ways to support convention-over-configuration. Gradle
            provides mechanisms and sophisticated support and it's a key ingredient in powerful-yet-concise build scripts.
        </p><p>
            We saw in the example above that the Java plugins adds a task named <code class="literal">compileJava</code> that has
            a property named <code class="literal">destinationDir</code> (that configures where the compiled Java source should be placed).
            The Java plugin defaults this property to point to <code class="literal">build/classes/main</code> in the project directory.
            This is an example of convention-over-configuration via a <span class="emphasis"><em>reasonable default</em></span>.
        </p><p>
            We can change this property simply by giving it a new value.
        </p><div class="example"><a name="pluginConfig"></a><p class="title"><b>Example&nbsp;21.5.&nbsp;Changing plugin defaults</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>

compileJava.destinationDir = file(<span class="hl-string">"$buildDir/output/classes"</span>)

task show &lt;&lt; {
    println relativePath(compileJava.destinationDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong></p><pre class="screen">&gt; gradle -q show
build/output/classes</pre></div></div><br class="example-break"><p>
            However, the <code class="literal">compileJava</code> task is likely to not be the only task that needs to know where
            the class files are. 
        </p><p>
            The Java plugin adds the concept of <span class="emphasis"><em>source sets</em></span> (see <a class="ulink" href="../dsl/org.gradle.api.tasks.SourceSet.html" target="_top"><code class="classname">SourceSet</code></a>)
            to describe the aspects of a set of source, one aspect being where the class files should be written to when it is compiled.
            The Java plugin maps the <code class="literal">destinationDir</code> property of the <code class="literal">compileJava</code> task to this aspect of the source set.
        </p><p>
            We can change where the class files are written via the source set.
        </p><div class="example"><a name="pluginConvention"></a><p class="title"><b>Example&nbsp;21.6.&nbsp;Plugin convention object</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>

sourceSets.main.output.classesDir = file(<span class="hl-string">"$buildDir/output/classes"</span>)

task show &lt;&lt; {
    println relativePath(compileJava.destinationDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong></p><pre class="screen">&gt; gradle -q show
build/output/classes</pre></div></div><br class="example-break"><p>
            In the example above, we applied the Java plugin which, among other things, did the following:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Added a new domain object type: <a class="ulink" href="../dsl/org.gradle.api.tasks.SourceSet.html" target="_top"><code class="classname">SourceSet</code></a></li><li class="listitem">Configured a <code class="literal">main</code> source set with default (i.e. conventional) values for properties</li><li class="listitem">Configured supporting tasks to use these properties to perform work</li></ul></div><p>
            All of this happened during the <code class="literal">apply plugin: "java"</code> step. In the example above, we <span class="emphasis"><em>changed</em></span>
            the desired location of the class files after this conventional configuration had been performed. Notice by the output with the example
            that the value for <code class="literal">compileJava.destinationDir</code> also changed to reflect the configuration change.
        </p><p>
            Consider the case where another task is to consume the classes files. If this task is configured to use the value from
            <code class="literal">sourceSets.main.output.classesDir</code>, then changing it in this location will update both the
            <code class="literal">compileJava</code> task and this other consumer task whenever it is changed.
        </p><p>
            This ability to configure properties of objects to reflect the value of another object's task at all times (i.e. even when it changes) is
            known as &ldquo;<span class="emphasis"><em>convention mapping</em></span>&rdquo;. It allows Gradle to provide conciseness through convention-over-configuration and
            sensible defaults yet not require complete reconfiguration if a conventional default needs to be changed. Without this, in the example above,
            we would have had to reconfigure every object that needs to work with the class files.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N118FA"></a>21.4.&nbsp;More on plugins</h2></div></div></div><p>
            This chapter aims to serve as an introduction to plugins and Gradle and the role they play. For more information on the inner workings
            of plugins, see <a class="xref" href="#custom_plugins">Chapter&nbsp;58, <i>Writing Custom Plugins</i></a>.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="standard_plugins"></a>Chapter&nbsp;22.&nbsp;Standard Gradle plugins</h1></div></div></div><p>There are a number of plugins included in the Gradle distribution. These are listed below.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11909"></a>22.1.&nbsp;Language plugins</h2></div></div></div><p>These plugins add support for various languages which can be compiled for and executed in the JVM.</p><div class="table"><p class="title"><b>Table&nbsp;22.1.&nbsp;Language plugins</b></p><div class="table-contents"><table id="N1190E"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Automatically applies</td>
                    <td>Works with</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#java_plugin">
                        <code class="literal">java</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Adds Java compilation, testing and bundling capabilities to a project. It serves
                        as the basis for many of the other Gradle plugins. See also <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a>.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#groovy_plugin">
                        <code class="literal">groovy</code>
                    </a>
                </td>
                <td><code class="literal">java</code>,
                    <code class="literal">groovy-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Adds support for building Groovy projects. See also <a class="xref" href="#tutorial_groovy_projects">Chapter&nbsp;9, <i>Groovy Quickstart</i></a>.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#scala_plugin">
                        <code class="literal">scala</code>
                    </a>
                </td>
                <td><code class="literal">java</code>,
                    <code class="literal">scala-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Adds support for building Scala projects.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#antlr_plugin">
                        <code class="literal">antlr</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java</code>
                </td>
                <td>-</td>
                <td>
                    <p>Adds support for generating parsers using <a class="ulink" href="http://www.antlr.org/" target="_top">Antlr</a>.
                    </p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1199A"></a>22.2.&nbsp;Incubating language plugins</h2></div></div></div><p>These plugins add support for various languages:</p><div class="table"><p class="title"><b>Table&nbsp;22.2.&nbsp;Language plugins</b></p><div class="table-contents"><table id="N1199F"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Automatically applies</td>
                    <td>Works with</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">assembler</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds native assembly language capabilities to a project.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">c</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds C source compilation capabilities to a project.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">cpp</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds C++ source compilation capabilities to a project.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">objective-c</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds Objective-C source compilation capabilities to a project.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">objective-cpp</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds Objective-C++ source compilation capabilities to a project.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">windows-resources</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds support for including Windows resources in native binaries.</p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11A41"></a>22.3.&nbsp;Integration plugins</h2></div></div></div><p>These plugins provide some integration with various runtime technologies.</p><div class="table"><p class="title"><b>Table&nbsp;22.3.&nbsp;Integration plugins</b></p><div class="table-contents"><table id="N11A46"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Automatically applies</td>
                    <td>Works with</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#application_plugin">
                        <code class="literal">application</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java</code>
                </td>
                <td>-</td>
                <td>
                    <p>Adds tasks for running and bundling a Java project as a command-line application.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#ear_plugin">
                        <code class="literal">ear</code>
                    </a>
                </td>
                <td>-</td>
                <td>
                    <code class="literal">java</code>
                </td>
                <td>
                    <p>Adds support for building J2EE applications.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#jetty_plugin">
                        <code class="literal">jetty</code>
                    </a>
                </td>
                <td>
                    <code class="literal">war</code>
                </td>
                <td>-</td>
                <td>
                    <p>Deploys your web application to a Jetty web container embedded in the build. See also <a class="xref" href="#web_project_tutorial">Chapter&nbsp;10, <i>Web Application Quickstart</i></a>.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#maven_plugin">
                        <code class="literal">maven</code>
                    </a>
                </td>
                <td>-</td>
                <td><code class="literal">java</code>,
                    <code class="literal">war</code>
                </td>
                <td>
                    <p>Adds support for publishing artifacts to Maven repositories.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#osgi_plugin">
                        <code class="literal">osgi</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java-base</code>
                </td>
                <td>
                    <code class="literal">java</code>
                </td>
                <td>
                    <p>Adds support for building OSGi bundles.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#war_plugin">
                        <code class="literal">war</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java</code>
                </td>
                <td>-</td>
                <td>
                    <p>Adds support for assembling web application WAR files. See also <a class="xref" href="#web_project_tutorial">Chapter&nbsp;10, <i>Web Application Quickstart</i></a>.
                    </p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11B05"></a>22.4.&nbsp;Incubating integration plugins</h2></div></div></div><p>These plugins provide some integration with various runtime technologies.</p><div class="table"><p class="title"><b>Table&nbsp;22.4.&nbsp;Incubating integration plugins</b></p><div class="table-contents"><table id="N11B0A"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Automatically applies</td>
                    <td>Works with</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#distribution_plugin">
                        <code class="literal">distribution</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds support for building ZIP and TAR distributions.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#javaLibraryDistribution_plugin">
                        <code class="literal">java-library-distribution</code>
                    </a>
                </td>
                <td><code class="literal">java</code>, <code class="literal">distribution</code></td>
                <td>-</td>
                <td>
                    <p>Adds support for building ZIP and TAR distributions for a Java library.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#publishing_ivy">
                        <code class="literal">ivy-publish</code>
                    </a>
                </td>
                <td>-</td>
                <td><code class="literal">java</code>, <code class="literal">war</code></td>
                <td>
                    <p>This plugin provides a new DSL to support publishing artifacts to Ivy repositories, which improves on the existing DSL.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#publishing_maven">
                        <code class="literal">maven-publish</code>
                    </a>
                </td>
                <td>-</td>
                <td><code class="literal">java</code>, <code class="literal">war</code></td>
                <td>
                    <p>This plugin provides a new DSL to support publishing artifacts to Maven repositories, which improves on the existing DSL.
                    </p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11B88"></a>22.5.&nbsp;Software development plugins</h2></div></div></div><p>These plugins provide help with your software development process.</p><div class="table"><p class="title"><b>Table&nbsp;22.5.&nbsp;Software development plugins</b></p><div class="table-contents"><table id="N11B8D"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Automatically applies</td>
                    <td>Works with</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#announce_plugin">
                        <code class="literal">announce</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Publish messages to your favourite platforms, such as Twitter or Growl.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#build_announcements_plugin">
                        <code class="literal">build-announcements</code>
                    </a>
                </td>
                <td>announce</td>
                <td>-</td>
                <td>
                    <p>Sends local announcements to your desktop about interesting events in the build lifecycle.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#checkstyle_plugin">
                        <code class="literal">checkstyle</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Performs quality checks on your project's Java source files using
                        <a class="ulink" href="http://checkstyle.sourceforge.net/index.html" target="_top">Checkstyle</a>
                        and generates reports from these checks.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#codenarc_plugin">
                        <code class="literal">codenarc</code>
                    </a>
                </td>
                <td>
                    <code class="literal">groovy-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Performs quality checks on your project's Groovy source files using
                        <a class="ulink" href="http://codenarc.sourceforge.net/index.html" target="_top">CodeNarc</a>
                        and generates reports from these checks.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#eclipse_plugin">
                        <code class="literal">eclipse</code>
                    </a>
                </td>
                <td>-</td>
                <td><code class="literal">java</code>,<code class="literal">groovy</code>,
                    <code class="literal">scala</code>
                </td>
                <td>
                    <p>Generates files that are used by <a class="ulink" href="http://eclipse.org" target="_top">Eclipse IDE</a>, thus making
                        it possible to import the project into Eclipse. See also <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a>.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#eclipse_plugin">
                        <code class="literal">eclipse-wtp</code>
                    </a>
                </td>
                <td>-</td>
                <td><code class="literal">ear</code>,
                    <code class="literal">war</code>
                </td>
                <td>
                    <p>Does the same as the eclipse plugin plus generates eclipse WTP (Web Tools Platform) configuration files.
                        After importing to eclipse your war/ear projects should be configured to work with WTP.
                        See also <a class="xref" href="#tutorial_java_projects">Chapter&nbsp;7, <i>Java Quickstart</i></a>.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#findbugs_plugin">
                        <code class="literal">findbugs</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Performs quality checks on your project's Java source files using
                        <a class="ulink" href="http://findbugs.sourceforge.net" target="_top">FindBugs</a>
                        and generates reports from these checks.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#idea_plugin">
                        <code class="literal">idea</code>
                    </a>
                </td>
                <td>-</td>
                <td>
                    <code class="literal">java</code>
                </td>
                <td>
                    <p>Generates files that are used by <a class="ulink" href="http://www.jetbrains.com/idea/index.html" target="_top">Intellij IDEA IDE</a>,
                        thus making it possible to import the project into IDEA.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#jdepend_plugin">
                        <code class="literal">jdepend</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Performs quality checks on your project's source files using
                        <a class="ulink" href="http://clarkware.com/software/JDepend.html" target="_top">JDepend</a>
                        and generates reports from these checks.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#pmd_plugin">
                        <code class="literal">pmd</code>
                    </a>
                </td>
                <td>
                    <code class="literal">java-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Performs quality checks on your project's Java source files using
                        <a class="ulink" href="http://pmd.sourceforge.net" target="_top">PMD</a>
                        and generates reports from these checks.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#project_reports_plugin">
                        <code class="literal">project-report</code>
                    </a>
                </td>
                <td>
                    <code class="literal">reporting-base</code>
                </td>
                <td>-</td>
                <td>
                    <p>Generates reports containing useful information about your Gradle build.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#signing_plugin">
                        <code class="literal">signing</code>
                    </a>
                </td>
                <td>base</td>
                <td>-</td>
                <td>
                    <p>Adds the ability to digitally sign built files and artifacts.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#sonar_plugin">
                        <code class="literal">sonar</code>
                    </a>
                </td>
                <td>-</td>
                <td>java-base, java, jacoco</td>
                <td>
                    <p>Provides integration with the
                        <a class="ulink" href="http://www.sonarsource.org" target="_top">Sonar</a>
                        code quality platform. Superceeded by the <a class="link" href="#sonar_runner_plugin"><code class="literal">sonar-runner</code></a> plugin.
                    </p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11D24"></a>22.6.&nbsp;Incubating software development plugins</h2></div></div></div><p>These plugins provide help with your software development process.</p><div class="table"><p class="title"><b>Table&nbsp;22.6.&nbsp;Software development plugins</b></p><div class="table-contents"><table id="N11D29"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Automatically applies</td>
                    <td>Works with</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#buildDashboard_plugin">
                        <code class="literal">build-dashboard</code>
                    </a>
                </td>
                <td>reporting-base</td>
                <td>-</td>
                <td>
                    <p>Generates build dashboard report.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#build_init_plugin">
                        <code class="literal">build-init</code>
                    </a>
                </td>
                <td>wrapper</td>
                <td>-</td>
                <td>
                    <p>Adds support for initializing a new Gradle build. Handles converting a Maven build to a Gradle build.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">cunit</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds support for running <a class="ulink" href="http://cunit.sourceforge.net" target="_top">CUnit</a> tests.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#jacoco_plugin">
                        <code class="literal">jacoco</code>
                    </a>
                </td>
                <td>reporting-base</td>
                <td>java</td>
                <td>
                    <p>Provides integration with the
                        <a class="ulink" href="http://www.eclemma.org/jacoco/" target="_top">JaCoCo</a>
                            code coverage library for Java.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#sonar_runner_plugin">
                        <code class="literal">sonar-runner</code>
                    </a>
                </td>
                <td>-</td>
                <td>java-base, java, jacoco</td>
                <td>
                    <p>Provides integration with the
                        <a class="ulink" href="http://www.sonarsource.org" target="_top">Sonar</a>
                        code quality platform. Supersedes the <a class="link" href="#sonar_plugin"><code class="literal">sonar</code></a> plugin.
                    </p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#nativeBinaries">
                        <code class="literal">visual-studio</code>
                    </a>
                </td>
                <td>-</td>
                <td>native language plugins</td>
                <td>
                    <p>Adds integration with Visual Studio.</p>
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#wrapper_plugin">
                        <code class="literal">wrapper</code>
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
                <td>
                    <p>Adds a <a class="ulink" href="../dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_top"><code class="classname">Wrapper</code></a> task for generating Gradle wrapper files.
                    </p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11DF9"></a>22.7.&nbsp;Base plugins</h2></div></div></div><p>These plugins form the basic building blocks which the other plugins are assembled from. They are
            available for you to use in your build files, and are listed here for completeness. However, be aware that
            they are not yet considered part of Gradle's public API. As such, these plugins are not documented in the
            user guide. You might refer to their API documentation to learn more about them.
        </p><div class="table"><p class="title"><b>Table&nbsp;22.7.&nbsp;Base plugins</b></p><div class="table-contents"><table id="N11DFE"><thead><tr>
                    <td>Plugin Id</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>base</td>
                <td>
                    <p>Adds the standard lifecycle tasks and configures reasonable defaults for the archive tasks:
                        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">adds build
                                <em class="replaceable"><code>ConfigurationName</code></em>
                                tasks.
                                Those tasks assemble the artifacts belonging to the specified configuration.
                            </li><li class="listitem">adds upload
                                <em class="replaceable"><code>ConfigurationName</code></em>
                                tasks.
                                Those tasks assemble and upload the artifacts belonging to the specified configuration.
                            </li><li class="listitem">configures reasonable default values for all archive tasks (e.g. tasks that inherit from
                                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html" target="_top"><code class="classname">AbstractArchiveTask</code></a>).
                                For example, the archive tasks are tasks of types: <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Jar.html" target="_top"><code class="classname">Jar</code></a>,
                                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Tar.html" target="_top"><code class="classname">Tar</code></a>, <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>.
                                Specifically, <code class="literal">destinationDir</code>,
                                <code class="literal">baseName</code>
                                and
                                <code class="literal">version</code>
                                properties of the archive tasks are preconfigured with defaults.
                                This is extremely useful because it drives consistency across projects;
                                the consistency regarding naming conventions of archives and their location after the build completed.
                            </li></ul></div><p>
                    </p>
                </td>
            </tr><tr>
                <td>java-base</td>
                <td>
                    <p>Adds the source sets concept to the project. Does not add any particular source sets.</p>
                </td>
            </tr><tr>
                <td>groovy-base</td>
                <td>
                    <p>Adds the Groovy source sets concept to the project.</p>
                </td>
            </tr><tr>
                <td>scala-base</td>
                <td>
                    <p>Adds the Scala source sets concept to the project.</p>
                </td>
            </tr><tr>
                <td>reporting-base</td>
                <td>
                    <p>Adds some shared convention properties to the project, relating to report generation.</p>
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11E6C"></a>22.8.&nbsp;Third party plugins</h2></div></div></div><p>You can find a list of external plugins on the
            <a class="ulink" href="http://wiki.gradle.org/display/GRADLE/Plugins" target="_top">wiki</a>.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="java_plugin"></a>Chapter&nbsp;23.&nbsp;The Java Plugin</h1></div></div></div><p>The Java plugin adds Java compilation, testing and bundling capabilities to a project. It serves as the basis
        for many of the other Gradle plugins.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11E7D"></a>23.1.&nbsp;Usage</h2></div></div></div><p>To use the Java plugin, include in your build script:</p><div class="example"><a name="useJavaPlugin"></a><p class="title"><b>Example&nbsp;23.1.&nbsp;Using the Java plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11E8C"></a>23.2.&nbsp;Source sets</h2></div></div></div><p>The Java plugin introduces the concept of a <em class="firstterm">source set</em>. A source set is simply a group of
            source files which are compiled and executed together. These source files may include Java source files and
            resource files. Other plugins add the ability to include Groovy and Scala source files in a source set.
            A source set has an associated compile classpath, and runtime classpath.
        </p><p>
            One use for source sets is to group source files into logical groups which describe their purpose. For example,
            you might use a source set to define an integration test suite, or you might use separate source sets to define
            the API and implementation classes of your project.
        </p><p>The Java plugin defines two standard source sets, called <code class="literal">main</code> and <code class="literal">test</code>.
            The <code class="literal">main</code> source set contains your production source code, which is compiled and assembled
            into a JAR file. The <code class="literal">test</code> source set contains your unit test source code, which is
            compiled and executed using JUnit or TestNG.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N11EA4"></a>23.3.&nbsp;Tasks</h2></div></div></div><p>The Java plugin adds a number of tasks to your project, as shown below.</p><div class="table"><p class="title"><b>Table&nbsp;23.1.&nbsp;Java plugin - tasks</b></p><div class="table-contents"><table id="N11EA9"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">compileJava</code>
                </td>
                <td>All tasks which produce the compile classpath. This includes the <code class="literal">jar</code> task for
                    project dependencies included in the <code class="literal">compile</code> configuration.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_top"><code class="classname">JavaCompile</code></a></td>
                <td>Compiles production Java source files using javac.</td>
            </tr><tr>
                <td>
                    <code class="literal">processResources</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Copy.html" target="_top"><code class="classname">Copy</code></a></td>
                <td>Copies production resources into the production classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">classes</code>
                </td>
                <td>
                    <code class="literal">compileJava</code> and <code class="literal">processResources</code>.
                    Some plugins add additional compilation tasks.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Assembles the production classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">compileTestJava</code>
                </td>
                <td>
                    <code class="literal">compile</code>, plus all tasks which produce the test compile classpath.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_top"><code class="classname">JavaCompile</code></a></td>
                <td>Compiles test Java source files using javac.</td>
            </tr><tr>
                <td>
                    <code class="literal">processTestResources</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Copy.html" target="_top"><code class="classname">Copy</code></a></td>
                <td>Copies test resources into the test classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">testClasses</code>
                </td>
                <td>
                    <code class="literal">compileTestJava</code> and <code class="literal">processTestResources</code>.
                    Some plugins add additional test compilation tasks.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Assembles the test classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">jar</code>
                </td>
                <td>
                    <code class="literal">compile</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Jar.html" target="_top"><code class="classname">Jar</code></a></td>
                <td>Assembles the JAR file</td>
            </tr><tr>
                <td>
                    <code class="literal">javadoc</code>
                </td>
                <td><code class="literal">compile</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.javadoc.Javadoc.html" target="_top"><code class="classname">Javadoc</code></a></td>
                <td>Generates API documentation for the production Java source, using Javadoc </td>
            </tr><tr>
                <td>
                    <code class="literal">test</code>
                </td>
                <td>
                    <code class="literal">compile</code>,
                    <code class="literal">compileTest</code>,
                    plus all tasks which produce the test runtime classpath.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a></td>
                <td>Runs the unit tests using JUnit or TestNG.</td>
            </tr><tr>
                <td>
                    <code class="literal">uploadArchives</code>
                </td>
                <td>
                    The tasks which produce the artifacts in the <code class="literal">archives</code> configuration, including <code class="literal">jar</code>.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Upload.html" target="_top"><code class="classname">Upload</code></a></td>
                <td>Uploads the artifacts in the <code class="literal">archives</code> configuration, including the JAR file.</td>
            </tr><tr>
                <td>
                    <code class="literal">clean</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Deletes the project build directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">clean<em class="replaceable"><code>TaskName</code></em></code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Deletes the output files produced by the specified task. For example <code class="literal">cleanJar</code>
                    will delete the JAR file created by the <code class="literal">jar</code> task, and
                    <code class="literal">cleanTest</code> will delete the test results created by the <code class="literal">test</code> task.
                </td>
            </tr></table></div></div><p>For each source set you add to the project, the Java plugin adds the following compilation tasks:</p><div class="table"><p class="title"><b>Table&nbsp;23.2.&nbsp;Java plugin - source set tasks</b></p><div class="table-contents"><table id="java_source_set_tasks"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code>
                </td>
                <td>
                    All tasks which produce the source set's compile classpath.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_top"><code class="classname">JavaCompile</code></a></td>
                <td>Compiles the given source set's Java source files using javac.</td>
            </tr><tr>
                <td>
                    <code class="literal">process<em class="replaceable"><code>SourceSet</code></em>Resources</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Copy.html" target="_top"><code class="classname">Copy</code></a></td>
                <td>Copies the given source set's resources into the classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal"><em class="replaceable"><code>sourceSet</code></em>Classes</code>
                </td>
                <td>
                    <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code> and
                    <code class="literal">process<em class="replaceable"><code>SourceSet</code></em>Resources</code>.
                    Some plugins add additional compilation tasks for the source set.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Assembles the given source set's classes directory.</td>
            </tr></table></div></div><p>The Java plugin also adds a number of tasks which form a lifecycle for the project:</p><div class="table"><p class="title"><b>Table&nbsp;23.3.&nbsp;Java plugin - lifecycle tasks</b></p><div class="table-contents"><table id="N12048"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">assemble</code>
                </td>
                <td>
                    All archive tasks in the project, including <code class="literal">jar</code>. Some plugins add additional
                    archive tasks to the project.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Assembles all the archives in the project.</td>
            </tr><tr>
                <td>
                    <code class="literal">check</code>
                </td>
                <td>
                    All verification tasks in the project, including <code class="literal">test</code>. Some plugins add
                    additional verification tasks to the project.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Performs all verification tasks in the project.</td>
            </tr><tr>
                <td>
                    <code class="literal">build</code>
                </td>
                <td>
                    <code class="literal">check</code> and <code class="literal">assemble</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Performs a full build of the project.</td>
            </tr><tr>
                <td>
                    <code class="literal">buildNeeded</code>
                </td>
                <td>
                    <code class="literal">build</code> and <code class="literal">build</code> tasks in all project lib dependencies of the
                    <code class="literal">testRuntime</code> configuration.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Performs a full build of the project and all projects it depends on.</td>
            </tr><tr>
                <td>
                    <code class="literal">buildDependents</code>
                </td>
                <td>
                    <code class="literal">build</code> and <code class="literal">build</code> tasks in all projects with a project lib
                    dependency on this project in a <code class="literal">testRuntime</code> configuration.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Performs a full build of the project and all projects which depend on it.</td>
            </tr><tr>
                <td>
                    <code class="literal">build<em class="replaceable"><code>ConfigurationName</code></em></code>
                </td>
                <td>
                    The tasks which produce the artifacts in configuration <em class="replaceable"><code>ConfigurationName</code></em>.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Assembles the artifacts in the specified configuration.
                    The task is added by the Base plugin which is implicitly applied by the Java plugin.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">upload<em class="replaceable"><code>ConfigurationName</code></em></code>
                </td>
                <td>
                    The tasks which uploads the artifacts in configuration <em class="replaceable"><code>ConfigurationName</code></em>.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Upload.html" target="_top"><code class="classname">Upload</code></a></td>
                <td>Assembles and uploads the artifacts in the specified configuration.
                    The task is added by the Base plugin which is implicitly applied by the Java plugin.
                </td>
            </tr></table></div></div><p>The following diagram shows the relationships between these tasks.</p><div class="figure"><a name="N12110"></a><p class="title"><b>Figure&nbsp;23.1.&nbsp;Java plugin - tasks</b></p><div class="figure-contents"><img src="img/javaPluginTasks.png" alt="Java plugin - tasks"></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12116"></a>23.4.&nbsp;Project layout</h2></div></div></div><p>The Java plugin assumes the project layout shown below. None of these directories need exist or have
            anything in them. The Java plugin will compile whatever it finds, and handles anything which is missing.
        </p><div class="table"><p class="title"><b>Table&nbsp;23.4.&nbsp;Java plugin - default project layout</b></p><div class="table-contents"><table id="javalayout"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
        <td>
            <code class="filename">src/main/java</code>
        </td>
        <td>Production Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/main/resources</code>
        </td>
        <td>Production resources</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/java</code>
        </td>
        <td>Test Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/resources</code>
        </td>
        <td>Test resources</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/java</code>
        </td>
        <td>Java source for the given source set</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/resources</code>
        </td>
        <td>Resources for the given source set</td>
    </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12179"></a>23.4.1.&nbsp;Changing the project layout</h3></div></div></div><p>You configure the project layout by configuring the appropriate source set. This is discussed in
                more detail in the following sections. Here is a brief example which changes the main Java and resource
                source directories.
            </p><div class="example"><a name="customJavaSourceLayout"></a><p class="title"><b>Example&nbsp;23.2.&nbsp;Custom Java source layout</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceSets {
    main {
        java {
            srcDir <span class="hl-string">'src/java'</span>
        }
        resources {
            srcDir <span class="hl-string">'src/resources'</span>
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:java_plugin_and_dependency_management"></a>23.5.&nbsp;Dependency management</h2></div></div></div><p>The Java plugin adds a number of dependency configurations to your project, as shown below. It assigns
            those configurations to tasks such as <code class="literal">compileJava</code> and <code class="literal">test</code>.
        </p><div class="table"><p class="title"><b>Table&nbsp;23.5.&nbsp;Java plugin - dependency configurations</b></p><div class="table-contents"><table id="tab:configurations"><thead><tr>
                    <td>Name</td>
                    <td>Extends</td>
                    <td>Used by tasks</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>compile</td>
                <td>-</td>
                <td>compileJava</td>
                <td>Compile time dependencies</td>
            </tr><tr>
                <td>runtime</td>
                <td>compile</td>
                <td>-</td>
                <td>Runtime dependencies</td>
            </tr><tr>
                <td>testCompile</td>
                <td>compile</td>
                <td>compileTestJava</td>
                <td>Additional dependencies for compiling tests.</td>
            </tr><tr>
                <td>testRuntime</td>
                <td>runtime, testCompile</td>
                <td>test</td>
                <td>Additional dependencies for running tests only.</td>
            </tr><tr>
                <td>archives</td>
                <td>-</td>
                <td>uploadArchives</td>
                <td>Artifacts (e.g. jars) produced by this project.</td>
            </tr><tr>
                <td>default</td>
                <td>runtime</td>
                <td>-</td>
                <td>The default configuration used by a project dependency on this project. Contains the artifacts and
                    dependencies required by this project at runtime.
                </td>
            </tr></table></div></div><div class="figure"><a name="N121FB"></a><p class="title"><b>Figure&nbsp;23.2.&nbsp;Java plugin - dependency configurations</b></p><div class="figure-contents"><img src="img/javaPluginConfigurations.png" alt="Java plugin - dependency configurations"></div></div><br class="figure-break"><p>For each source set you add to the project, the Java plugins adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;23.6.&nbsp;Java plugin - source set dependency configurations</b></p><div class="table-contents"><table id="java_source_set_configurations"><thead><tr>
                    <td>Name</td>
                    <td>Extends</td>
                    <td>Used by tasks</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td><em class="replaceable"><code>sourceSet</code></em>Compile</td>
                <td>-</td>
                <td>compile<em class="replaceable"><code>SourceSet</code></em>Java</td>
                <td>Compile time dependencies for the given source set</td>
            </tr><tr>
                <td><em class="replaceable"><code>sourceSet</code></em>Runtime</td>
                <td><em class="replaceable"><code>sourceSet</code></em>Compile</td>
                <td>-</td>
                <td>Runtime time dependencies for the given source set</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1223B"></a>23.6.&nbsp;Convention properties</h2></div></div></div><p>
            The Java plugin adds a number of convention properties to the project, shown below. You can use these properties
            in your build script as though they were properties of the project object (see
            <a class="xref" href="#sub:more_about_convention_objects">Section&nbsp;21.3, &ldquo;Conventions&rdquo;</a>).
        </p><div class="table"><p class="title"><b>Table&nbsp;23.7.&nbsp;Java plugin - directory properties</b></p><div class="table-contents"><table id="javaconventionDir"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
        <td>
            <code class="literal">reportsDirName</code>
        </td>
        <td>
            <code class="classname">String</code>
        </td>
        <td>
            <code class="filename">reports</code>
        </td>
        <td>
            The name of the directory to generate reports into, relative to the build directory.
        </td>
    </tr><tr>
        <td>
            <code class="literal">reportsDir</code>
        </td>
        <td>
            <code class="classname">File</code> (read-only)
        </td>
        <td>
            <code class="filename"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>reportsDirName</code></em></code>
        </td>
        <td>
            The directory to generate reports into.
        </td>
    </tr><tr>
                <td>
                    <code class="literal">testResultsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">test-results</code>
                </td>
                <td>
                    The name of the directory to generate test result .xml files into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testResultsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>testResultsDirName</code></em></code>
                </td>
                <td>
                    The directory to generate test result .xml files into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testReportDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">tests</code>
                </td>
                <td>
                    The name of the directory to generate the test report into, relative to the reports directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testReportDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>reportsDir</code></em>/<code class="literal">testReportDirName</code></code>
                </td>
                <td>
                    The directory to generate the test report into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">libsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">libs</code>
                </td>
                <td>
                    The name of the directory to generate libraries into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">libsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>libsDirName</code></em></code>
                </td>
                <td>
                    The directory to generate libraries into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">distsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">distributions</code>
                </td>
                <td>
                    The name of the directory to generate distributions into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">distsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>distsDirName</code></em></code>
                </td>
                <td>
                    The directory to generate distributions into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">docsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">docs</code>
                </td>
                <td>
                    The name of the directory to generate documentation into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">docsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>docsDirName</code></em></code>
                </td>
                <td>
                    The directory to generate documentation into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">dependencyCacheDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">dependency-cache</code>
                </td>
                <td>
                    The name of the directory to use to cache source dependency information, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">dependencyCacheDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>dependencyCacheDirName</code></em></code>
                </td>
                <td>
                    The directory to use to cache source dependency information.
                </td>
            </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;23.8.&nbsp;Java plugin - other properties</b></p><div class="table-contents"><table id="javaconventionNonDir"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">sourceSets</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/tasks/SourceSetContainer.html" target="_top"><code class="classname">SourceSetContainer</code></a> (read-only)</td>
                <td>Not null</td>
                <td>Contains the project's source sets.</td>
            </tr><tr>
                <td>
                    <code class="literal">sourceCompatibility</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/JavaVersion.html" target="_top"><code class="classname">JavaVersion</code></a>. Can also set using a String or a Number, e.g.
                    <code class="literal">'1.5'</code> or <code class="literal">1.5</code>.
                </td>
                <td>Value of the current used JVM</td>
                <td>Java version compatibility to use when compiling Java source.</td>
            </tr><tr>
                <td>
                    <code class="literal">targetCompatibility</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/JavaVersion.html" target="_top"><code class="classname">JavaVersion</code></a>. Can also set using a String or Number, e.g.
                    <code class="literal">'1.5'</code> or <code class="literal">1.5</code>.
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>sourceCompatibility</code></em></code>
                </td>
                <td>Java version to generate classes for.</td>
            </tr><tr>
                <td>
                    <code class="literal">archivesBaseName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td><code class="literal"><em class="replaceable"><code>projectName</code></em></code></td>
                <td>The basename to use for archives, such as JAR or ZIP files.</td>
            </tr><tr>
                <td>
                    <code class="literal">manifest</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/java/archives/Manifest.html" target="_top"><code class="classname">Manifest</code></a></td>
                <td>an empty manifest</td>
                <td>The manifest to include in all JAR files.</td>
            </tr></table></div></div><p>
            These properties are provided by convention objects of type <a class="ulink" href="../dsl/org.gradle.api.plugins.JavaPluginConvention.html" target="_top"><code class="classname">JavaPluginConvention</code></a>,
            and <a class="ulink" href="../dsl/org.gradle.api.plugins.BasePluginConvention.html" target="_top"><code class="classname">BasePluginConvention</code></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:source_sets"></a>23.7.&nbsp;Working with source sets</h2></div></div></div><p>You can access the source sets of a project using the <code class="literal">sourceSets</code> property. This
            is a container for the project's source sets, of type <a class="ulink" href="../javadoc/org/gradle/api/tasks/SourceSetContainer.html" target="_top"><code class="classname">SourceSetContainer</code></a>.
            There is also a <code class="literal">sourceSets { }</code> script block, which you can pass a closure to configure the
            source set container. The source set container works pretty much the same way as other containers, such
            as <code class="literal">tasks</code>.
        </p><div class="example"><a name="defineSourceSet"></a><p class="title"><b>Example&nbsp;23.3.&nbsp;Accessing a source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Various ways to access the main source set</span>
println sourceSets.main.output.classesDir
println sourceSets[<span class="hl-string">'main'</span>].output.classesDir
sourceSets {
    println main.output.classesDir
}
sourceSets {
    main {
        println output.classesDir
    }
}

<span class="hl-comment">// Iterate over the source sets</span>
sourceSets.all {
    println name
}</pre></div></div><br class="example-break"><p>To configure an existing source set, you simply use one of the above access methods to set the
            properties of the source set. The properties are described below. Here is an example which configures the
            main Java and resources directories:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;23.4.&nbsp;Configuring the source directories of a source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceSets {
    main {
        java {
            srcDir <span class="hl-string">'src/java'</span>
        }
        resources {
            srcDir <span class="hl-string">'src/resources'</span>
        }
    }
}</pre></div></div><br class="example-break"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12479"></a>23.7.1.&nbsp;Source set properties</h3></div></div></div><p>The following table lists some of the important properties of a source set.
                You can find more details in the API documentation for <a class="ulink" href="../dsl/org.gradle.api.tasks.SourceSet.html" target="_top"><code class="classname">SourceSet</code></a>.
            </p><div class="table"><p class="title"><b>Table&nbsp;23.9.&nbsp;Java plugin - source set properties</b></p><div class="table-contents"><table id="N12483"><thead><tr>
                        <td>Property name</td>
                        <td>Type</td>
                        <td>Default value</td>
                        <td>Description</td>
                    </tr></thead><tr>
                    <td>
                        <code class="literal">name</code>
                    </td>
                    <td>
                        <code class="classname">String</code> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The name of the source set, used to identify it.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">output</code>
                    </td>
                    <td>
                        <a class="ulink" href="../dsl/org.gradle.api.tasks.SourceSetOutput.html" target="_top"><code class="classname">SourceSetOutput</code></a> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The output files of the source set, containing its compiled classes and resources.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">output.classesDir</code>
                    </td>
                    <td>
                        <code class="classname">File</code>
                    </td>
                    <td>
                        <code class="literal"><em class="replaceable"><code>buildDir</code></em>/classes/<em class="replaceable"><code>name</code></em></code>
                    </td>
                    <td>
                        The directory to generate the classes of this source set into.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">output.resourcesDir</code>
                    </td>
                    <td>
                        <code class="classname">File</code>
                    </td>
                    <td>
                        <code class="literal"><em class="replaceable"><code>buildDir</code></em>/resources/<em class="replaceable"><code>name</code></em></code>
                    </td>
                    <td>
                        The directory to generate the resources of this source set into.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">compileClasspath</code>
                    </td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a>
                    </td>
                    <td>
                        <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em></code> configuration.
                    </td>
                    <td>
                        The classpath to use when compiling the source files of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">runtimeClasspath</code>
                    </td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a>
                    </td>
                    <td>
                        <code class="literal">output</code> + <code class="literal">runtime<em class="replaceable"><code>SourceSet</code></em></code> configuration.
                    </td>
                    <td>
                        The classpath to use when executing the classes of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">java</code>
                    </td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The Java source files of this source set. Contains only <code class="filename">.java</code> files
                        found in the Java source directories, and excludes all other files.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">java.srcDirs</code>
                    </td>
                    <td>
                        <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.
                    </td>
                    <td>
                        <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/java]</code>
                    </td>
                    <td>
                        The source directories containing the Java source files of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">resources</code>
                    </td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The resources of this source set. Contains only resources, and excludes any
                        <code class="filename">.java</code> files found in the resource source directories. Other plugins,
                        such as the Groovy plugin, exclude additional types of files from this collection.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">resources.srcDirs</code>
                    </td>
                    <td>
                        <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.
                    </td>
                    <td>
                        <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/resources]</code>
                    </td>
                    <td>
                        The source directories containing the resources of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">allJava</code>
                    </td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                    </td>
                    <td>
                        <code class="literal">java</code>
                    </td>
                    <td>
                        All <code class="filename">.java</code> files of this source set. Some plugins, such as the Groovy plugin,
                        add additional Java source files to this collection.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">allSource</code>
                    </td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                    </td>
                    <td>
                        <code class="literal">resources + java</code>
                    </td>
                    <td>
                        All source files of this source set. This include all resource files and all Java source files.
                        Some plugins, such as the Groovy plugin, add additional source files to this collection.
                    </td>
                </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N125D5"></a>23.7.2.&nbsp;Defining new source sets</h3></div></div></div><p>To define a new source set, you simply reference it in the <code class="literal">sourceSets { }</code> block. Here's an example:
            </p><div class="example"><a name="defineSourceSet"></a><p class="title"><b>Example&nbsp;23.5.&nbsp;Defining a source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceSets {
    intTest
}</pre></div></div><br class="example-break"><p>
                When you define a new source set, the Java plugin adds some dependency configurations for the
                source set, as shown in <a class="xref" href="#java_source_set_configurations" title="Table&nbsp;23.6.&nbsp;Java plugin - source set dependency configurations">Table&nbsp;23.6, &ldquo;Java plugin - source set dependency configurations&rdquo;</a>. You can use these configurations to
                define the compile and runtime dependencies of the source set.
            </p><div class="example"><a name="sourceSetDependencies"></a><p class="title"><b>Example&nbsp;23.6.&nbsp;Defining source set dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceSets {
    intTest
}

dependencies {
    intTestCompile <span class="hl-string">'junit:junit:4.11'</span>
    intTestRuntime <span class="hl-string">'org.ow2.asm:asm-all:4.0'</span>
}</pre></div></div><br class="example-break"><p>
                The Java plugin also adds a number of tasks which assemble the classes for the
                source set, as shown in <a class="xref" href="#java_source_set_tasks" title="Table&nbsp;23.2.&nbsp;Java plugin - source set tasks">Table&nbsp;23.2, &ldquo;Java plugin - source set tasks&rdquo;</a>. For example, for a source set called
                <code class="literal">intTest</code>, you can run <strong class="userinput"><code>gradle intTestClasses</code></strong> to compile the
                int test classes.
            </p><div class="example"><a name="compileSourceSet"></a><p class="title"><b>Example&nbsp;23.7.&nbsp;Compiling a source set</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle intTestClasses</code></strong></p><pre class="screen">&gt; gradle intTestClasses
:compileIntTestJava
:processIntTestResources
:intTestClasses

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1260B"></a>23.7.3.&nbsp;Some source set examples</h3></div></div></div><p>Adding a JAR containing the classes of a source set:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;23.8.&nbsp;Assembling a JAR for a source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task intTestJar(type: Jar) {
    from sourceSets.intTest.output
}</pre></div></div><br class="example-break"><p>Generating Javadoc for a source set:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;23.9.&nbsp;Generating the Javadoc for a source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task intTestJavadoc(type: Javadoc) {
    source sourceSets.intTest.allJava
}</pre></div></div><br class="example-break"><p>Adding a test suite to run the tests in a source set:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;23.10.&nbsp;Running tests in a source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task intTest(type: Test) {
    testClassesDir = sourceSets.intTest.output.classesDir
    classpath = sourceSets.intTest.runtimeClasspath
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:javadoc"></a>23.8.&nbsp;Javadoc</h2></div></div></div><p>The <code class="literal">javadoc</code> task is an instance of <a class="ulink" href="../dsl/org.gradle.api.tasks.javadoc.Javadoc.html" target="_top"><code class="classname">Javadoc</code></a>.
            It supports the core javadoc options and the options of the standard doclet described in the
            <a class="ulink" href="http://download.oracle.com/javase/1.5.0/docs/tooldocs/windows/javadoc.html#referenceguide" target="_top">reference documentation</a>
            of the Javadoc executable.
            For a complete list of supported Javadoc options consult the API documentation of the following classes:
            <a class="ulink" href="../javadoc/org/gradle/external/javadoc/CoreJavadocOptions.html" target="_top"><code class="classname">CoreJavadocOptions</code></a> and <a class="ulink" href="../javadoc/org/gradle/external/javadoc/StandardJavadocDocletOptions.html" target="_top"><code class="classname">StandardJavadocDocletOptions</code></a>.
        </p><div class="table"><p class="title"><b>Table&nbsp;23.10.&nbsp;Java plugin - Javadoc properties</b></p><div class="table-contents"><table id="N1264E"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">classpath</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a></td>
                <td><code class="literal">sourceSets.main.output + sourceSets.main.compileClasspath</code></td>
            </tr><tr>
                <td><code class="literal">source</code></td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileTree.html" target="_top"><code class="classname">FileTree</code></a>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.</td>
                <td><code class="literal">sourceSets.main.allJava</code></td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td><code class="classname">File</code></td>
                <td><code class="filename"><em class="replaceable"><code>docsDir</code></em>/javadoc</code></td>
            </tr><tr>
                <td>
                    <code class="literal">title</code>
                </td>
                <td><code class="classname">String</code></td>
                <td>The name and version of the project</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:clean"></a>23.9.&nbsp;Clean</h2></div></div></div><p>The <code class="literal">clean</code> task is an instance of <a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a>. It
            simply removes the directory denoted by its <code class="literal">dir</code>
            property.
        </p><div class="table"><p class="title"><b>Table&nbsp;23.11.&nbsp;Java plugin - Clean properties</b></p><div class="table-contents"><table id="N126B5"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">dir</code>
                </td>
                <td><code class="classname">File</code></td>
                <td><code class="filename"><em class="replaceable"><code>buildDir</code></em></code></td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:resources"></a>23.10.&nbsp;Resources</h2></div></div></div><p>The Java plugin uses the <a class="ulink" href="../dsl/org.gradle.api.tasks.Copy.html" target="_top"><code class="classname">Copy</code></a> task for resource handling. It adds an
            instance for each source set in the project. You can find out more about the copy task in
            <a class="xref" href="#sec:copying_files">Section&nbsp;16.6, &ldquo;Copying files&rdquo;</a>.
        </p><div class="table"><p class="title"><b>Table&nbsp;23.12.&nbsp;Java plugin - ProcessResources properties</b></p><div class="table-contents"><table id="N126E3"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">srcDirs</code>
                </td>
                <td><code class="classname">Object</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.</td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.resources</code></td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td><code class="classname">File</code>. Can set using anything described in <a class="xref" href="#sec:locating_files">Section&nbsp;16.1, &ldquo;Locating files&rdquo;</a>.</td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.output.resourcesDir</code></td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:compile"></a>23.11.&nbsp;CompileJava</h2></div></div></div><p>The Java plugin adds a <a class="ulink" href="../dsl/org.gradle.api.tasks.compile.JavaCompile.html" target="_top"><code class="classname">JavaCompile</code></a> instance for each
            source set in the project. Some of the most common configuration options are shown below.
        </p><div class="table"><p class="title"><b>Table&nbsp;23.13.&nbsp;Java plugin - Compile properties</b></p><div class="table-contents"><table id="N12729"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">classpath</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a></td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.compileClasspath</code></td>
            </tr><tr>
                <td>
                    <code class="literal">source</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileTree.html" target="_top"><code class="classname">FileTree</code></a>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.</td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.java</code></td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td><code class="classname">File</code>.</td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.output.classesDir</code></td>
            </tr></table></div></div><p>By default, the Java compiler runs in the Gradle process. Setting <code class="literal">options.fork</code> to <code class="literal">true</code>
            causes compilation to occur in a separate process. In the case of the Ant javac task, this means that a new process will be
            forked for each compile task, which can slow down compilation. Conversely, Gradle's direct compiler integration (see above) will
            reuse the same compiler process as much as possible. In both cases, all fork options specified
            with <code class="literal">options.forkOptions</code> will be honored.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:java_test"></a>23.12.&nbsp;Test</h2></div></div></div><p>The <code class="literal">test</code> task is an instance of <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a>.
            It automatically detects and executes all unit tests in the <code class="literal">test</code> source set.
            It also generates a report once test execution is complete. JUnit and TestNG are both supported.
            Have a look at <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a> for the complete API.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12798"></a>23.12.1.&nbsp;Test execution</h3></div></div></div><p>Tests are executed in a separate JVM, isolated from the main build process. The <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a> task's
                API allows you some control over how this happens.
            </p><p>There are a number of properties which control how the test process is launched. This includes
                things such as system properties, JVM arguments, and the Java executable to use.
            </p><p>You can specify whether or not to execute your tests in parallel. Gradle provides parallel test execution
                by running multiple test processes concurrently. Each test process executes only a single test at a time, so you
                generally don't need to do anything special to your tests to take advantage of this.
                The <code class="literal">maxParallelForks</code> property specifies the maximum number of test processes to run
                at any given time. The default is 1, that is, do not execute the tests in parallel.
            </p><p>The test process sets the <code class="literal">org.gradle.test.worker</code> system property to a unique
                identifier for that test process, which you can use, for example, in files names or other
                resource identifiers.
            </p><p>You can specify that test processes should be restarted after it has executed a certain number of
                test classes. This can be a useful alternative to giving your test process a very large
                heap.
                The <code class="literal">forkEvery</code> property specifies the
                maximum number of test classes to execute in a test process. The default is to execute an unlimited number
                of tests in each test process.</p><p>The task has an <code class="literal">ignoreFailures</code> property to control the behavior when tests fail.
                Test always executes every test that it detects. It stops the build afterwards if <code class="literal">ignoreFailures</code>
                is false and there are failing tests. The default value of <code class="literal">ignoreFailures</code> is false.
            </p><p>The <code class="literal">testLogging</code> property allows to configure which test events are going to be logged and at
                which detail level. By default, a concise message will be logged for every failed test. See
                <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.logging.TestLoggingContainer.html" target="_top"><code class="classname">TestLoggingContainer</code></a> for how to tune test logging to your
                preferences.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N127C8"></a>23.12.2.&nbsp;Debugging</h3></div></div></div><p>
                The test task provides a <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html#org.gradle.api.tasks.testing.Test:debug" target="_top"><code class="classname">Test.getDebug()</code></a> property that can be set to launch to make the JVM wait for a
                debugger to attach to port 5005 before proceeding with test execution.
            </p><p>
                This can also be enabled at invocation time via the <strong class="userinput"><code>--debug-jvm</code></strong> task option.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="test_filtering"></a>23.12.3.&nbsp;Test filtering</h3></div></div></div><p>Starting with Gradle 1.10, it is possible to include only specific tests, based on the test name pattern.
                Filtering is a different mechanism than test class inclusion / exclusion that will be described in the next few paragraphs
                (<code class="literal">-Dtest.single</code>, <code class="literal">test.include</code> and friends).
                The latter is based on files, e.g. the physical location of the test implementation class.
                File-level test selection does not support many interesting scenarios that are possible with test-level filtering.
                Some of them Gradle handles now and some will be satisfied in the future releases:
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Filtering at the level of specific test methods; executing a single test method</li><li class="listitem">Filtering based on custom annotations (future)</li><li class="listitem">Filtering based on test hierarchy; executing all tests that extend ceratain base class (future)</li><li class="listitem">Filtering based on some custom runtime rule, e.g. particular value of a system property or some static state (future)</li></ul></div><p>
            </p><p>
                Test filtering feature has following characteristic:
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Fully qualified class name or fully qualified method name is supported,
                        e.g. "org.gradle.SomeTest", "org.gradle.SomeTest.someMethod"</li><li class="listitem">Wildcard '*' is supported for matching any characters</li><li class="listitem">Command line option "--tests" is provided to conveniently set the test filter.
                        Especially useful for the classic 'single test method execution' use case.
                        When the command line option is used, the inclusion filters declared in the build script are ignored.
                    </li><li class="listitem">Gradle tries best to filter the tests given limitations of particular test framework API.
                        Some advanced, synthetic tests may not be fully compatible with filtering.
                        However, vast majority of tests and use cases should be handled neatly.
                    </li><li class="listitem">Test filtering supersedes the file-based test selection. The latter may be completely replaced in future.
                        We will grow the the test filtering api and add more kinds of filters.
                    </li></ul></div><p>
            </p><p>
                </p><div class="example"><a name="testfiltering"></a><p class="title"><b>Example&nbsp;23.11.&nbsp;Filtering tests in the build script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">test {
    filter {
        <span class="hl-comment">//include specific method in any of the tests</span>
        includeTestsMatching <span class="hl-string">"*UiCheck"</span>

        <span class="hl-comment">//include all tests from package</span>
        includeTestsMatching <span class="hl-string">"org.gradle.internal.*"</span>

        <span class="hl-comment">//include all integration tests</span>
        includeTestsMatching <span class="hl-string">"*IntegTest"</span>
    }
}</pre></div></div><p><br class="example-break">
                For more details and examples please see the <a class="ulink" href="../javadoc/org/gradle/api/tasks/testing/TestFilter.html" target="_top"><code class="classname">TestFilter</code></a> reference.
            </p><p>
                Some examples of using the command line option:

                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">gradle test --tests org.gradle.SomeTest.someSpecificFeature</code></p></li><li class="listitem"><p><code class="literal">gradle test --tests *SomeTest.someSpecificFeature</code></p></li><li class="listitem"><p><code class="literal">gradle test --tests *SomeSpecificTest</code></p></li><li class="listitem"><p><code class="literal">gradle test --tests all.in.specific.package*</code></p></li><li class="listitem"><p><code class="literal">gradle test --tests *IntegTest</code></p></li><li class="listitem"><p><code class="literal">gradle test --tests *IntegTest*ui*</code></p></li><li class="listitem"><p><code class="literal">gradle someTestTask --tests *UiTest someOtherTestTask --tests *WebTest*ui</code></p></li></ul></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1282D"></a>23.12.4.&nbsp;Single test execution via System Properties</h3></div></div></div><div class="note">This mechanism has been superseded by 'Test Filtering', described above.</div><p>Setting a system property of <em class="replaceable"><code>taskName.single</code></em> = <em class="replaceable"><code>testNamePattern</code></em>
                  will only execute tests that match the specified <em class="replaceable"><code>testNamePattern</code></em>.
                  The <em class="replaceable"><code>taskName</code></em> can be a full multi-project path like ":sub1:sub2:test"
                  or just the task name.  The <em class="replaceable"><code>testNamePattern</code></em> will be used to form an include
                  pattern of "**/testNamePattern*.class".
                  If no tests with this pattern can be found an exception is thrown. This is to shield you from false security.
                  If tests of more than one subproject are executed, the pattern is applied to each subproject. An exception
                  is thrown if no tests can be found for a particular subproject. In such a case you can use the path notation of the
                  pattern, so that the pattern is applied only to the test task of a specific subproject. Alternatively you can specify the fully
                  qualified task name to be executed. You can also specify multiple patterns. Examples:
                  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><code class="literal">gradle -Dtest.single=ThisUniquelyNamedTest test</code></p></li><li class="listitem"><p><code class="literal">gradle -Dtest.single=a/b/ test</code></p></li><li class="listitem"><p><code class="literal">gradle -DintegTest.single=*IntegrationTest integTest</code></p></li><li class="listitem"><p><code class="literal">gradle -Dtest.single=:proj1:test:Customer build</code></p></li><li class="listitem"><p><code class="literal">gradle -DintegTest.single=c/d/ :proj1:integTest</code></p></li></ul></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12859"></a>23.12.5.&nbsp;Test detection</h3></div></div></div><p>The <code class="literal">Test</code> task detects which classes are test classes by inspecting the compiled test classes.
                By default it scans all <code class="filename">.class</code> files. You can set custom includes / excludes, only those
                classes will be scanned. Depending on the test framework used (JUnit / TestNG) the test class detection
                uses different criteria.
            </p><p>
                When using JUnit, we scan for both JUnit 3 and 4 test classes. If any of the following criteria match, the
                class is considered to be a JUnit test class:
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Class or a super class extends <code class="classname">TestCase</code> or <code class="classname">GroovyTestCase</code></p></li><li class="listitem"><p>Class or a super class is annotated with <code class="classname">@RunWith</code></p></li><li class="listitem"><p>Class or a super class contain a method annotated with <code class="classname">@Test</code></p></li></ul></div><p>
            </p><p>
                When using TestNG, we scan for methods annotated with <code class="classname">@Test</code>.
            </p><p>
                Note that abstract classes are not executed. Gradle also scan up the inheritance tree into jar files
                on the test classpath.
            </p><p>
                In case you don't want to use the test class detection, you can disable it by setting
                <code class="literal">scanForTestClasses</code> to false. This will make the test task only use the includes /
                excludes to find test classes.

                If <code class="literal">scanForTestClasses</code> is disabled and no include or exclude patterns are specified, the
                respective defaults are used. For include this is <code class="literal">"**/*Tests.class", "**/*Test.class"</code>
                and the for exclude it is <code class="literal">"**/Abstract*.class"</code>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="test_grouping"></a>23.12.6.&nbsp;Test grouping</h3></div></div></div><p>JUnit and TestNG allows sophisticated groupings of test methods. </p><p>For grouping JUnit test classes and methods JUnit 4.8 introduces the concept of categories.
                <sup>[<a href="#ftn.N12897" name="N12897" class="footnote">9</a>]</sup>
                The <code class="literal">test</code> task allows the specification of the JUnit categories you want to include and exclude.
            </p><div class="example"><a name="junitcategories"></a><p class="title"><b>Example&nbsp;23.12.&nbsp;JUnit Categories</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">test {
    useJUnit {
        includeCategories <span class="hl-string">'org.gradle.junit.CategoryA'</span>
        excludeCategories <span class="hl-string">'org.gradle.junit.CategoryB'</span>
    }
}</pre></div></div><br class="example-break"><p>The TestNG framework has a quite similar concept. In TestNG you can specify different test groups.
                <sup>[<a href="#ftn.N128AD" name="N128AD" class="footnote">10</a>]</sup> The test groups that should be included or excluded from the test execution can be configured in the test task. </p><div class="example"><a name="testnggrouping"></a><p class="title"><b>Example&nbsp;23.13.&nbsp;Grouping TestNG tests</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">test {
    useTestNG {
        excludeGroups <span class="hl-string">'integrationTests'</span>
        includeGroups <span class="hl-string">'unitTests'</span>
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="test_reporting"></a>23.12.7.&nbsp;Test reporting</h3></div></div></div><p>The <code class="literal">Test</code> task generates the following results by default.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>An HTML test report.</p></li><li class="listitem"><p>The results in an XML format that is compatible with the Ant JUnit report task. This format is supported by many
                    other tools, such as CI servers.</p></li><li class="listitem"><p>Results in an efficient binary format. The task generates the other results from these binary results.</p></li></ul></div><p>There is also a stand-alone <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.TestReport.html" target="_top"><code class="classname">TestReport</code></a> task type which can generate the HTML test
                report from the binary results generated by one or more <code class="classname">Test</code> task instances. To use this task type, you need
                to define a <code class="literal">destinationDir</code> and the test results to include in the report. Here is a sample which generates a
                combined report for the unit tests from subprojects:
            </p><div class="example"><a name="subProjectsTestReport"></a><p class="title"><b>Example&nbsp;23.14.&nbsp;Creating a unit test report for subprojects</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    apply plugin: <span class="hl-string">'java'</span>

    <span class="hl-comment">// Disable the test report for the individual test task</span>
    test {
        reports.html.enabled = false
    }
}

task testReport(type: TestReport) {
    destinationDir = file(<span class="hl-string">"$buildDir/reports/allTests"</span>)
    <span class="hl-comment">// Include the results from the `test` task in all subprojects</span>
    reportOn subprojects*.test
}</pre></div></div><br class="example-break"><p>You should note that the <code class="literal">TestReport</code> type combines the results from multiple test
                tasks and needs to aggregate the results of individual test classes. This means that if a given test class is executed by
                multiple test tasks, then the test report will include executions of that class, but it can be hard to distinguish individual
                executions of that class and their output.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="testNgParameterizedReporting"></a>23.12.7.1.&nbsp;TestNG parameterized methods and reporting</h4></div></div></div><p>
                    TestNG supports <a class="ulink" href="http://testng.org/doc/documentation-main.html#parameters" target="_top">parameterizing test methods</a>,
                    allowing a particular test method to be executed multiple times with different inputs. Gradle includes the parameter values
                    in its reporting of the test method execution.
                </p><p>
                    Given a parameterized test method named <code class="literal">aParameterizedTestMethod</code> that takes two parameters, it will be reported with the name:
                    <code class="literal">aParameterizedTestMethod(toStringValueOfParam1, toStringValueOfParam2)</code>. This makes identifying the parameter values for a
                    particular iteration easy.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N128FF"></a>23.12.8.&nbsp;Convention values</h3></div></div></div><div class="table"><p class="title"><b>Table&nbsp;23.14.&nbsp;Java plugin - test properties</b></p><div class="table-contents"><table id="N12902"><thead><tr>
                        <td>Task Property</td>
                        <td>Type</td>
                        <td>Default Value</td>
                    </tr></thead><tr>
                    <td><code class="literal">testClassesDir</code></td>
                    <td><code class="classname">File</code></td>
                    <td><code class="literal">sourceSets.test.output.classesDir</code></td>
                </tr><tr>
                    <td><code class="literal">classpath</code></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a></td>
                    <td><code class="literal">sourceSets.test.runtimeClasspath</code></td>
                </tr><tr>
                    <td><code class="literal">testResultsDir</code></td>
                    <td><code class="classname">File</code></td>
                    <td><code class="literal">testResultsDir</code></td>
                </tr><tr>
                    <td><code class="literal">testReportDir</code></td>
                    <td><code class="classname">File</code></td>
                    <td><code class="literal">testReportDir</code></td>
                </tr><tr>
                    <td><code class="literal">testSrcDirs</code></td>
                    <td><code class="classname">List&lt;File&gt;</code></td>
                    <td><code class="literal">sourceSets.test.java.srcDirs</code></td>
                </tr></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12959"></a>23.13.&nbsp;Jar</h2></div></div></div><p>The <code class="literal">jar</code> task creates a JAR file containing the class files and resources of the
            project. The JAR file is declared as an artifact in the <code class="literal">archives</code> dependency
            configuration. This means that the JAR is available in the classpath of a dependent project. If you upload
            your project into a repository, this JAR is declared as part of the dependency descriptor. You can learn
            more about how to work with archives in <a class="xref" href="#sec:archives">Section&nbsp;16.8, &ldquo;Creating archives&rdquo;</a> and artifact configurations in
            <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:manifest"></a>23.13.1.&nbsp;Manifest</h3></div></div></div><p>Each jar or war object has a <code class="literal">manifest</code>
                property with a separate instance of <a class="ulink" href="../javadoc/org/gradle/api/java/archives/Manifest.html" target="_top"><code class="classname">Manifest</code></a>.
                When the archive is generated, a corresponding <code class="literal">MANIFEST.MF</code> file is written into the
                archive.
            </p><div class="example"><a name="manifest"></a><p class="title"><b>Example&nbsp;23.15.&nbsp;Customization of MANIFEST.MF</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">jar {
    manifest {
        attributes(<span class="hl-string">"Implementation-Title"</span>: <span class="hl-string">"Gradle"</span>, <span class="hl-string">"Implementation-Version"</span>: version)
    }
}</pre></div></div><br class="example-break"><p>You can create stand alone instances of a <code class="classname">Manifest</code>. You can use that for example,
                to share manifest information between jars.
            </p><div class="example"><a name="manifest"></a><p class="title"><b>Example&nbsp;23.16.&nbsp;Creating a manifest object.</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">ext.sharedManifest = manifest {
    attributes(<span class="hl-string">"Implementation-Title"</span>: <span class="hl-string">"Gradle"</span>, <span class="hl-string">"Implementation-Version"</span>: version)
}
task fooJar(type: Jar) {
    manifest = project.manifest {
        from sharedManifest
    }
}</pre></div></div><br class="example-break"><p>You can merge other manifests into any <code class="classname">Manifest</code>
                object. The other manifests might
                be either described by a file path or, like in the example above, by a reference to another <code class="classname">Manifest</code> object.
            </p><div class="example"><a name="manifest"></a><p class="title"><b>Example&nbsp;23.17.&nbsp;Separate MANIFEST.MF for a particular archive</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task barJar(type: Jar) {
    manifest {
        attributes key1: <span class="hl-string">'value1'</span>
        from sharedManifest, <span class="hl-string">'src/config/basemanifest.txt'</span>
        from(<span class="hl-string">'src/config/javabasemanifest.txt'</span>, <span class="hl-string">'src/config/libbasemanifest.txt'</span>) {
            eachEntry { details -&gt;
                <span class="hl-keyword">if</span> (details.baseValue != details.mergeValue) {
                    details.value = baseValue
                }
                <span class="hl-keyword">if</span> (details.key == <span class="hl-string">'foo'</span>) {
                    details.exclude()
                }
            }
        }
    }
}</pre></div></div><br class="example-break"><p>Manifest are merged in the order they are declared by the <code class="literal">from</code> statement. If
            the based manifest and the merged manifest both define values for the same key, the merged manifest wins by default.
            You can fully customize the merge behavior by adding <code class="literal">eachEntry</code> actions in which
                you have access to a <a class="ulink" href="../javadoc/org/gradle/api/java/archives/ManifestMergeDetails.html" target="_top"><code class="classname">ManifestMergeDetails</code></a> instance for each entry
                of the resulting manifest. The merge is not immediately triggered by the from statement. It is done lazily,
                either when generating the jar, or by calling <code class="literal">writeTo</code> or <code class="literal">effectiveManifest</code></p><p>You can easily write a manifest to disk.
            </p><div class="example"><a name="manifest"></a><p class="title"><b>Example&nbsp;23.18.&nbsp;Separate MANIFEST.MF for a particular archive</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">jar.manifest.writeTo(<span class="hl-string">"$buildDir/mymanifest.mf"</span>)</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:upload"></a>23.14.&nbsp;Uploading</h2></div></div></div><p>How to upload your archives is described in <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N12897" name="ftn.N12897" class="para">9</a>] </sup>The JUnit wiki contains a detailed description on how to work with JUnit categories:
                        <a class="ulink" href="https://github.com/junit-team/junit/wiki/Categories" target="_top">https://github.com/junit-team/junit/wiki/Categories</a>.
                    </p></div><div class="footnote"><p><sup>[<a href="#N128AD" name="ftn.N128AD" class="para">10</a>] </sup>The TestNG documentation contains more details about test groups:
                        <a class="ulink" href="http://testng.org/doc/documentation-main.html#test-groups" target="_top">http://testng.org/doc/documentation-main.html#test-groups</a>.
                    </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="groovy_plugin"></a>Chapter&nbsp;24.&nbsp;The Groovy Plugin</h1></div></div></div><p>The Groovy plugin extends the Java plugin to add support for Groovy projects. It can deal with
        Groovy code, mixed Groovy and Java code, and even pure Java code (although we don't necessarily recommend to use it for the latter).
        The plugin supports <span class="emphasis"><em>joint compilation</em></span>, which allows to freely mix and match Groovy and Java code,
        with dependencies in both directions. For example, a Groovy class can extend a Java class that in turn extends a Groovy class.
        This makes it possible to use the best language for the job, and to rewrite any class in the other language if needed.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N129D8"></a>24.1.&nbsp;Usage</h2></div></div></div><p>To use the Groovy plugin, include in your build script:</p><div class="example"><a name="useGroovyPlugin"></a><p class="title"><b>Example&nbsp;24.1.&nbsp;Using the Groovy plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'groovy'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N129E7"></a>24.2.&nbsp;Tasks</h2></div></div></div><p>The Groovy plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;24.1.&nbsp;Groovy plugin - tasks</b></p><div class="table-contents"><table id="N129EC"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td><code class="literal">compileGroovy</code></td>
                <td><code class="literal">compileJava</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.compile.GroovyCompile.html" target="_top"><code class="classname">GroovyCompile</code></a></td>
                <td>Compiles production Groovy source files.</td>
            </tr><tr>
                <td><code class="literal">compileTestGroovy</code></td>
                <td><code class="literal">compileTestJava</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.compile.GroovyCompile.html" target="_top"><code class="classname">GroovyCompile</code></a></td>
                <td>Compiles test Groovy source files.</td>
            </tr><tr>
                <td><code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Groovy</code></td>
                <td><code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.compile.GroovyCompile.html" target="_top"><code class="classname">GroovyCompile</code></a></td>
                <td>Compiles the given source set's Groovy source files.</td>
            </tr><tr>
                <td><code class="literal">groovydoc</code></td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.javadoc.Groovydoc.html" target="_top"><code class="classname">Groovydoc</code></a></td>
                <td>Generates API documentation for the production Groovy source files.</td>
            </tr></table></div></div><p>The Groovy plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;24.2.&nbsp;Groovy plugin - additional task dependencies</b></p><div class="table-contents"><table id="N12A51"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>classes</td>
                <td>compileGroovy</td>
            </tr><tr>
                <td>testClasses</td>
                <td>compileTestGroovy</td>
            </tr><tr>
                <td><em class="replaceable"><code>sourceSet</code></em>Classes</td>
                <td>compile<em class="replaceable"><code>SourceSet</code></em>Groovy</td>
            </tr></table></div></div><div class="figure"><a name="N12A76"></a><p class="title"><b>Figure&nbsp;24.1.&nbsp;Groovy plugin - tasks</b></p><div class="figure-contents"><img src="img/groovyPluginTasks.png" alt="Groovy plugin - tasks"></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12A7C"></a>24.3.&nbsp;Project layout</h2></div></div></div><p>The Groovy plugin assumes the project layout shown in <a class="xref" href="#groovylayout" title="Table&nbsp;24.3.&nbsp;Groovy plugin - project layout">Table&nbsp;24.3, &ldquo;Groovy plugin - project layout&rdquo;</a>. All the Groovy
            source directories can contain Groovy <span class="emphasis"><em>and</em></span> Java code. The Java source directories may
            only contain Java source code.
            <sup>[<a href="#ftn.N12A87" name="N12A87" class="footnote">11</a>]</sup>
            None of these directories need to exist or have anything in them; the Groovy plugin will simply compile
            whatever it finds.
        </p><div class="table"><p class="title"><b>Table&nbsp;24.3.&nbsp;Groovy plugin - project layout</b></p><div class="table-contents"><table id="groovylayout"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
        <td>
            <code class="filename">src/main/java</code>
        </td>
        <td>Production Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/main/resources</code>
        </td>
        <td>Production resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/main/groovy</code>
                </td>
                <td>Production Groovy sources. May also contain Java sources for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/test/java</code>
        </td>
        <td>Test Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/resources</code>
        </td>
        <td>Test resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/test/groovy</code>
                </td>
                <td>Test Groovy sources. May also contain Java sources for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/java</code>
        </td>
        <td>Java source for the given source set</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/resources</code>
        </td>
        <td>Resources for the given source set</td>
    </tr><tr>
                <td>
                    <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/groovy</code>
                </td>
                <td>Groovy sources for the given source set. May also contain Java sources for joint compilation.</td>
            </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12B10"></a>24.3.1.&nbsp;Changing the project layout</h3></div></div></div><p>Just like the Java plugin, the Groovy plugin allows to configure custom locations for Groovy production and test sources.</p><div class="example"><a name="customGroovySourceLayout"></a><p class="title"><b>Example&nbsp;24.2.&nbsp;Custom Groovy source layout</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceSets {
    main {
        groovy {
            srcDirs = [<span class="hl-string">'src/groovy'</span>]
        }
    }

    test {
        groovy {
            srcDirs = [<span class="hl-string">'test/groovy'</span>]
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12B1F"></a>24.4.&nbsp;Dependency management</h2></div></div></div><p>Because Gradle's build language is based on Groovy, and parts of Gradle are implemented in Groovy, Gradle already ships
            with a Groovy library (1.8.6 as of Gradle 1.6). Nevertheless, Groovy projects need to explicitly declare a Groovy dependency.
            This dependency will then be used on compile and runtime class paths. It will also be used to get hold of the Groovy compiler
            and Groovydoc tool, respectively.
        </p><p>
            If Groovy is used for production code, the Groovy dependency should be added to the <code class="literal">compile</code>
            configuration:
        </p><div class="example"><a name="quickstartGroovyDependency"></a><p class="title"><b>Example&nbsp;24.3.&nbsp;Configuration of Groovy dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    compile <span class="hl-string">'org.codehaus.groovy:groovy-all:2.3.3'</span>
}</pre></div></div><br class="example-break"><p>
            If Groovy is only used for test code, the Groovy dependency should be added to the <code class="literal">testCompile</code>
            configuration:
        </p><div class="example"><a name="groovyTestDependency"></a><p class="title"><b>Example&nbsp;24.4.&nbsp;Configuration of Groovy test dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    testCompile <span class="hl-string">"org.codehaus.groovy:groovy:2.3.3"</span>
}</pre></div></div><br class="example-break"><p>
            To use the Groovy library that ships with Gradle, declare a <code class="literal">localGroovy()</code> dependency. Note that
            different Gradle versions ship with different Groovy versions; as such, using <code class="literal">localGroovy()</code> is less
            safe then declaring a regular Groovy dependency.
        </p><div class="example"><a name="bundledGroovyDependency"></a><p class="title"><b>Example&nbsp;24.5.&nbsp;Configuration of bundled Groovy dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile localGroovy()
}</pre></div></div><br class="example-break"><p>The Groovy library doesn't necessarily have to come from a remote repository. It could also come from a local
            <code class="literal">lib</code> directory, perhaps checked in to source control:</p><div class="example"><a name="groovyFileDependency"></a><p class="title"><b>Example&nbsp;24.6.&nbsp;Configuration of Groovy file dependency</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    flatDir { dirs <span class="hl-string">'lib'</span> }
}

dependencies {
    compile module(<span class="hl-string">'org.codehaus.groovy:groovy:1.6.0'</span>) {
        dependency(<span class="hl-string">'asm:asm-all:2.2.3'</span>)
        dependency(<span class="hl-string">'antlr:antlr:2.7.7'</span>)
        dependency(<span class="hl-string">'commons-cli:commons-cli:1.2'</span>)
        module(<span class="hl-string">'org.apache.ant:ant:1.9.3'</span>) {
            dependencies(<span class="hl-string">'org.apache.ant:ant-junit:1.9.3@jar'</span>, <span class="hl-string">'org.apache.ant:ant-launcher:1.9.3'</span>)
        }
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12B63"></a>24.5.&nbsp;Automatic configuration of groovyClasspath</h2></div></div></div><p>
            <code class="literal">GroovyCompile</code> and <code class="literal">Groovydoc</code> tasks consume Groovy in two ways: on their <code class="literal">classpath</code>,
            and on their <code class="literal">groovyClasspath</code>. The former is used to locate classes referenced by the source code, and will typically
            contain the Groovy library along with other libraries. The latter is used to load and execute the Groovy compiler and Groovydoc tool,
            respectively, and should only contain the Groovy library and its dependencies.
        </p><p>
            Unless a task's <code class="literal">groovyClasspath</code> is configured explicitly, the Groovy (base) plugin will try to infer it
            from the task's <code class="literal">classpath</code>. This is done as follows:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
                    If a <code class="literal">groovy-all(-indy)</code> Jar is found on <code class="literal">classpath</code>, the same Jar will be added to
                    <code class="literal">groovyClasspath</code>.
                </li><li class="listitem">
                    If a <code class="literal">groovy(-indy)</code> Jar is found on <code class="literal">classpath</code>, and the project has at least one repository declared,
                    a corresponding <code class="literal">groovy(-indy)</code> repository dependency will be added to <code class="literal">groovyClasspath</code>.
                </li><li class="listitem">
                    Otherwise, execution of the task will fail with a message saying that <code class="literal">groovyClasspath</code> could not be inferred.
                </li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12B9C"></a>24.6.&nbsp;Convention properties</h2></div></div></div><p>The Groovy plugin does not add any convention properties to the project.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12BA1"></a>24.7.&nbsp;Source set properties</h2></div></div></div><p>The Groovy plugin adds the following convention properties to each source set in the project. You can
            use these properties in your build script as though they were properties of the source set object (see
            <a class="xref" href="#sub:more_about_convention_objects">Section&nbsp;21.3, &ldquo;Conventions&rdquo;</a>).</p><div class="table"><p class="title"><b>Table&nbsp;24.4.&nbsp;Groovy plugin - source set properties</b></p><div class="table-contents"><table id="N12BA9"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">groovy</code>
                </td>
                <td>
                    <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    The Groovy source files of this source set. Contains all <code class="filename">.groovy</code> and
                    <code class="filename">.java</code> files found in the Groovy source directories, and excludes all other
                    types of files.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">groovy.srcDirs</code>
                </td>
                <td>
                    <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.
                </td>
                <td>
                    <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/groovy]</code>
                </td>
                <td>
                    The source directories containing the Groovy source files of this source set. May also contain
                    Java source files for joint compilation.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">allGroovy</code>
                </td>
                <td>
                    <a class="ulink" href="../javadoc/org/gradle/api/file/FileTree.html" target="_top"><code class="classname">FileTree</code></a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    All Groovy source files of this source set. Contains only the <code class="filename">.groovy</code> files
                    found in the Groovy source directories.
                </td>
            </tr></table></div></div><p>These properties are provided by a convention object of type <a class="ulink" href="../dsl/org.gradle.api.tasks.GroovySourceSet.html" target="_top"><code class="classname">GroovySourceSet</code></a>.</p><p>The Groovy plugin also modifies some source set properties:</p><div class="table"><p class="title"><b>Table&nbsp;24.5.&nbsp;Groovy plugin - source set properties</b></p><div class="table-contents"><table id="N12C19"><thead><tr>
                    <td>Property name</td>
                    <td>Change</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">allJava</code>
                </td>
                <td>Adds all <code class="filename">.java</code> files found in the Groovy source directories.</td>
            </tr><tr>
                <td>
                    <code class="literal">allSource</code>
                </td>
                <td>Adds all source files found in the Groovy source directories.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:groovyCompile"></a>24.8.&nbsp;GroovyCompile</h2></div></div></div><p>The Groovy plugin adds a <a class="ulink" href="../dsl/org.gradle.api.tasks.compile.GroovyCompile.html" target="_top"><code class="classname">GroovyCompile</code></a> task for
            each source set in the project. The task type extends the <code class="literal">JavaCompile</code>
            task (see <a class="xref" href="#sec:compile">Section&nbsp;23.11, &ldquo;CompileJava&rdquo;</a>).
            The <code class="literal">GroovyCompile</code> task supports most configuration options of the official Groovy compiler.
        </p><div class="table"><p class="title"><b>Table&nbsp;24.6.&nbsp;Groovy plugin - GroovyCompile properties</b></p><div class="table-contents"><table id="N12C52"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">classpath</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a></td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.compileClasspath</code></td>
            </tr><tr>
                <td>
                    <code class="literal">source</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileTree.html" target="_top"><code class="classname">FileTree</code></a>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.</td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.groovy</code></td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td><code class="classname">File</code>.</td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>.output.classesDir</code></td>
            </tr><tr>
                <td>
                    <code class="literal">groovyClasspath</code>
                </td>
                <td><a class="ulink" href="../javadoc/org/gradle/api/file/FileCollection.html" target="_top"><code class="classname">FileCollection</code></a></td>
                <td><code class="literal">groovy</code> configuration if non-empty; Groovy library found on <code class="literal">classpath</code> otherwise</td>
            </tr></table></div></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N12A87" name="ftn.N12A87" class="para">11</a>] </sup>We are using the same conventions as introduced by Russel Winder's Gant tool (<a class="ulink" href="http://gant.codehaus.org" target="_top">http://gant.codehaus.org</a>).
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="scala_plugin"></a>Chapter&nbsp;25.&nbsp;The Scala Plugin</h1></div></div></div><p>The Scala plugin extends the Java plugin to add support for Scala projects. It can deal with
        Scala code, mixed Scala and Java code, and even pure Java code (although we don't necessarily recommend to use it for the latter).
        The plugin supports <span class="emphasis"><em>joint compilation</em></span>, which allows to freely mix and match Scala and Java code,
        with dependencies in both directions. For example, a Scala class can extend a Java class that in turn extends a Scala class.
        This makes it possible to use the best language for the job, and to rewrite any class in the other language if needed.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12CC1"></a>25.1.&nbsp;Usage</h2></div></div></div><p>To use the Scala plugin, include in your build script:</p><div class="example"><a name="useScalaPlugin"></a><p class="title"><b>Example&nbsp;25.1.&nbsp;Using the Scala plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'scala'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12CD0"></a>25.2.&nbsp;Tasks</h2></div></div></div><p>The Scala plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;25.1.&nbsp;Scala plugin - tasks</b></p><div class="table-contents"><table id="N12CD5"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td><code class="literal">compileScala</code></td>
                <td><code class="literal">compileJava</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.scala.ScalaCompile.html" target="_top"><code class="classname">ScalaCompile</code></a></td>
                <td>Compiles production Scala source files.</td>
            </tr><tr>
                <td><code class="literal">compileTestScala</code></td>
                <td><code class="literal">compileTestJava</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.scala.ScalaCompile.html" target="_top"><code class="classname">ScalaCompile</code></a></td>
                <td>Compiles test Scala source files.</td>
            </tr><tr>
                <td><code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Scala</code></td>
                <td><code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.scala.ScalaCompile.html" target="_top"><code class="classname">ScalaCompile</code></a></td>
                <td>Compiles the given source set's Scala source files.</td>
            </tr><tr>
                <td><code class="literal">scaladoc</code></td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.scala.ScalaDoc.html" target="_top"><code class="classname">ScalaDoc</code></a></td>
                <td>Generates API documentation for the production Scala source files.</td>
            </tr></table></div></div><p>The Scala plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;25.2.&nbsp;Scala plugin - additional task dependencies</b></p><div class="table-contents"><table id="N12D3A"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>
                    <code class="literal">classes</code>
                </td>
                <td>
                    <code class="literal">compileScala</code>
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testClasses</code>
                </td>
                <td>
                    <code class="literal">compileTestScala</code>
                </td>
            </tr><tr>
                <td>
                    <code class="literal"><em class="replaceable"><code>sourceSet</code></em>Classes</code>
                </td>
                <td>
                    <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Scala</code>
                </td>
            </tr></table></div></div><div class="figure"><a name="N12D71"></a><p class="title"><b>Figure&nbsp;25.1.&nbsp;Scala plugin - tasks</b></p><div class="figure-contents"><img src="img/scalaPluginTasks.png" alt="Scala plugin - tasks"></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12D77"></a>25.3.&nbsp;Project layout</h2></div></div></div><p>The Scala plugin assumes the project layout shown below.  All the Scala source directories can contain
            Scala <span class="emphasis"><em>and</em></span> Java code. The Java source directories may only contain Java source code.
            None of these directories need to exist or have anything in them; the Scala plugin will simply compile
            whatever it finds.
        </p><div class="table"><p class="title"><b>Table&nbsp;25.3.&nbsp;Scala plugin - project layout</b></p><div class="table-contents"><table id="scalalayout"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
        <td>
            <code class="filename">src/main/java</code>
        </td>
        <td>Production Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/main/resources</code>
        </td>
        <td>Production resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/main/scala</code>
                </td>
                <td>Production Scala sources. May also contain Java sources for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/test/java</code>
        </td>
        <td>Test Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/resources</code>
        </td>
        <td>Test resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/test/scala</code>
                </td>
                <td>Test Scala sources. May also contain Java sources for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/java</code>
        </td>
        <td>Java source for the given source set</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/resources</code>
        </td>
        <td>Resources for the given source set</td>
    </tr><tr>
                <td>
                    <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/scala</code>
                </td>
                <td>Scala sources for the given source set. May also contain Java sources for joint compilation.</td>
            </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N12E01"></a>25.3.1.&nbsp;Changing the project layout</h3></div></div></div><p>Just like the Java plugin, the Scala plugin allows to configure custom locations for Scala production and test sources.</p><div class="example"><a name="customScalaSourceLayout"></a><p class="title"><b>Example&nbsp;25.2.&nbsp;Custom Scala source layout</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sourceSets {
    main {
        scala {
            srcDirs = [<span class="hl-string">'src/scala'</span>]
        }
    }
    test {
        scala {
            srcDirs = [<span class="hl-string">'test/scala'</span>]
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12E10"></a>25.4.&nbsp;Dependency management</h2></div></div></div><p>
            Scala projects need to declare a <code class="literal">scala-library</code> dependency. This dependency will then be used on compile and
            runtime class paths. It will also be used to get hold of the Scala compiler and Scaladoc tool, respectively.
            <sup>[<a href="#ftn.N12E18" name="N12E18" class="footnote">12</a>]</sup>
        </p><p>
            If Scala is used for production code, the <code class="literal">scala-library</code> dependency should be added to the
            <code class="literal">compile</code> configuration:
        </p><div class="example"><a name="declareScalaDependency"></a><p class="title"><b>Example&nbsp;25.3.&nbsp;Declaring a Scala dependency for production code</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    compile <span class="hl-string">'org.scala-lang:scala-library:2.11.1'</span>
}</pre></div></div><br class="example-break"><p>
            If Scala is only used for test code, the <code class="literal">scala-library</code> dependency should be added to the <code class="literal">testCompile</code>
            configuration:
        </p><div class="example"><a name="declareScalaTestDependency"></a><p class="title"><b>Example&nbsp;25.4.&nbsp;Declaring a Scala dependency for test code</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    testCompile <span class="hl-string">"org.scala-lang:scala-library:2.11.1"</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configure_scala_classpath"></a>25.5.&nbsp;Automatic configuration of scalaClasspath</h2></div></div></div><p>
            <code class="literal">ScalaCompile</code> and <code class="literal">ScalaDoc</code> tasks consume Scala in two ways: on their <code class="literal">classpath</code>,
            and on their <code class="literal">scalaClasspath</code>. The former is used to locate classes referenced by the source code, and will typically
            contain <code class="literal">scala-library</code> along with other libraries. The latter is used to load and execute the Scala compiler
            and Scaladoc tool, respectively, and should only contain the <code class="literal">scala-compiler</code> library and its dependencies.
        </p><p>
            Unless a task's <code class="literal">scalaClasspath</code> is configured explicitly, the Scala (base) plugin will try to infer it
            from the task's <code class="literal">classpath</code>. This is done as follows:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
                    If a <code class="literal">scala-library</code> Jar is found on <code class="literal">classpath</code>, and the project has at least one repository declared,
                    a corresponding <code class="literal">scala-compiler</code> repository dependency will be added to <code class="literal">scalaClasspath</code>.
                </li><li class="listitem">
                    Otherwise, execution of the task will fail with a message saying that <code class="literal">scalaClasspath</code> could not be inferred.
                </li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12E78"></a>25.6.&nbsp;Convention properties</h2></div></div></div><p>The Scala plugin does not add any convention properties to the project.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12E7D"></a>25.7.&nbsp;Source set properties</h2></div></div></div><p>The Scala plugin adds the following convention properties to each source set in the project. You can
            use these properties in your build script as though they were properties of the source set object (see
            <a class="xref" href="#sub:more_about_convention_objects">Section&nbsp;21.3, &ldquo;Conventions&rdquo;</a>).</p><div class="table"><p class="title"><b>Table&nbsp;25.4.&nbsp;Scala plugin - source set properties</b></p><div class="table-contents"><table id="N12E85"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">scala</code>
                </td>
                <td>
                    <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    The Scala source files of this source set. Contains all <code class="filename">.scala</code> and
                    <code class="filename">.java</code> files found in the Scala source directories, and excludes all other
                    types of files.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">scala.srcDirs</code>
                </td>
                <td>
                    <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.
                </td>
                <td>
                    <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/scala]</code>
                </td>
                <td>
                    The source directories containing the Scala source files of this source set. May also contain
                    Java source files for joint compilation.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">allScala</code>
                </td>
                <td>
                    <a class="ulink" href="../javadoc/org/gradle/api/file/FileTree.html" target="_top"><code class="classname">FileTree</code></a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    All Scala source files of this source set. Contains only the <code class="filename">.scala</code> files
                    found in the Scala source directories.
                </td>
            </tr></table></div></div><p>These convention properties are provided by a convention object of type <a class="ulink" href="../dsl/org.gradle.api.tasks.ScalaSourceSet.html" target="_top"><code class="classname">ScalaSourceSet</code></a>.</p><p>The Scala plugin also modifies some source set properties:</p><div class="table"><p class="title"><b>Table&nbsp;25.5.&nbsp;Scala plugin - source set properties</b></p><div class="table-contents"><table id="N12EF5"><thead><tr>
                    <td>Property name</td>
                    <td>Change</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">allJava</code>
                </td>
                <td>Adds all <code class="filename">.java</code> files found in the Scala source directories.</td>
            </tr><tr>
                <td>
                    <code class="literal">allSource</code>
                </td>
                <td>Adds all source files found in the Scala source directories.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12F1A"></a>25.8.&nbsp;Fast Scala Compiler</h2></div></div></div><p>The Scala plugin includes support for <a class="ulink" href="http://www.scala-lang.org/docu/files/tools/fsc.html" target="_top">fsc</a>,
            the Fast Scala Compiler. <code class="literal">fsc</code> runs in a separate daemon process and can speed up
            compilation significantly.
            </p><div class="example"><a name="fsc"></a><p class="title"><b>Example&nbsp;25.5.&nbsp;Enabling the Fast Scala Compiler</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">compileScala {
    scalaCompileOptions.useCompileDaemon = true

    <span class="hl-comment">// optionally specify host and port of the daemon:</span>
    scalaCompileOptions.daemonServer = <span class="hl-string">"localhost:4243"</span>
}</pre></div></div><p><br class="example-break">
            Note that <code class="literal">fsc</code> expects to be restarted whenever the <span class="emphasis"><em>contents</em></span> of its
            compile class path change. (It does detect changes to the compile class path itself.) This makes it
            less suitable for multi-project builds.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12F37"></a>25.9.&nbsp;Compiling in external process</h2></div></div></div><p>
            When <code class="literal">scalaCompileOptions.fork</code> is set to <code class="literal">true</code>, compilation will take place
            in an external process. The details of forking depend on which compiler is used. The Ant based compiler
            (<code class="literal">scalaCompileOptions.useAnt = true</code>) will fork a new process for every <code class="literal">ScalaCompile</code> task,
            and does not fork by default. The Zinc based compiler (<code class="literal">scalaCompileOptions.useAnt = false</code>) will leverage
            the Gradle compiler daemon, and does so by default.
        </p><p>Memory settings for the external process default to the JVM's defaults. To adjust memory settings,
            configure <code class="literal">scalaCompileOptions.forkOptions</code> as needed:
            </p><div class="example"><a name="zinc"></a><p class="title"><b>Example&nbsp;25.6.&nbsp;Adjusting memory settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">tasks.withType(ScalaCompile) {
    configure(scalaCompileOptions.forkOptions) {
        memoryMaximumSize = <span class="hl-string">'1g'</span>
        jvmArgs = [<span class="hl-string">'-XX:MaxPermSize=512m'</span>]
    }
}</pre></div></div><p><br class="example-break">
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12F5B"></a>25.10.&nbsp;Incremental compilation</h2></div></div></div><p>
            By compiling only classes whose source code has changed since the previous compilation, and classes affected by these changes,
            incremental compilation can significantly reduce Scala compilation time. It is particularly effective when frequently compiling
            small code increments, as is often done at development time.
        </p><p>
            The Scala plugin now supports incremental compilation by integrating with <a class="ulink" href="https://github.com/typesafehub/zinc" target="_top">Zinc</a>,
            a standalone version of <a class="ulink" href="https://github.com/harrah/xsbt" target="_top">sbt</a>'s incremental Scala compiler. To switch the
            <code class="literal">ScalaCompile</code> task from the default Ant based compiler to the new Zinc based compiler, set
            <code class="literal">scalaCompileOptions.useAnt</code> to <code class="literal">false</code>:
            </p><div class="example"><a name="zinc"></a><p class="title"><b>Example&nbsp;25.7.&nbsp;Activating the Zinc based compiler</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">tasks.withType(ScalaCompile) {
    scalaCompileOptions.useAnt = false
}</pre></div></div><p><br class="example-break">
        </p><p>
            Except where noted in the<a class="ulink" href="http://gradle.org/docs/current/dsl/org.gradle.api.tasks.scala.ScalaCompile.html" target="_top">API documentation</a>,
            the Zinc based compiler supports exactly the same configuration options as the Ant based compiler. Note, however, that the Zinc compiler requires
            Java 6 or higher to run. This means that Gradle itself has to be run with Java 6 or higher.
        </p><p>
            The Scala plugin adds a configuration named <code class="literal">zinc</code> to resolve the Zinc library and its dependencies. To override the
            Zinc version that Gradle uses by default, add an explicit Zinc dependency (for example <code class="literal">zinc "com.typesafe.zinc:zinc:0.1.4"</code>).
            Regardless of which Zinc version is used, Zinc will always use the Scala compiler found on the <code class="literal">scalaTools</code> configuration.
        </p><p>
            Just like Gradle's Ant based compiler, the Zinc based compiler supports joint compilation of Java and Scala code. By default, all Java and Scala code
            under <code class="literal">src/main/scala</code> will participate in joint compilation. With the Zinc based compiler, even Java code will be compiled incrementally.
        </p><p>
            Incremental compilation requires dependency analysis of the source code. The results of this analysis are stored in the file designated
            by <code class="literal">scalaCompileOptions.incrementalOptions.analysisFile</code> (which has a sensible default). In a multi-project build, analysis
            files are passed on to downstream <code class="literal">ScalaCompile</code> tasks to enable incremental compilation across project boundaries. For
            <code class="literal">ScalaCompile</code> tasks added by the Scala plugin, no configuration is necessary to make this work. For other
            <code class="literal">ScalaCompile</code> tasks, <code class="literal">scalaCompileOptions.incrementalOptions.publishedCode</code> needs to be configured to point
            to the classes folder or Jar archive by which the code is passed on to compile class paths of downstream <code class="literal">ScalaCompile</code> tasks.
            Note that if <code class="literal">publishedCode</code> is not set correctly, downstream tasks may not recompile code affected by upstream changes,
            leading to incorrect compilation results.
        </p><p>
            Due to the overhead of dependency analysis, a clean compilation or a compilation after a larger code change may take longer than with the Ant based compiler.
            For CI builds and release builds, we currently recommend to use the Ant based compiler.
        </p><p>
            Note that Zinc's Nailgun based daemon mode is not supported. Instead, we plan to enhance Gradle's own compiler daemon to stay alive across Gradle
            invocations, reusing the same Scala compiler. This is expected to yield another significant speedup for Scala compilation.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12FAF"></a>25.11.&nbsp;Eclipse Integration</h2></div></div></div><p>
            When the Eclipse plugin encounters a Scala project, it adds additional configuration to make the project work with Scala IDE out of the box.
            Specifically, the plugin adds a Scala nature and dependency container.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12FB4"></a>25.12.&nbsp;IntelliJ IDEA Integration</h2></div></div></div><p>
            When the IDEA plugin encounters a Scala project, it adds additional configuration to make the project work with IDEA out of the box. Specifically,
            the plugin adds a Scala facet and a Scala compiler library that matches the Scala version on the project's class path.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N12E18" name="ftn.N12E18" class="para">12</a>] </sup>See <a class="xref" href="#sec:configure_scala_classpath">Section&nbsp;25.5, &ldquo;Automatic configuration of scalaClasspath&rdquo;</a>.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="war_plugin"></a>Chapter&nbsp;26.&nbsp;The War Plugin</h1></div></div></div><p>The War plugin extends the Java plugin to add support for assembling web application WAR files.
        It disables the default JAR archive generation of the Java plugin and adds a default WAR archive task.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12FC1"></a>26.1.&nbsp;Usage</h2></div></div></div><p>To use the War plugin, include in your build script:</p><div class="example"><a name="useWarPlugin"></a><p class="title"><b>Example&nbsp;26.1.&nbsp;Using the War plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'war'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N12FD0"></a>26.2.&nbsp;Tasks</h2></div></div></div><p>The War plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;26.1.&nbsp;War plugin - tasks</b></p><div class="table-contents"><table id="N12FD5"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">war</code>
                </td>
                <td>
                    <code class="literal">compile</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.War.html" target="_top"><code class="classname">War</code></a></td>
                <td>Assembles the application WAR file.</td>
            </tr></table></div></div><p>The War plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;26.2.&nbsp;War plugin - additional task dependencies</b></p><div class="table-contents"><table id="N13000"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>assemble</td>
                <td>war</td>
            </tr></table></div></div><div class="figure"><a name="N13010"></a><p class="title"><b>Figure&nbsp;26.1.&nbsp;War plugin - tasks</b></p><div class="figure-contents"><img src="img/warPluginTasks.png" alt="War plugin - tasks"></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13016"></a>26.3.&nbsp;Project layout</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;26.3.&nbsp;War plugin - project layout</b></p><div class="table-contents"><table id="N13019"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">src/main/webapp</code>
                </td>
                <td>Web application sources</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13030"></a>26.4.&nbsp;Dependency management</h2></div></div></div><p>The War plugin adds two dependency configurations: <code class="literal">providedCompile</code> and
            <code class="literal">providedRuntime</code>. Those configurations have the same scope as the respective
            <code class="literal">compile</code> and <code class="literal">runtime</code> configurations, except that they are not added to
            the WAR archive. It is important to note that those <code class="literal">provided</code> configurations work
            transitively. Let's say you add <code class="literal">commons-httpclient:commons-httpclient:3.0</code> to any of the
            provided configurations. This dependency has a dependency on <code class="literal">commons-codec</code>.
            This means neither <code class="literal">httpclient</code> nor <code class="literal">commons-codec</code> is added to your
            WAR, even if <code class="literal">commons-codec</code> were an explicit dependency of your <code class="literal">compile</code>
            configuration. If you don't want this transitive behavior, simply declare your <code class="literal">provided</code>
            dependencies like <code class="literal">commons-httpclient:commons-httpclient:3.0@jar</code>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1305C"></a>26.5.&nbsp;Convention properties</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;26.4.&nbsp;War plugin - directory properties</b></p><div class="table-contents"><table id="N1305F"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">webAppDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="filename">src/main/webapp</code>
                </td>
                <td>
                    The name of the web application source directory, relative to the project directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">webAppDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="filename"><em class="replaceable"><code>projectDir</code></em>/<em class="replaceable"><code>webAppDirName</code></em></code>
                </td>
                <td>
                    The web application source directory.
                </td>
            </tr></table></div></div><p>These properties are provided by a <a class="ulink" href="../dsl/org.gradle.api.plugins.WarPluginConvention.html" target="_top"><code class="classname">WarPluginConvention</code></a>
            convention object.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:default_settings"></a>26.6.&nbsp;War</h2></div></div></div><p>The default behavior of the War task is to copy the content of <code class="literal">src/main/webapp</code>
            to the root of the archive. Your <code class="literal">webapp</code> directory may of course contain a
            <code class="literal">WEB-INF</code> sub-directory, which again may contain a <code class="literal">web.xml</code> file.
            Your compiled classes are compiled to <code class="literal">WEB-INF/classes</code>. All the dependencies of the
            <code class="literal">runtime</code>
            <sup>[<a href="#ftn.N130C2" name="N130C2" class="footnote">13</a>]</sup>
            configuration are copied to <code class="literal">WEB-INF/lib</code>.</p><p>Have also a look at <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.War.html" target="_top"><code class="classname">War</code></a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:customizing"></a>26.7.&nbsp;Customizing</h2></div></div></div><p>Here is an example with the most important customization options:
        </p><div class="example"><a name="webproject"></a><p class="title"><b>Example&nbsp;26.2.&nbsp;Customization of war plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
   moreLibs
}

repositories {
   flatDir { dirs <span class="hl-string">"lib"</span> }
   mavenCentral()
}

dependencies {
    compile module(<span class="hl-string">":compile:1.0"</span>) {
        dependency <span class="hl-string">":compile-transitive-1.0@jar"</span>
        dependency <span class="hl-string">":providedCompile-transitive:1.0@jar"</span>
    }
    providedCompile <span class="hl-string">"javax.servlet:servlet-api:2.5"</span>
    providedCompile module(<span class="hl-string">":providedCompile:1.0"</span>) {
        dependency <span class="hl-string">":providedCompile-transitive:1.0@jar"</span>
    }
    runtime <span class="hl-string">":runtime:1.0"</span>
    providedRuntime <span class="hl-string">":providedRuntime:1.0@jar"</span>
    testCompile <span class="hl-string">"junit:junit:4.11"</span>
    moreLibs <span class="hl-string">":otherLib:1.0"</span>
}

war {
    from <span class="hl-string">'src/rootContent'</span> <span class="hl-comment">// adds a file-set to the root of the archive</span>
    webInf { from <span class="hl-string">'src/additionalWebInf'</span> } <span class="hl-comment">// adds a file-set to the WEB-INF dir.</span>
    classpath fileTree(<span class="hl-string">'additionalLibs'</span>) <span class="hl-comment">// adds a file-set to the WEB-INF/lib dir.</span>
    classpath configurations.moreLibs <span class="hl-comment">// adds a configuration to the WEB-INF/lib dir.</span>
    webXml = file(<span class="hl-string">'src/someWeb.xml'</span>) <span class="hl-comment">// copies a file to WEB-INF/web.xml</span>
}</pre></div></div><br class="example-break"><p>Of course one can configure the different file-sets with a closure to define excludes and includes.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N130C2" name="ftn.N130C2" class="para">13</a>] </sup>The
                    <code class="literal">runtime</code>
                    configuration extends the
                    <code class="literal">compile</code>
                    configuration.
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="ear_plugin"></a>Chapter&nbsp;27.&nbsp;The Ear Plugin</h1></div></div></div><p>The Ear plugin adds support for assembling web application EAR files. It adds a default EAR archive task.
        It doesn't require the Java plugin, but for projects that also use the Java plugin it disables the default
        JAR archive generation.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N130F0"></a>27.1.&nbsp;Usage</h2></div></div></div><p>To use the Ear plugin, include in your build script:</p><div class="example"><a name="earWithWar"></a><p class="title"><b>Example&nbsp;27.1.&nbsp;Using the Ear plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'ear'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N130FF"></a>27.2.&nbsp;Tasks</h2></div></div></div><p>The Ear plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;27.1.&nbsp;Ear plugin - tasks</b></p><div class="table-contents"><table id="N13104"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">ear</code>
                </td>
                <td>
                    <code class="literal">compile</code> (only if the Java plugin is also applied)
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ear.Ear.html" target="_top"><code class="classname">Ear</code></a></td>
                <td>Assembles the application EAR file.</td>
            </tr></table></div></div><p>The Ear plugin adds the following dependencies to tasks added by the base plugin.</p><div class="table"><p class="title"><b>Table&nbsp;27.2.&nbsp;Ear plugin - additional task dependencies</b></p><div class="table-contents"><table id="N1312F"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>assemble</td>
                <td>ear</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1313F"></a>27.3.&nbsp;Project layout</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;27.3.&nbsp;Ear plugin - project layout</b></p><div class="table-contents"><table id="N13142"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">src/main/application</code>
                </td>
                <td>Ear resources, such as a META-INF directory</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13159"></a>27.4.&nbsp;Dependency management</h2></div></div></div><p>The Ear plugin adds two dependency configurations: <code class="literal">deploy</code> and
            <code class="literal">earlib</code>. All dependencies in the <code class="literal">deploy</code> configuration are
            placed in the root of the EAR archive, and are <span class="emphasis"><em>not</em></span> transitive. All dependencies in the
            <code class="literal">earlib</code> configuration are placed in the 'lib' directory in the EAR archive and
            <span class="emphasis"><em>are</em></span> transitive.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13170"></a>27.5.&nbsp;Convention properties</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;27.4.&nbsp;Ear plugin - directory properties</b></p><div class="table-contents"><table id="N13173"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">appDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="filename">src/main/application</code>
                </td>
                <td>
                    The name of the application source directory, relative to the project directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">libDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="filename">lib</code>
                </td>
                <td>
                    The name of the lib directory inside the generated EAR.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">deploymentDescriptor</code>
                </td>
                <td>
                    <code class="classname">org.gradle.plugins.ear.descriptor.DeploymentDescriptor</code>
                </td>
                <td>
                    A deployment descriptor with sensible defaults named <code class="literal">application.xml</code>
                </td>
                <td>
                    Metadata to generate a deployment descriptor file, e.g. <code class="literal">application.xml</code>.
                    If this file already exists in the <code class="literal">appDirName/META-INF</code> then the existing file contents will be used and
                    the explicit configuration in the <code class="literal">ear.deploymentDescriptor</code> will be ignored.
                </td>
            </tr></table></div></div><p>These properties are provided by a <a class="ulink" href="../dsl/org.gradle.plugins.ear.EarPluginConvention.html" target="_top"><code class="classname">EarPluginConvention</code></a>
            convention object.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:default_settings"></a>27.6.&nbsp;Ear</h2></div></div></div><p>The default behavior of the Ear task is to copy the content of <code class="literal">src/main/application</code>
            to the root of the archive. If your <code class="literal">application</code> directory doesn't contain a
            <code class="literal">META-INF/application.xml</code> deployment descriptor then one will be generated for you.
		</p><p>Also have a look at <a class="ulink" href="../dsl/org.gradle.plugins.ear.Ear.html" target="_top"><code class="classname">Ear</code></a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:customizing"></a>27.7.&nbsp;Customizing</h2></div></div></div><p>Here is an example with the most important customization options:
        </p><div class="example"><a name="earCustomized"></a><p class="title"><b>Example&nbsp;27.2.&nbsp;Customization of ear plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'ear'</span>
apply plugin: <span class="hl-string">'java'</span>

repositories { mavenCentral() }

dependencies {
    <span class="hl-comment">//following dependencies will become the ear modules and placed in the ear root</span>
    deploy project(<span class="hl-string">':war'</span>)

    <span class="hl-comment">//following dependencies will become ear libs and placed in a dir configured via libDirName property</span>
    earlib group: <span class="hl-string">'log4j'</span>, name: <span class="hl-string">'log4j'</span>, version: <span class="hl-string">'1.2.15'</span>, ext: <span class="hl-string">'jar'</span>
}

ear {
    appDirName <span class="hl-string">'src/main/app'</span>  <span class="hl-comment">// use application metadata found in this folder</span>
    libDirName <span class="hl-string">'APP-INF/lib'</span>  <span class="hl-comment">// put dependency libraries into APP-INF/lib inside the generated EAR;</span>
                                <span class="hl-comment">// also modify the generated deployment descriptor accordingly</span>
    deploymentDescriptor {  <span class="hl-comment">// custom entries for application.xml:</span>
<span class="hl-comment">//      fileName = "application.xml"  // same as the default value</span>
<span class="hl-comment">//      version = "6"  // same as the default value</span>
        applicationName = <span class="hl-string">"customear"</span>
        initializeInOrder = true
        displayName = <span class="hl-string">"Custom Ear"</span>  <span class="hl-comment">// defaults to project.name</span>
        description = <span class="hl-string">"My customized EAR for the Gradle documentation"</span>  <span class="hl-comment">// defaults to project.description</span>
<span class="hl-comment">//      libraryDirectory = "APP-INF/lib"  // not needed, because setting libDirName above did this for us</span>
<span class="hl-comment">//      module("my.jar", "java")  // wouldn't deploy since my.jar isn't a deploy dependency</span>
<span class="hl-comment">//      webModule("my.war", "/")  // wouldn't deploy since my.war isn't a deploy dependency</span>
        securityRole <span class="hl-string">"admin"</span>
        securityRole <span class="hl-string">"superadmin"</span>
        withXml { provider -&gt; <span class="hl-comment">// add a custom node to the XML</span>
            provider.asNode().appendNode(<span class="hl-string">"data-source"</span>, <span class="hl-string">"my/data/source"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>You can also use customization options that the <a class="ulink" href="../dsl/org.gradle.plugins.ear.Ear.html" target="_top"><code class="classname">Ear</code></a>
        	task provides, such as <code class="literal">from</code> and <code class="literal">metaInf</code>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:using_custom_app_xml"></a>27.8.&nbsp;Using custom descriptor file</h2></div></div></div><p>
            Let's say you already have the <code class="literal">application.xml</code> and want to use it instead of configuring the <code class="literal">ear.deploymentDescriptor</code> section.
            To accommodate that place the <code class="literal">META-INF/application.xml</code> in the right place inside your source folders (see the <code class="literal">appDirName</code> property).
            The existing file contents will be used and the explicit configuration in the <code class="literal">ear.deploymentDescriptor</code> will be ignored.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="jetty_plugin"></a>Chapter&nbsp;28.&nbsp;The Jetty Plugin</h1></div></div></div><p>The Jetty plugin extends the War plugin to add tasks which allow you to deploy your web application to a
        Jetty web container embedded in the build.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1322A"></a>28.1.&nbsp;Usage</h2></div></div></div><p>To use the Jetty plugin, include in your build script:</p><div class="example"><a name="useJettyPlugin"></a><p class="title"><b>Example&nbsp;28.1.&nbsp;Using the Jetty plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'jetty'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13239"></a>28.2.&nbsp;Tasks</h2></div></div></div><p>The Jetty plugin defines the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;28.1.&nbsp;Jetty plugin - tasks</b></p><div class="table-contents"><table id="N1323E"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">jettyRun</code>
                </td>
                <td>
                    <code class="literal">compile</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.jetty.JettyRun.html" target="_top"><code class="classname">JettyRun</code></a></td>
                <td>Starts a Jetty instance and deploys the exploded web application to it.</td>
            </tr><tr>
                <td>
                    <code class="literal">jettyRunWar</code>
                </td>
                <td>
                    <code class="literal">war</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.jetty.JettyRunWar.html" target="_top"><code class="classname">JettyRunWar</code></a></td>
                <td>Starts a Jetty instance and deploys the WAR to it.</td>
            </tr><tr>
                <td>
                    <code class="literal">jettyStop</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.jetty.JettyStop.html" target="_top"><code class="classname">JettyStop</code></a></td>
                <td>Stops the Jetty instance.</td>
            </tr></table></div></div><div class="figure"><a name="N13292"></a><p class="title"><b>Figure&nbsp;28.1.&nbsp;Jetty plugin - tasks</b></p><div class="figure-contents"><img src="img/jettyPluginTasks.png" alt="Jetty plugin - tasks"></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13298"></a>28.3.&nbsp;Project layout</h2></div></div></div><p>The Jetty plugin uses the same layout as the War plugin.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1329D"></a>28.4.&nbsp;Dependency management</h2></div></div></div><p>The Jetty plugin does not define any dependency configurations.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N132A2"></a>28.5.&nbsp;Convention properties</h2></div></div></div><p>The Jetty plugin defines the following convention properties:</p><div class="table"><p class="title"><b>Table&nbsp;28.2.&nbsp;Jetty plugin - properties</b></p><div class="table-contents"><table id="N132A7"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">contextPath</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    WAR file base name
                </td>
                <td>
                    The application deployment location within the Jetty container.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">httpPort</code>
                </td>
                <td>
                    <code class="classname">Integer</code>
                </td>
                <td>
                    <code class="literal">8080</code>
                </td>
                <td>
                    The TCP port which Jetty should listen for HTTP requests on.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">stopPort</code>
                </td>
                <td>
                    <code class="classname">Integer</code>
                </td>
                <td>
                    <code class="literal">null</code>
                </td>
                <td>
                    The TCP port which Jetty should listen for admin requests on.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">stopKey</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">null</code>
                </td>
                <td>
                    The key to pass to Jetty when requesting it to stop.
                </td>
            </tr></table></div></div><p>These properties are provided by a <a class="ulink" href="../dsl/org.gradle.api.plugins.jetty.JettyPluginConvention.html" target="_top"><code class="classname">JettyPluginConvention</code></a>
            convention object.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="checkstyle_plugin"></a>Chapter&nbsp;29.&nbsp;The Checkstyle Plugin</h1></div></div></div><p>The Checkstyle plugin performs quality checks on your project's Java source files using <a class="ulink" href="http://checkstyle.sourceforge.net/index.html" target="_top">Checkstyle</a>
        and generates reports from these checks.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13324"></a>29.1.&nbsp;Usage</h2></div></div></div><p>To use the Checkstyle plugin, include in your build script:</p><div class="example"><a name="useCheckstylePlugin"></a><p class="title"><b>Example&nbsp;29.1.&nbsp;Using the Checkstyle plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'checkstyle'</span></pre></div></div><br class="example-break"><p>The plugin adds a number of tasks to the project that perform the quality checks. You can execute the checks by running <strong class="userinput"><code>gradle check</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13338"></a>29.2.&nbsp;Tasks</h2></div></div></div><p>The Checkstyle plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;29.1.&nbsp;Checkstyle plugin - tasks</b></p><div class="table-contents"><table id="N1333D"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">checkstyleMain</code>
                </td>
                <td><code class="literal">classes</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.Checkstyle.html" target="_top"><code class="classname">Checkstyle</code></a></td>
                <td>Runs Checkstyle against the production Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyleTest</code>
                </td>
                <td><code class="literal">testClasses</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.Checkstyle.html" target="_top"><code class="classname">Checkstyle</code></a></td>
                <td>Runs Checkstyle against the test Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyle<em class="replaceable"><code>SourceSet</code></em></code>
                </td>
                <td><code class="literal"><em class="replaceable"><code>sourceSet</code></em>Classes</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.Checkstyle.html" target="_top"><code class="classname">Checkstyle</code></a></td>
                <td>Runs Checkstyle against the given source set's Java source files.</td>
            </tr></table></div></div><p>The Checkstyle plugin adds the following dependencies to tasks defined by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;29.2.&nbsp;Checkstyle plugin - additional task dependencies</b></p><div class="table-contents"><table id="N13394"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td><code class="literal">check</code></td>
                <td>All Checkstyle tasks, including <code class="literal">checkstyleMain</code> and <code class="literal">checkstyleTest</code>.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N133AB"></a>29.3.&nbsp;Project layout</h2></div></div></div><p>The Checkstyle plugin expects the following project layout:</p><div class="table"><p class="title"><b>Table&nbsp;29.3.&nbsp;Checkstyle plugin - project layout</b></p><div class="table-contents"><table id="N133B0"><thead><tr>
                    <td>File</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">config/checkstyle/checkstyle.xml</code>
                </td>
                <td>Checkstyle configuration file</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N133C7"></a>29.4.&nbsp;Dependency management</h2></div></div></div><p>The Checkstyle plugin adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;29.4.&nbsp;Checkstyle plugin - dependency configurations</b></p><div class="table-contents"><table id="N133CC"><thead><tr>
                    <td>Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">checkstyle</code>
                </td>
                <td>The Checkstyle libraries to use</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N133E3"></a>29.5.&nbsp;Configuration</h2></div></div></div><p>See <a class="ulink" href="../dsl/org.gradle.api.plugins.quality.CheckstyleExtension.html" target="_top"><code class="classname">CheckstyleExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="codenarc_plugin"></a>Chapter&nbsp;30.&nbsp;The CodeNarc Plugin</h1></div></div></div><p>The CodeNarc plugin performs quality checks on your project's Groovy source files using <a class="ulink" href="http://codenarc.sourceforge.net/index.html" target="_top">CodeNarc</a>
        and generates reports from these checks.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N133F8"></a>30.1.&nbsp;Usage</h2></div></div></div><p>To use the CodeNarc plugin, include in your build script:</p><div class="example"><a name="useCodeNarcPlugin"></a><p class="title"><b>Example&nbsp;30.1.&nbsp;Using the CodeNarc plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'codenarc'</span></pre></div></div><br class="example-break"><p>The plugin adds a number of tasks to the project that perform the quality checks. You can execute the checks by running <strong class="userinput"><code>gradle check</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1340C"></a>30.2.&nbsp;Tasks</h2></div></div></div><p>The CodeNarc plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;30.1.&nbsp;CodeNarc plugin - tasks</b></p><div class="table-contents"><table id="N13411"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">codenarcMain</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.CodeNarc.html" target="_top"><code class="classname">CodeNarc</code></a></td>
                <td>Runs CodeNarc against the production Groovy source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">codenarcTest</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.CodeNarc.html" target="_top"><code class="classname">CodeNarc</code></a></td>
                <td>Runs CodeNarc against the test Groovy source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">codenarc<em class="replaceable"><code>SourceSet</code></em></code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.CodeNarc.html" target="_top"><code class="classname">CodeNarc</code></a></td>
                <td>Runs CodeNarc against the given source set's Groovy source files.</td>
            </tr></table></div></div><p>The CodeNarc plugin adds the following dependencies to tasks defined by the Groovy plugin.</p><div class="table"><p class="title"><b>Table&nbsp;30.2.&nbsp;CodeNarc plugin - additional task dependencies</b></p><div class="table-contents"><table id="N13463"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td><code class="literal">check</code></td>
                <td>All CodeNarc tasks, including <code class="literal">codenarcMain</code> and <code class="literal">codenarcTest</code>.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1347A"></a>30.3.&nbsp;Project layout</h2></div></div></div><p>The CodeNarc plugin expects the following project layout:</p><div class="table"><p class="title"><b>Table&nbsp;30.3.&nbsp;CodeNarc plugin - project layout</b></p><div class="table-contents"><table id="N1347F"><thead><tr>
                    <td>File</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">config/codenarc/codenarc.xml</code>
                </td>
                <td>CodeNarc configuration file</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13496"></a>30.4.&nbsp;Dependency management</h2></div></div></div><p>The CodeNarc plugin adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;30.4.&nbsp;CodeNarc plugin - dependency configurations</b></p><div class="table-contents"><table id="N1349B"><thead><tr>
                    <td>Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">codenarc</code>
                </td>
                <td>The CodeNarc libraries to use</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N134B2"></a>30.5.&nbsp;Configuration</h2></div></div></div><p>See <a class="ulink" href="../dsl/org.gradle.api.plugins.quality.CodeNarcExtension.html" target="_top"><code class="classname">CodeNarcExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="findbugs_plugin"></a>Chapter&nbsp;31.&nbsp;The FindBugs Plugin</h1></div></div></div><p>The FindBugs plugin performs quality checks on your project's Java source files using <a class="ulink" href="http://findbugs.sourceforge.net" target="_top">FindBugs</a>
        and generates reports from these checks.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N134C7"></a>31.1.&nbsp;Usage</h2></div></div></div><p>To use the FindBugs plugin, include in your build script:</p><div class="example"><a name="useFindBugsPlugin"></a><p class="title"><b>Example&nbsp;31.1.&nbsp;Using the FindBugs plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'findbugs'</span></pre></div></div><br class="example-break"><p>The plugin adds a number of tasks to the project that perform the quality checks. You can execute the checks by running <strong class="userinput"><code>gradle check</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N134DB"></a>31.2.&nbsp;Tasks</h2></div></div></div><p>The FindBugs plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;31.1.&nbsp;FindBugs plugin - tasks</b></p><div class="table-contents"><table id="N134E0"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">findbugsMain</code>
                </td>
                <td><code class="literal">classes</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.FindBugs.html" target="_top"><code class="classname">FindBugs</code></a></td>
                <td>Runs FindBugs against the production Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">findbugsTest</code>
                </td>
                <td><code class="literal">testClasses</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.FindBugs.html" target="_top"><code class="classname">FindBugs</code></a></td>
                <td>Runs FindBugs against the test Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">findbugs<em class="replaceable"><code>SourceSet</code></em></code>
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>sourceSet</code></em>Classes</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.FindBugs.html" target="_top"><code class="classname">FindBugs</code></a></td>
                <td>Runs FindBugs against the given source set's Java source files.</td>
            </tr></table></div></div><p>The FindBugs plugin adds the following dependencies to tasks defined by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;31.2.&nbsp;FindBugs plugin - additional task dependencies</b></p><div class="table-contents"><table id="N13539"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td><code class="literal">check</code></td>
                <td>All FindBugs tasks, including <code class="literal">findbugsMain</code> and <code class="literal">findbugsTest</code>.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13550"></a>31.3.&nbsp;Dependency management</h2></div></div></div><p>The FindBugs plugin adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;31.3.&nbsp;FindBugs plugin - dependency configurations</b></p><div class="table-contents"><table id="N13555"><thead><tr>
                    <td>Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">findbugs</code>
                </td>
                <td>The FindBugs libraries to use</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1356C"></a>31.4.&nbsp;Configuration</h2></div></div></div><p>See <a class="ulink" href="../dsl/org.gradle.api.plugins.quality.FindBugsExtension.html" target="_top"><code class="classname">FindBugsExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="jdepend_plugin"></a>Chapter&nbsp;32.&nbsp;The JDepend Plugin</h1></div></div></div><p>The JDepend plugin performs quality checks on your project's source files using <a class="ulink" href="http://clarkware.com/software/JDepend.html" target="_top">JDepend</a>
        and generates reports from these checks.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13581"></a>32.1.&nbsp;Usage</h2></div></div></div><p>To use the JDepend plugin, include in your build script:</p><div class="example"><a name="useJDependPlugin"></a><p class="title"><b>Example&nbsp;32.1.&nbsp;Using the JDepend plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'jdepend'</span></pre></div></div><br class="example-break"><p>The plugin adds a number of tasks to the project that perform the quality checks. You can execute the checks by running <strong class="userinput"><code>gradle check</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13595"></a>32.2.&nbsp;Tasks</h2></div></div></div><p>The JDepend plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;32.1.&nbsp;JDepend plugin - tasks</b></p><div class="table-contents"><table id="N1359A"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">jdependMain</code>
                </td>
                <td><code class="literal">classes</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.JDepend.html" target="_top"><code class="classname">JDepend</code></a></td>
                <td>Runs JDepend against the production Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">jdependTest</code>
                </td>
                <td><code class="literal">testClasses</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.JDepend.html" target="_top"><code class="classname">JDepend</code></a></td>
                <td>Runs JDepend against the test Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">jdepend<em class="replaceable"><code>SourceSet</code></em></code>
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>sourceSet</code></em>Classes</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.JDepend.html" target="_top"><code class="classname">JDepend</code></a></td>
                <td>Runs JDepend against the given source set's Java source files.</td>
            </tr></table></div></div><p>The JDepend plugin adds the following dependencies to tasks defined by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;32.2.&nbsp;JDepend plugin - additional task dependencies</b></p><div class="table-contents"><table id="N135F3"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td><code class="literal">check</code></td>
                <td>All JDepend tasks, including <code class="literal">jdependMain</code> and <code class="literal">jdependTest</code>.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1360A"></a>32.3.&nbsp;Dependency management</h2></div></div></div><p>The JDepend plugin adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;32.3.&nbsp;JDepend plugin - dependency configurations</b></p><div class="table-contents"><table id="N1360F"><thead><tr>
                    <td>Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">jdepend</code>
                </td>
                <td>The JDepend libraries to use</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13626"></a>32.4.&nbsp;Configuration</h2></div></div></div><p>See <a class="ulink" href="../dsl/org.gradle.api.plugins.quality.JDependExtension.html" target="_top"><code class="classname">JDependExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="pmd_plugin"></a>Chapter&nbsp;33.&nbsp;The PMD Plugin</h1></div></div></div><p>The PMD plugin performs quality checks on your project's Java source files using <a class="ulink" href="http://pmd.sourceforge.net" target="_top">PMD</a>
        and generates reports from these checks.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1363B"></a>33.1.&nbsp;Usage</h2></div></div></div><p>To use the PMD plugin, include in your build script:</p><div class="example"><a name="usePmdPlugin"></a><p class="title"><b>Example&nbsp;33.1.&nbsp;Using the PMD plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'pmd'</span></pre></div></div><br class="example-break"><p>The plugin adds a number of tasks to the project that perform the quality checks. You can execute the checks by running <strong class="userinput"><code>gradle check</code></strong>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1364F"></a>33.2.&nbsp;Tasks</h2></div></div></div><p>The PMD plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;33.1.&nbsp;PMD plugin - tasks</b></p><div class="table-contents"><table id="N13654"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">pmdMain</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.Pmd.html" target="_top"><code class="classname">Pmd</code></a></td>
                <td>Runs PMD against the production Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">pmdTest</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.Pmd.html" target="_top"><code class="classname">Pmd</code></a></td>
                <td>Runs PMD against the test Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">pmd<em class="replaceable"><code>SourceSet</code></em></code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.quality.Pmd.html" target="_top"><code class="classname">Pmd</code></a></td>
                <td>Runs PMD against the given source set's Java source files.</td>
            </tr></table></div></div><p>The PMD plugin adds the following dependencies to tasks defined by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;33.2.&nbsp;PMD plugin - additional task dependencies</b></p><div class="table-contents"><table id="N136A6"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td><code class="literal">check</code></td>
                <td>All PMD tasks, including <code class="literal">pmdMain</code> and <code class="literal">pmdTest</code>.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N136BD"></a>33.3.&nbsp;Dependency management</h2></div></div></div><p>The PMD plugin adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;33.3.&nbsp;PMD plugin - dependency configurations</b></p><div class="table-contents"><table id="N136C2"><thead><tr>
                    <td>Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">pmd</code>
                </td>
                <td>The PMD libraries to use</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N136D9"></a>33.4.&nbsp;Configuration</h2></div></div></div><p>See <a class="ulink" href="../dsl/org.gradle.api.plugins.quality.PmdExtension.html" target="_top"><code class="classname">PmdExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="jacoco_plugin"></a>Chapter&nbsp;34.&nbsp;The JaCoCo Plugin</h1></div></div></div><div class="note"><p>
            The JaCoCo plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>The JaCoCo plugin provides code coverage metrics for Java code via integration with <a class="ulink" href="http://www.eclemma.org/jacoco/" target="_top">JaCoCo</a>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N136F6"></a>34.1.&nbsp;Getting Started</h2></div></div></div><p>To get started, apply the JaCoCo plugin to the project you want to calculate code coverage for.</p><div class="example"><a name="applyJacoco"></a><p class="title"><b>Example&nbsp;34.1.&nbsp;Applying the JaCoCo plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"jacoco"</span></pre></div></div><br class="example-break"><p>
            If the Java plugin is also applied to your project, a new task named
            <code class="literal">jacocoTestReport</code>
            is created that depends on the
            <code class="literal">test</code>
            task.
            The report is available at
            <code class="filename"><em class="replaceable"><code>$buildDir</code></em>/reports/jacoco/test</code>. By default, a HTML report is generated.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13712"></a>34.2.&nbsp;Configuring the JaCoCo Plugin</h2></div></div></div><p>
            The JaCoCo plugin adds a project extension named <code class="literal">jacoco</code> of type <a class="ulink" href="../dsl/org.gradle.testing.jacoco.plugins.JacocoPluginExtension.html" target="_top"><code class="classname">JacocoPluginExtension</code></a>,
            which allows configuring defaults for JaCoCo usage in your build.
        </p><div class="example"><a name="configJacoco"></a><p class="title"><b>Example&nbsp;34.2.&nbsp;Configuring JaCoCo plugin settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">jacoco {
    toolVersion = <span class="hl-string">"0.6.2.201302030002"</span>
    reportsDir = file(<span class="hl-string">"$buildDir/customJacocoReportDir"</span>)
}</pre></div></div><br class="example-break"><div class="table"><p class="title"><b>Table&nbsp;34.1.&nbsp;Gradle defaults for JaCoCo properties</b></p><div class="table-contents"><table id="N13729"><thead><tr>
                    <td>Property</td>
                    <td>Gradle default</td>
                </tr></thead><tr>
                <td>reportsDir</td>
                <td>"<em class="replaceable"><code>$buildDir</code></em>/reports/jacoco"
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13740"></a>34.3.&nbsp;JaCoCo Report configuration</h2></div></div></div><p>The
            <a class="ulink" href="../dsl/org.gradle.testing.jacoco.tasks.JacocoReport.html" target="_top"><code class="classname">JacocoReport</code></a>
            task can be used to generate code coverage reports in different formats.
            It implements the standard Gradle type <a class="ulink" href="../dsl/org.gradle.api.reporting.Reporting.html" target="_top"><code class="classname">Reporting</code></a> and exposes a report container of
            type <a class="ulink" href="../javadoc/org/gradle/testing/jacoco/tasks/JacocoReportsContainer.html" target="_top"><code class="classname">JacocoReportsContainer</code></a>.
        </p><div class="example"><a name="configJacocoReport"></a><p class="title"><b>Example&nbsp;34.3.&nbsp;Configuring test task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">jacocoTestReport {
    reports {
        xml.enabled false
        csv.enabled false
        html.destination <span class="hl-string">"${buildDir}/jacocoHtml"</span>
    }
}</pre></div></div><br class="example-break"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="903"><tr height="277"><td><img src="img/jacocoHtmlReport.png" height="277"></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13763"></a>34.4.&nbsp;JaCoCo specific task configuration</h2></div></div></div><p>The JaCoCo plugin adds a
            <a class="ulink" href="../dsl/org.gradle.testing.jacoco.plugins.JacocoTaskExtension.html" target="_top"><code class="classname">JacocoTaskExtension</code></a>
            extension to all tasks of type
            <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a>.
            This extension allows the configuration of the JaCoCo specific properties of the test task.
        </p><div class="example"><a name="jacocotesttast"></a><p class="title"><b>Example&nbsp;34.4.&nbsp;Configuring test task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">test {
    jacoco {
        append = false
        destinationFile = file(<span class="hl-string">"$buildDir/jacoco/jacocoTest.exec"</span>)
        classDumpFile = file(<span class="hl-string">"$buildDir/jacoco/classpathdumps"</span>)
    }
}</pre></div></div><br class="example-break"><div class="table"><p class="title"><b>Table&nbsp;34.2.&nbsp;Default values of the JaCoCo Task extension</b></p><div class="table-contents"><table id="N1377C"><thead><tr>
                    <td>Property</td>
                    <td>Gradle default</td>
                </tr></thead><tr>
                <td>enabled</td>
                <td>true</td>
            </tr><tr>
                <td>destPath</td>
                <td><em class="replaceable"><code>$buildDir</code></em>/jacoco
                </td>
            </tr><tr>
                <td>append</td>
                <td>true</td>
            </tr><tr>
                <td>includes</td>
                <td>[]</td>
            </tr><tr>
                <td>excludes</td>
                <td>[]</td>
            </tr><tr>
                <td>excludeClassLoaders</td>
                <td>[]</td>
            </tr><tr>
                <td>sessionId</td>
                <td>
                    <code class="literal">auto-generated</code>
                </td>
            </tr><tr>
                <td>dumpOnExit</td>
                <td>
                    <code class="literal">true</code>
                </td>
            </tr><tr>
                <td>output</td>
                <td>
                    <code class="literal">Output.FILE</code>
                </td>
            </tr><tr>
                <td>address</td>
                <td>
                    <code class="literal">-</code>
                </td>
            </tr><tr>
                <td>port</td>
                <td>
                    <code class="literal">-</code>
                </td>
            </tr><tr>
                <td>classDumpPath</td>
                <td>
                    <code class="literal">-</code>
                </td>
            </tr><tr>
                <td>jmx</td>
                <td>
                    <code class="literal">false</code>
                </td>
            </tr></table></div></div><p>While all tasks of type
            <a class="ulink" href="../dsl/org.gradle.api.tasks.testing.Test.html" target="_top"><code class="classname">Test</code></a>
            are automatically enhanced to provide coverage information when the <code class="literal">java</code> plugin has been applied,
            any task that implements <a class="ulink" href="../javadoc/org/gradle/process/JavaForkOptions.html" target="_top"><code class="classname">JavaForkOptions</code></a> can be enhanced by the JaCoCo plugin.
            That is, any task that forks Java processes can be used to generate coverage information.
        </p><p>
            For example you can configure your build to generate code coverage using the <code class="literal">application</code> plugin.
        </p><div class="example"><a name="jacoco-application-setup"></a><p class="title"><b>Example&nbsp;34.5.&nbsp;Using application plugin to generate code coverage data</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"application"</span>
apply plugin: <span class="hl-string">"jacoco"</span>

mainClassName = <span class="hl-string">"org.gradle.MyMain"</span>

jacoco {
    applyTo run
}

task applicationCodeCoverageReport(type:JacocoReport){
    executionData run
    sourceSets sourceSets.main
}</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/testing/jacoco/application</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><div class="example"><a name="jacoco-application-output"></a><p class="title"><b>Example&nbsp;34.6.&nbsp;Coverage reports generated by applicationCodeCoverageReport</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">application/
  build/
    jacoco/
      run.exec
    reports/jacoco/applicationCodeCoverageReport/html/
      index.html</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13836"></a>34.5.&nbsp;Tasks</h2></div></div></div><p>For projects that also apply the Java Plugin, The JaCoCo plugin automatically adds the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;34.3.&nbsp;JaCoCo plugin - tasks</b></p><div class="table-contents"><table id="N1383B"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">jacocoTestReport</code>
                </td>
                <td>-</td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.testing.jacoco.tasks.JacocoReport.html" target="_top"><code class="classname">JacocoReport</code></a>
                </td>
                <td>Generates code coverage report for the test task.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13863"></a>34.6.&nbsp;Dependency management</h2></div></div></div><p>The JaCoCo plugin adds the following dependency configurations:</p><div class="table"><p class="title"><b>Table&nbsp;34.4.&nbsp;JaCoCo plugin - dependency configurations</b></p><div class="table-contents"><table id="N13868"><thead><tr>
                    <td>Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">jacocoAnt</code>
                </td>
                <td>The JaCoCo Ant library used for running the
                    <code class="literal">JacocoReport</code>
                    and
                    <code class="literal">JacocoMerge</code>
                    tasks.
                </td>
            </tr><tr>
                <td>
                    <code class="filename">jacocoAgent</code>
                </td>
                <td>The JaCoCo agent library used for instrumenting the code under test.</td>
            </tr></table></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="sonar_plugin"></a>Chapter&nbsp;35.&nbsp;The Sonar Plugin</h1></div></div></div><div class="note"><p>
            You may wish to use the new <a class="link" href="#sonar_runner_plugin">Sonar Runner Plugin</a> instead of this plugin.
            In particular, only the Sonar Runner plugin supports Sonar 3.4 and higher.
        </p></div><p>The Sonar plugin provides integration with <a class="ulink" href="http://www.sonarsource.org" target="_top">Sonar</a>,
        a web-based platform for monitoring code quality. The plugin adds a <code class="literal">sonarAnalyze</code> task
        that analyzes the project to which the plugin is applied, as well as its subprojects. The results are stored in
        the Sonar database. The plugin is based on the <a class="ulink" href="http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Runner" target="_top">Sonar Runner</a>
        and requires Sonar 2.11 or higher.
    </p><p>
        The <code class="literal">sonarAnalyze</code> task is a standalone task that needs to be executed explicitly
        and doesn't depend on any other tasks. Apart from source code, the task also analyzes class files
        and test result files (if available). For best results, it is therefore recommended to run a full
        build before the analysis. In a typical setup, analysis would be performed once per day on a build server.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N138AF"></a>35.1.&nbsp;Usage</h2></div></div></div><p>At a minimum, the Sonar plugin has to be applied to the project.</p><div class="example"><a name="quickstart"></a><p class="title"><b>Example&nbsp;35.1.&nbsp;Applying the Sonar plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"sonar"</span></pre></div></div><br class="example-break"><p>Unless Sonar is run locally and with default settings, it is necessary to configure
            connection settings for the Sonar server and database.</p><div class="example"><a name="quickstart"></a><p class="title"><b>Example&nbsp;35.2.&nbsp;Configuring Sonar connection settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar {
    server {
        url = <span class="hl-string">"http://my.server.com"</span>
    }
    database {
        url = <span class="hl-string">"jdbc:mysql://my.server.com/sonar"</span>
        driverClassName = <span class="hl-string">"com.mysql.jdbc.Driver"</span>
        username = <span class="hl-string">"Fred Flintstone"</span>
        password = <span class="hl-string">"very clever"</span>
    }
}</pre></div></div><br class="example-break"><p>
            Alternatively, some or all connection settings can be set from the command line (see <a class="xref" href="#sec:sonar_command_line_parameters">Section&nbsp;35.6, &ldquo;Configuring Sonar Settings from the Command Line&rdquo;</a>).
        </p><p>Project settings determine how the project is going to be analyzed. The default configuration
            works well for analyzing standard Java projects and can be customized in many ways.</p><div class="example"><a name="quickstart"></a><p class="title"><b>Example&nbsp;35.3.&nbsp;Configuring Sonar project settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar {
    project {
        coberturaReportPath = file(<span class="hl-string">"$buildDir/cobertura.xml"</span>)
    }
}</pre></div></div><br class="example-break"><p>
            The <code class="literal">sonar</code>, <code class="literal">server</code>, <code class="literal">database</code>, and <code class="literal">project</code>
            blocks in the examples above configure objects of type <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarRootModel.html" target="_top"><code class="classname">SonarRootModel</code></a>,
            <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarServer.html" target="_top"><code class="classname">SonarServer</code></a>, <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarDatabase.html" target="_top"><code class="classname">SonarDatabase</code></a>,
            and <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarProject.html" target="_top"><code class="classname">SonarProject</code></a>, respectively. See their API documentation for further information.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N138FD"></a>35.2.&nbsp;Analyzing Multi-Project Builds</h2></div></div></div><p>The Sonar plugin is capable of analyzing a whole project hierarchy at once. This yields a hierarchical view in the
            Sonar web interface with aggregated metrics and the ability to drill down into subprojects. It is also faster than
            analyzing each project separately.
        </p><p>
            To analyze a project hierarchy, the Sonar plugin needs to be applied to the top-most project of the hierarchy.
            Typically (but not necessarily) this will be the root project. The <code class="literal">sonar</code> block
            in that project configures an object of type <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarRootModel.html" target="_top"><code class="classname">SonarRootModel</code></a>.
            It holds all global configuration, most importantly server and database connection settings.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;35.4.&nbsp;Global configuration in a multi-project build</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"sonar"</span>

sonar {
    server {
        url = <span class="hl-string">"http://my.server.com"</span>
    }
    database {
        url = <span class="hl-string">"jdbc:mysql://my.server.com/sonar"</span>
        driverClassName = <span class="hl-string">"com.mysql.jdbc.Driver"</span>
        username = <span class="hl-string">"Fred Flintstone"</span>
        password = <span class="hl-string">"very clever"</span>
    }
}</pre></div></div><br class="example-break"><p>Each project in the hierarchy has its own project configuration. Common values can be set from a parent build script.</p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;35.5.&nbsp;Common project configuration in a multi-project build</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    sonar {
        project {
            sourceEncoding = <span class="hl-string">"UTF-8"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>The <code class="literal">sonar</code> block in a subproject configures an object of type <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarProjectModel.html" target="_top"><code class="classname">SonarProjectModel</code></a>.</p><p>
            Projects can also be configured individually. For example, setting the <code class="literal">skip</code> property to <code class="literal">true</code>
            prevents a project (and its subprojects) from being analyzed. Skipped projects will not be displayed in the Sonar web interface.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;35.6.&nbsp;Individual project configuration in a multi-project build</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">":project1"</span>) {
    sonar {
        project {
            skip = true
        }
    }
}</pre></div></div><br class="example-break"><p>
            Another typical per-project configuration is the programming language to be analyzed. Note that Sonar can only analyze one language per project.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;35.7.&nbsp;Configuring the language to be analyzed</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">":project2"</span>) {
    sonar {
        project {
            language = <span class="hl-string">"groovy"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
            When setting only a single property at a time, the equivalent property syntax is more succinct:
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;35.8.&nbsp;Using property syntax</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">":project2"</span>).sonar.project.language = <span class="hl-string">"groovy"</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13956"></a>35.3.&nbsp;Analyzing Custom Source Sets</h2></div></div></div><p>By default, the Sonar plugin will analyze the production sources in the <code class="literal">main</code> source set and
            the test sources in the <code class="literal">test</code> source set. This works independent of the project's source directory layout.
            Additional source sets can be added as needed.
        </p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;35.9.&nbsp;Analyzing custom source sets</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar.project {
    sourceDirs += sourceSets.custom.allSource.srcDirs
    testDirs += sourceSets.integTest.allSource.srcDirs
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1396B"></a>35.4.&nbsp;Analyzing languages other than Java</h2></div></div></div><p>
            To analyze code written in a language other than Java, install the corresponding
            <a class="ulink" href="http://www.sonarsource.com/products/plugins/languages/" target="_top">Sonar plugin</a>, and set
            <code class="literal">sonar.project.language</code> accordingly:
        </p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;35.10.&nbsp;Analyzing languages other than Java</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar.project {
    language = <span class="hl-string">"grvy"</span> <span class="hl-comment">// set language to Groovy</span>
}</pre></div></div><br class="example-break"><p>
            As of Sonar 3.4, only one language per project can be analyzed. You can, however, set a different language for each project in a
            multi-project build.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13983"></a>35.5.&nbsp;Setting Custom Sonar Properties</h2></div></div></div><p>
            Eventually, most configuration is passed to the Sonar code analyzer in the form of key-value pairs known as Sonar properties.
            The <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarProperty.html" target="_top"><code class="classname">SonarProperty</code></a> annotations in the API documentation show how properties
            of the plugin's object model get mapped to the corresponding Sonar properties. The Sonar plugin offers hooks to post-process Sonar
            properties before they get passed to the code analyzer. The same hooks can be used to add additional properties which aren't covered
            by the plugin's object model.
        </p><p>For global Sonar properties, use the <code class="code">withGlobalProperties</code> hook on <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarRootModel.html" target="_top"><code class="classname">SonarRootModel</code></a>:</p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;35.11.&nbsp;Setting custom global properties</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar.withGlobalProperties { props -&gt;
    props[<span class="hl-string">"some.global.property"</span>] = <span class="hl-string">"some value"</span>
    <span class="hl-comment">// non-String values are automatically converted to Strings</span>
    props[<span class="hl-string">"other.global.property"</span>] = [<span class="hl-string">"foo"</span>, <span class="hl-string">"bar"</span>, <span class="hl-string">"baz"</span>]
}</pre></div></div><br class="example-break"><p>For per-project Sonar properties, use the <code class="code">withProjectProperties</code> hook on <a class="ulink" href="../groovydoc/org/gradle/api/plugins/sonar/model/SonarProject.html" target="_top"><code class="classname">SonarProject</code></a>:</p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;35.12.&nbsp;Setting custom project properties</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar.project.withProjectProperties { props -&gt;
    props[<span class="hl-string">"some.project.property"</span>] = <span class="hl-string">"some value"</span>
    <span class="hl-comment">// non-String values are automatically converted to Strings</span>
    props[<span class="hl-string">"other.project.property"</span>] = [<span class="hl-string">"foo"</span>, <span class="hl-string">"bar"</span>, <span class="hl-string">"baz"</span>]
}</pre></div></div><br class="example-break"><p>
            A list of available Sonar properties can be found in the <a class="ulink" href="http://docs.codehaus.org/display/SONAR/Analysis+Parameters" target="_top">Sonar documentation</a>.
            Note that for most of these properties, the Sonar plugin's object model has an equivalent property, and it isn't necessary to use a <code class="code">withGlobalProperties</code>
            or <code class="code">withProjectProperties</code> hook. For configuring a third-party Sonar plugin, consult the plugin's documentation.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:sonar_command_line_parameters"></a>35.6.&nbsp;Configuring Sonar Settings from the Command Line</h2></div></div></div><p>
            The following properties can alternatively be set from the command line, as task parameters of the <code class="literal">sonarAnalyze</code> task.
            A task parameter will override any corresponding value set in the build script.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">server.url</code></li><li class="listitem"><code class="literal">database.url</code></li><li class="listitem"><code class="literal">database.driverClassName</code></li><li class="listitem"><code class="literal">database.username</code></li><li class="listitem"><code class="literal">database.password</code></li><li class="listitem"><code class="literal">showSql</code></li><li class="listitem"><code class="literal">showSqlResults</code></li><li class="listitem"><code class="literal">verbose</code></li><li class="listitem"><code class="literal">forceAnalysis</code></li></ul></div><p>
            Here is a complete example:
        </p><code class="code">
            gradle sonarAnalyze --server.url=http://sonar.mycompany.com --database.password=myPassword --verbose
        </code><p>If you need to set other properties from the command line, you can use system properties to do so:</p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;35.13.&nbsp;Implementing custom command line properties</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonar.project {
    language = System.getProperty(<span class="hl-string">"sonar.language"</span>, <span class="hl-string">"java"</span>)
}</pre></div></div><br class="example-break"><p>However, keep in mind that it is usually best to keep configuration in the build script and under source control.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N139F8"></a>35.7.&nbsp;Tasks</h2></div></div></div><p>The Sonar plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;35.1.&nbsp;Sonar plugin - tasks</b></p><div class="table-contents"><table id="N139FD"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td><code class="literal">sonarAnalyze</code></td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.sonar.SonarAnalyze.html" target="_top"><code class="classname">SonarAnalyze</code></a></td>
                <td>Analyzes a project hierarchy and stores the results in the Sonar database.</td>
            </tr></table></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="sonar_runner_plugin"></a>Chapter&nbsp;36.&nbsp;The Sonar Runner Plugin</h1></div></div></div><div class="note"><p>
            The Sonar runner plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>The Sonar Runner plugin provides integration with <a class="ulink" href="http://www.sonarsource.org" target="_top">Sonar</a>,
        a web-based platform for monitoring code quality. It is based on the <a class="ulink" href="http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Runner" target="_top">Sonar Runner</a>,
        a Sonar client component that analyzes source code and build outputs, and stores all collected information in the Sonar database.
        Compared to using the standalone Sonar Runner, the Sonar Runner plugin offers the following benefits:
    </p><div class="variablelist"><dl><dt><span class="term">Automatic provisioning of Sonar Runner</span></dt><dd><p>The ability to execute the Sonar Runner via a regular Gradle task makes it available anywhere Gradle is available
                    (developer build, CI server, etc.), without the need to download, setup, and maintain a Sonar Runner installation.</p></dd><dt><span class="term">Dynamic configuration from Gradle build scripts</span></dt><dd><p>All of Gradle's scripting features can be leveraged to configure Sonar Runner as needed.</p></dd><dt><span class="term">Extensive configuration defaults</span></dt><dd><p>Gradle already has much of the information needed for Sonar Runner to successfully analyze a project. By preconfiguring
                    the Sonar Runner based on that information, the need for manual configuration is reduced significantly.</p></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13A4B"></a>36.1.&nbsp;Plugin Status and Compatibility</h2></div></div></div><p>
            The Sonar Runner plugin is the successor to the <a class="link" href="#sonar_plugin">Sonar Plugin</a>. It is currently
            <a class="link" href="#sec:incubating_state">incubating</a>. The plugin is based on Sonar Runner 2.0, which makes it compatible
            with Sonar 2.11 and higher. Unlike the Sonar plugin, the Sonar Runner plugin works fine with Sonar 3.4 and higher.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13A58"></a>36.2.&nbsp;Getting Started</h2></div></div></div><p>To get started, apply the Sonar Runner plugin to the project to be analyzed.</p><div class="example"><a name="quickstart"></a><p class="title"><b>Example&nbsp;36.1.&nbsp;Applying the Sonar Runner plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"sonar-runner"</span></pre></div></div><br class="example-break"><p>
            Assuming a local Sonar server with out-of-the-box settings is up and running, no further mandatory configuration is required.
            Execute <strong class="userinput"><code>gradle sonarRunner</code></strong> and wait until the build has completed, then open the web page indicated
            at the bottom of the Sonar Runner output. You should now be able to browse the analysis results.
        </p><p>
            Before executing the <code class="literal">sonarRunner</code> task, all tasks producing output to be analysed by Sonar need to be executed.
            Typically, these are compile tasks, test tasks, and code coverage tasks. To meet these needs, the plugins adds a task dependency
            from <code class="literal">sonarRunner</code> on <code class="literal">test</code> if the <code class="literal">java</code> plugin is applied. Further task dependencies can be
            added as needed.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13A7A"></a>36.3.&nbsp;Configuring the Sonar Runner</h2></div></div></div><p>The Sonar Runner plugin adds a <a class="ulink" href="../groovydoc/org/gradle/api/sonar/runner/SonarRunner.html" target="_top"><code class="classname">SonarRunner</code></a> extension to the project,
            which allows to configure the Sonar Runner via key/value pairs known as <em class="firstterm">Sonar properties</em>. A typical base line configuration
            includes connection settings for the Sonar server and database.
        </p><div class="example"><a name="quickstart"></a><p class="title"><b>Example&nbsp;36.2.&nbsp;Configuring Sonar connection settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonarRunner {
    sonarProperties {
        property <span class="hl-string">"sonar.host.url"</span>, <span class="hl-string">"http://my.server.com"</span>
        property <span class="hl-string">"sonar.jdbc.url"</span>, <span class="hl-string">"jdbc:mysql://my.server.com/sonar"</span>
        property <span class="hl-string">"sonar.jdbc.driverClassName"</span>, <span class="hl-string">"com.mysql.jdbc.Driver"</span>
        property <span class="hl-string">"sonar.jdbc.username"</span>, <span class="hl-string">"Fred Flintstone"</span>
        property <span class="hl-string">"sonar.jdbc.password"</span>, <span class="hl-string">"very clever"</span>
    }
}</pre></div></div><br class="example-break"><p>
            For a complete list of standard Sonar properties, consult the <a class="ulink" href="http://docs.codehaus.org/display/SONAR/Analysis+Parameters" target="_top">Sonar documentation</a>.
            If you happen to use additional Sonar plugins, consult their documentation.
        </p><p>
            Alternatively, Sonar properties can be set from the command line. See <a class="xref" href="#sec:sonar_command_line_parameters">Section&nbsp;35.6, &ldquo;Configuring Sonar Settings from the Command Line&rdquo;</a> for more information.
        </p><p>
            The Sonar Runner plugin leverages information contained in Gradle's object model to provide smart defaults for many of the standard Sonar properties.
            The defaults are summarized in the tables below. Notice that additional defaults are provided for projects that have the <code class="literal">java-base</code>
            or <code class="literal">java</code> plugin applied. For some properties (notably server and database connection settings), determining a suitable default
            is left to the Sonar Runner.
        </p><div class="table"><p class="title"><b>Table&nbsp;36.1.&nbsp;Gradle defaults for standard Sonar properties</b></p><div class="table-contents"><table id="N13AA4"><thead><tr>
                    <td>Property</td>
                    <td>Gradle default</td>
                </tr></thead><tr>
                <td>sonar.projectKey</td>
                <td>"$project.group:$project.name" (for root project of analysed hierarchy; left to Sonar Runner otherwise)</td>
            </tr><tr>
                <td>sonar.projectName</td>
                <td>project.name</td>
            </tr><tr>
                <td>sonar.projectDescription</td>
                <td>project.description</td>
            </tr><tr>
                <td>sonar.projectVersion</td>
                <td>project.version</td>
            </tr><tr>
                <td>sonar.projectBaseDir</td>
                <td>project.projectDir</td>
            </tr><tr>
                <td>sonar.working.directory</td>
                <td>"$project.buildDir/sonar"</td>
            </tr><tr>
                <td>sonar.dynamicAnalysis</td>
                <td>"reuseReports"</td>
            </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;36.2.&nbsp;Additional defaults when <code class="literal">java-base</code> plugin is applied</b></p><div class="table-contents"><table id="N13AE8"><thead><tr>
                    <td>Property</td>
                    <td>Gradle default</td>
                </tr></thead><tr>
                <td>sonar.java.source</td>
                <td>project.sourceCompatibility</td>
            </tr><tr>
                <td>sonar.java.target</td>
                <td>project.targetCompatibility</td>
            </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;36.3.&nbsp;Additional defaults when <code class="literal">java</code> plugin is applied</b></p><div class="table-contents"><table id="N13B07"><thead><tr>
                    <td>Property</td>
                    <td>Gradle default</td>
                </tr></thead><tr>
                <td>sonar.sources</td>
                <td>sourceSets.main.allSource.srcDirs (filtered to only include existing directories)</td>
            </tr><tr>
                <td>sonar.tests</td>
                <td>sourceSets.test.allSource.srcDirs (filtered to only include existing directories)</td>
            </tr><tr>
                <td>sonar.binaries</td>
                <td>sourceSets.main.runtimeClasspath (filtered to only include directories)</td>
            </tr><tr>
                <td>sonar.libraries</td>
                <td>sourceSets.main.runtimeClasspath (filtering to only include files; <code class="literal">rt.jar</code> added if necessary)</td>
            </tr><tr>
                <td>sonar.surefire.reportsPath</td>
                <td>test.testResultsDir (if the directory exists)</td>
            </tr><tr>
                <td>sonar.junit.reportsPath</td>
                <td>test.testResultsDir (if the directory exists)</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13B49"></a>36.4.&nbsp;Analyzing Multi-Project Builds</h2></div></div></div><p>The Sonar Runner is capable of analyzing whole project hierarchies at once. This yields a hierarchical view in the
            Sonar web interface, with aggregated metrics and the ability to drill down into subprojects. Analyzing a project hierarchy
            also takes less time than analyzing each project separately.
        </p><p>
            To analyze a project hierarchy, apply the Sonar Runner plugin to the root project of the hierarchy.
            Typically (but not necessarily) this will be the root project of the Gradle build. Information pertaining to the
            analysis as a whole, like server and database connections settings, have to be configured in the <code class="literal">sonarRunner</code>
            block of this project. Any Sonar properties set on the command line also apply to this project.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;36.3.&nbsp;Global configuration settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonarRunner {
    sonarProperties {
        property <span class="hl-string">"sonar.host.url"</span>, <span class="hl-string">"http://my.server.com"</span>
        property <span class="hl-string">"sonar.jdbc.url"</span>, <span class="hl-string">"jdbc:mysql://my.server.com/sonar"</span>
        property <span class="hl-string">"sonar.jdbc.driverClassName"</span>, <span class="hl-string">"com.mysql.jdbc.Driver"</span>
        property <span class="hl-string">"sonar.jdbc.username"</span>, <span class="hl-string">"Fred Flintstone"</span>
        property <span class="hl-string">"sonar.jdbc.password"</span>, <span class="hl-string">"very clever"</span>
    }
}</pre></div></div><br class="example-break"><p>
            Configuration shared between subprojects can be configured in a <code class="literal">subprojects</code> block.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;36.4.&nbsp;Shared configuration settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    sonarRunner {
        sonarProperties {
            property <span class="hl-string">"sonar.sourceEncoding"</span>, <span class="hl-string">"UTF-8"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
            Project-specific information is configured in the <code class="literal">sonarRunner</code> block
            of the corresponding project.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;36.5.&nbsp;Individual configuration settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">":project1"</span>) {
    sonarRunner {
        sonarProperties {
            property <span class="hl-string">"sonar.language"</span>, <span class="hl-string">"grvy"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
            The skip Sonar analysis for a particular subproject, set <code class="literal">sonarRunner.skipProject</code>.
        </p><div class="example"><a name="multiProject"></a><p class="title"><b>Example&nbsp;36.6.&nbsp;Skipping analysis of a project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">":project2"</span>) {
    sonarRunner {
        skipProject = true
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13B8A"></a>36.5.&nbsp;Analyzing Custom Source Sets</h2></div></div></div><p>By default, the Sonar Runner plugin passes on the project's <code class="literal">main</code> source set as production sources, and the
             project's <code class="literal">test</code> source set as test sources. This works regardless of the project's source directory layout.
             Additional source sets can be added as needed.
        </p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;36.7.&nbsp;Analyzing custom source sets</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonarRunner {
    sonarProperties {
        properties[<span class="hl-string">"sonar.sources"</span>] += sourceSets.custom.allSource.srcDirs
        properties[<span class="hl-string">"sonar.tests"</span>] += sourceSets.integTest.allSource.srcDirs
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13B9F"></a>36.6.&nbsp;Analyzing languages other than Java</h2></div></div></div><p>
            To analyze code written in a language other than Java, install the corresponding
            <a class="ulink" href="http://www.sonarsource.com/products/plugins/languages/" target="_top">Sonar plugin</a>, and set
            <code class="literal">sonar.project.language</code> accordingly:
        </p><div class="example"><a name="advanced"></a><p class="title"><b>Example&nbsp;36.8.&nbsp;Analyzing languages other than Java</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sonarRunner {
    sonarProperties {
        property <span class="hl-string">"sonar.language"</span>, <span class="hl-string">"grvy"</span> <span class="hl-comment">// set language to Groovy</span>
    }
}</pre></div></div><br class="example-break"><p>
            As of Sonar 3.4, only one language per project can be analyzed. It is, however, possible to analyze a different language
            for each project in a multi-project build.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13BB7"></a>36.7.&nbsp;More on configuring Sonar properties</h2></div></div></div><p>
            Let's take a closer look at the <code class="literal">sonarRunner.sonarProperties {}</code> block. As we have already seen in the examples,
            the <code class="literal">property()</code> method allows to set new properties or override existing ones. Furthermore, all properties that have
            been configured up to this point, including all properties preconfigured by Gradle, are available via the <code class="literal">properties</code>
            accessor.
        </p><p>
        </p><p>
            Entries in the <code class="literal">properties</code> map can be read and written with the usual Groovy syntax. To facilitate their manipulation,
            values still have their "idiomatic" type (<code class="classname">File</code>, <code class="classname">List</code>, etc.). After the sonarProperties block
            has been evaluated, values are converted to Strings as follows: Collection values are (recursively) converted to comma-separated Strings,
            and all other values are converted by calling their <code class="literal">toString()</code> method.
        </p><p>
            Because the <code class="literal">sonarProperties</code> block is evaluated lazily, properties of Gradle's object model can be safely referenced
            from within the block, without having to fear that they have not yet been set.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:sonar_command_line_parameters"></a>36.8.&nbsp;Setting Sonar Properties from the Command Line</h2></div></div></div><p>
            Sonar Properties can also be set from the command line, by setting a system property named exactly like the Sonar property in question.
            This can be useful when dealing with sensitive information (e.g. credentials), environment information, or for ad-hoc configuration.
        </p><pre class="programlisting">gradle sonarRunner -Dsonar.host.url=http://sonar.mycompany.com -Dsonar.jdbc.password=myPassword -Dsonar.verbose=true</pre><div class="note"><p>
                While certainly useful at times, we do recommend to keep the bulk of the configuration in a (versioned) build script, readily
                available to everyone.
            </p></div><p>A Sonar property value set via a system property overrides any value set in a build script (for the same property). When
            analyzing a project hierarchy, values set via system properties apply to the root project of the analyzed hierarchy.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13BE6"></a>36.9.&nbsp;Executing Sonar Runner in a separate process</h2></div></div></div><p>
            Depending on project size, the Sonar Runner may require a lot of memory. For this and other (mainly isolation) reasons,
            it is desirable to execute the Sonar Runner in a separate process. This feature will be provided once Sonar Runner 2.1
            has been released and adopted by the Sonar Runner plugin. Until then, the Sonar Runner is executed in the
            main Gradle process. See <a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a> for how to manage memory settings for that process.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13BEE"></a>36.10.&nbsp;Tasks</h2></div></div></div><p>The Sonar Runner plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;36.4.&nbsp;Sonar Runner plugin - tasks</b></p><div class="table-contents"><table id="N13BF3"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td><code class="literal">sonarRunner</code></td>
                <td>-</td>
                <td><a class="ulink" href="../groovydoc/org/gradle/api/sonar/runner/SonarRunner.html" target="_top"><code class="classname">SonarRunner</code></a></td>
                <td>Analyzes a project hierarchy and stores the results in the Sonar database.</td>
            </tr></table></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="osgi_plugin"></a>Chapter&nbsp;37.&nbsp;The OSGi Plugin</h1></div></div></div><p>The OSGi plugin provides a factory method to create an
        <a class="ulink" href="../javadoc/org/gradle/api/plugins/osgi/OsgiManifest.html" target="_top"><code class="classname">OsgiManifest</code></a> object. <code class="literal">OsgiManifest</code> extends
        <a class="ulink" href="../javadoc/org/gradle/api/java/archives/Manifest.html" target="_top"><code class="classname">Manifest</code></a>. To learn more
        about generic manifest handling, see <a class="xref" href="#sub:manifest">Section&nbsp;23.13.1, &ldquo;Manifest&rdquo;</a>. If the Java plugins is applied, the OSGi plugin
        replaces the manifest object of the default jar with an <code class="literal">OsgiManifest</code> object. The replaced manifest
        is merged into the new one.
    </p><p>The OSGi plugin makes heavy use of Peter Kriens <a class="ulink" href="http://www.aqute.biz/Code/Bnd" target="_top">BND tool</a>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13C38"></a>37.1.&nbsp;Usage</h2></div></div></div><p>To use the OSGi plugin, include in your build script:</p><div class="example"><a name="useOsgiPlugin"></a><p class="title"><b>Example&nbsp;37.1.&nbsp;Using the OSGi plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'osgi'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13C47"></a>37.2.&nbsp;Implicitly applied plugins</h2></div></div></div><p>Applies the Java base plugin.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13C4C"></a>37.3.&nbsp;Tasks</h2></div></div></div><p>This plugin does not add any tasks.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13C51"></a>37.4.&nbsp;Dependency management</h2></div></div></div><p>TBD</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13C56"></a>37.5.&nbsp;Convention object</h2></div></div></div><p>The OSGi plugin adds the following convention object: <a class="ulink" href="../dsl/org.gradle.api.plugins.osgi.OsgiPluginConvention.html" target="_top"><code class="classname">OsgiPluginConvention</code></a>
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N13C60"></a>37.5.1.&nbsp;Convention properties</h3></div></div></div><p>The OSGi plugin does not add any convention properties to the project.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N13C65"></a>37.5.2.&nbsp;Convention methods</h3></div></div></div><p>The OSGi plugin adds the following methods. For more details, see the API documentation of the convention
                object.
            </p><div class="table"><p class="title"><b>Table&nbsp;37.1.&nbsp;OSGi methods</b></p><div class="table-contents"><table id="N13C6A"><thead><tr>
                        <td>Method</td>
                        <td>Return Type</td>
                        <td>Description</td>
                    </tr></thead><tr>
                    <td>osgiManifest()</td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/plugins/osgi/OsgiManifest.html" target="_top"><code class="classname">OsgiManifest</code></a>
                    </td>
                    <td>Returns an OsgiManifest object.</td>
                </tr><tr>
                    <td>osgiManifest(Closure cl)</td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/plugins/osgi/OsgiManifest.html" target="_top"><code class="classname">OsgiManifest</code></a>
                    </td>
                    <td>Returns an OsgiManifest object configured by the closure.</td>
                </tr></table></div></div></div></div><div class="section"><div class="titlepage"></div><p>The classes in the classes dir are analyzed regarding there package dependencies and the packages they expose.
            Based on this the <span class="emphasis"><em>Import-Package</em></span> and the <span class="emphasis"><em>Export-Package</em></span> values of the
            OSGi Manifest are calculated. If the classpath contains jars with an OSGi bundle, the bundle
            information is used to specify version information for the <span class="emphasis"><em>Import-Package</em></span>
            value. Beside the explicit properties of the <code class="literal">OsgiManifest</code> object you can add instructions.
        </p><div class="example"><a name="osgi"></a><p class="title"><b>Example&nbsp;37.2.&nbsp;Configuration of OSGi MANIFEST.MF file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">jar {
    manifest { <span class="hl-comment">// the manifest of the default jar is of type OsgiManifest</span>
        name = <span class="hl-string">'overwrittenSpecialOsgiName'</span>
        instruction <span class="hl-string">'Private-Package'</span>,
                <span class="hl-string">'org.mycomp.package1'</span>,
                <span class="hl-string">'org.mycomp.package2'</span>
        instruction <span class="hl-string">'Bundle-Vendor'</span>, <span class="hl-string">'MyCompany'</span>
        instruction <span class="hl-string">'Bundle-Description'</span>, <span class="hl-string">'Platform2: Metrics 2 Measures Framework'</span>
        instruction <span class="hl-string">'Bundle-DocURL'</span>, <span class="hl-string">'http://www.mycompany.com'</span>
    }
}
task fooJar(type: Jar) {
    manifest = osgiManifest {
        instruction <span class="hl-string">'Bundle-Vendor'</span>, <span class="hl-string">'MyCompany'</span>    
    }
}</pre></div></div><br class="example-break"><p>The first argument of the instruction call is the key of the property. The other arguments form the value.
            They are joined by Gradle with the <code class="literal">,</code> separator. To learn more about the available
            instructions have a look at the <a class="ulink" href="http://www.aqute.biz/Code/Bnd" target="_top">BND tool</a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="eclipse_plugin"></a>Chapter&nbsp;38.&nbsp;The Eclipse Plugin</h1></div></div></div><p>The Eclipse plugin generates files that are used by the <a class="ulink" href="http://eclipse.org" target="_top">Eclipse IDE</a>, thus
        making it possible to import the project into Eclipse (<span class="guimenuitem">File</span> - <span class="guimenuitem">Import...</span> - <span class="guimenuitem">Existing Projects into Workspace</span>).
        Both external dependencies (including associated source and javadoc files) and project dependencies are considered.</p><p>Since 1.0-milestone-4 WTP-generating code was refactored into a separate plugin called <code class="literal">eclipse-wtp</code>.
        So if you are interested in WTP integration then only apply the <code class="literal">eclipse-wtp</code> plugin. Otherwise applying <code class="literal">eclipse</code> plugin is enough.
        This change was requested by Eclipse users who take advantage of <code class="literal">war</code> or <code class="literal">ear</code> plugin
        but they don't use Eclipse WTP. Internally, <code class="literal">eclipse-wtp</code> also applies the <code class="literal">eclipse</code> plugin so you don't need to apply both of those plugins.
    </p><p>What exactly the Eclipse plugin generates depends on which other plugins are used:</p><div class="table"><p class="title"><b>Table&nbsp;38.1.&nbsp;Eclipse plugin behavior</b></p><div class="table-contents"><table id="N13CE9"><thead><tr><td>Plugin</td><td>Description</td></tr></thead><tr>
            <td>None</td><td>Generates minimal <code class="filename">.project</code> file.</td>
        </tr><tr>
            <td><a class="link" href="#java_plugin">Java</a></td><td>Adds Java configuration to <code class="filename">.project</code>.
            Generates <code class="filename">.classpath</code> and JDT settings file.</td>
        </tr><tr>
            <td><a class="link" href="#groovy_plugin">Groovy</a></td><td>Adds Groovy configuration to <code class="filename">.project</code> file.</td>
        </tr><tr>
            <td><a class="link" href="#scala_plugin">Scala</a></td><td>Adds Scala support to <code class="filename">.project</code> and <code class="filename">.classpath</code> files.</td>
        </tr><tr>
            <td><a class="link" href="#war_plugin">War</a></td><td>Adds web application support to <code class="filename">.project</code> file.
            Generates WTP settings files only if <code class="literal">eclipse-wtp</code> plugin was applied.</td>
        </tr><tr>
            <td><a class="link" href="#ear_plugin">Ear</a></td><td>Adds ear application support to <code class="filename">.project</code> file.
            Generates WTP settings files only if <code class="literal">eclipse-wtp</code> plugin was applied.</td>
        </tr></table></div></div><p>The Eclipse plugin is open to customization and provides a standardized set of hooks
        for adding and removing content from the generated files.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13D46"></a>38.1.&nbsp;Usage</h2></div></div></div><p>To use the Eclipse plugin, include this in your build script:</p><div class="example"><a name="useEclipsePlugin"></a><p class="title"><b>Example&nbsp;38.1.&nbsp;Using the Eclipse plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'eclipse'</span></pre></div></div><br class="example-break"><p>The Eclipse plugin adds a number of tasks to your projects. The main tasks that you will use
            are the <code class="literal">eclipse</code> and <code class="literal">cleanEclipse</code> tasks.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13D5D"></a>38.2.&nbsp;Tasks</h2></div></div></div><p>The Eclipse plugin adds the tasks shown below to a project.</p><div class="table"><p class="title"><b>Table&nbsp;38.2.&nbsp;Eclipse plugin - tasks</b></p><div class="table-contents"><table id="eclipsetasks"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">eclipse</code>
                </td>
                <td><code class="literal">eclipseProject</code>, <code class="literal">eclipseClasspath</code>, <code class="literal">eclipseJdt</code>,
                    <code class="literal">eclipseWtpComponent</code>, <code class="literal">cleanEclipseWtpFacet</code></td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Generates all Eclipse configuration files</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanEclipse</code>
                </td>
                <td>
                    <code class="literal">cleanEclipseProject</code>, <code class="literal">cleanEclipseClasspath</code>, <code class="literal">cleanEclipseJdt</code>,
                    <code class="literal">cleanEclipseWtpComponent</code>, <code class="literal">cleanEclipseWtpFacet</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes all Eclipse configuration files</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanEclipseProject</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the <code class="filename">.project</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanEclipseClasspath</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the <code class="filename">.classpath</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanEclipseJdt</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the <code class="filename">.settings/org.eclipse.jdt.core.prefs</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanEclipseWtpComponent</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the <code class="filename">.settings/org.eclipse.wst.common.component</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanEclipseWtpFacet</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a>
                </td>
                <td>Removes the <code class="filename">.settings/org.eclipse.wst.common.component</code> file.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseProject</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.GenerateEclipseProject.html" target="_top"><code class="classname">GenerateEclipseProject</code></a></td>
                <td>Generates the <code class="filename">.project</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseClasspath</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.GenerateEclipseClasspath.html" target="_top"><code class="classname">GenerateEclipseClasspath</code></a></td>
                <td>Generates the <code class="filename">.classpath</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseJdt</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.GenerateEclipseJdt.html" target="_top"><code class="classname">GenerateEclipseJdt</code></a></td>
                <td>Generates the <code class="filename">.settings/org.eclipse.jdt.core.prefs</code> file.</td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseWtpComponent</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.GenerateEclipseWtpComponent.html" target="_top"><code class="classname">GenerateEclipseWtpComponent</code></a></td>
                <td>Generates the <code class="filename">.settings/org.eclipse.wst.common.component</code> file only if <code class="literal">eclipse-wtp</code> plugin was applied.</td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseWtpFacet</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.GenerateEclipseWtpFacet.html" target="_top"><code class="classname">GenerateEclipseWtpFacet</code></a>
                </td>
                <td>Generates the <code class="filename">.settings/org.eclipse.wst.common.project.facet.core.xml</code> file only if <code class="literal">eclipse-wtp</code> plugin was applied.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13EC7"></a>38.3.&nbsp;Configuration</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;38.3.&nbsp;Configuration of the Eclipse plugin</b></p><div class="table-contents"><table id="eclipse-configuration"><thead><tr>
                    <td>Model</td>
                    <td>Reference name</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseModel.html" target="_top"><code class="classname">EclipseModel</code></a>
                </td>
                <td><code class="literal">eclipse</code></td>
                <td>Top level element that enables configuration of the Eclipse plugin in a DSL-friendly fashion</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseProject.html" target="_top"><code class="classname">EclipseProject</code></a>
                </td>
                <td><code class="literal">eclipse.project</code></td>
                <td>Allows configuring project information</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseClasspath.html" target="_top"><code class="classname">EclipseClasspath</code></a>
                </td>
                <td><code class="literal">eclipse.classpath</code></td>
                <td>Allows configuring classpath information</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseJdt.html" target="_top"><code class="classname">EclipseJdt</code></a>
                </td>
                <td><code class="literal">eclipse.jdt</code></td>
                <td>Allows configuring jdt information (source/target java compatibility)</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseWtpComponent.html" target="_top"><code class="classname">EclipseWtpComponent</code></a>
                </td>
                <td><code class="literal">eclipse.wtp.component</code></td>
                <td>Allows configuring wtp component information only if <code class="literal">eclipse-wtp</code> plugin was applied.</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseWtpFacet.html" target="_top"><code class="classname">EclipseWtpFacet</code></a>
                </td>
                <td><code class="literal">eclipse.wtp.facet</code></td>
                <td>Allows configuring wtp facet information only if <code class="literal">eclipse-wtp</code> plugin was applied.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N13F46"></a>38.4.&nbsp;Customizing the generated files</h2></div></div></div><p>
            The Eclipse plugin allows you to customize the generated metadata files. The plugin provides a DSL for configuring model objects
            that model the Eclipse view of the project. These model objects are then merged with the existing Eclipse XML metadata to ultimately
            generate new metadata. The model objects provide lower level hooks for working with domain objects representing the file content 
            before and after merging with the model configuration. They also provide a very low level hook for working directly with the raw 
            XML for adjustment before it is persisted, for fine tuning and configuration that the Eclipse plugin does not model.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N13F4B"></a>38.4.1.&nbsp;Merging</h3></div></div></div><p>Sections of existing Eclipse files that are also the target of generated content will be amended or overwritten,
                 depending on the particular section. The remaining sections will be left as-is.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:complete-overwrite"></a>38.4.1.1.&nbsp;Disabling merging with a complete overwrite</h4></div></div></div><p>To completely overwrite existing Eclipse files, execute a clean task together with its corresponding generation task,
                    for example <strong class="userinput"><code>gradle cleanEclipse eclipse</code></strong> (in that order). If you want to make this
                    the default behavior, add <code class="code">tasks.eclipse.dependsOn(cleanEclipse)</code> to your build script. This makes it
                    unnecessary to execute the clean task explicitly.
                </p><p>Complete overwrite works equally well for individual files, for example by executing <strong class="userinput"><code>gradle cleanEclipseClasspath eclipseClasspath</code></strong>.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N13F61"></a>38.4.2.&nbsp;Hooking into the generation lifecycle</h3></div></div></div><p>The Eclipse plugin provides objects modeling the sections of the Eclipse files
                that are generated by Gradle. The generation lifecycle is as follows:
                </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">The file is read; or a default version provided by Gradle is used if it does not exist</li><li class="listitem">The <code class="code">beforeMerged</code> hook is executed with a domain object representing the existing file</li><li class="listitem">The existing content is merged with the configuration inferred from the Gradle build or defined explicitly in the eclipse DSL</li><li class="listitem">The <code class="code">whenMerged</code> hook is executed with a domain object representing contents of the file to be persisted</li><li class="listitem">The <code class="code">withXml</code> hook is executed with a raw representation of the XML that will be persisted</li><li class="listitem">The final XML is persisted</li></ol></div><p>
                The following table lists the domain object used for each of the Eclipse model types:
            </p><div class="table"><p class="title"><b>Table&nbsp;38.4.&nbsp;Advanced configuration hooks</b></p><div class="table-contents"><table id="eclipse-plugin-hooks"><thead><tr>
                        <td>Model</td>
                        <td><code class="literal">beforeMerged { arg -&gt; }</code> argument type</td>
                        <td><code class="literal">whenMerged { arg -&gt; }</code> argument type</td>
                        <td><code class="literal">withXml { arg -&gt; }</code> argument type</td>
                    </tr></thead><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseProject.html" target="_top"><code class="classname">EclipseProject</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/Project.html" target="_top"><code class="classname">Project</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/Project.html" target="_top"><code class="classname">Project</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseClasspath.html" target="_top"><code class="classname">EclipseClasspath</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/Classpath.html" target="_top"><code class="classname">Classpath</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/Classpath.html" target="_top"><code class="classname">Classpath</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseJdt.html" target="_top"><code class="classname">EclipseJdt</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/plugins/ide/eclipse/model/Jdt.html" target="_top"><code class="classname">Jdt</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/plugins/ide/eclipse/model/Jdt.html" target="_top"><code class="classname">Jdt</code></a></td>
                    <td></td>
                </tr><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseWtpComponent.html" target="_top"><code class="classname">EclipseWtpComponent</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/WtpComponent.html" target="_top"><code class="classname">WtpComponent</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/WtpComponent.html" target="_top"><code class="classname">WtpComponent</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.eclipse.model.EclipseWtpFacet.html" target="_top"><code class="classname">EclipseWtpFacet</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/WtpFacet.html" target="_top"><code class="classname">WtpFacet</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/eclipse/model/WtpFacet.html" target="_top"><code class="classname">WtpFacet</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:partial-overwrite"></a>38.4.2.1.&nbsp;Partial overwrite of existing content</h4></div></div></div><p>A <a class="link" href="#sec:complete-overwrite">complete overwrite</a> causes all existing content to be discarded,
                    thereby losing any changes made directly in the IDE. Alternatively, the <code class="code">beforeMerged</code> hook makes it possible
                    to overwrite just certain parts of the existing content. The following example removes all existing dependencies
                    from the <code class="literal">Classpath</code> domain object:
                    </p><div class="example"><a name="partialOverwrites"></a><p class="title"><b>Example&nbsp;38.2.&nbsp;Partial Overwrite for Classpath</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">eclipse.classpath.file {
    beforeMerged { classpath -&gt;
        classpath.entries.removeAll { entry -&gt; entry.kind == <span class="hl-string">'lib'</span> || entry.kind == <span class="hl-string">'var'</span> }
    }
}</pre></div></div><p><br class="example-break">
                    The resulting <code class="literal">.classpath</code> file will only contain Gradle-generated dependency entries, but
                    not any other dependency entries that may have been present in the original file. (In the case of dependency entries,
                    this is also the default behavior.) Other sections of the <code class="literal">.classpath</code> file will be either left as-is or merged.
                    The same could be done for the natures in the <code class="literal">.project</code> file:
                    </p><div class="example"><a name="partialOverwritesProject"></a><p class="title"><b>Example&nbsp;38.3.&nbsp;Partial Overwrite for Project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">eclipse.project.file.beforeMerged { project -&gt;
    project.natures.clear()
}</pre></div></div><p><br class="example-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N14043"></a>38.4.2.2.&nbsp;Modifying the fully populated domain objects</h4></div></div></div><p>The <code class="code">whenMerged</code> hook allows to manipulate the fully populated domain objects. Often this is the
                    preferred way to customize Eclipse files. Here is how you would export all the dependencies of an Eclipse project:
                    </p><div class="example"><a name="exportDependencies"></a><p class="title"><b>Example&nbsp;38.4.&nbsp;Export Dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">eclipse.classpath.file {
    whenMerged { classpath -&gt;
        classpath.entries.findAll { entry -&gt; entry.kind == <span class="hl-string">'lib'</span> }*.exported = false
    }
}</pre></div></div><p><br class="example-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N14056"></a>38.4.2.3.&nbsp;Modifying the XML representation</h4></div></div></div><p>The <code class="code">withXml</code>hook allows to manipulate the in-memory XML representation just before the file gets written to disk.
                    Although Groovy's XML support makes up for a lot, this approach is less convenient than manipulating the domain objects.
                    In return, you get total control over the generated file, including sections not modeled by the domain objects.
                    </p><div class="example"><a name="wtpWithXml"></a><p class="title"><b>Example&nbsp;38.5.&nbsp;Customizing the XML</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'eclipse-wtp'</span>

eclipse.wtp.facet.file.withXml { provider -&gt;
    provider.asNode().fixed.find { it.<span class="hl-annotation">@facet</span> == <span class="hl-string">'jst.java'</span> }.<span class="hl-annotation">@facet</span> = <span class="hl-string">'jst2.java'</span>
}</pre></div></div><p><br class="example-break">
                </p></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="idea_plugin"></a>Chapter&nbsp;39.&nbsp;The IDEA Plugin</h1></div></div></div><p>The IDEA plugin generates files that are used by <a class="ulink" href="http://www.jetbrains.com/idea/" target="_top">IntelliJ IDEA</a>, thus
        making it possible to open the project from IDEA (<span class="guimenuitem">File</span> - <span class="guimenuitem">Open Project</span>).
        Both external dependencies (including associated source and javadoc files) and project dependencies are considered.</p><p>What exactly the IDEA plugin generates depends on which other plugins are used:</p><div class="table"><p class="title"><b>Table&nbsp;39.1.&nbsp;IDEA plugin behavior</b></p><div class="table-contents"><table id="N1407D"><thead><tr>
                <td>Plugin</td><td>Description</td>
            </tr></thead><tr>
            <td>None</td><td>Generates an IDEA module file. Also generates an IDEA project and workspace file if the project
            is the root project.</td>
        </tr><tr>
            <td>
                <a class="link" href="#java_plugin">Java</a>
            </td>
            <td>Adds Java configuration to the module and project files.</td>
        </tr></table></div></div><p>One focus of the IDEA plugin is to be open to customization. The plugin provides a standardized set of hooks
        for adding and removing content from the generated files.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1409D"></a>39.1.&nbsp;Usage</h2></div></div></div><p>To use the IDEA plugin, include this in your build script:</p><div class="example"><a name="useIdeaPlugin"></a><p class="title"><b>Example&nbsp;39.1.&nbsp;Using the IDEA plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'idea'</span></pre></div></div><br class="example-break"><p>The IDEA plugin adds a number of tasks to your project. The main tasks that you will use
            are the <code class="literal">idea</code> and <code class="literal">cleanIdea</code> tasks.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N140B4"></a>39.2.&nbsp;Tasks</h2></div></div></div><p>The IDEA plugin adds the tasks shown below to a project.
            Notice that <code class="literal">clean</code> does not depend on <code class="literal">cleanIdeaWorkspace</code>.
            It's because workspace contains a lot of user specific temporary data and typically it is not desirable to manipulate it outside IDEA.
        </p><div class="table"><p class="title"><b>Table&nbsp;39.2.&nbsp;IDEA plugin - Tasks</b></p><div class="table-contents"><table id="ideatasks"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">idea</code>
                </td>
                <td><code class="literal">ideaProject</code>, <code class="literal">ideaModule</code>, <code class="literal">ideaWorkspace</code></td>
                <td><code class="literal">-</code></td>
                <td>Generates all IDEA configuration files</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanIdea</code>
                </td>
                <td>
                    <code class="literal">cleanIdeaProject</code>, <code class="literal">cleanIdeaModule</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes all IDEA configuration files</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanIdeaProject</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the IDEA project file</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanIdeaModule</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the IDEA module file</td>
            </tr><tr>
                <td>
                    <code class="literal">cleanIdeaWorkspace</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Delete.html" target="_top"><code class="classname">Delete</code></a></td>
                <td>Removes the IDEA workspace file</td>
            </tr><tr>
                <td>
                    <code class="literal">ideaProject</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.GenerateIdeaProject.html" target="_top"><code class="classname">GenerateIdeaProject</code></a></td>
                <td>Generates the <code class="literal">.ipr</code> file. This task is only added to the root project.</td>
            </tr><tr>
                <td>
                    <code class="literal">ideaModule</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.GenerateIdeaModule.html" target="_top"><code class="classname">GenerateIdeaModule</code></a></td>
                <td>Generates the <code class="literal">.iml</code> file</td>
            </tr><tr>
                <td>
                    <code class="literal">ideaWorkspace</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.GenerateIdeaWorkspace.html" target="_top"><code class="classname">GenerateIdeaWorkspace</code></a></td>
                <td>Generates the <code class="literal">.iws</code> file. This task is only added to the root project.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14198"></a>39.3.&nbsp;Configuration</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;39.3.&nbsp;Configuration of the idea plugin</b></p><div class="table-contents"><table id="idea-configuration"><thead><tr>
                    <td>Model</td>
                    <td>Reference name</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaModel.html" target="_top"><code class="classname">IdeaModel</code></a>
                </td>
                <td><code class="literal">idea</code></td>
                <td>Top level element that enables configuration of the idea plugin in a DSL-friendly fashion</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaProject.html" target="_top"><code class="classname">IdeaProject</code></a>
                </td>
                <td><code class="literal">idea.project</code></td>
                <td>Allows configuring project information</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaModule.html" target="_top"><code class="classname">IdeaModule</code></a>
                </td>
                <td><code class="literal">idea.module</code></td>
                <td>Allows configuring module information</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaWorkspace.html" target="_top"><code class="classname">IdeaWorkspace</code></a>
                </td>
                <td><code class="literal">idea.workspace</code></td>
                <td>Allows configuring the workspace XML</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N141EF"></a>39.4.&nbsp;Customizing the generated files</h2></div></div></div><p>IDEA plugin provides hooks and behavior for customizing the generated content.
            The workspace file can effectively only be manipulated via the <code class="code">withXml</code> hook
            because its corresponding domain object is essentially empty.</p><p>The tasks recognize existing IDEA files, and merge them with the generated content.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N141F9"></a>39.4.1.&nbsp;Merging</h3></div></div></div><p>Sections of existing IDEA files that are also the target of generated content will be amended or overwritten,
                depending on the particular section. The remaining sections will be left as-is.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:complete-overwrite"></a>39.4.1.1.&nbsp;Disabling merging with a complete overwrite</h4></div></div></div><p>To completely overwrite existing IDEA files, execute a clean task together with its corresponding generation task,
                    for example <strong class="userinput"><code>gradle cleanIdea idea</code></strong> (in that order). If you want to make this
                    the default behavior, add <code class="code">tasks.idea.dependsOn(cleanIdea)</code> to your build script. This makes it
                    unnecessary to execute the clean task explicitly.
                </p><p>Complete overwrite works equally well for individual files, for example by executing <strong class="userinput"><code>gradle cleanIdeaModule ideaModule</code></strong>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1420F"></a>39.4.2.&nbsp;Hooking into the generation lifecycle</h3></div></div></div><p>The plugin provides objects modeling the sections of the metadata files
                that are generated by Gradle. The generation lifecycle is as follows:
                </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">The file is read; or a default version provided by Gradle is used if it does not exist</li><li class="listitem">The <code class="code">beforeMerged</code> hook is executed with a domain object representing the existing file</li><li class="listitem">The existing content is merged with the configuration inferred from the Gradle build or defined explicitly in the eclipse DSL</li><li class="listitem">The <code class="code">whenMerged</code> hook is executed with a domain object representing contents of the file to be persisted</li><li class="listitem">The <code class="code">withXml</code> hook is executed with a raw representation of the XML that will be persisted</li><li class="listitem">The final XML is persisted</li></ol></div><p>
                The following table lists the domain object used for each of the model types:
            </p><div class="table"><p class="title"><b>Table&nbsp;39.4.&nbsp;Idea plugin hooks</b></p><div class="table-contents"><table id="idea-hooks"><thead><tr>
                        <td>Model</td>
                        <td><code class="literal">beforeMerged { arg -&gt; }</code> argument type</td>
                        <td><code class="literal">whenMerged { arg -&gt; }</code> argument type</td>
                        <td><code class="literal">withXml { arg -&gt; }</code> argument type</td>
                    </tr></thead><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaProject.html" target="_top"><code class="classname">IdeaProject</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/idea/model/Project.html" target="_top"><code class="classname">Project</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/idea/model/Project.html" target="_top"><code class="classname">Project</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaModule.html" target="_top"><code class="classname">IdeaModule</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/idea/model/Module.html" target="_top"><code class="classname">Module</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/idea/model/Module.html" target="_top"><code class="classname">Module</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr><tr>
                    <td><a class="ulink" href="../dsl/org.gradle.plugins.ide.idea.model.IdeaWorkspace.html" target="_top"><code class="classname">IdeaWorkspace</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/idea/model/Workspace.html" target="_top"><code class="classname">Workspace</code></a></td>
                    <td><a class="ulink" href="../groovydoc/org/gradle/plugins/ide/idea/model/Workspace.html" target="_top"><code class="classname">Workspace</code></a></td>
                    <td><a class="ulink" href="../javadoc/org/gradle/api/XmlProvider.html" target="_top"><code class="classname">XmlProvider</code></a></td>
                </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:partial-overwrite"></a>39.4.2.1.&nbsp;Partial overwrite of existing content</h4></div></div></div><p>A <a class="link" href="#sec:complete-overwrite">complete overwrite</a> causes all existing content to be discarded,
                    thereby losing any changes made directly in the IDE. The <code class="code">beforeMerged</code> hook makes it possible
                    to overwrite just certain parts of the existing content. The following example removes all existing dependencies
                    from the <code class="literal">Module</code> domain object:
                    </p><div class="example"><a name="partialOverwrites"></a><p class="title"><b>Example&nbsp;39.2.&nbsp;Partial Overwrite for Module</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">idea.module.iml {
    beforeMerged { module -&gt;
        module.dependencies.clear()
    }
}</pre></div></div><p><br class="example-break">
                    The resulting module file will only contain Gradle-generated dependency entries, but
                    not any other dependency entries that may have been present in the original file. (In the case of dependency entries,
                    this is also the default behavior.) Other sections of the module file will be either left as-is or merged.
                    The same could be done for the module paths in the project file:
                    </p><div class="example"><a name="partialOverwritesProject"></a><p class="title"><b>Example&nbsp;39.3.&nbsp;Partial Overwrite for Project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">idea.project.ipr {
    beforeMerged { project -&gt;
        project.modulePaths.clear()
    }
}</pre></div></div><p><br class="example-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N142B8"></a>39.4.2.2.&nbsp;Modifying the fully populated domain objects</h4></div></div></div><p>The <code class="code">whenMerged</code> hook allows to manipulate the fully populated domain objects. Often this is the
                    preferred way to customize IDEA files. Here is how you would export all the dependencies of an IDEA module:
                    </p><div class="example"><a name="exportDependencies"></a><p class="title"><b>Example&nbsp;39.4.&nbsp;Export Dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">idea.module.iml {
    whenMerged { module -&gt;
        module.dependencies*.exported = true
    }
}</pre></div></div><p><br class="example-break">
                    
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N142CB"></a>39.4.2.3.&nbsp;Modifying the XML representation</h4></div></div></div><p>The <code class="code">withXml</code>hook allows to manipulate the in-memory XML representation just before the file gets written to disk.
                    Although Groovy's XML support makes up for a lot, this approach is less convenient than manipulating the domain objects.
                    In return, you get total control over the generated file, including sections not modeled by the domain objects.
                    </p><div class="example"><a name="projectWithXml"></a><p class="title"><b>Example&nbsp;39.5.&nbsp;Customizing the XML</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">idea.project.ipr {
    withXml { provider -&gt;
        provider.node.component.find { it.<span class="hl-annotation">@name</span> == <span class="hl-string">'VcsDirectoryMappings'</span> }.mapping.<span class="hl-annotation">@vcs</span> = <span class="hl-string">'Git'</span>
    }
}</pre></div></div><p><br class="example-break">
                </p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N142DE"></a>39.5.&nbsp;Further things to consider</h2></div></div></div><p>The paths of the dependencies in the generated IDEA files are absolute. If you manually define a path variable
            pointing to the Gradle dependency cache, IDEA will automatically replace the absolute dependency paths with
            this path variable. If you use such a path variable, you need to configure this path variable via <code class="literal">idea.pathVariables</code>,
            so that it can do a proper merge without creating duplicates.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="antlr_plugin"></a>Chapter&nbsp;40.&nbsp;The ANTLR Plugin</h1></div></div></div><p>The ANTLR plugin extends the Java plugin to add support for generating parsers using <a class="ulink" href="http://www.antlr.org/" target="_top">ANTLR</a>.</p><div class="note"><p>
            The ANTLR plugin only supports ANTLR version 2.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N142F5"></a>40.1.&nbsp;Usage</h2></div></div></div><p>To use the ANTLR plugin, include in your build script:</p><div class="example"><a name="useAntlrPlugin"></a><p class="title"><b>Example&nbsp;40.1.&nbsp;Using the ANTLR plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'antlr'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14304"></a>40.2.&nbsp;Tasks</h2></div></div></div><p>The ANTLR plugin adds a number of tasks to your project, as shown below.</p><div class="table"><p class="title"><b>Table&nbsp;40.1.&nbsp;ANTLR plugin - tasks</b></p><div class="table-contents"><table id="N14309"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">generateGrammarSource</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.antlr.AntlrTask.html" target="_top"><code class="classname">AntlrTask</code></a></td>
                <td>Generates the source files for all production ANTLR grammars.</td>
            </tr><tr>
                <td>
                    <code class="literal">generateTestGrammarSource</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.antlr.AntlrTask.html" target="_top"><code class="classname">AntlrTask</code></a></td>
                <td>Generates the source files for all test ANTLR grammars.</td>
            </tr><tr>
                <td>
                    <code class="literal">generate<em class="replaceable"><code>SourceSet</code></em>GrammarSource</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.plugins.antlr.AntlrTask.html" target="_top"><code class="classname">AntlrTask</code></a></td>
                <td>Generates the source files for all ANTLR grammars for the given source set.</td>
            </tr></table></div></div><p>The ANTLR plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;40.2.&nbsp;ANTLR plugin - additional task dependencies</b></p><div class="table-contents"><table id="N1435C"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>compileJava</td>
                <td>generateGrammarSource</td>
            </tr><tr>
                <td>compileTestJava</td>
                <td>generateTestGrammarSource</td>
            </tr><tr>
                <td>compile<em class="replaceable"><code>SourceSet</code></em>Java</td>
                <td>generate<em class="replaceable"><code>SourceSet</code></em>GrammarSource</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14382"></a>40.3.&nbsp;Project layout</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;40.3.&nbsp;ANTLR plugin - project layout</b></p><div class="table-contents"><table id="N14385"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">src/main/antlr</code>
                </td>
                <td>Production ANTLR grammar files.</td>
            </tr><tr>
                <td>
                    <code class="filename">src/test/antlr</code>
                </td>
                <td>Test ANTLR grammar files.</td>
            </tr><tr>
                <td>
                    <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/antlr</code>
                </td>
                <td>ANTLR grammar files for the given source set.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N143B5"></a>40.4.&nbsp;Dependency management</h2></div></div></div><p>The ANTLR plugin adds an <code class="literal">antlr</code> dependency configuration. You use this to declare the
            ANTLR dependency that you wish to use.</p><div class="example"><a name="declareAntlrVersion"></a><p class="title"><b>Example&nbsp;40.2.&nbsp;Declare ANTLR version</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    antlr <span class="hl-string">'antlr:antlr:2.7.7'</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N143C7"></a>40.5.&nbsp;Convention properties</h2></div></div></div><p>The ANTLR plugin does not add any convention properties.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N143CC"></a>40.6.&nbsp;Source set properties</h2></div></div></div><p>The ANTLR plugin adds the following properties to each source set in the project.</p><div class="table"><p class="title"><b>Table&nbsp;40.4.&nbsp;ANTLR plugin - source set properties</b></p><div class="table-contents"><table id="N143D1"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">antlr</code>
                </td>
                <td>
                    <a class="ulink" href="../javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top"><code class="classname">SourceDirectorySet</code></a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    The ANTLR grammar files of this source set. Contains all <code class="filename">.g</code> found in the ANTLR
                    source directories, and excludes all other types of files.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">antlr.srcDirs</code>
                </td>
                <td>
                    <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files">Section&nbsp;16.5, &ldquo;Specifying a set of input files&rdquo;</a>.
                </td>
                <td>
                    <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/antlr]</code>
                </td>
                <td>
                    The source directories containing the ANTLR grammar files of this source set.
                </td>
            </tr></table></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="project_reports_plugin"></a>Chapter&nbsp;41.&nbsp;The Project Report Plugin</h1></div></div></div><p>The Project report plugin adds some tasks to your project which generate reports containing useful
        information about your build. Those tasks generate exactly the same content as the command line reports triggered
        by <strong class="userinput"><code>gradle tasks</code></strong>, <strong class="userinput"><code>gradle dependencies</code></strong> and
        <strong class="userinput"><code>gradle properties</code></strong> (see <a class="xref" href="#sec:obtaining_information_about_your_build">Section&nbsp;11.6, &ldquo;Obtaining information about your build&rdquo;</a>).
        In contrast to the command line reports, the report plugin generates the reports into a file. There is also an
        aggregating task that depends on all report tasks added by the plugin.
    </p><p>
        We plan to add much more to the existing reports and create additional ones in future releases of Gradle.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14432"></a>41.1.&nbsp;Usage</h2></div></div></div><p>To use the Project report plugin, include in your build script:</p><pre class="programlisting">apply plugin: <span class="hl-string">'project-report'</span></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1443A"></a>41.2.&nbsp;Tasks</h2></div></div></div><p>The project report plugin defines the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;41.1.&nbsp;Project report plugin - tasks</b></p><div class="table-contents"><table id="N1443F"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">dependencyReport</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.diagnostics.DependencyReportTask.html" target="_top"><code class="classname">DependencyReportTask</code></a></td>
                <td>Generates the project dependency report.</td>
            </tr><tr>
                <td>
                    <code class="literal">htmlDependencyReport</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.reporting.dependencies.HtmlDependencyReportTask.html" target="_top"><code class="classname">HtmlDependencyReportTask</code></a></td>
                <td>Generates an HTML dependency and dependency insight report for the project or a set of projects.</td>
            </tr><tr>
                <td>
                    <code class="literal">propertyReport</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.diagnostics.PropertyReportTask.html" target="_top"><code class="classname">PropertyReportTask</code></a></td>
                <td>Generates the project property report.</td>
            </tr><tr>
                <td>
                    <code class="literal">taskReport</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.diagnostics.TaskReportTask.html" target="_top"><code class="classname">TaskReportTask</code></a></td>
                <td>Generates the project task report.</td>
            </tr><tr>
                <td>
                    <code class="literal">projectReport</code>
                </td>
                <td>
                    <code class="literal">dependencyReport</code>, <code class="literal">propertyReport</code>, <code class="literal">taskReport</code>, <code class="literal">htmlDependencyReport</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.Task.html" target="_top"><code class="classname">Task</code></a></td>
                <td>Generates all project reports.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N144C1"></a>41.3.&nbsp;Project layout</h2></div></div></div><p>The project report plugin does not require any particular project layout.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N144C6"></a>41.4.&nbsp;Dependency management</h2></div></div></div><p>The project report plugin does not define any dependency configurations.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N144CB"></a>41.5.&nbsp;Convention properties</h2></div></div></div><p>The project report defines the following convention properties:</p><div class="table"><p class="title"><b>Table&nbsp;41.2.&nbsp;Project report plugin - convention properties</b></p><div class="table-contents"><table id="N144D0"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
        <td>
            <code class="literal">reportsDirName</code>
        </td>
        <td>
            <code class="classname">String</code>
        </td>
        <td>
            <code class="filename">reports</code>
        </td>
        <td>
            The name of the directory to generate reports into, relative to the build directory.
        </td>
    </tr><tr>
        <td>
            <code class="literal">reportsDir</code>
        </td>
        <td>
            <code class="classname">File</code> (read-only)
        </td>
        <td>
            <code class="filename"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>reportsDirName</code></em></code>
        </td>
        <td>
            The directory to generate reports into.
        </td>
    </tr><tr>
                <td>
                    <code class="literal">projects</code>
                </td>
                <td>
                    <code class="classname">Set&lt;Project&gt;</code>
                </td>
                <td>
                    <code class="literal">A one element set with the project the plugin was applied to.</code>
                </td>
                <td>
                    The projects to generate the reports for.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">projectReportDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">project</code>
                </td>
                <td>
                    The name of the directory to generate the project report into, relative to the reports directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">projectReportDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>reportsDir</code></em>/<em class="replaceable"><code>projectReportDirName</code></em></code>
                </td>
                <td>
                    The directory to generate the project report into.
                </td>
            </tr></table></div></div><p>These convention properties are provided by a convention object of type <a class="ulink" href="../dsl/org.gradle.api.plugins.ProjectReportsPluginConvention.html" target="_top"><code class="classname">ProjectReportsPluginConvention</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="announce_plugin"></a>Chapter&nbsp;42.&nbsp;The Announce Plugin</h1></div></div></div><p>The Gradle announce allows to send custom announcements during a build. The following notification systems are supported:
	</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><a class="ulink" href="http://twitter.com" target="_top">Twitter</a></li><li class="listitem"><a class="ulink" href="http://manpages.ubuntu.com/manpages/gutsy/man1/notify-send.1.html" target="_top">notify-send</a> (Ubuntu)</li><li class="listitem"><a class="ulink" href="https://sites.google.com/site/snarlapp/home" target="_top">Snarl</a> (Windows)</li><li class="listitem"><a class="ulink" href="http://growl.info/" target="_top">Growl</a> (Mac OS X)</li></ul></div><p>
	</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14583"></a>42.1.&nbsp;Usage</h2></div></div></div><p>To use the announce plugin, apply it to your build script:</p><div class="example"><a name="useAnnouncePlugin"></a><p class="title"><b>Example&nbsp;42.1.&nbsp;Using the announce plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'announce'</span></pre></div></div><br class="example-break"><p>Next, configure your notification service(s) of choice (see table below for which configuration properties are available):</p><div class="example"><a name="useAnnouncePlugin"></a><p class="title"><b>Example&nbsp;42.2.&nbsp;Configure the announce plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">announce {  
  username = <span class="hl-string">'myId'</span>
  password = <span class="hl-string">'myPassword'</span>
}</pre></div></div><br class="example-break"><p>Finally, send announcements with the <code class="literal">announce</code> method:</p><div class="example"><a name="useAnnouncePlugin"></a><p class="title"><b>Example&nbsp;42.3.&nbsp;Using the announce plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task helloWorld &lt;&lt; {  
    println <span class="hl-string">"Hello, world!"</span>
}  

helloWorld.doLast {  
    announce.announce(<span class="hl-string">"helloWorld completed!"</span>, <span class="hl-string">"twitter"</span>)
    announce.announce(<span class="hl-string">"helloWorld completed!"</span>, <span class="hl-string">"local"</span>)
}</pre></div></div><br class="example-break"><p>The <code class="literal">announce</code> method takes two String arguments: The message to be sent, and the notification
            service to be used. The following table lists supported notification services and their configuration properties.
        </p></div><div class="table"><p class="title"><b>Table&nbsp;42.1.&nbsp;Announce Plugin Notification Services</b></p><div class="table-contents"><table id="N145B2"><thead><tr>
               <td>Notification Service</td>
               <td>Operating System</td>
               <td>Configuration Properties</td>
               <td>Further Information</td>
           </tr></thead><tr>
           <td>twitter</td>
           <td>Any</td>
           <td>username, password</td>
           <td></td>
       </tr><tr>
           <td>snarl</td>
           <td>Windows</td>
           <td></td>
           <td></td>
       </tr><tr>
           <td>growl</td>
           <td>Mac OS X</td>
           <td></td>
           <td></td>
       </tr><tr>
           <td>notify-send</td>
           <td>Ubuntu</td>
           <td></td>
           <td>Requires the notify-send package to be installed. Use <code class="literal">sudo apt-get install libnotify-bin</code>
               to install it.</td>
       </tr><tr>
           <td>local</td>
           <td>Windows, Mac OS X, Ubuntu</td>
           <td></td>
           <td>Automatically chooses between snarl, growl, and notify-send depending on the current operating system.</td>
       </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14606"></a>42.2.&nbsp;Configuration</h2></div></div></div><p>See <a class="ulink" href="../dsl/org.gradle.api.plugins.announce.AnnouncePluginExtension.html" target="_top"><code class="classname">AnnouncePluginExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="build_announcements_plugin"></a>Chapter&nbsp;43.&nbsp;The Build Announcements Plugin</h1></div></div></div><div class="note"><p>
            The build announcements plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>The build announcements plugin uses the <a class="link" href="#announce_plugin">announce</a> plugin to send local announcements on important events in the build.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14622"></a>43.1.&nbsp;Usage</h2></div></div></div><p>To use the build announcements plugin, include in your build script:</p><div class="example"><a name="useBuildAnnouncementsPlugin"></a><p class="title"><b>Example&nbsp;43.1.&nbsp;Using the build announcements plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'build-announcements'</span></pre></div></div><br class="example-break"><p>That's it. If you want to tweak where the announcements go, you can configure the <a class="link" href="#announce_plugin">announce</a> plugin to
            change the local announcer.
        </p><p>You can also apply the plugin from an init script:</p><div class="example"><a name="useBuildAnnouncementsPlugin"></a><p class="title"><b>Example&nbsp;43.2.&nbsp;Using the build announcements plugin from an init script</b></p><div class="example-contents"><p><code class="filename">init.gradle</code></p><pre class="programlisting">rootProject {
    apply plugin: <span class="hl-string">'build-announcements'</span>
}</pre></div></div><br class="example-break"></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="distribution_plugin"></a>Chapter&nbsp;44.&nbsp;The Distribution Plugin</h1></div></div></div><div class="note"><p>
            The distribution plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>
        The distribution plugin facilitates building archives that serve as distributions of the project.
        Distribution archives typically contain then executable application and other supporting files, such as documentation.
	</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14652"></a>44.1.&nbsp;Usage</h2></div></div></div><p>To use the distribution plugin, include in your build script:</p><div class="example"><a name="useDistributionPlugin"></a><p class="title"><b>Example&nbsp;44.1.&nbsp;Using the distribution plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'distribution'</span></pre></div></div><br class="example-break"><p>
            The plugin adds an extension named "<code class="literal">distributions</code>" of type <a class="ulink" href="../dsl/org.gradle.api.distribution.DistributionContainer.html" target="_top"><code class="classname">DistributionContainer</code></a> to the project.
            It also creates a single distribution in the distributions container extension named "<code class="literal">main</code>".
            If your build only produces one distribution you only need to configure this distribution (or use the defaults).
        </p><p>
            You can run "<strong class="userinput"><code>gradle distZip</code></strong>" to package the main distribution as a ZIP, or "<strong class="userinput"><code>gradle distTar</code></strong>" to create
            a GZip compressed TAR file.
            The files will be created at "<code class="literal"><em class="replaceable"><code>$buildDir</code></em>/distributions/<em class="replaceable"><code>$project.name</code></em>-<em class="replaceable"><code>$project.version</code></em>.<em class="replaceable"><code>&laquo;ext&raquo;</code></em></code>".
        </p><p>
            You can run "<strong class="userinput"><code>gradle installDist</code></strong>" to assembles the distribution content, uncompressed, into "<code class="literal"><em class="replaceable"><code>$buildDir</code></em>/install/<em class="replaceable"><code>main</code></em></code>".
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1468F"></a>44.2.&nbsp;Tasks</h2></div></div></div><p>The Distribution plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;44.1.&nbsp;Distribution plugin - tasks</b></p><div class="table-contents"><table id="N14694"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">distZip</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>
                </td>
                <td>
                    Creates a ZIP archive of the distribution contents
                </td>
            </tr><tr>
                <td>
                   <code class="literal">distTar</code>
                </td>
                <td>
                   <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Tar.html" target="_top"><code class="classname">Tar</code></a>
                </td>
                <td>
                    Creates a ZIP archive of the distribution contents
                </td>
            </tr><tr>
                <td>
                    <code class="literal">installDist</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.Sync.html" target="_top"><code class="classname">Sync</code></a>
                </td>
                <td>
                    Assembles the distribution content and installs it on the current machine
                </td>
            </tr></table></div></div><p>For each extra distribution set you add to the project, the distribution plugin adds the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;44.2.&nbsp;Multiple distributions - tasks</b></p><div class="table-contents"><table id="N146F3"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal"><em class="replaceable"><code>${distribution.name}</code></em>DistZip</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>
                </td>
                <td>
                    Creates a ZIP archive of the distribution contents
                </td>
            </tr><tr>
                <td>
                    <code class="literal"><em class="replaceable"><code>${distribution.name}</code></em>DistTar</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Tar.html" target="_top"><code class="classname">Tar</code></a>
                </td>
                <td>
                    Creates a TAR archive of the distribution contents
                </td>
            </tr><tr>
                <td>
                    <code class="literal">install<em class="replaceable"><code>${distribution.name.capitalize()}</code></em>Dist</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.Sync.html" target="_top"><code class="classname">Sync</code></a>
                </td>
                <td>
                    Assembles the distribution content and installs it on the current machine
                </td>
            </tr></table></div></div><div class="example"><a name="multipleDistribution"></a><p class="title"><b>Example&nbsp;44.2.&nbsp;Adding extra distributions</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'distribution'</span>

version = <span class="hl-string">'1.2'</span>
distributions {
    custom {}
}</pre></div></div><br class="example-break"><p>
            This will add following tasks to the project:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">customDistZip</li><li class="listitem">customDistTar</li><li class="listitem">installCustomDist</li></ul></div><p>
        </p><p>
            Given that the project name is "<code class="literal">myproject</code>" and version "<code class="literal">1.2</code>", running "<strong class="userinput"><code>gradle customDistZip</code></strong>" will produce a
            ZIP file named "<code class="literal">myproject-custom-1.2.zip</code>".
        </p><p>
            Running "<strong class="userinput"><code>gradle installCustomDist</code></strong>" will install the distribution contents into "<code class="literal"><em class="replaceable"><code>$buildDir</code></em>/install/custom</code>".
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14783"></a>44.3.&nbsp;Distribution contents</h2></div></div></div><p>
            All of the files in the "<code class="literal">src/<em class="replaceable"><code>$distribution.name</code></em>/dist</code>" directory will automatically be included in the distribution.
            You can add additional files by configuring the <a class="ulink" href="../javadoc/org/gradle/api/distribution/Distribution.html" target="_top"><code class="classname">Distribution</code></a> object that is part of the container.
        </p><div class="example"><a name="configureDistribution"></a><p class="title"><b>Example&nbsp;44.3.&nbsp;Configuring the main distribution</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'distribution'</span>

distributions {
    main {
        baseName = <span class="hl-string">'someName'</span>
        contents {
            from { <span class="hl-string">'src/readme'</span> }
        }
    }
}</pre></div></div><br class="example-break"><p>
            In the example above, the content of the "<code class="literal">src/readme</code>" directory will be included in the distribution
            (along with the files in the "<code class="literal">src/dist/main</code>" directory which are added by default).
        </p><p>
            The "<code class="literal">baseName</code>" property has also been changed. This will cause the distribution archives to be created with a different name.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="application_plugin"></a>Chapter&nbsp;45.&nbsp;The Application Plugin</h1></div></div></div><p>The Gradle application plugin extends the language plugins with common application related tasks.
	It allows running and bundling applications for the jvm.
	</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N147B2"></a>45.1.&nbsp;Usage</h2></div></div></div><p>To use the application plugin, include in your build script:</p><div class="example"><a name="useApplicationPlugin"></a><p class="title"><b>Example&nbsp;45.1.&nbsp;Using the application plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin:<span class="hl-string">'application'</span></pre></div></div><br class="example-break"><p>To define the main-class for the application you have to set the <code class="literal">mainClassName</code> property as shown below</p><div class="example"><a name="useApplicationPlugin"></a><p class="title"><b>Example&nbsp;45.2.&nbsp;Configure the application main class</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">mainClassName = <span class="hl-string">"org.gradle.sample.Main"</span></pre></div></div><br class="example-break"><p>Then, you can run the application by running <strong class="userinput"><code>gradle run</code></strong>. Gradle will take care of building the application classes,
            along with their runtime dependencies, and starting the application with the correct classpath.
            You can launch the application in debug mode with <strong class="userinput"><code>gradle run --debug-jvm</code></strong> (see <a class="ulink" href="../javadoc/org/gradle/api/tasks/JavaExec.html#setDebug(boolean)" target="_top"><code class="classname">JavaExec.setDebug()</code></a>).
        </p><p>The plugin can also build a distribution for your application. The distribution will package up the runtime dependencies of the application
            along with some OS specific start scripts. All files stored in <code class="filename">src/dist</code> will be added to the root of the
            distribution. You can run <strong class="userinput"><code>gradle installApp</code></strong> to create an image of the application in
            <code class="filename">build/install/<em class="replaceable"><code>projectName</code></em></code>. You can run <strong class="userinput"><code>gradle distZip</code></strong> to create a
            ZIP containing the distribution.
        </p><p>
            If your Java application requires a specific set of JVM settings or system properties, you can configure the <code class="literal">applicationDefaultJvmArgs</code> property.
            These JVM arguments are applied to the <code class="literal">run</code> task and also considered in the generated start scripts of your distribution.
        </p><div class="example"><a name="configureApplicationDefaultJvmArgs"></a><p class="title"><b>Example&nbsp;45.3.&nbsp;Configure default JVM settings</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">applicationDefaultJvmArgs = [<span class="hl-string">"-Dgreeting.language=en"</span>]</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N147FF"></a>45.2.&nbsp;Tasks</h2></div></div></div><p>The Application plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;45.1.&nbsp;Application plugin - tasks</b></p><div class="table-contents"><table id="N14804"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">run</code>
                </td>
                <td>
                    <code class="literal">classes</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.JavaExec.html" target="_top"><code class="classname">JavaExec</code></a></td>
                <td>Starts the application.</td>
            </tr><tr>
                <td>
                    <code class="literal">startScripts</code>
                </td>
                <td>
                    <code class="literal">jar</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.application.CreateStartScripts.html" target="_top"><code class="classname">CreateStartScripts</code></a></td>
                <td>Creates OS specific scripts to run the project as a JVM application.</td>
            </tr><tr>
                <td>
                    <code class="literal">installApp</code>
                </td>
                <td>
                    <code class="literal">jar</code>, <code class="literal">startScripts</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Sync.html" target="_top"><code class="classname">Sync</code></a></td>
                <td>Installs the application into a specified directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">distZip</code>
                </td>
                <td>
                    <code class="literal">jar</code>, <code class="literal">startScripts</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a></td>
                <td>Creates a full distribution ZIP archive including runtime libraries and OS specific scripts.</td>
            </tr><tr>
                <td>
                    <code class="literal">distTar</code>
                </td>
                <td>
                    <code class="literal">jar</code>, <code class="literal">startScripts</code>
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Tar.html" target="_top"><code class="classname">Tar</code></a></td>
                <td>Creates a full distribution TAR archive including runtime libraries and OS specific scripts.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14892"></a>45.3.&nbsp;Convention properties</h2></div></div></div><p>The application plugin adds some properties to the project, which you can use to configure its behaviour. See <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="application_distribution_resources"></a>45.4.&nbsp;Including other resources in the distribution</h2></div></div></div><p>
                One of the convention properties added by the plugin is <code class="literal">applicationDistribution</code> which is a <a class="ulink" href="../javadoc/org/gradle/api/file/CopySpec.html" target="_top"><code class="classname">CopySpec</code></a>.
                This specification is used by the <code class="literal">installApp</code> and <code class="literal">distZip</code> tasks as the specification of what is to be 
                include in the distribution. Above copying the starting scripts to the <code class="filename">bin</code> dir and necessary jars to <code class="filename">lib</code> 
                in the distribution, all of the files from the <code class="filename">src/dist</code> directory are also copied. To include any static files in the 
                distribution, simply arrange them in the <code class="filename">src/dist</code> directory.
            </p><p>
                If your project generates files to be included in the distribution, e.g. documentation, you can add these files to the distribution by adding to the 
                <code class="literal">applicationDistribution</code> copy spec.
            </p><div class="example"><a name="includeTaskOutputInApplicationDistribution"></a><p class="title"><b>Example&nbsp;45.4.&nbsp;Include output from other tasks in the application distribution</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task createDocs {
    def docs = file(<span class="hl-string">"$buildDir/docs"</span>)
    outputs.dir docs
    doLast {
        docs.mkdirs()
        <span class="hl-keyword">new</span> File(docs, <span class="hl-string">"readme.txt"</span>).write(<span class="hl-string">"Read me!"</span>)
    }
}

applicationDistribution.from(createDocs) {
    into <span class="hl-string">"docs"</span>
}</pre></div></div><br class="example-break"><p>
                By specifying that the distribution should include the task's output files (see <a class="xref" href="#sec:task_inputs_outputs">Section&nbsp;15.9.1, &ldquo;Declaring a task's inputs and outputs&rdquo;</a>), Gradle knows 
                that the task that produces the files must be invoked before the distribution can be assembled and will take care of this for you.
            </p><div class="example"><a name="dependentTaskForApplicationDistributionOutput"></a><p class="title"><b>Example&nbsp;45.5.&nbsp;Automatically creating files for distribution</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle distZip</code></strong></p><pre class="screen">&gt; gradle distZip
:createDocs
:compileJava
:processResources UP-TO-DATE
:classes
:jar
:startScripts
:distZip

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="javaLibraryDistribution_plugin"></a>Chapter&nbsp;46.&nbsp;The Java Library Distribution Plugin</h1></div></div></div><div class="note"><p>
            The Java library distribution plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>The Java library distribution plugin adds support for building a distribution ZIP for a Java library. The distribution contains the
        JAR file for the library and its dependencies.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N148E8"></a>46.1.&nbsp;Usage</h2></div></div></div><p>To use the Java library distribution plugin, include in your build script:</p><div class="example"><a name="usejavaLibraryPlugin"></a><p class="title"><b>Example&nbsp;46.1.&nbsp;Using the java library distribution plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java-library-distribution'</span></pre></div></div><br class="example-break"><p>To define the name for the distribution you have to set the <code class="literal">baseName</code> property as shown below:
        </p><div class="example"><a name="useApplicationPlugin"></a><p class="title"><b>Example&nbsp;46.2.&nbsp;Configure the distribution name</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">distributions {
    main{
        baseName = <span class="hl-string">'my-name'</span>
    }
}</pre></div></div><br class="example-break"><p>The plugin build a distribution for your library. The distribution will package up the runtime dependencies of the library
            All files stored in <code class="filename">src/main/dist</code> will be added to the root of the archive distribution. You can run
            <strong class="userinput"><code>gradle distZip</code></strong> to create a ZIP containing the distribution.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1490E"></a>46.2.&nbsp;Tasks</h2></div></div></div><p>The Java library distribution plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;46.1.&nbsp;Java library distribution plugin - tasks</b></p><div class="table-contents"><table id="N14913"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">distZip</code>
                </td>
                <td>
                    <code class="literal">jar</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>
                </td>
                <td>Creates a full distribution ZIP archive including runtime libraries.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="java_library_distribution_resources"></a>46.3.&nbsp;Including other resources in the distribution</h2></div></div></div><p>
            All of the files from the <code class="filename">src/dist</code> directory are copied. To include any static files in the distribution, simply arrange
            them in the <code class="filename">src/dist</code> directory, or add it to the content of the distribution.
        </p><div class="example"><a name="includeTaskOutputInApplicationDistribution"></a><p class="title"><b>Example&nbsp;46.3.&nbsp;Include files in the distribution</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">distributions {
    main {
        baseName = <span class="hl-string">'my-name'</span>
        contents {
            from { <span class="hl-string">'src/dist'</span> }
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="build_init_plugin"></a>Chapter&nbsp;47.&nbsp;Build Init Plugin</h1></div></div></div><div class="note"><p>
            The Build Init plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>
        The Gradle Build Init plugin can be used to bootstrap the process of creating a new Gradle build. It supports creating brand new projects of different types
        as well as converting existing builds (e.g. An Apache Maven build) to be Gradle builds.
    </p><p>
        Gradle plugins typically need to be
        <em class="firstterm">applied</em>
        to a project before they can be used (see <a class="xref" href="#sec:using_plugins">Section&nbsp;21.1, &ldquo;Applying plugins&rdquo;</a>).
        The Build Init plugin is an automatically applied plugin, which means you do not need to apply it explicitly.
        To use the plugin, simply execute the task named
        <code class="literal">init</code>
        where you would like to create the Gradle build.
        There is no need to create a &ldquo;stub&rdquo;
        <code class="literal">build.gradle</code>
        file in order to apply the plugin.
    </p><p>
        It also leverages the
        <code class="literal">wrapper</code>
        task from the Wrapper plugin (see <a class="xref" href="#wrapper_plugin">Chapter&nbsp;48, <i>Wrapper Plugin</i></a>),
        which means that the Gradle Wrapper will also be installed into the project.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14979"></a>47.1.&nbsp;Tasks</h2></div></div></div><p>The plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;47.1.&nbsp;Build Init plugin - tasks</b></p><div class="table-contents"><table id="N1497E"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">init</code>
                </td>
                <td>
                    <code class="literal">wrapper</code>
                </td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.buildinit.tasks.InitBuild.html" target="_top"><code class="classname">InitBuild</code></a>
                </td>
                <td>Generates a Gradle project.</td>
            </tr><tr>
                <td>
                    <code class="literal">wrapper</code>
                </td>
                <td>-</td>
                <td>
                    <a class="ulink" href="../dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_top"><code class="classname">Wrapper</code></a>
                </td>
                <td>Generates Gradle wrapper files.
                </td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N149BF"></a>47.2.&nbsp;What to set up</h2></div></div></div><p>The
            <code class="literal">init</code>
            supports different build setup <em class="firstterm">types</em>. The type is specified by supplying a
            <code class="literal">--type</code>
            argument value. For example, to create a Java library project simply execute:
            <code class="literal">gradle init --type java-library</code>.
        </p><p>
            If a
            <code class="literal">--type</code>
            parameter is not supplied, Gradle will attempt to infer the type from the environment. For example, it will
            infer a type value of "<code class="literal">pom</code>" if it finds a
            <code class="literal">pom.xml</code>
            to convert to a Gradle build.
        </p><p>
            If the type could not be inferred, the type "<code class="literal">basic</code>" will be used.
        </p><p>All build setup types include the setup of the Gradle Wrapper.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N149E2"></a>47.3.&nbsp;Build init types</h2></div></div></div><div class="note">
            As this plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>, only 3 build init types are currently supported.
            More types will be added in future Gradle releases.
        </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N149EB"></a>47.3.1.&nbsp;"<code class="literal">pom</code>" (Maven conversion)
            </h3></div></div></div><p>
                The "<code class="literal">pom</code>" type can be used to convert an Apache Maven build to a Gradle build.
                This works by converting the POM to one or more Gradle files.
                It is only able to be used if there is a valid "<code class="literal">pom.xml</code>"
                file in the directory that the
                <code class="literal">init</code>
                task is invoked in. This type will be automatically inferred if such a file exists.
            </p><p>
                The Maven conversion implementation was inspired by the
                <a class="ulink" href="https://github.com/jbaruch/maven2gradle" target="_top">maven2gradle tool</a>
                that was originally developed by Gradle community members.
            </p><p>
                The conversion process has the following features:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Uses effective POM and effective settings (support for POM inheritance, dependency management, properties)</li><li class="listitem">Supports both single module and multimodule projects</li><li class="listitem">Supports custom module names (that differ from directory names)</li><li class="listitem">Generates general metadata - id, description and version</li><li class="listitem">Applies maven, java and war plugins (as needed)</li><li class="listitem">Supports packaging war projects as jars if needed</li><li class="listitem">Generates dependencies (both external and inter-module)</li><li class="listitem">Generates download repositories (inc. local Maven repository)</li><li class="listitem">Adjusts java compiler settings</li><li class="listitem">Supports packaging of sources and tests</li><li class="listitem">Supports TestNG runner</li><li class="listitem">Generates global exclusions from Maven enforcer plugin settings</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14A1D"></a>47.3.2.&nbsp;"<code class="literal">java-library</code>"
            </h3></div></div></div><p>
                The "<code class="literal">java-library</code>" build init type is not inferable. It must be explicitly specified.
            </p><p>
                It has the following features:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Uses the "<code class="literal">java</code>" plugin
                </li><li class="listitem">Uses the "
                    <code class="literal">mavenCentral()</code>
                    dependency repository
                </li><li class="listitem">Uses <a class="ulink" href="http://junit.org" target="_top">JUnit</a>
                 for testing</li><li class="listitem">Has directories in the conventional locations for source code</li><li class="listitem">Contains a sample class and unit test, if there are no existing source or test files</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14A3F"></a>47.3.3.&nbsp;"<code class="literal">scala-library</code>"
            </h3></div></div></div><p>
                The "<code class="literal">scala-library</code>" build init type is not inferable. It must be explicitly specified.
            </p><p>
                It has the following features:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Uses the "<code class="literal">scala</code>" plugin
                </li><li class="listitem">Uses the "
                    <code class="literal">mavenCentral()</code>
                    dependency repository
                </li><li class="listitem">Uses Scala 2.10</li><li class="listitem">Uses <a class="ulink" href="http://www.scalatest.org" target="_top">ScalaTest</a> is used for testing</li><li class="listitem">Has directories in the conventional locations for source code</li><li class="listitem">Contains a sample scala class and an according ScalaTest test suite, if there are no existing source or test files</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14A63"></a>47.3.4.&nbsp;"<code class="literal">groovy-library</code>"
            </h3></div></div></div><p>
                The "<code class="literal">groovy-library</code>" build init type is not inferable. It must be explicitly specified.
            </p><p>
                It has the following features:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Uses the "<code class="literal">groovy</code>" plugin
                </li><li class="listitem">Uses the "
                    <code class="literal">mavenCentral()</code>
                    dependency repository
                </li><li class="listitem">Uses Groovy 2.x </li><li class="listitem">Uses <a class="ulink" href="http://code.google.com/p/spock/" target="_top">Spock testing framework</a> for testing</li><li class="listitem">Has directories in the conventional locations for source code</li><li class="listitem">Contains a sample groovy class and an according Spock specification, if there are no existing source or test files</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14A87"></a>47.3.5.&nbsp;"basic"</h3></div></div></div><p>
                The "<code class="literal">basic</code>" build init type is useful for creating a fresh new Gradle project.
                It creates a sample
                <code class="literal">build.gradle</code>
                file, with comments and links to help get started.
            </p><p>This type is used when no type was explicitly specified, and no type could be inferred.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="wrapper_plugin"></a>Chapter&nbsp;48.&nbsp;Wrapper Plugin</h1></div></div></div><div class="note"><p>
            The wrapper plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>The Gradle wrapper plugin allows the generation of Gradle wrapper files by adding a <a class="ulink" href="../dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_top"><code class="classname">Wrapper</code></a>
        task, that generates all files needed to run the build using the Gradle Wrapper.
        Details about the Gradle Wrapper can be found in the according chapter <a class="xref" href="#gradle_wrapper">Chapter&nbsp;61, <i>The Gradle Wrapper</i></a>
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14AAB"></a>48.1.&nbsp;Usage</h2></div></div></div><p>
        Without modifying the <code class="literal">build.gradle</code> file, the wrapper plugin can be auto-applied to the rootproject of the current build by running
        <code class="literal">gradle wrapper</code> from the commandline. This applies the plugin if no task named <code class="literal">wrapper</code> is already defined in the build.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14AB9"></a>48.2.&nbsp;Tasks</h2></div></div></div><p>The wrapper plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;48.1.&nbsp;Wrapper plugin - tasks</b></p><div class="table-contents"><table id="N14ABE"><thead><tr>
                        <td>Task name</td>
                        <td>Depends on</td>
                        <td>Type</td>
                        <td>Description</td>
                    </tr></thead><tr>
                    <td>
                        <code class="literal">wrapper</code>
                    </td>
                    <td>-</td>
                    <td><a class="ulink" href="../dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_top"><code class="classname">Wrapper</code></a></td>
                    <td>Generates Gradle wrapper files.</td>
                </tr></table></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="buildDashboard_plugin"></a>Chapter&nbsp;49.&nbsp;The Build Dashboard Plugin</h1></div></div></div><div class="note"><p>
            The build dashboard plugin is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>
        The Build Dashboard plugin can be used to generate a single HTML dashboard that provides a single point of
        access to all of the reports generated by a build.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14AF3"></a>49.1.&nbsp;Usage</h2></div></div></div><p>To use the Build Dashboard plugin, include the following in your build script:</p><div class="example"><a name="useBuildDashboardPlugin"></a><p class="title"><b>Example&nbsp;49.1.&nbsp;Using the Build Dashboard plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'build-dashboard'</span></pre></div></div><br class="example-break"><p>
            Applying the plugin adds the <code class="literal">buildDashboard</code> task to your project.
            The task aggregates the reports for all tasks that implement the <a class="ulink" href="../dsl/org.gradle.api.reporting.Reporting.html" target="_top"><code class="classname">Reporting</code></a>
            interface from <span class="emphasis"><em>all projects</em></span> in the build.
            It is typically only applied to the root project.
        </p><p>
            The <code class="literal">buildDashboard</code> task does not depend on any other tasks. It will only aggregate the reporting tasks that are independently
            being executed as part of the build run. To generate the build dashboard, simply include the <code class="literal">buildDashboard</code> task in the list of tasks to execute.
            For example, <strong class="userinput"><code>gradle buildDashboard build</code></strong> will generate a dashboard for all of the reporting tasks that are dependents of the <code class="literal">build</code> task.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14B1D"></a>49.2.&nbsp;Tasks</h2></div></div></div><p>The Build Dashboard plugin adds the following task to the project:</p><div class="table"><p class="title"><b>Table&nbsp;49.1.&nbsp;Build Dashboard plugin - tasks</b></p><div class="table-contents"><table id="N14B22"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">buildDashboard</code>
                </td>
                <td>-</td>
                <td><a class="ulink" href="../dsl/org.gradle.api.reporting.GenerateBuildDashboard.html" target="_top"><code class="classname">GenerateBuildDashboard</code></a></td>
                <td>Generates build dashboard report.</td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14B48"></a>49.3.&nbsp;Project layout</h2></div></div></div><p>The Build Dashboard plugin does not require any particular project layout.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14B4D"></a>49.4.&nbsp;Dependency management</h2></div></div></div><p>The Build Dashboard plugin does not define any dependency configurations.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N14B52"></a>49.5.&nbsp;Configuration</h2></div></div></div><p>You can influence the location of build dashboard plugin generation via <a class="ulink" href="../dsl/org.gradle.api.reporting.ReportingExtension.html" target="_top"><code class="classname">ReportingExtension</code></a>.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="dependency_management"></a>Chapter&nbsp;50.&nbsp;Dependency Management</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:Introduction"></a>50.1.&nbsp;Introduction</h2></div></div></div><p>Dependency management is a critical feature of every build, and Gradle has placed an emphasis on offering first-class dependency management that is both easy-to-understand and
            compatible with a wide variety of approaches. If you are familiar with the approach used by either Maven or Ivy you will be delighted to learn that Gradle is fully compatible with both
            approaches in addition to being flexible enough to support fully-customized approaches.
        </p><p>Here are the major highlights of Gradle's support for dependency management:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="emphasis"><em>Transitive dependency management</em></span>: Gradle gives you full control of your project's dependency tree.
                </p></li><li class="listitem"><p><span class="emphasis"><em>Support for non-managed dependencies</em></span>: If your dependencies are simply files in version control or a shared drive, Gradle provides powerful functionality
                    to support this.
                </p></li><li class="listitem"><p><span class="emphasis"><em>Support for custom dependency definitions.</em></span>: Gradle's Module Dependencies give you the ability to describe the dependency hierarchy in the build script.
                </p></li><li class="listitem"><p><span class="emphasis"><em>A fully customizable approach to Dependency Resolution</em></span>: Gradle provides you with the ability to customize resolution rules making dependency substitution
                    easy.
                </p></li><li class="listitem"><p><span class="emphasis"><em>Full Compatibility with Maven and Ivy</em></span>: If you have defined dependencies in a Maven POM or an Ivy file, Gradle provide seamless integration with a range of
                    popular build tools.
                </p></li><li class="listitem"><p><span class="emphasis"><em>Integration with existing dependency management infrastructure</em></span>: Gradle is compatible with both Maven and Ivy repositories. If you use Archiva, Nexus, or
                    Artifactory, Gradle is 100% compatible with all repository formats.
                </p></li></ul></div><p>
            With hundreds of thousands of interdependent open source components each with a range of versions and incompatibilities, dependency management has a habit of causing problems as builds
            grow in complexity. When a build's dependency tree becomes unwieldy, your build tool shouldn't force you to adopt a single, inflexible approach to dependency management. A proper build
            system has to be designed to be flexible, and Gradle can handle any situation.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:dependency_management_and_migrations"></a>50.1.1.&nbsp;Flexible dependency management for migrations</h3></div></div></div><p>
                Dependency management can be particularly challenging during a migration from one build system to another. If you are migrating from a tool like Ant or Maven to Gradle, you may be
                faced with some difficult situations. For example, one common pattern is an Ant project with version-less jar files stored in the filesystem. Other build systems require a wholesale
                replacement of this approach before migrating. With Gradle, you can adapt your new build to any existing source of dependencies or dependency metadata. This makes incremental migration
                to Gradle much easier than the alternative. On most large projects, build migrations and any change to development process is incremental because most organizations can't afford to
                stop everything and migrate to a build tool's idea of dependency management.
            </p><p>Even if your project is using a custom dependency management system or something like an Eclipse .classpath file as master data for dependency management, it is very easy to write a
                Gradle plugin to use this data in Gradle. For migration purposes this is a common technique with Gradle. (But, once you've migrated, it might be a good idea to move away from a
                .classpath file and use Gradle's dependency management features directly.)
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:dependency_management_and_java"></a>50.1.2.&nbsp;Dependency management and Java</h3></div></div></div><p>It is ironic that in a language known for its rich library of open source components that Java has no concept of libraries or versions. In Java, there is no standard way to tell the
                JVM that you are using version 3.0.5 of Hibernate, and there is no standard way to say that
                <code class="literal">foo-1.0.jar</code>
                depends on <code class="literal">bar-2.0.jar</code>. This has led to external solutions often based on build tools. The most popular ones at the moment are Maven and Ivy. While Maven provides a
                complete build system, Ivy focuses solely on dependency management.
            </p><p>Both tools rely on descriptor XML files, which contain information about the dependencies of a particular jar. Both also use repositories where the actual jars are placed together
                with their descriptor files, and both offer resolution for conflicting jar versions in one form or the other. Both have emerged as standards for solving dependency conflicts, and while
                Gradle originally used Ivy under the hood for its dependency management. Gradle has replaced this direct dependency on Ivy with a native Gradle dependency resolution engine which
                supports a range of approaches to dependency resolution including both POM and Ivy descriptor files.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dependency_management_overview"></a>50.2.&nbsp;Dependency Management Best Practices</h2></div></div></div><p>While Gradle has strong opinions on dependency management, the tool gives you a choice between two
            options: follow recommended best practices or support any kind of pattern you can think of. This section
            outlines the Gradle project's recommended best practices for managing dependencies.
        </p><p>No matter what the language, proper dependency management is important for every project.
            From a complex enterprise application written in Java depending on hundreds of open source
            libraries to the simplest Clojure application depending on a handful of libraries, approaches to dependency
            management vary widely and can depend on the target technology, the method of application deployment, and the
            nature of the project. Projects bundled as reusable libraries may have different requirements than
            enterprise applications integrated into much larger systems of software and infrastructure. Despite this wide variation of requirements,
            the Gradle project recommends that all projects follow this set of core rules:
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:versioning_the_jar_name"></a>50.2.1.&nbsp;Put the Version in the Filename (Version the jar)</h3></div></div></div><p>The version of a library must be easy to recognize in the filename. While the version of a jar is usually in the Manifest file, it isn't readily apparent when you are inspecting a
                project. If someone asks you to look at a collection of 20 jar files, which would you prefer? A collection of files with names like <code class="filename">commons-beanutils-1.3.jar</code>
                or a collection of files with names like <code class="filename">spring.jar</code>? If dependencies have file names with version numbers it is much easier to quickly identify the versions of
                your dependencies.
            </p><p>If versions are unclear you can introduce subtle bugs which are very hard to find. For example there might be a project which uses Hibernate 2.5. Think about a developer who decides
                to install version 3.0.5 of Hibernate on her machine to fix a critical security bug but forgets to notify others in the team of this change. She may address the security bug
                successfully, but she also may have introduced subtle bugs into a codebase that was using a now-deprecated feature from Hibernate. Weeks later there is an exception on the integration
                machine which can't be reproduced on anyone's machine. Multiple developers then spend days on this issue only finally realising that the error would have easy to uncover if they knew
                that Hibernate had been upgraded from 2.5 to 3.0.5.
            </p><p>Versions in jar names increase the expressiveness of your project and make them easier to maintain. This practice also reduces the potential for error.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:transitive_dependency_management"></a>50.2.2.&nbsp;Manage transitive dependencies</h3></div></div></div><p>Transitive dependency management is a technique that enables your project to depend on libraries which, in turn, depend on other libraries. This recursive pattern of transitive
                dependencies results in a tree of dependencies including your project's first-level dependencies, second-level dependencies, and so on. If you don't model your dependencies as a
                hierarchical tree of first-level and second-level dependencies it is very easy to quickly lose control over an assembled mess of unstructured dependencies. Consider the Gradle project
                itself, while Gradle only has a few direct, first-level dependencies, when Gradle is compiled it needs more that one hundred dependencies on the classpath. On a far larger scale,
                Enterprise projects using Spring, Hibernate, and other libraries, alongside hundreds or thousands of internal projects can have very large dependency trees.
            </p><p>When these large dependency trees need to change, you'll often have to solve some dependency version conflicts. Say one open source library needs one version of a logging library and
                a another uses an alternative version. Gradle and other build tools all have the ability to solve this dependency tree and resolve conflicts, but what differentiates Gradle is the
                control it gives you over transitive dependencies and conflict resolution.
            </p><p>While you could try to manage this problem manually, you will quickly find that this approach doesn't scale. If you want to get rid of a first level dependency you really can't be
                sure which other jars you should remove. A dependency of a first level dependency might also be a first level dependency itself, or it might be a transitive dependency of yet another
                first level dependency. If you try to manage transitive dependencies yourself, the end of the story is that your build becomes brittle: no one dares to change your dependencies because
                the risk of breaking the build is too high. The project classpath becomes a complete mess, and, if a classpath problem arises, hell on earth invites you for a ride.
            </p><div class="note"><span class="emphasis"><em>NOTE:</em></span>In one project, we found a mystery, LDAP related jar in the classpath. No code referenced this jar and there was no connection to the project. No one could
                figure out what the jar was for, until it was removed from the build and the application suffered massive performance problem whenever it attempted to authenticate to LDAP. This
                mystery jar was a necessary transitive, fourth-level dependency that was easy to miss because no one had bothered to use managed transitive dependencies.
            </div><p>Gradle offers you different ways to express first-level and transitive dependencies. With Gradle you can mix and match approaches; for example, you could store your jars in an SCM
                without XML descriptor files and still use transitive dependency management.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:version_conflicts"></a>50.2.3.&nbsp;Resolve version conflicts</h3></div></div></div><p>Conflicting versions of the same jar should be detected and either resolved or cause an exception. If you don't use transitive dependency management, version conflicts are undetected
                and the often accidental order of the classpath will determine what version of a dependency will win. On a large project with many developers changing dependencies, successful builds
                will be few and far between as the order of dependencies may directly affect whether a build succeeds or fails (or whether a bug appears or disappears in production).
            </p><p>If you haven't had to deal with the curse of conflicting versions of jars on a classpath, here is a small anecdote of the fun that awaits you. In a large project with 30
                submodules, adding a dependency to a subproject changed the order of a classpath, swapping Spring 2.5 for an older 2.4 version. While
                the build continued to work, developers were starting to notice all sorts of surprising (and surprisingly awful) bugs in production. Worse yet, this unintentional downgrade of Spring
                introduced several security vulnerabilities into the system, which now required a full security audit throughout the organization.
            </p><p>In short, version conflicts are bad, and you should manage your transitive dependencies to avoid them. You might also want to learn where conflicting versions are used and consolidate on a
                particular version of a dependency across your organization. With a good conflict reporting tool like Gradle, that information can be used to communicate with the entire organization
                and standardize on a single version.
                <span class="emphasis"><em>If you think version conflicts don't happen to you, think again.</em></span>
                It is very common for different first-level dependencies to rely on a range of different overlapping versions for other dependencies, and the JVM doesn't yet offer an easy way to have
                different versions of the same jar in the classpath (see <a class="xref" href="#sub:dependency_management_and_java">Section&nbsp;50.1.2, &ldquo;Dependency management and Java&rdquo;</a>).
            </p><p>Gradle offers the following conflict resolution strategies:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="emphasis"><em>Newest</em></span>: The newest version of the dependency is used. This is Gradle's default strategy, and is often an appropriate choice as long as versions are backwards-compatible.
                </li><li class="listitem"><span class="emphasis"><em>Fail</em></span>: A version conflict results in a build failure. This strategy enforces that all version conflicts are resolved explicitly in the build script. See
                    <a class="ulink" href="../dsl/org.gradle.api.artifacts.ResolutionStrategy.html" target="_top"><code class="classname">ResolutionStrategy</code></a> for details on how to explicitly choose a particular version.
                </li></ul></div><p>While the strategies introduced above are usually enough to solve most conflicts, Gradle provides more fine-grained mechanisms to resolve version conflicts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
                    Configuring a first level dependency as <span class="emphasis"><em>forced</em></span>. This approach is useful if the dependency in conflict is already a first level dependency.
                    See examples in <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html" target="_top"><code class="classname">DependencyHandler</code></a>.
                </li><li class="listitem">
                    Configuring any dependency (transitive or not) as <span class="emphasis"><em>forced</em></span>. This approach is useful if the dependency in conflict is a transitive dependency.
                    It also can be used to force versions of first level dependencies.
                    See examples in <a class="ulink" href="../dsl/org.gradle.api.artifacts.ResolutionStrategy.html" target="_top"><code class="classname">ResolutionStrategy</code></a></li><li class="listitem">
                    Dependency resolve rules are an <a class="link" href="#feature_lifecycle">incubating</a> feature introduced in Gradle 1.4 which give you fine-grained control over the version selected for a particular dependency.
                </li></ul></div><p>To deal with problems due to version conflicts, reports with dependency graphs are also very helpful. Such reports are another feature of dependency management.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:dynamic_versions_and_changing_modules"></a>50.2.4.&nbsp;Use Dynamic Versions and Changing Modules</h3></div></div></div><p>There are many situation when you want to use the latest version of a particular dependency, or the latest in a range of versions. This can be a requirement during development, or
                you may be developing a library that is designed to work with a range of dependency versions. You can easily depend on these constantly changing dependencies by using a
                <span class="emphasis"><em>dynamic version</em></span>. A dynamic version can be either a version range (e.g. <code class="literal">2.+</code>) or it can be a placeholder for the latest version available
                (e.g. <code class="literal">latest.integration</code>).
            </p><p>Alternatively, sometimes the module you request can change over time, even for the same version. An example of this type of <span class="emphasis"><em>changing module</em></span>
                is a Maven <code class="literal">SNAPSHOT</code> module, which always points at the latest artifact published. In other words, a standard Maven snapshot is a module that never stands still
                so to speak, it is a "changing module".
            </p><p>The main difference between a <span class="emphasis"><em>dynamic version</em></span> and a <span class="emphasis"><em>changing module</em></span> is that when you resolve a <span class="emphasis"><em>dynamic version</em></span>, you'll
                get the real, static version as the module name. When you resolve a <span class="emphasis"><em>changing module</em></span>, the artifacts are named using the version you requested, but the underlying
                artifacts may change over time.
            </p><p>By default, Gradle caches dynamic versions and changing modules for 24 hours. You can override the default cache modes using <a class="link" href="#sec:cache_command_line_options">command
                line options</a>. You can change the cache expiry times in your build using the <code class="literal">resolution strategy</code> (see <a class="xref" href="#sec:controlling_caching">Section&nbsp;50.9.3, &ldquo;Fine-tuned control over dependency caching&rdquo;</a>).
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sub:configurations"></a>50.3.&nbsp;Dependency configurations</h2></div></div></div><p>In Gradle dependencies are grouped into configurations. Configurations have a name, a number of other properties,
            and they can extend each other.
            Many Gradle plugin add pre-defined configurations to your project. The Java plugin, for example,
            adds some configurations to represent the various classpaths it needs. see
            <a class="xref" href="#sec:java_plugin_and_dependency_management">Section&nbsp;23.5, &ldquo;Dependency management&rdquo;</a>
            for details. Of course you can add custom configurations on top of that. There are many use cases
            for custom configurations. This is very handy for example for adding dependencies not needed for
            building or testing your software (e.g. additional JDBC drivers to be shipped with your distribution).
        </p><p>
            A project's configurations are managed by a <code class="literal">configurations</code> object. The closure you pass to
            the configurations object is applied against its API. To learn more about this API have a look at
            <a class="ulink" href="../dsl/org.gradle.api.artifacts.ConfigurationContainer.html" target="_top"><code class="classname">ConfigurationContainer</code></a>.
        </p><p>To define a configuration:</p><div class="example"><a name="defineConfiguration"></a><p class="title"><b>Example&nbsp;50.1.&nbsp;Definition of a configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    compile
}</pre></div></div><br class="example-break"><p>To access a configuration:</p><div class="example"><a name="defineConfiguration"></a><p class="title"><b>Example&nbsp;50.2.&nbsp;Accessing a configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">println configurations.compile.name
println configurations[<span class="hl-string">'compile'</span>].name</pre></div></div><br class="example-break"><p>To configure a configuration:</p><div class="example"><a name="defineConfiguration"></a><p class="title"><b>Example&nbsp;50.3.&nbsp;Configuration of a configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    compile {
        description = <span class="hl-string">'compile classpath'</span>
        transitive = true
    }
    runtime {
        extendsFrom compile
    }
}
configurations.compile {
    description = <span class="hl-string">'compile classpath'</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:how_to_declare_your_dependencies"></a>50.4.&nbsp;How to declare your dependencies</h2></div></div></div><p>There are several different types of dependencies that you can declare:
        </p><div class="table"><p class="title"><b>Table&nbsp;50.1.&nbsp;Dependency types</b></p><div class="table-contents"><table id="N14C75"><thead><tr>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#sub:module_dependencies">External module dependency</a>
                </td>
                <td>A dependency on an external module in some repository.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:project_dependencies">Project dependency</a>
                </td>
                <td>A dependency on another project in the same build.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:file_dependencies">File dependency</a>
                </td>
                <td>A dependency on a set of files on the local filesystem.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:client_module_dependencies">Client module dependency</a>
                </td>
                <td>A dependency on an external module, where the artifacts are located in some repository but the module meta-data
                    is specified by the local build. You use this kind of dependency when you want to override the meta-data for the module.
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:api_dependencies">Gradle API dependency</a>
                </td>
                <td>A dependency on the API of the current Gradle version.
                    You use this kind of dependency when you are developing custom Gradle plugins and task types.
                </td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:groovy_dependencies">Local Groovy dependency</a>
                </td>
                <td>A dependency on the Groovy version used by the current Gradle version.
                    You use this kind of dependency when you are developing custom Gradle plugins and task types.
                </td>
            </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:module_dependencies"></a>50.4.1.&nbsp;External module dependencies</h3></div></div></div><p>External module dependencies are the most common dependencies. They refer to a module in an external repository.
            </p><div class="example"><a name="moduleDependencies"></a><p class="title"><b>Example&nbsp;50.4.&nbsp;Module dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    runtime group: <span class="hl-string">'org.springframework'</span>, name: <span class="hl-string">'spring-core'</span>, version: <span class="hl-string">'2.5'</span>
    runtime <span class="hl-string">'org.springframework:spring-core:2.5'</span>, <span class="hl-string">'org.springframework:spring-aop:2.5'</span>
    runtime(
        [group: <span class="hl-string">'org.springframework'</span>, name: <span class="hl-string">'spring-core'</span>, version: <span class="hl-string">'2.5'</span>],
        [group: <span class="hl-string">'org.springframework'</span>, name: <span class="hl-string">'spring-aop'</span>, version: <span class="hl-string">'2.5'</span>]
    )
    runtime(<span class="hl-string">'org.hibernate:hibernate:3.0.5'</span>) {
        transitive = true
    }
    runtime group: <span class="hl-string">'org.hibernate'</span>, name: <span class="hl-string">'hibernate'</span>, version: <span class="hl-string">'3.0.5'</span>, transitive: true
    runtime(group: <span class="hl-string">'org.hibernate'</span>, name: <span class="hl-string">'hibernate'</span>, version: <span class="hl-string">'3.0.5'</span>) {
        transitive = true
    }
}</pre></div></div><br class="example-break"><p>See <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html" target="_top"><code class="classname">DependencyHandler</code></a>
                for more examples and a complete reference.
            </p><p>Gradle provides different notations for module dependencies. There is a string notation and
                a map notation. A module dependency has an API which allows for further configuration. Have a look at
                <a class="ulink" href="../javadoc/org/gradle/api/artifacts/ExternalModuleDependency.html" target="_top"><code class="classname">ExternalModuleDependency</code></a>
                to learn all about the API.
                This API provides properties and configuration methods. Via the string notation you can define a subset
                of the properties. With the map notation you can define all properties. To have access to the complete API,
                either with the map or with the string notation, you can assign a single dependency to a configuration
                together with a closure.
            </p><p>If you declare a module dependency, Gradle looks for a corresponding module descriptor file (<code class="filename">pom.xml</code> or
                <code class="filename">ivy.xml</code>) in the repositories. If such a module descriptor file exists, it is parsed and the artifacts of
                this module (e.g. <code class="filename">hibernate-3.0.5.jar</code>) as well as its dependencies (e.g. cglib) are downloaded. If no such
                module descriptor file exists, Gradle looks for a file called <code class="filename">hibernate-3.0.5.jar</code>
                to retrieve. In Maven, a module can have one and only one artifact. In Gradle and Ivy, a module can have multiple artifacts.
                Each artifact can have a different set of dependencies.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:multi_artifact_dependencies"></a>50.4.1.1.&nbsp;Depending on modules with multiple artifacts</h4></div></div></div>
                As mentioned earlier, a Maven module has only one artifact. Hence, when your project depends on a Maven module, it's obvious what its artifact is.
                With Gradle or Ivy, the case is different. Ivy's dependency descriptor (<code class="filename">ivy.xml</code>) can declare multiple artifacts.
                For more information, see the Ivy reference for <code class="filename">ivy.xml</code>.
                In Gradle, when you declare a dependency on an Ivy module, you actually declare a dependency on the <code class="literal">default</code> configuration of that module.
                So the actual set of artifacts (typically jars) you depend on is the set of artifacts that are associated with the
                <code class="literal">default</code> configuration of that module. Here are some situations where this matters:
                <div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <code class="literal">default</code> configuration of a module contains undesired artifacts. Rather than depending on the
                        whole configuration, a dependency on just the desired artifacts is declared.
                    </li><li class="listitem">The desired artifact belongs to a configuration other than <code class="literal">default</code>. That configuration is explicitly named
                        as part of the dependency declaration.
                    </li></ul></div>
                There are other situations where it is necessary to fine-tune dependency declarations.
                Please see <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html" target="_top"><code class="classname">DependencyHandler</code></a> for examples and a complete reference for declaring dependencies.
            </div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:artifact_dependencies"></a>50.4.1.2.&nbsp;Artifact only notation</h4></div></div></div><p>As said above, if no module descriptor file can be found, Gradle by default
                    downloads a jar with the name of the module. But sometimes, even if the repository contains module descriptors, you want to download only the artifact jar, without
                    the dependencies.
                    <sup>[<a href="#ftn.N14D1D" name="N14D1D" class="footnote">14</a>]</sup>
                    And sometimes you want to download a zip from a repository, that does not have module descriptors. Gradle provides an <span class="emphasis"><em>artifact only</em></span>
                    notation for those use cases - simply prefix the extension that you want to be downloaded with <code class="literal">'@'</code> sign:
                    </p><div class="example"><a name="artifactOnly"></a><p class="title"><b>Example&nbsp;50.5.&nbsp;Artifact only notation</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    runtime <span class="hl-string">"org.groovy:groovy:2.2.0@jar"</span>
    runtime group: <span class="hl-string">'org.groovy'</span>, name: <span class="hl-string">'groovy'</span>, version: <span class="hl-string">'2.2.0'</span>, ext: <span class="hl-string">'jar'</span>
}</pre></div></div><p><br class="example-break">
                    An artifact only notation creates a module dependency which downloads only the artifact file with the specified extension. Existing module descriptors are ignored.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:classifiers"></a>50.4.1.3.&nbsp;Classifiers</h4></div></div></div><p>The Maven dependency management has the notion of classifiers.
                    <sup>[<a href="#ftn.N14D3B" name="N14D3B" class="footnote">15</a>]</sup>
                    Gradle supports this. To retrieve classified dependencies from a Maven repository you can write:
                </p><div class="example"><a name="classifier"></a><p class="title"><b>Example&nbsp;50.6.&nbsp;Dependency with classifier</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">compile <span class="hl-string">"org.gradle.test.classifiers:service:1.0:jdk15@jar"</span>
    otherConf group: <span class="hl-string">'org.gradle.test.classifiers'</span>, name: <span class="hl-string">'service'</span>, version: <span class="hl-string">'1.0'</span>, classifier: <span class="hl-string">'jdk14'</span></pre></div></div><br class="example-break"><p>As can be seen in the first line above, classifiers can be used together with artifact only notation.
                </p></div><p>It is easy to iterate over the dependency artifacts of a configuration:</p><div class="example"><a name="externalDependencies"></a><p class="title"><b>Example&nbsp;50.7.&nbsp;Iterating over a configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task listJars &lt;&lt; {
    configurations.compile.each { File file -&gt; println file.name }
}</pre><p>Output of <strong class="userinput"><code>gradle -q listJars</code></strong></p><pre class="screen">&gt; gradle -q listJars
hibernate-core-3.6.7.Final.jar
antlr-2.7.6.jar
commons-collections-3.1.jar
dom4j-1.6.1.jar
hibernate-commons-annotations-3.2.0.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
jta-1.1.jar
slf4j-api-1.6.1.jar</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:client_module_dependencies"></a>50.4.2.&nbsp;Client module dependencies</h3></div></div></div><p>Client module dependencies allow to declare <span class="emphasis"><em>transitive</em></span> dependencies directly in the build script. They are a replacement for a module descriptor
                in an external repository.
            </p><div class="example"><a name="client-modules"></a><p class="title"><b>Example&nbsp;50.8.&nbsp;Client module dependencies - transitive dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    runtime module(<span class="hl-string">"org.codehaus.groovy:groovy:2.3.3"</span>) {
        dependency(<span class="hl-string">"commons-cli:commons-cli:1.0"</span>) {
            transitive = false
        }
        module(group: <span class="hl-string">'org.apache.ant'</span>, name: <span class="hl-string">'ant'</span>, version: <span class="hl-string">'1.9.3'</span>) {
            dependencies <span class="hl-string">"org.apache.ant:ant-launcher:1.9.3@jar"</span>, <span class="hl-string">"org.apache.ant:ant-junit:1.9.3"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>This declares a dependency on Groovy. Groovy itself has dependencies. But Gradle does
                not look for an XML descriptor to figure them out but gets the information from the build file. The
                dependencies of a client module can be normal module dependencies or artifact dependencies or another
                client module. Have also a look at the API documentation:
                <a class="ulink" href="../javadoc/org/gradle/api/artifacts/ClientModule.html" target="_top"><code class="classname">ClientModule</code></a>
            </p><p>In the current release client modules have one limitation. Let's say your project is a library and
                you want this library to be uploaded to your company's Maven or Ivy repository. Gradle uploads the
                jars of your project to the company repository together with the XML descriptor file of the dependencies.
                If you use client modules the dependency declaration in the XML descriptor file is not correct. We will
                improve this in a future release of Gradle.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:project_dependencies"></a>50.4.3.&nbsp;Project dependencies</h3></div></div></div><p>Gradle distinguishes between external dependencies and dependencies on projects which are part of the
                same multi-project build. For the latter you can declare <em class="firstterm">Project Dependencies</em>.
            </p><div class="example"><a name="project-dependencies"></a><p class="title"><b>Example&nbsp;50.9.&nbsp;Project dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile project(<span class="hl-string">':shared'</span>)
}</pre></div></div><br class="example-break"><p>For more information see the API documentation for
                <a class="ulink" href="../javadoc/org/gradle/api/artifacts/ProjectDependency.html" target="_top"><code class="classname">ProjectDependency</code></a>
            </p><p>Multi-project builds are discussed in<a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:file_dependencies"></a>50.4.4.&nbsp;File dependencies</h3></div></div></div><p>File dependencies allow you to directly add a set of files to a configuration, without first adding
                them to a repository. This can be useful if you cannot, or do not want to, place certain files in a
                repository. Or if you do not want to use any repositories at all for storing your dependencies.
            </p><p>To add some files as a dependency for a configuration, you simply pass a
                <a class="link" href="#sec:file_collections">file collection</a>
                as a dependency:
            </p><div class="example"><a name="file-dependencies"></a><p class="title"><b>Example&nbsp;50.10.&nbsp;File dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    runtime files(<span class="hl-string">'libs/a.jar'</span>, <span class="hl-string">'libs/b.jar'</span>)
    runtime fileTree(dir: <span class="hl-string">'libs'</span>, include: <span class="hl-string">'*.jar'</span>)
}</pre></div></div><br class="example-break"><p>File dependencies are not included in the published dependency descriptor for your project.
                However, file dependencies are included in transitive project dependencies within the same build.
                This means they cannot be used outside the current build, but they can be used with the same build.
            </p><p>
                You can declare which tasks produce the files for a file dependency. You might do this when, for example,
                the files are generated by the build.
            </p><div class="example"><a name="generatedFileDependencies"></a><p class="title"><b>Example&nbsp;50.11.&nbsp;Generated file dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile files(<span class="hl-string">"$buildDir/classes"</span>) {
        builtBy <span class="hl-string">'compile'</span>
    }
}

task compile &lt;&lt; {
    println <span class="hl-string">'compiling classes'</span>
}

task list(dependsOn: configurations.compile) &lt;&lt; {
    println <span class="hl-string">"classpath = ${configurations.compile.collect {File file -&gt; file.name}}"</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q list</code></strong></p><pre class="screen">&gt; gradle -q list
compiling classes
classpath = [classes]</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:api_dependencies"></a>50.4.5.&nbsp;Gradle API Dependency</h3></div></div></div><p>You can declare a dependency on the API of the current version of Gradle by using the <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html#org.gradle.api.artifacts.dsl.DependencyHandler:gradleApi()" target="_top"><code class="classname">DependencyHandler.gradleApi()</code></a>
                method. This is useful when you are developing custom Gradle tasks or plugins.
            </p><div class="example"><a name="gradle-api-dependencies"></a><p class="title"><b>Example&nbsp;50.12.&nbsp;Gradle API dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile gradleApi()
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:groovy_dependencies"></a>50.4.6.&nbsp;Local Groovy Dependency</h3></div></div></div><p>You can declare a dependency on the Groovy that is distributed with Gradle by using the <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html#org.gradle.api.artifacts.dsl.DependencyHandler:localGroovy()" target="_top"><code class="classname">DependencyHandler.localGroovy()</code></a>
                method. This is useful when you are developing custom Gradle tasks or plugins in Groovy.
            </p><div class="example"><a name="local-groovy-dependencies"></a><p class="title"><b>Example&nbsp;50.13.&nbsp;Gradle's Groovy dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile localGroovy()
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:exclude_transitive_dependencies"></a>50.4.7.&nbsp;Excluding transitive dependencies</h3></div></div></div><p>You can exclude a <span class="emphasis"><em>transitive</em></span> dependency either by configuration or by dependency:
            </p><div class="example"><a name="exclude-dependencies"></a><p class="title"><b>Example&nbsp;50.14.&nbsp;Excluding transitive dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    compile.exclude module: <span class="hl-string">'commons'</span>
    all*.exclude group: <span class="hl-string">'org.gradle.test.excludes'</span>, module: <span class="hl-string">'reports'</span>
}

dependencies {
    compile(<span class="hl-string">"org.gradle.test.excludes:api:1.0"</span>) {
        exclude module: <span class="hl-string">'shared'</span>
    }
}</pre></div></div><br class="example-break"><p>If you define an exclude for a particular configuration, the excluded transitive dependency will be filtered for all
                dependencies when resolving this configuration or any inheriting configuration.
                If you want to exclude a transitive dependency from all your
                configurations you can use the Groovy spread-dot operator to express this in a concise way, as shown in the example.
                When defining an exclude, you can specify either only the organization or only the module name or both.
                Have also a look at the API documentation of <a class="ulink" href="../javadoc/org/gradle/api/artifacts/Dependency.html" target="_top"><code class="classname">Dependency</code></a> and <a class="ulink" href="../dsl/org.gradle.api.artifacts.Configuration.html" target="_top"><code class="classname">Configuration</code></a>.
            </p><p>
                Not every transitive dependency can be excluded - some transitive dependencies might be essential
                for correct runtime behavior of the application. Generally, one can exclude transitive
                dependencies that are either not required by runtime or that are guaranteed to be available
                on the target environment/platform.
            </p><p>
                Should you exclude per-dependency or per-configuration?
                It turns out that in majority of cases you want to use the per-configuration exclusion.
                Here are the some exemplary reasons why one might want to exclude a transitive dependency.
                Bear in mind that for some of those use cases there are better solutions than exclusions!
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The dependency is undesired due to licensing reasons.</li><li class="listitem">The dependency is not available in any of remote repositories.</li><li class="listitem">The dependency is not needed for runtime.</li><li class="listitem">The dependency has a version that conflicts with a desired version. For that use case please refer to <a class="xref" href="#sub:version_conflicts">Section&nbsp;50.2.3, &ldquo;Resolve version conflicts&rdquo;</a>
                        and the documentation on <a class="ulink" href="../dsl/org.gradle.api.artifacts.ResolutionStrategy.html" target="_top"><code class="classname">ResolutionStrategy</code></a> for a potentially better solution to the problem.
                    </li></ul></div><p>
                Basically, in most of the cases excluding the transitive dependency should be done per configuration.
                This way the dependency declaration is more explicit. It is also more accurate because a per-dependency
                exclude rule does not guarantee the given transitive dependency does not show up in the configuration.
                For example, some other dependency, which does not have any exclude rules, might pull in
                that unwanted transitive dependency.
            </p><p>
                Other examples of the dependency exclusions can be found in the reference for <a class="ulink" href="../javadoc/org/gradle/api/artifacts/ModuleDependency.html" target="_top"><code class="classname">ModuleDependency</code></a> or
                <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html" target="_top"><code class="classname">DependencyHandler</code></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14E30"></a>50.4.8.&nbsp;Optional attributes</h3></div></div></div><p><a name="para:dependencies_with_empty_attributes"></a>All attributes for a dependency are optional, except the name. It depends on the repository type,
                which information is need for actually finding the dependencies in the repository.
                See <a class="xref" href="#sec:repositories">Section&nbsp;50.6, &ldquo;Repositories&rdquo;</a>. If you work for example with Maven repositories, you need to define the
                group, name and version. If you work with filesystem repositories you might only need the name or the name
                and the version.
            </p><div class="example"><a name="dependenciesWithEmptyAttributes"></a><p class="title"><b>Example&nbsp;50.15.&nbsp;Optional attributes of dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    runtime <span class="hl-string">":junit:4.10"</span>, <span class="hl-string">":testng"</span>
    runtime name: <span class="hl-string">'testng'</span> 
}</pre></div></div><br class="example-break"><p><a name="para:notation_collections"></a>You can also assign collections or arrays of dependency notations to a configuration:
            </p><div class="example"><a name="listGrouping"></a><p class="title"><b>Example&nbsp;50.16.&nbsp;Collections and arrays of dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">List groovy = [<span class="hl-string">"org.codehaus.groovy:groovy-all:2.3.3@jar"</span>,
               <span class="hl-string">"commons-cli:commons-cli:1.0@jar"</span>,
               <span class="hl-string">"org.apache.ant:ant:1.9.3@jar"</span>]
List hibernate = [<span class="hl-string">'org.hibernate:hibernate:3.0.5@jar'</span>, <span class="hl-string">'somegroup:someorg:1.0@jar'</span>]
dependencies {
    runtime groovy, hibernate
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:dependency_configurations"></a>50.4.9.&nbsp;Dependency configurations</h3></div></div></div><p>In Gradle a dependency can have different configurations (as your project can have different configurations). If you
                don't specify anything explicitly, Gradle uses the default configuration of the dependency. For dependencies
                from a Maven repository, the default configuration is the only available one anyway. If you work with Ivy repositories and
                want to declare a non-default configuration for your dependency you have to use the map notation and declare:
            </p><div class="example"><a name="dependencyConfigurations"></a><p class="title"><b>Example&nbsp;50.17.&nbsp;Dependency configurations</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    runtime group: <span class="hl-string">'org.somegroup'</span>, name: <span class="hl-string">'somedependency'</span>, version: <span class="hl-string">'1.0'</span>, configuration: <span class="hl-string">'someConfiguration'</span>
}</pre></div></div><br class="example-break"><p>To do the same for project dependencies you need to declare:</p><div class="example"><a name="dependencyConfigurationsProjects"></a><p class="title"><b>Example&nbsp;50.18.&nbsp;Dependency configurations for project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    compile project(path: <span class="hl-string">':api'</span>, configuration: <span class="hl-string">'spi'</span>)
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N14E6C"></a>50.4.10.&nbsp;Dependency reports</h3></div></div></div><p>You can generate dependency reports from the command line (see <a class="xref" href="#para:commandline_dependency_report">Section&nbsp;11.6.4, &ldquo;Listing project dependencies&rdquo;</a>).
                With the help of the Project report plugin (see <a class="xref" href="#project_reports_plugin">Chapter&nbsp;41, <i>The Project Report Plugin</i></a>) such a report can be created by your build.
            </p><p>
                Since Gradle 1.2 there is also a new programmatic API to access the resolved dependency information.
                The dependency reports (see the previous paragraph) are using this API under the covers.
                The API lets you to walk the resolved dependency graph and provides information about the dependencies.
                With the coming releases the API will grow to provide more information about the resolution result.
                For more information about the API please refer to the javadocs on
                <a class="ulink" href="../javadoc/org/gradle/api/artifacts/ResolvableDependencies.html#getResolutionResult()" target="_top"><code class="classname">ResolvableDependencies.getResolutionResult()</code></a>.
                Potential usages of the <a class="ulink" href="../javadoc/org/gradle/api/artifacts/result/ResolutionResult.html" target="_top"><code class="classname">ResolutionResult</code></a> API:
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Creation of advanced dependency reports tailored to your use case.</li><li class="listitem">Enabling the build logic to make decisions based on the content of the dependency graph.</li></ul></div><p>
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:working_with_dependencies"></a>50.5.&nbsp;Working with dependencies</h2></div></div></div><p>For the examples below we have the following dependencies setup:</p><div class="example"><a name="configurationHandlingSetup"></a><p class="title"><b>Example&nbsp;50.19.&nbsp;Configuration.copy</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    sealife
    alllife
}

dependencies {
    sealife <span class="hl-string">"sea.mammals:orca:1.0"</span>, <span class="hl-string">"sea.fish:shark:1.0"</span>, <span class="hl-string">"sea.fish:tuna:1.0"</span>
    alllife configurations.sealife
    alllife <span class="hl-string">"air.birds:albatros:1.0"</span>
}</pre></div></div><br class="example-break"><p>The dependencies have the following transitive dependencies:</p><p>shark-1.0 -&gt; seal-2.0, tuna-1.0</p><p>orca-1.0 -&gt; seal-1.0</p><p>tuna-1.0 -&gt; herring-1.0</p><p>You can use the configuration to access the declared dependencies or a subset of those:
        </p><div class="example"><a name="configurationHandlingDependencies"></a><p class="title"><b>Example&nbsp;50.20.&nbsp;Accessing declared dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task dependencies &lt;&lt; {
    configurations.alllife.dependencies.each { dep -&gt; println dep.name }
    println()
    configurations.alllife.allDependencies.each { dep -&gt; println dep.name }
    println()
    configurations.alllife.allDependencies.findAll { dep -&gt; dep.name != <span class="hl-string">'orca'</span> }.each { dep -&gt; println dep.name }
}</pre><p>Output of <strong class="userinput"><code>gradle -q dependencies</code></strong></p><pre class="screen">&gt; gradle -q dependencies
albatros

albatros
orca
shark
tuna

albatros
shark
tuna</pre></div></div><br class="example-break"><p><code class="code">dependencies</code> returns only the dependencies belonging explicitly to the configuration.
            <code class="code">allDependencies</code> includes the dependencies from extended configurations.
        </p><p>To get the library files of the configuration dependencies you can do:
        </p><div class="example"><a name="configurationHandlingAllFiles"></a><p class="title"><b>Example&nbsp;50.21.&nbsp;Configuration.files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task allFiles &lt;&lt; {
    configurations.sealife.files.each { file -&gt;
        println file.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q allFiles</code></strong></p><pre class="screen">&gt; gradle -q allFiles
orca-1.0.jar
shark-1.0.jar
tuna-1.0.jar
herring-1.0.jar
seal-2.0.jar</pre></div></div><br class="example-break"><p>Sometimes you want the library files of a subset of the configuration dependencies (e.g. of a single dependency).
        </p><div class="example"><a name="configurationHandlingFiles"></a><p class="title"><b>Example&nbsp;50.22.&nbsp;Configuration.files with spec</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task files &lt;&lt; {
    configurations.sealife.files { dep -&gt; dep.name == <span class="hl-string">'orca'</span> }.each { file -&gt;
        println file.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q files</code></strong></p><pre class="screen">&gt; gradle -q files
orca-1.0.jar
seal-2.0.jar</pre></div></div><br class="example-break"><p>The <code class="code">Configuration.files</code> method always retrieves all artifacts of the <span class="emphasis"><em>whole</em></span>
            configuration. It then filters the retrieved files by specified dependencies. As you can see in the example, transitive dependencies are included.
        </p><p>You can also copy a configuration. You can optionally specify that only a subset of dependencies from the original configuration
            should be copied. The copying methods come in two flavors. The <code class="code">copy</code> method copies only the dependencies belonging explicitly to the configuration. The
            <code class="code">copyRecursive</code> method copies all the dependencies, including the dependencies from extended configurations.
        </p><div class="example"><a name="configurationHandlingCopy"></a><p class="title"><b>Example&nbsp;50.23.&nbsp;Configuration.copy</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copy &lt;&lt; {
    configurations.alllife.copyRecursive { dep -&gt; dep.name != <span class="hl-string">'orca'</span> }.allDependencies.each { dep -&gt;
        println dep.name
    }
    println()
    configurations.alllife.copy().allDependencies.each { dep -&gt;
        println dep.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q copy</code></strong></p><pre class="screen">&gt; gradle -q copy
albatros
shark
tuna

albatros</pre></div></div><br class="example-break"><p>It is important to note that the returned files of the copied configuration
            are often but not always the same than the returned files of the dependency subset of the original configuration.
            In case of version conflicts between dependencies of the subset and dependencies not belonging to the subset the resolve result might be different.
        </p><div class="example"><a name="configurationHandlingCopyVsFiles"></a><p class="title"><b>Example&nbsp;50.24.&nbsp;Configuration.copy vs. Configuration.files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task copyVsFiles &lt;&lt; {
    configurations.sealife.copyRecursive { dep -&gt; dep.name == <span class="hl-string">'orca'</span> }.each { file -&gt;
        println file.name
    }
    println()
    configurations.sealife.files { dep -&gt; dep.name == <span class="hl-string">'orca'</span> }.each { file -&gt;
        println file.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q copyVsFiles</code></strong></p><pre class="screen">&gt; gradle -q copyVsFiles
orca-1.0.jar
seal-1.0.jar

orca-1.0.jar
seal-2.0.jar</pre></div></div><br class="example-break"><p>In the example above, <code class="code">orca</code> has a dependency on <code class="code">seal-1.0</code> whereas <code class="code">shark</code> has a dependency on<code class="code">seal-2.0</code>. The original configuration
            has therefore a version conflict which is resolved to the newer <code class="code">seal-2.0</code> version. The <code class="code">files</code> method therefore returns <code class="code">seal-2.0</code> as a
            transitive dependency of<code class="code">orca</code>. The copied configuration only has <code class="code">orca</code> as a dependency and therefore there is no version conflict and <code class="code">seal-1.0</code>
            is returned as a transitive dependency.
        </p><p>Once a configuration is resolved it is immutable. Changing its state or the state of one of its dependencies
            will cause an exception. You can always copy a resolved configuration. The copied configuration is in the unresolved
            state and can be freshly resolved.
        </p><p>To learn more about the API of the configuration class see the API documentation:
            <a class="ulink" href="../dsl/org.gradle.api.artifacts.Configuration.html" target="_top"><code class="classname">Configuration</code></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:repositories"></a>50.6.&nbsp;Repositories</h2></div></div></div><p>Gradle repository management, based on Apache Ivy, gives you a lot of freedom regarding repository layout and retrieval policies.
            Additionally Gradle provides various convenience method to add pre-configured repositories.
        </p><p>You may configure any number of repositories, each of which is treated independently by Gradle. If Gradle finds a module descriptor in a
            particular repository, it will attempt to download all of the artifacts for that module from <span class="emphasis"><em>the same repository</em></span>.
            Although module meta-data and module artifacts must be located in the same repository, it is possible to compose a single repository of multiple
            URLs, giving multiple locations to search for meta-data files and jar files.
        </p><p>There are several different types of repositories you can declare:</p><div class="table"><p class="title"><b>Table&nbsp;50.2.&nbsp;Repository types</b></p><div class="table-contents"><table id="N14F46"><thead><tr>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <a class="link" href="#sub:maven_central">Maven central repository</a>
                </td>
                <td>A pre-configured repository that looks for dependencies in Maven Central.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:maven_jcenter">Maven JCenter repository</a>
                </td>
                <td>A pre-configured repository that looks for dependencies in Bintray's JCenter.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:maven_local">Maven local repository</a>
                </td>
                <td>A pre-configured repository that looks for dependencies in the local Maven repository.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sub:maven_repo">Maven repository</a>
                </td>
                <td>A Maven repository. Can be located on the local filesystem or at some remote location.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sec:ivy_repositories">Ivy repository</a>
                </td>
                <td>An Ivy repository. Can be located on the local filesystem or at some remote location.</td>
            </tr><tr>
                <td>
                    <a class="link" href="#sec:flat_dir_resolver">Flat directory repository</a>
                </td>
                <td>A simple repository on the local filesystem. Does not support any meta-data formats.</td>
            </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:supported_transport_protocols"></a>50.6.1.&nbsp;Supported repository transport protocols</h3></div></div></div><p>Maven and Ivy repositories support the use of various transport protocols. At the moment the following protocols are supported:
            </p><div class="table"><p class="title"><b>Table&nbsp;50.3.&nbsp;Repository transport protocols</b></p><div class="table-contents"><table id="N14FA0"><thead><tr>
                        <td>Type</td>
                        <td>Authentication schemes</td>
                    </tr></thead><tr>
                    <td><code class="literal">file</code></td>
                    <td>none</td>
                </tr><tr>
                    <td><code class="literal">http</code></td>
                    <td>username/password</td>
                </tr><tr>
                    <td><code class="literal">https</code></td>
                    <td>username/password</td>
                </tr><tr>
                    <td><code class="literal">sftp</code></td>
                    <td>username/password</td>
                </tr></table></div></div><p>To define a repository use the <code class="literal">repositories</code> configuration block. Within the <code class="literal">repositories</code> closure,
                a Maven repository is declared with <code class="literal">maven</code>. An Ivy repository is declared with <code class="literal">ivy</code>. The transport protocol
                is part of the URL definition for a repository. The following build script demonstrates how to create a HTTP-based Maven and Ivy repository:
            </p><div class="example"><a name="mavenIvyRepositoriesNoAuth"></a><p class="title"><b>Example&nbsp;50.25.&nbsp;Declaring a Maven and Ivy repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    maven {
        url <span class="hl-string">"http://repo.mycompany.com/maven2"</span>
    }

    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
    }
}</pre></div></div><br class="example-break"><p>If authentication is required for a repository, the relevant credentials can be provided. The following example shows how to provide
                username/password-based authentication for SFTP repositories:
            </p><div class="example"><a name="mavenIvyRepositoriesAuth"></a><p class="title"><b>Example&nbsp;50.26.&nbsp;Providing credentials to a Maven and Ivy repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    maven {
        url <span class="hl-string">"sftp://repo.mycompany.com:22/maven2"</span>
        credentials {
            username <span class="hl-string">'user'</span>
            password <span class="hl-string">'password'</span>
        }
    }

    ivy {
        url <span class="hl-string">"sftp://repo.mycompany.com:22/repo"</span>
        credentials {
            username <span class="hl-string">'user'</span>
            password <span class="hl-string">'password'</span>
        }
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:maven_central"></a>50.6.2.&nbsp;Maven central repository</h3></div></div></div><p>To add the central Maven 2 repository (<a class="ulink" href="http://repo1.maven.org/maven2" target="_top">http://repo1.maven.org/maven2</a>) simply add this to your build script:
            </p><div class="example"><a name="mavenCentral"></a><p class="title"><b>Example&nbsp;50.27.&nbsp;Adding central Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}</pre></div></div><br class="example-break"><p>Now Gradle will look for your dependencies in this repository.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:maven_jcenter"></a>50.6.3.&nbsp;Maven JCenter repository</h3></div></div></div><p><a class="ulink" href="http://bintray.com" target="_top">Bintray</a>'s JCenter is an up-to-date collection of all popular Maven OSS artifacts, including artifacts published directly to Bintray.
            </p><p>To add the JCenter Maven repository (<a class="ulink" href="http://jcenter.bintray.com" target="_top">http://jcenter.bintray.com</a>) simply add this to your build script:
            </p><div class="example"><a name="mavenJcenter"></a><p class="title"><b>Example&nbsp;50.28.&nbsp;Adding Bintray's JCenter Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    jcenter()
}</pre></div></div><br class="example-break"><p>Now Gradle will look for your dependencies in the JCenter repository.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:maven_local"></a>50.6.4.&nbsp;Local Maven repository</h3></div></div></div><p>To use the local Maven cache as a repository you can do:</p><div class="example"><a name="mavenLocalRepo"></a><p class="title"><b>Example&nbsp;50.29.&nbsp;Adding the local Maven cache as a repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenLocal()
}</pre></div></div><br class="example-break"><p>Gradle uses the same logic as Maven to identify the location of your local Maven cache. If a local repository location is defined in a <code class="filename">settings.xml</code>, this location
                will be used. The <code class="filename">settings.xml</code> in <code class="filename"><em class="replaceable"><code>USER_HOME</code></em>/.m2</code> takes precedence over the <code class="filename">settings.xml</code>
                in <code class="filename"><em class="replaceable"><code>M2_HOME</code></em>/conf</code>. If no <code class="filename">settings.xml</code> is available, Gradle uses the default location
                <code class="filename"><em class="replaceable"><code>USER_HOME</code></em>/.m2/repository</code>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:maven_repo"></a>50.6.5.&nbsp;Maven repositories</h3></div></div></div><p>For adding a custom Maven repository you can do:
            </p><div class="example"><a name="mavenLikeRepo"></a><p class="title"><b>Example&nbsp;50.30.&nbsp;Adding custom Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    maven {
        url <span class="hl-string">"http://repo.mycompany.com/maven2"</span>
    }
}</pre></div></div><br class="example-break"><p>Sometimes a repository will have the POMs published to one location, and the JARs and other artifacts published at another location.
                To define such a repository, you can do:
            </p><div class="example"><a name="mavenLikeRepoWithJarRepo"></a><p class="title"><b>Example&nbsp;50.31.&nbsp;Adding additional Maven repositories for JAR files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    maven {
        <span class="hl-comment">// Look for POMs and artifacts, such as JARs, here</span>
        url <span class="hl-string">"http://repo2.mycompany.com/maven2"</span>
        <span class="hl-comment">// Look for artifacts here if not found at the above location</span>
        artifactUrls <span class="hl-string">"http://repo.mycompany.com/jars"</span>
        artifactUrls <span class="hl-string">"http://repo.mycompany.com/jars2"</span>
    }
}</pre></div></div><br class="example-break"><p>Gradle will look at the first URL for the POM and the JAR. If the JAR can't be found there, the artifact URLs are used to look for JARs.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N1506E"></a>50.6.5.1.&nbsp;Accessing password protected Maven repositories</h4></div></div></div><p>To access a Maven repository which uses basic authentication, you specify the username and password to use when you define the repository:
                </p><div class="example"><a name="mavenPasswordProtectedRepo"></a><p class="title"><b>Example&nbsp;50.32.&nbsp;Accessing password protected Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    maven {
        credentials {
            username <span class="hl-string">'user'</span>
            password <span class="hl-string">'password'</span>
        }
        url <span class="hl-string">"http://repo.mycompany.com/maven2"</span>
    }
}</pre></div></div><br class="example-break"><p>It is advisable to keep your username and password in <code class="filename">gradle.properties</code> rather than directly in the build file.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:flat_dir_resolver"></a>50.6.6.&nbsp;Flat directory repository</h3></div></div></div><p>If you want to use a (flat) filesystem directory as a repository, simply type:
            </p><div class="example"><a name="flatDirMulti"></a><p class="title"><b>Example&nbsp;50.33.&nbsp;Flat repository resolver</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    flatDir {
        dirs <span class="hl-string">'lib'</span>
    }
    flatDir {
        dirs <span class="hl-string">'lib1'</span>, <span class="hl-string">'lib2'</span>
    }
}</pre></div></div><br class="example-break"><p>This adds repositories which look into one or more directories for finding dependencies. If you only
                work with flat directory resolvers you don't need to set all attributes of a dependency.
                See
                <a class="xref" href="#para:dependencies_with_empty_attributes">Section&nbsp;50.4.8, &ldquo;Optional attributes&rdquo;</a>
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:ivy_repositories"></a>50.6.7.&nbsp;Ivy repositories</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N1509B"></a>50.6.7.1.&nbsp;Defining an Ivy repository with a standard layout</h4></div></div></div><div class="example"><a name="ivyRepository"></a><p class="title"><b>Example&nbsp;50.34.&nbsp;Ivy repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N150A8"></a>50.6.7.2.&nbsp;Defining a named layout for an Ivy repository</h4></div></div></div><p>
                    You can specify that your repository conforms to the Ivy or Maven default layout by using a named layout.
                </p><div class="example"><a name="ivyRepository"></a><p class="title"><b>Example&nbsp;50.35.&nbsp;Ivy repository with named layout</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
        layout <span class="hl-string">"maven"</span>
    }
}</pre></div></div><br class="example-break"><p>
                    Valid named layout values are <code class="literal">'gradle'</code> (the default), <code class="literal">'maven'</code> and <code class="literal">'ivy'</code>.
                    See <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.IvyArtifactRepository.html#org.gradle.api.artifacts.repositories.IvyArtifactRepository:layout(java.lang.String, groovy.lang.Closure)" target="_top"><code class="classname">IvyArtifactRepository.layout()</code></a> for details of these named layouts.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N150C7"></a>50.6.7.3.&nbsp;Defining custom pattern layout for an Ivy repository</h4></div></div></div><p>To define an Ivy repository with a non-standard layout, you can define a 'pattern' layout for the repository:
                </p><div class="example"><a name="ivyRepository"></a><p class="title"><b>Example&nbsp;50.36.&nbsp;Ivy repository with pattern layout</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
        layout <span class="hl-string">"pattern"</span>, {
            artifact <span class="hl-string">"[module]/[revision]/[type]/[artifact].[ext]"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>To define an Ivy repository which fetches Ivy files and artifacts from different locations,
                    you can define separate patterns to use to locate the Ivy files and artifacts:
                </p><p>
                    Each <code class="literal">artifact</code> or <code class="literal">ivy</code> specified for a repository adds an <span class="emphasis"><em>additional</em></span> pattern to use.
                    The patterns are used in the order that they are defined.
                </p><div class="example"><a name="ivyRepository"></a><p class="title"><b>Example&nbsp;50.37.&nbsp;Ivy repository with multiple custom patterns</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
        layout <span class="hl-string">"pattern"</span>, {
            artifact <span class="hl-string">"3rd-party-artifacts/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"</span>
            artifact <span class="hl-string">"company-artifacts/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"</span>
            ivy <span class="hl-string">"ivy-files/[organisation]/[module]/[revision]/ivy.xml"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>Optionally, a repository with pattern layout can have its 'organisation' part laid out in Maven style, with
                    forward slashes replacing dots as separators. For example, the organisation <code class="literal">my.company</code> would then be represented as <code class="literal">my/company</code>.
                </p><div class="example"><a name="ivyRepository"></a><p class="title"><b>Example&nbsp;50.38.&nbsp;Ivy repository with Maven compatible layout</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
        layout <span class="hl-string">"pattern"</span>, {
            artifact <span class="hl-string">"[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"</span>
            m2compatible = true
        }
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N150FF"></a>50.6.7.4.&nbsp;Accessing password protected Ivy repositories</h4></div></div></div><p>To access an Ivy repository which uses basic authentication, you specify the username and password to use when you define the repository:
                </p><div class="example"><a name="ivyRepository"></a><p class="title"><b>Example&nbsp;50.39.&nbsp;Ivy repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        url <span class="hl-string">'http://repo.mycompany.com'</span>
        credentials {
            username <span class="hl-string">'user'</span>
            password <span class="hl-string">'password'</span>
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1510E"></a>50.6.8.&nbsp;Working with repositories</h3></div></div></div><p>To access a repository:</p><div class="example"><a name="defineRepository"></a><p class="title"><b>Example&nbsp;50.40.&nbsp;Accessing a repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">println repositories.localRepository.name
    println repositories[<span class="hl-string">'localRepository'</span>].name</pre></div></div><br class="example-break"><p>To configure a repository:</p><div class="example"><a name="defineRepository"></a><p class="title"><b>Example&nbsp;50.41.&nbsp;Configuration of a repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    flatDir {
        name <span class="hl-string">'localRepository'</span>
    }
}
repositories {
    localRepository {
        dirs <span class="hl-string">'lib'</span>
    }
}
repositories.localRepository {
    dirs <span class="hl-string">'lib'</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:more_about_ivy_resolvers"></a>50.6.9.&nbsp;More about Ivy resolvers</h3></div></div></div><p>Gradle, thanks to Ivy under its hood, is extremely flexible regarding repositories:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>There are many options for the protocol to communicate with the repository (e.g. filesystem, http, ssh, sftp ...)
                    </p></li><li class="listitem"><p>The protocol sftp currently only supports username/password-based authentication.
                    </p></li><li class="listitem"><p>Each repository can have its own layout.
                    </p></li></ul></div><p>Let's say, you declare a dependency on the <code class="literal">junit:junit:3.8.2</code> library.
                Now how does Gradle find it in the repositories? Somehow the dependency information has to be mapped to a
                path. In contrast to Maven, where this path is fixed, with Gradle you can define a pattern that defines
                what the path will look like. Here are some examples:
                <sup>[<a href="#ftn.N1513E" name="N1513E" class="footnote">16</a>]</sup>
            </p><pre class="programlisting">// Maven2 layout (if a repository is marked as Maven2 compatible, the organization (group) is split into subfolders according to the dots.)
someroot/[organisation]/[module]/[revision]/[module]-[revision].[ext]

// Typical layout for an Ivy repository (the organization is not split into subfolder)
someroot/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]

// Simple layout (the organization is not used, no nested folders.)
someroot/[artifact]-[revision].[ext]</pre><p>To add any kind of repository (you can pretty easy write your own ones) you can do:
            </p><div class="example"><a name="fileSystemResolver"></a><p class="title"><b>Example&nbsp;50.42.&nbsp;Definition of a custom repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    ivy {
        ivyPattern <span class="hl-string">"$projectDir/repo/[organisation]/[module]-ivy-[revision].xml"</span>
        artifactPattern <span class="hl-string">"$projectDir/repo/[organisation]/[module]-[revision](-[classifier]).[ext]"</span>
    }
}</pre></div></div><br class="example-break"><p>An overview of which Resolvers are offered by Ivy and thus also by Gradle can be found
                <a class="ulink" href="http://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html" target="_top">here</a>. With
                Gradle you just don't configure them via XML but directly via their API.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dependency_resolution"></a>50.7.&nbsp;How dependency resolution works</h2></div></div></div><p>Gradle takes your dependency declarations and repository definitions and attempts to download all of your dependencies by a process called <span class="emphasis"><em>dependency resolution</em></span>.
            Below is a brief outline of how this process works.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                    Given a required dependency, Gradle first attempts to resolve the <span class="emphasis"><em>module</em></span> for that dependency. Each repository is inspected in order, searching
                    first for a <span class="emphasis"><em>module descriptor</em></span> file (POM or Ivy file) that indicates the presence of that module. If no module descriptor is found,
                    Gradle will search for the presence of the primary <span class="emphasis"><em>module artifact</em></span> file indicating that the module exists in the repository.
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>If the dependency is declared as a dynamic version (like <code class="literal">1.+</code>), Gradle will resolve this to the newest available static version (like
                            <code class="literal">1.2</code>) in the repository. For Maven repositories, this is done using the <code class="literal">maven-metadata.xml</code>
                            file, while for Ivy repositories this is done by directory listing.
                        </p></li><li class="listitem"><p>If the module descriptor is a POM file that has a parent POM declared, Gradle will recursively attempt to resolve each of the parent modules for the POM.
                        </p></li></ul></div></li><li class="listitem"><p>Once each repository has been inspected for the module, Gradle will choose the 'best' one to use. This is done using the following criteria:
                    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">For a dynamic version, a 'higher' static version is preferred over a 'lower' version.</li><li class="listitem">Modules declared by a module descriptor file (Ivy or POM file) are preferred over modules that have an artifact file only.</li><li class="listitem">Modules from earlier repositories are preferred over modules in later repositories.</li></ul></div><p>
                </p><p>When the dependency is declared by a static version and a module descriptor file is found in a repository, there is no need to continue searching later
                    repositories and the remainder of the process is short-circuited.
                </p></li><li class="listitem"><p>All of the artifacts for the module are then requested from the <span class="emphasis"><em>same repository</em></span> that was chosen in the process above.
                </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15192"></a>50.8.&nbsp;Fine-tuning the dependency resolution process</h2></div></div></div><p>In most cases, Gradle's default dependency management will resolve the dependencies that you want in your build. In some cases, however, it can be necessary to tweak
            dependency resolution to ensure that your build receives exactly the right dependencies.
        </p><p>There are a number of ways that you can influence how Gradle resolves dependencies.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:forcing_modules"></a>50.8.1.&nbsp;Forcing a particular module version</h3></div></div></div><p>Forcing a module version tells Gradle to always use a specific version for given dependency (transitive or not), overriding any version specified in a
                published module descriptor. This can be very useful when tackling version conflicts - for more information see <a class="xref" href="#sub:version_conflicts">Section&nbsp;50.2.3, &ldquo;Resolve version conflicts&rdquo;</a>.
            </p><p>
                Force versions can also be used to deal with rogue metadata of transitive dependencies.
                If a transitive dependency has poor quality metadata that leads to problems at dependency resolution time, you can force Gradle to use a newer, fixed version of this dependency.
                For an example, see <a class="ulink" href="../dsl/org.gradle.api.artifacts.ResolutionStrategy.html" target="_top"><code class="classname">ResolutionStrategy</code></a>.
                Note that 'dependency resolve rules' (outlined below) provide a more powerful mechanism for replacing a broken module dependency. See <a class="xref" href="#sec:blacklisting_version">Section&nbsp;50.8.2.3, &ldquo;Blacklisting a particular version with a replacement&rdquo;</a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:dependency_resolve_rules"></a>50.8.2.&nbsp;Using dependency resolve rules</h3></div></div></div><p>A dependency resolve rule is executed for each resolved dependency, and offers a powerful api for manipulating a requested dependency prior to that dependency being resolved.
                This feature is <a class="link" href="#feature_lifecycle">incubating</a>, but currently offers the ability to change the group, name and/or version of a requested dependency,
                allowing a dependency to be substituted with a completely different module during resolution.
            </p><p>
                Dependency resolve rules provide a very powerful way to control the dependency resolution process, and can be used to implement all sorts of advanced
                patterns in dependency management. Some of these patterns are outlined below.
                For more information and code samples see <a class="ulink" href="../dsl/org.gradle.api.artifacts.ResolutionStrategy.html" target="_top"><code class="classname">ResolutionStrategy</code></a>.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:releasable_unit"></a>50.8.2.1.&nbsp;Modelling releaseable units</h4></div></div></div><p>Often an organisation publishes a set of libraries with a single version; where the libraries are built, tested and published together.
                    These libraries form a 'releasable unit', designed and intended to be used as a whole. It does not make sense to use libraries from different releasable units together.
                </p><p>
                    But it is easy for transitive dependency resolution to violate this contract. For example:
                    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">module-a</code> depends on <code class="literal">releasable-unit:part-one:1.0</code></li><li class="listitem"><code class="literal">module-b</code> depends on <code class="literal">releasable-unit:part-two:1.1</code></li></ul></div><p>
                    A build depending on both <code class="literal">module-a</code> and <code class="literal">module-b</code> will obtain different versions of libraries within the releasable unit.
                </p><p>
                    Dependency resolve rules give you the power to enforce releasable units in your build.
                    Imagine a releasable unit defined by all libraries that have 'org.gradle' group. We can force all of these libraries to use a consistent version:
                    </p><div class="example"><a name="releasable-unit"></a><p class="title"><b>Example&nbsp;50.43.&nbsp;Forcing consistent version for a group of libraries</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations.all {
    resolutionStrategy.eachDependency { DependencyResolveDetails details -&gt;
        <span class="hl-keyword">if</span> (details.requested.group == <span class="hl-string">'org.gradle'</span>) {
            details.useVersion <span class="hl-string">'1.4'</span>
        }
    }
}</pre></div></div><p><br class="example-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:custom_versioning_scheme"></a>50.8.2.2.&nbsp;Implement a custom versioning scheme</h4></div></div></div><p>
                    In some corporate environments, the list of module versions that can be declared in Gradle builds is maintained and audited externally.
                    Dependency resolve rules provide a neat implementation of this pattern:
                    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">In the build script, the developer declares dependencies with the module group and name, but uses a placeholder version, for example: '<code class="literal">default</code>'.</li><li class="listitem">The 'default' version is resolved to a specific version via a dependency resolve rule, which looks up the version in a corporate catalog of approved modules.</li></ul></div><p>

                    This rule implementation can be neatly encapsulated in a corporate plugin, and shared across all builds within the organisation.
                    </p><div class="example"><a name="custom-versioning-scheme"></a><p class="title"><b>Example&nbsp;50.44.&nbsp;Using a custom versioning scheme</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations.all {
    resolutionStrategy.eachDependency { DependencyResolveDetails details -&gt;
        <span class="hl-keyword">if</span> (details.requested.version == <span class="hl-string">'default'</span>) {
            def version = findDefaultVersionInCatalog(details.requested.group, details.requested.name)
            details.useVersion version
        }
    }
}

def findDefaultVersionInCatalog(String group, String name) {
    <span class="hl-comment">//some custom logic that resolves the default version into a specific version</span>
    <span class="hl-string">"1.0"</span>
}</pre></div></div><p><br class="example-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:blacklisting_version"></a>50.8.2.3.&nbsp;Blacklisting a particular version with a replacement</h4></div></div></div><p>
                    Dependency resolve rules provide a mechanism for blacklisting a particular version of a dependency and providing a replacement version.
                    This can be useful if a certain dependency version is broken and should not be used,
                    where a dependency resolve rule causes this version to be replaced with a known good version.
                    One example of a broken module is one that declares a dependency on a library that cannot be found in any of the public repositories,
                    but there are many other reasons why a particular module version is unwanted and a different version is preferred.
                </p><p>
                    In example below, imagine that version <code class="literal">1.2.1</code> contains important fixes and should always be used in preference to <code class="literal">1.2</code>.
                    The rule provided will enforce just this: any time version <code class="literal">1.2</code> is encountered it will be replaced with <code class="literal">1.2.1</code>.
                    Note that this is different from a forced version as described above, in that any other versions of this module would not be affected.
                    This means that the 'newest' conflict resolution strategy would still select version <code class="literal">1.3</code> if this version was also pulled transitively.
                    </p><div class="example"><a name="blacklisting_version"></a><p class="title"><b>Example&nbsp;50.45.&nbsp;Blacklisting a version with a replacement</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations.all {
    resolutionStrategy.eachDependency { DependencyResolveDetails details -&gt;
        <span class="hl-keyword">if</span> (details.requested.group == <span class="hl-string">'org.software'</span> &amp;&amp; details.requested.name == <span class="hl-string">'some-library'</span> &amp;&amp; details.requested.version == <span class="hl-string">'1.2'</span>) {
            <span class="hl-comment">//prefer different version which contains some necessary fixes</span>
            details.useVersion <span class="hl-string">'1.2.1'</span>
        }
    }
}</pre></div></div><p><br class="example-break">
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:module_substitution"></a>50.8.2.4.&nbsp;Substituting a dependency module with a compatible replacement</h4></div></div></div><p>At times a completely different module can serve as a replacement for a requested module dependency.
                    Examples include using '<code class="literal">groovy</code>' in place of '<code class="literal">groovy-all</code>', or using '<code class="literal">log4j-over-slf4j</code>' instead of '<code class="literal">log4j</code>'.
                    Starting with Gradle 1.5 you can make these substitutions using dependency resolve rules:
                    </p><div class="example"><a name="module_substitution"></a><p class="title"><b>Example&nbsp;50.46.&nbsp;Changing dependency group and/or name at the resolution</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations.all {
    resolutionStrategy.eachDependency { DependencyResolveDetails details -&gt;
        <span class="hl-keyword">if</span> (details.requested.name == <span class="hl-string">'groovy-all'</span>) {
            <span class="hl-comment">//prefer 'groovy' over 'groovy-all':</span>
            details.useTarget group: details.requested.group, name: <span class="hl-string">'groovy'</span>, version: details.requested.version
        }
        <span class="hl-keyword">if</span> (details.requested.name == <span class="hl-string">'log4j'</span>) {
            <span class="hl-comment">//prefer 'log4j-over-slf4j' over 'log4j', with fixed version:</span>
            details.useTarget <span class="hl-string">"org.slf4j:log4j-over-slf4j:1.7.5"</span>
        }
    }
}</pre></div></div><p><br class="example-break">
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ivy_dynamic_resolve_mode"></a>50.8.3.&nbsp;Enabling Ivy dynamic resolve mode</h3></div></div></div><p>
                Gradle's Ivy repository implementations support the equivalent to Ivy's dynamic resolve mode. Normally, Gradle will use the <code class="literal">rev</code> attribute for each dependency
                definition included in an <code class="filename">ivy.xml</code> file. In dynamic resolve mode, Gradle will instead prefer the <code class="literal">revConstraint</code> attribute over the
                <code class="literal">rev</code> attribute for a given dependency definition. If the <code class="literal">revConstraint</code> attribute is not present, the <code class="literal">rev</code> attribute is used
                instead.
            </p><p>To enable dynamic resolve mode, you need to set the appropriate option on the repository definition. A couple of examples are shown below. Note that dynamic resolve mode is only
                available for Gradle's Ivy repositories. It is not available for Maven repositories, or custom Ivy <code class="classname">DependencyResolver</code> implementations.</p><div class="example"><a name="dynamicResolveMode"></a><p class="title"><b>Example&nbsp;50.47.&nbsp;Enabling dynamic resolve mode</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Can enable dynamic resolve mode when you define the repository</span>
repositories {
    ivy {
        url <span class="hl-string">"http://repo.mycompany.com/repo"</span>
        resolve.dynamicMode = true
    }
}

<span class="hl-comment">// Can use a rule instead to enable (or disable) dynamic resolve mode for all repositories</span>
repositories.withType(IvyArtifactRepository) {
    resolve.dynamicMode = true
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="component_metadata_rules"></a>50.8.4.&nbsp;Component metadata rules</h3></div></div></div><p>Each module (also called <span class="emphasis"><em>component</em></span>) has metadata associated with it, such as its group, name, version, dependencies, and so on.
                This metadata typically originates in the module's descriptor. Metadata rules allow certain parts of a module's metadata to be manipulated
                from within the build script. They take effect after a module's descriptor has been downloaded, but before it has been selected among all candidate versions.
                This makes metadata rules another instrument for customizing dependency resolution.
            </p><p>
                One piece of module metadata that Gradle understands is a module's <span class="emphasis"><em>status scheme</em></span>. This concept, also known from Ivy, models the different
                levels of maturity that a module transitions through over time. The default status scheme, ordered from least to most mature status, is <code class="literal">integration</code>,
                <code class="literal">milestone</code>, <code class="literal">release</code>. Apart from a status scheme, a module also has a (current) <span class="emphasis"><em>status</em></span>, which must be one of
                the values in its status scheme. If not specified in the (Ivy) descriptor, the status defaults to <code class="literal">integration</code> for Ivy modules and Maven snapshot modules,
                and <code class="literal">release</code> for Maven modules that aren't snapshots.
            </p><p>
                A module's status and status scheme are taken into consideration when a <code class="literal">latest</code> version selector is resolved. Specifically, <code class="literal">latest.someStatus</code>
                will resolve to the highest module version that has status <code class="literal">someStatus</code> or a more mature status. For example, with the default status scheme in place,
                <code class="literal">latest.integration</code> will select the highest module version regardless of its status (because <code class="literal">integration</code> is the least mature status),
                whereas <code class="literal">latest.release</code> will select the highest module version with status <code class="literal">release</code>. Here is what this looks like in code:
            </p><div class="example"><a name="latestSelector"></a><p class="title"><b>Example&nbsp;50.48.&nbsp;'Latest' version selector</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    config1 <span class="hl-string">"sea.fish:tuna:latest.integration"</span>
    config2 <span class="hl-string">"sea.fish:tuna:latest.release"</span>
}

task listFish &lt;&lt; {
    configurations.config1.each { println it.name }
    println()
    configurations.config2.each { println it.name}
}</pre><p>Output of <strong class="userinput"><code>gradle -q listFish</code></strong></p><pre class="screen">&gt; gradle -q listFish
tuna-1.5.jar

tuna-1.4.jar</pre></div></div><br class="example-break"><p>
                The next example demonstrates <code class="literal">latest</code> selectors based on a custom status scheme declared in a module metadata rule:
            </p><div class="example"><a name="customStatusScheme"></a><p class="title"><b>Example&nbsp;50.49.&nbsp;Custom status scheme</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">dependencies {
    config3 <span class="hl-string">"air.birds:albatros:latest.silver"</span>
    components {
        eachComponent { ComponentMetadataDetails details -&gt;
            <span class="hl-keyword">if</span> (details.id.group == <span class="hl-string">"air.birds"</span>) {
                details.statusScheme = [<span class="hl-string">"bronze"</span>, <span class="hl-string">"silver"</span>, <span class="hl-string">"gold"</span>, <span class="hl-string">"platinum"</span>]
            }
        }
    }
}

task listBirds &lt;&lt; {
    configurations.config3.each { println it.name }
}</pre><p>Output of <strong class="userinput"><code>gradle -q listBirds</code></strong></p><pre class="screen">&gt; gradle -q listBirds
albatros-2.0.jar</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dependency_cache"></a>50.9.&nbsp;The dependency cache</h2></div></div></div><p>Gradle contains a highly sophisticated dependency caching mechanism, which seeks to minimise the number of remote requests made in
            dependency resolution, while striving to guarantee that the results of dependency resolution are correct and reproducible.
        </p><p>
            The Gradle dependency cache consists of 2 key types of storage:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A file-based store of downloaded artifacts, including binaries like jars as well as raw downloaded meta-data like POM files and Ivy files.
                    The storage path for a downloaded artifact includes the SHA1 checksum, meaning that 2 artifacts with the same name but different content can easily be cached.
                </p></li><li class="listitem"><p>A binary store of resolved module meta-data, including the results of resolving dynamic versions, module descriptors, and artifacts.</p></li></ul></div><p>Separating the storage of downloaded artifacts from the cache metadata permits us to do some very powerful things with our cache that would be difficult with a transparent,
            file-only cache layout.
        </p><p>The Gradle cache does not allow the local cache to hide problems and creating mysterious and difficult to debug behavior
            that has been a challenge with many build tools. This new behavior is implemented in a bandwidth and storage efficient way.
            In doing so, Gradle enables reliable and reproducible enterprise builds.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:cache_features"></a>50.9.1.&nbsp;Key features of the Gradle dependency cache</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_metadata"></a>50.9.1.1.&nbsp;Separate metadata cache</h4></div></div></div><p>
                    Gradle keeps a record of various aspects of dependency resolution in binary format in the metadata cache.
                    The information stored in the metadata cache includes:
                    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The result of resolving a dynamic version (e.g. <code class="literal">1.+</code>) to a concrete version (e.g. <code class="literal">1.2</code>).</li><li class="listitem">The resolved module metadata for a particular module, including module artifacts and module dependencies.</li><li class="listitem">The resolved artifact metadata for a particular artifact, including a pointer to the downloaded artifact file.</li><li class="listitem">The
                            <span class="emphasis"><em>absence</em></span>
                            of a particular module or artifact in a particular repository,
                            eliminating repeated attempts to access a resource that does not exist.
                        </li></ul></div><p>
                    Every entry in the metadata cache includes a record of the repository that provided the information as well as a timestamp that can be used for cache expiry.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_repository_independence"></a>50.9.1.2.&nbsp;Repository caches are independent</h4></div></div></div><p>As described above, for each repository there is a separate metadata cache. A repository is identified by its URL, type and layout.
                    If a module or artifact has not been previously resolved from <span class="emphasis"><em>this repository</em></span>, Gradle will attempt to resolve the module
                    against the repository. This will always involve a remote lookup on the repository, however in many cases no download will be required (see<a class="xref" href="#sub:cache_artifact_reuse">Section&nbsp;50.9.1.3, &ldquo;Artifact reuse&rdquo;</a>, below).
                </p><p>Dependency resolution will fail if the required artifacts are not available in any repository specified by the build,
                    regardless whether the local cache has retrieved this artifact from a different repository.
                    Repository independence allows builds to be isolated from each other in an advanced way that no build tool has done before.
                    This is a key feature to create builds that are reliable and reproducible in any environment.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_artifact_reuse"></a>50.9.1.3.&nbsp;Artifact reuse</h4></div></div></div><p>Before downloading an artifact, Gradle tries to determine the checksum of the required artifact by downloading the sha file associated
                    with that artifact. If the checksum can be retrieved, an artifact is not downloaded if an artifact already exists with the same id and checksum.
                    If the checksum cannot be retrieved from the remote server, the artifact will be downloaded (and ignored if it matches an existing artifact).
                </p><p>As well as considering artifacts downloaded from a different repository, Gradle will also attempt to reuse artifacts found in the local Maven Repository.
                    If a candidate artifact has been downloaded by Maven, Gradle will use this artifact if it can be verified to match the checksum declared by the remote server.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_checksum_storage"></a>50.9.1.4.&nbsp;Checksum based storage</h4></div></div></div><p>
                    It is possible for different repositories to provide a different binary artifact in response to the same artifact identifier. This is often the case with Maven SNAPSHOT
                    artifacts, but can also be true for any artifact which is republished without changing it's identifier.
                    By caching artifacts based on their SHA1 checksum, Gradle is able to maintain multiple versions of the same artifact. This means that when resolving against
                    one repository Gradle will never overwrite the cached artifact file from a different repository. This is done without requiring a separate artifact file store per repository.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_locking"></a>50.9.1.5.&nbsp;Cache Locking</h4></div></div></div><p>
                    The Gradle dependency cache uses file-based locking to ensure that it can safely be used by multiple Gradle processes concurrently. The lock is held whenever the binary
                    meta-data store is being read or written, but is released for slow operations such as downloading remote artifacts.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:cache_command_line_options"></a>50.9.2.&nbsp;Command line options to override caching</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_offline"></a>50.9.2.1.&nbsp;Offline</h4></div></div></div><p>The <code class="literal">--offline</code>
                    command line switch tells Gradle to always use dependency modules from the cache, regardless if they are due to be checked again.
                    When running with offline, Gradle will never attempt to access the network to perform dependency resolution.
                    If required modules are not present in the dependency cache, build execution will fail.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:cache_refresh"></a>50.9.2.2.&nbsp;Refresh</h4></div></div></div><p>At times, the Gradle Dependency Cache can be out of sync with the actual state of the configured repositories. Perhaps a repository was initially misconfigured,
                    or perhaps a "non-changing" module was published incorrectly. To refresh all dependencies in the dependency cache, use the
                    <code class="literal">--refresh-dependencies</code> option on the command line.
                </p><p>The <code class="literal">--refresh-dependencies</code> option tells Gradle to ignore all cached entries for resolved modules and artifacts.
                    A fresh resolve will be performed against all configured repositories, with dynamic versions recalculated, modules refreshed, and artifacts downloaded.
                    However, where possible Gradle will check if the previously downloaded artifacts are valid before downloading again.
                    This is done by comparing published SHA1 values in the repository with the SHA1 values for existing downloaded artifacts.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:controlling_caching"></a>50.9.3.&nbsp;Fine-tuned control over dependency caching</h3></div></div></div><p>You can fine-tune certain aspects of caching using the
                <code class="literal">ResolutionStrategy</code>
                for a configuration.
            </p><p>By default, Gradle caches dynamic versions for 24 hours. To change how long Gradle will cache the resolved version for a dynamic version, use:
            </p><div class="example"><a name="dynamic-version-cache-control"></a><p class="title"><b>Example&nbsp;50.50.&nbsp;Dynamic version cache control</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations.all {
    resolutionStrategy.cacheDynamicVersionsFor <span class="hl-number">10</span>, <span class="hl-string">'minutes'</span>
}</pre></div></div><br class="example-break"><p>By default, Gradle caches changing modules for 24 hours. To change how long Gradle will cache the meta-data and artifacts for a changing module, use:
            </p><div class="example"><a name="changing-module-cache-control"></a><p class="title"><b>Example&nbsp;50.51.&nbsp;Changing module cache control</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations.all {
    resolutionStrategy.cacheChangingModulesFor <span class="hl-number">4</span>, <span class="hl-string">'hours'</span>
}</pre></div></div><br class="example-break"><p>For more details, take a look at the API documentation for<a class="ulink" href="../dsl/org.gradle.api.artifacts.ResolutionStrategy.html" target="_top"><code class="classname">ResolutionStrategy</code></a>.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:strategies_of_transitive_dependency_management"></a>50.10.&nbsp;Strategies for transitive dependency management</h2></div></div></div><p>Many projects rely on the <a class="ulink" href="http://repo1.maven.org/maven2" target="_top">Maven Central repository</a>. This is not without problems.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The Maven Central repository can be down or has a very long response time.
                </p></li><li class="listitem"><p>The POM files of many projects have wrong information (as one example, the POM of <code class="literal">commons-httpclient-3.0</code>
                    declares JUnit as a runtime dependency).
                </p></li><li class="listitem"><p>For many projects there is not one right set of dependencies (as more or less imposed by the POM format).
                </p></li></ul></div><p>If your project relies on the Maven Central repository you are likely to need an additional custom repository,
            because:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You might need dependencies that are not uploaded to Maven Central yet.
                </p></li><li class="listitem"><p>You want to deal properly with wrong metadata in a Maven Central POM file.
                </p></li><li class="listitem"><p>You don't want to expose people who want to build your project, to the downtimes or sometimes very long response times of Maven Central.
                </p></li></ul></div><p>It is not a big deal to set-up a custom repository.
            <sup>[<a href="#ftn.N1537C" name="N1537C" class="footnote">17</a>]</sup>
            But it can be tedious, to keep it up to date. For a new version, you have always to create the new XML
            descriptor and the directories. And your custom repository is another infrastructure element which might
            have downtimes and needs to be updated. To enable historical builds, you need to keep all the past
            libraries and you need a backup. It is another layer of indirection. Another source of information
            you have to lookup. All this is not really a big deal but in its sum it has an impact. Repository Manager like
            Artifactory or Nexus make this easier. But for example open source projects don't usually have a host for those products.
            This is changing with new services like <a class="ulink" href="http://bintray.com" target="_top">Bintray</a> that let developers host and
            distribute their release binaries using a self-service repository platform. Bintray also supports sharing approved artifacts
            though the <a class="ulink" href="http://jcenter.bintray.com" target="_top">JCenter</a> public repository to provide a single resolution address for
            all popular OSS java artifacts (see <a class="xref" href="#sub:maven_jcenter">Section&nbsp;50.6.3, &ldquo;Maven JCenter repository&rdquo;</a>).
        </p><p>This is a reason why some projects prefer to store their libraries in their version control system. This
            approach is fully supported by Gradle. The libraries can be stored in a flat directory without any XML module
            descriptor files. Yet Gradle offers complete transitive dependency management. You can use either client module
            dependencies to express the dependency relations, or artifact dependencies in case a first level dependency has no
            transitive dependencies. People can check out such a project from svn and have everything necessary to build it.
        </p><p>If you are working with a distributed version control system like Git you probably don't want to
            use the version control system to store libraries as people check out the whole history. But even here the flexibility
            of Gradle can make your life easier. For example you can use a shared flat directory without XML descriptors and
            yet you can have full transitive dependency management as described above.
        </p><p>You could also have a mixed strategy. If your main concern is bad metadata in the POM file and maintaining custom XML descriptors,
            <span class="emphasis"><em>Client Modules</em></span> offer an alternative. But you can of course still use Maven2 repo and your custom repository as a repository for
            <span class="emphasis"><em>jars only</em></span> and still enjoy <span class="emphasis"><em>transitive</em></span> dependency management. Or you can only provide client modules for POMs with bad metadata. For the
            jars and the correct POMs you still use the remote repository.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:implicit_transitive_dependencies"></a>50.10.1.&nbsp;Implicit transitive dependencies</h3></div></div></div><p>There is another way to deal with transitive dependencies <span class="emphasis"><em>without</em></span> XML descriptor files. You can do this with Gradle, but we don't recommend it.
                We mention it for the sake of completeness and comparison with other build tools.
            </p><p>The trick is to use only artifact dependencies and group them in lists. That way you have somehow
                expressed, what are your first level dependencies and what are transitive dependencies (see <a class="xref" href="#para:notation_collections">Section&nbsp;50.4.8, &ldquo;Optional attributes&rdquo;</a>).
                But the draw-back is, that for the Gradle dependency management all dependencies are considered first level dependencies. The
                dependency reports don't show your real dependency graph and the <code class="literal">compile</code>
                task uses all dependencies, not just the first level dependencies. All in all, your build is less
                maintainable and reliable than it could be when using client modules. And you don't gain anything.
            </p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N14D1D" name="ftn.N14D1D" class="para">14</a>] </sup>Gradle supports partial multiproject builds (see <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>).</p></div><div class="footnote"><p><sup>[<a href="#N14D3B" name="ftn.N14D3B" class="para">15</a>] </sup>
                            <a class="ulink" href="http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-project-relationships.html" target="_top">http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-project-relationships.html</a>
                        </p></div><div class="footnote"><p><sup>[<a href="#N1513E" name="ftn.N1513E" class="para">16</a>] </sup>At <a class="ulink" href="http://ant.apache.org/ivy/history/latest-milestone/concept.html" target="_top">http://ant.apache.org/ivy/history/latest-milestone/concept.html</a> you can learn more about ivy patterns.
                    </p></div><div class="footnote"><p><sup>[<a href="#N1537C" name="ftn.N1537C" class="para">17</a>] </sup>If you want to shield your project from the downtimes of Maven Central things get more complicated. You
                    probably want to set-up a repository proxy for this. In an enterprise environment this is rather
                    common. For an open source project it looks like overkill.
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="artifact_management"></a>Chapter&nbsp;51.&nbsp;Publishing artifacts</h1></div></div></div><div class="note"><p>
            This chapter describes the <span class="emphasis"><em>original</em></span> publishing mechanism available in Gradle 1.0: in Gradle 1.3 a new mechanism for publishing was introduced.
            While this new mechanism is <a class="link" href="#feature_lifecycle">incubating</a> and not yet complete, it introduces some new concepts and features that do (and will) make Gradle publishing even more powerful.
        </p><p>
            You can read about the new publishing plugins in <a class="xref" href="#publishing_ivy">Chapter&nbsp;64, <i>Ivy Publishing (new)</i></a> and <a class="xref" href="#publishing_maven">Chapter&nbsp;65, <i>Maven Publishing (new)</i></a>. Please try them out and give us feedback.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N153C3"></a>51.1.&nbsp;Introduction</h2></div></div></div><p>This chapter is about how you declare the outgoing artifacts of your project, and how to work with
            them (e.g. upload them). We define the artifacts of the projects as the files the project provides to the
            outside world. This might be a library or a ZIP distribution or any other file. A project can publish as many artifacts as it wants.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="artifacts_and_configurations"></a>51.2.&nbsp;Artifacts and configurations</h2></div></div></div><p>Like dependencies, artifacts are grouped by configurations. In fact, a configuration can contain
            both artifacts and dependencies at the same time.
        </p><p>For each configuration in your project, Gradle provides the tasks <code class="literal">upload<em class="replaceable"><code>ConfigurationName</code></em></code> and
        <code class="literal">build<em class="replaceable"><code>ConfigurationName</code></em></code>.
        <sup>[<a href="#ftn.N153DA" name="N153DA" class="footnote">18</a>]</sup>
        Execution of these tasks will build or upload the artifacts belonging to the respective configuration.
        </p><p>Table <a class="xref" href="#tab:configurations" title="Table&nbsp;23.5.&nbsp;Java plugin - dependency configurations">Table&nbsp;23.5, &ldquo;Java plugin - dependency configurations&rdquo;</a> shows the configurations added by the Java plugin. Two of the
        configurations are relevant for the usage with artifacts. The <code class="code">archives</code> configuration is the standard
        configuration to assign your artifacts to. The Java plugin automatically assigns the default jar to this
        configuration. We will talk more about the <code class="code">runtime</code> configuration in <a class="xref" href="#project_libraries">Section&nbsp;51.5, &ldquo;More about project libraries&rdquo;</a>.
        As with dependencies, you can declare as many custom configurations as you like and assign artifacts to them.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N153EC"></a>51.3.&nbsp;Declaring artifacts</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N153EF"></a>51.3.1.&nbsp;Archive task artifacts</h3></div></div></div><p>You can use an archive task to define an artifact:</p><div class="example"><a name="archiveTaskArtifact"></a><p class="title"><b>Example&nbsp;51.1.&nbsp;Defining an artifact using an archive task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task myJar(type: Jar)

artifacts {
    archives myJar
}</pre></div></div><br class="example-break"><p>It is important to note that the custom archives you are creating as part of your build are not
            automatically assigned to any configuration. You have to explicitly do this assignment.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15400"></a>51.3.2.&nbsp;File artifacts</h3></div></div></div><p>You can also use a file to define an artifact:</p><div class="example"><a name="fileArtifact"></a><p class="title"><b>Example&nbsp;51.2.&nbsp;Defining an artifact using a file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">def someFile = file(<span class="hl-string">'build/somefile.txt'</span>)

artifacts {
    archives someFile
}</pre></div></div><br class="example-break"><p>Gradle will figure out the properties of the artifact based on the name of the file. You can customize these properties:</p><div class="example"><a name="fileArtifact"></a><p class="title"><b>Example&nbsp;51.3.&nbsp;Customizing an artifact</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task myTask(type:  MyTaskType) {
    destFile = file(<span class="hl-string">'build/somefile.txt'</span>)
}

artifacts {
    archives(myTask.destFile) {
        name <span class="hl-string">'my-artifact'</span>
        type <span class="hl-string">'text'</span>
        builtBy myTask
    }
}</pre></div></div><br class="example-break"><p>There is a map-based syntax for defining an artifact using a file. The map must include a <code class="literal">file</code> entry that
                defines the file. The map may include other artifact properties:
            </p><div class="example"><a name="fileArtifact"></a><p class="title"><b>Example&nbsp;51.4.&nbsp;Map syntax for defining an artifact using a file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task generate(type:  MyTaskType) {
    destFile = file(<span class="hl-string">'build/somefile.txt'</span>)
}

artifacts {
    archives file: generate.destFile, name: <span class="hl-string">'my-artifact'</span>, type: <span class="hl-string">'text'</span>, builtBy: generate
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1542A"></a>51.4.&nbsp;Publishing artifacts</h2></div></div></div><p>We have said that there is a specific upload task for each configuration. But before you can do an upload,
            you have to configure the upload task and define where to publish the artifacts to. The repositories you have defined (as described
            in <a class="xref" href="#sec:repositories">Section&nbsp;50.6, &ldquo;Repositories&rdquo;</a>) are not automatically used for uploading. In fact, some of those repositories allow only for artifact downloading.
            Here is an example how you can configure the upload task of a configuration:
        </p><div class="example"><a name="uploading"></a><p class="title"><b>Example&nbsp;51.5.&nbsp;Configuration of the upload task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    flatDir {
        name <span class="hl-string">"fileRepo"</span>
        dirs <span class="hl-string">"repo"</span>
    }
}

uploadArchives {
    repositories {
        add project.repositories.fileRepo
        ivy {
            credentials {
                username <span class="hl-string">"username"</span>
                password <span class="hl-string">"pw"</span>
            }
            url <span class="hl-string">"http://repo.mycompany.com"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>As you can see, you can either use a reference to an existing repository or create a new repository.
        As described in <a class="xref" href="#sub:more_about_ivy_resolvers">Section&nbsp;50.6.9, &ldquo;More about Ivy resolvers&rdquo;</a>, you can use all the Ivy resolvers suitable
        for the purpose of uploading.
        </p><p>If an upload repository is defined with multiple patterns, Gradle must choose a pattern to use for uploading each file.
            By default, Gradle will upload to the pattern defined by the <code class="literal">url</code> parameter, combined with the optional <code class="literal">layout</code> parameter.
            If no <code class="literal">url</code> parameter is supplied, then Gradle will use the first defined <code class="literal">artifactPattern</code> for uploading,
            or the first defined <code class="literal">ivyPattern</code> for uploading Ivy files, if this is set.
        </p><p>Uploading to a Maven repository is described in <a class="xref" href="#uploading_to_maven_repositories">Section&nbsp;52.6, &ldquo;Interacting with Maven repositories&rdquo;</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="project_libraries"></a>51.5.&nbsp;More about project libraries</h2></div></div></div><p>If your project is supposed to be used as a library, you need to define what are the artifacts of this library
            and what are the dependencies of these artifacts. The Java plugin adds a <code class="code">runtime</code> configuration for
            this purpose, with the implicit assumption that the <code class="code">runtime</code> dependencies are the dependencies of
            the artifact you want to publish. Of course this is fully customizable. You can add your own custom configuration or let the
            existing configurations extend from other configurations. You might have different group of artifacts which have
            a different set of dependencies. This mechanism is very powerful and flexible.
            </p><p>If someone wants to use your project as a library, she simply needs to declare on which configuration of
            the dependency to depend on.
            A Gradle dependency offers the <code class="code">configuration</code> property to declare this. If this
            is not specified, the <code class="code">default</code> configuration is used (see <a class="xref" href="#sec:dependency_configurations">Section&nbsp;50.4.9, &ldquo;Dependency configurations&rdquo;</a>).
            Using your project as a library
            can either happen from within a multi-project build or by retrieving your project from a repository. In
            the latter case, an <code class="filename">ivy.xml</code> descriptor in the repository is supposed to contain all the necessary information. If you
            work with Maven repositories you don't have the flexibility as described above. For how to publish to a Maven
            repository, see the section <a class="xref" href="#uploading_to_maven_repositories">Section&nbsp;52.6, &ldquo;Interacting with Maven repositories&rdquo;</a>.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N153DA" name="ftn.N153DA" class="para">18</a>] </sup>To be exact, the Base plugin provides those tasks. This plugin is automatically applied if you use
        the Java plugin.</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="maven_plugin"></a>Chapter&nbsp;52.&nbsp;The Maven Plugin</h1></div></div></div><div class="note"><p>This chapter is a work in progress</p></div><p>The Maven plugin adds support for deploying artifacts to Maven repositories.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1547F"></a>52.1.&nbsp;Usage</h2></div></div></div><p>To use the Maven plugin, include in your build script:</p><div class="example"><a name="useMavenPlugin"></a><p class="title"><b>Example&nbsp;52.1.&nbsp;Using the Maven plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'maven'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1548E"></a>52.2.&nbsp;Tasks</h2></div></div></div><p>The Maven plugin defines the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;52.1.&nbsp;Maven plugin - tasks</b></p><div class="table-contents"><table id="N15493"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">install</code>
                </td>
                <td>
                    All tasks that build the associated archives.
                </td>
                <td><a class="ulink" href="../dsl/org.gradle.api.tasks.Upload.html" target="_top"><code class="classname">Upload</code></a></td>
                <td>Installs the associated artifacts to the local Maven cache, including Maven metadata generation.
                By default the install task is associated with the <code class="literal">archives</code> configuration. This
                configuration has by default only the default jar as an element. To learn more about installing to the
                local repository, see: <a class="xref" href="#sub:installing_to_the_local_repository">Section&nbsp;52.6.3, &ldquo;Installing to the local repository&rdquo;</a></td>
            </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N154BE"></a>52.3.&nbsp;Dependency management</h2></div></div></div><p>The Maven plugin does not define any dependency configurations.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N154C3"></a>52.4.&nbsp;Convention properties</h2></div></div></div><p>The Maven plugin defines the following convention properties:</p><div class="table"><p class="title"><b>Table&nbsp;52.2.&nbsp;Maven plugin - properties</b></p><div class="table-contents"><table id="N154C8"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">pomDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">poms</code>
                </td>
                <td>
                    The path of the directory to write the generated POMs, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">pomDir</code>
                </td>
                <td>
                    <code class="classname">File (read-only)</code>
                </td>
                <td>
                    <code class="literal"><em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>pomDirName</code></em></code>
                </td>
                <td>
                    The directory where the generated POMs are written to.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">conf2ScopeMappings</code>
                </td>
                <td>
                    <code class="classname"><a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/Conf2ScopeMappingContainer.html" target="_top"><code class="classname">Conf2ScopeMappingContainer</code></a></code>
                </td>
                <td>
                    <code class="literal">n/a</code>
                </td>
                <td>
                    Instructions for mapping Gradle configurations to Maven scopes. See <a class="xref" href="#sub:dependency_mapping">Section&nbsp;52.6.4.2, &ldquo;Dependency mapping&rdquo;</a>.
                </td>
            </tr></table></div></div><p>These properties are provided by a <a class="ulink" href="../dsl/org.gradle.api.plugins.MavenPluginConvention.html" target="_top"><code class="classname">MavenPluginConvention</code></a>
            convention object.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15530"></a>52.5.&nbsp;Convention methods</h2></div></div></div><p>The maven plugin provides a factory method for creating a POM. This is useful if you need a POM
        without the context of uploading to a Maven repo.</p><div class="example"><a name="newPom"></a><p class="title"><b>Example&nbsp;52.2.&nbsp;Creating a stand alone pom.</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task writeNewPom &lt;&lt; {
    pom {
        project {
            inceptionYear <span class="hl-string">'2008'</span>
            licenses {
                license {
                    name <span class="hl-string">'The Apache Software License, Version 2.0'</span>
                    url <span class="hl-string">'http://www.apache.org/licenses/LICENSE-2.0.txt'</span>
                    distribution <span class="hl-string">'repo'</span>
                }
            }
        }
    }.writeTo(<span class="hl-string">"$buildDir/newpom.xml"</span>)
}</pre></div></div><br class="example-break"><p>Amongst other things, Gradle supports the same builder syntax as polyglot Maven. To learn more about the Gradle Maven POM object, see
            <a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/MavenPom.html" target="_top"><code class="classname">MavenPom</code></a>. See also: <a class="ulink" href="../dsl/org.gradle.api.plugins.MavenPluginConvention.html" target="_top"><code class="classname">MavenPluginConvention</code></a>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="uploading_to_maven_repositories"></a>52.6.&nbsp;Interacting with Maven repositories</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:introduction"></a>52.6.1.&nbsp;Introduction</h3></div></div></div><p>With Gradle you can deploy to remote Maven repositories or install to your local Maven repository. This
                includes all Maven metadata manipulation and works also for Maven snapshots. In fact, Gradle's deployment is
                100 percent Maven compatible as we use the native Maven Ant tasks under the hood.
            </p><p>Deploying to a Maven repository is only half the fun if you don't have a POM. Fortunately Gradle can
                generate this POM for you using the dependency information it has.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:deploying_to_a_maven_repository"></a>52.6.2.&nbsp;Deploying to a Maven repository</h3></div></div></div><p>Let's assume your project produces just the default jar file. Now you want to deploy this jar file to
                a remote Maven repository.
            </p><div class="example"><a name="uploadFile"></a><p class="title"><b>Example&nbsp;52.3.&nbsp;Upload of file to remote Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'maven'</span>

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>That is all. Calling the
                <code class="literal">uploadArchives</code>
                task will generate the POM and deploys the artifact and the POM to the specified repository.
            </p><p>There is some more work to do if you need support for other protocols than <code class="literal">file</code>. In
                this case the native Maven code we delegate to needs additional libraries. Which libraries depend on the
                protocol you need. The available protocols and the corresponding libraries are listed in <a class="xref" href="#wagonLibs" title="Table&nbsp;52.3.&nbsp;Protocol jars for Maven deployment">Table&nbsp;52.3, &ldquo;Protocol jars for Maven deployment&rdquo;</a> (those libraries have again transitive dependencies which have transitive
                dependencies).
                <sup>[<a href="#ftn.N15574" name="N15574" class="footnote">19</a>]</sup>
                For example to use the ssh protocol you can do:
            </p><div class="example"><a name="uploadWithSsh"></a><p class="title"><b>Example&nbsp;52.4.&nbsp;Upload of file via SSH</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    deployerJars
}

repositories {
    mavenCentral()
}

dependencies {
    deployerJars <span class="hl-string">"org.apache.maven.wagon:wagon-ssh:2.2"</span>
}

uploadArchives {
    repositories.mavenDeployer {
        configuration = configurations.deployerJars
        repository(url: <span class="hl-string">"scp://repos.mycompany.com/releases"</span>) {
            authentication(userName: <span class="hl-string">"me"</span>, password: <span class="hl-string">"myPassword"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>There are many configuration options for the Maven deployer. The configuration is done via a Groovy builder.
                All the elements of this tree are Java beans. To configure the simple attributes you pass a map to the bean
                elements. To add another bean elements to its parent, you use a closure. In the example above <span class="emphasis"><em>repository</em></span>
                and <span class="emphasis"><em>authentication</em></span> are such bean elements. <a class="xref" href="#deployerConfig" title="Table&nbsp;52.4.&nbsp;Configuration elements of the MavenDeployer">Table&nbsp;52.4, &ldquo;Configuration elements of the MavenDeployer&rdquo;</a>
                lists the available bean elements and a link to the javadoc of the corresponding class. In the javadoc you
                can see the possible attributes you can set for a particular element.
            </p><p>In Maven you can define repositories and optionally snapshot repositories. If no snapshot repository
                is defined, releases and snapshots are both deployed to the
                <code class="literal">repository</code>
                element. Otherwise snapshots are deployed to the
                <code class="literal">snapshotRepository</code>
                element.
            </p><div class="table"><p class="title"><b>Table&nbsp;52.3.&nbsp;Protocol jars for Maven deployment</b></p><div class="table-contents"><table id="wagonLibs"><thead><tr>
                        <td>Protocol</td>
                        <td>Library</td>
                    </tr></thead><tr>
                    <td>http</td>
                    <td>org.apache.maven.wagon:wagon-http:2.2</td>
                </tr><tr>
                    <td>ssh</td>
                    <td>org.apache.maven.wagon:wagon-ssh:2.2</td>
                </tr><tr>
                    <td>ssh-external</td>
                    <td>org.apache.maven.wagon:wagon-ssh-external:2.2</td>
                </tr><tr>
                    <td>ftp</td>
                    <td>org.apache.maven.wagon:wagon-ftp:2.2</td>
                </tr><tr>
                    <td>webdav</td>
                    <td>org.apache.maven.wagon:wagon-webdav:1.0-beta-2</td>
                </tr><tr>
                    <td>file</td>
                    <td>-</td>
                </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;52.4.&nbsp;Configuration elements of the MavenDeployer</b></p><div class="table-contents"><table id="deployerConfig"><thead><tr>
                        <td>Element</td>
                        <td>Javadoc</td>
                    </tr></thead><tr>
                    <td>root</td>
                    <td>
                        <a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/MavenDeployer.html" target="_top"><code class="classname">MavenDeployer</code></a>
                    </td>
                </tr><tr>
                    <td>repository</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RemoteRepository.html" target="_top">
                            org.apache.maven.artifact.ant.RemoteRepository
                        </a>
                    </td>
                </tr><tr>
                    <td>authentication</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/Authentication.html" target="_top">
                            org.apache.maven.artifact.ant.Authentication
                        </a>
                    </td>
                </tr><tr>
                    <td>releases</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RepositoryPolicy.html" target="_top">
                            org.apache.maven.artifact.ant.RepositoryPolicy
                        </a>
                    </td>
                </tr><tr>
                    <td>snapshots</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RepositoryPolicy.html" target="_top">
                            org.apache.maven.artifact.ant.RepositoryPolicy
                        </a>
                    </td>
                </tr><tr>
                    <td>proxy</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/Proxy.html" target="_top">
                            org.apache.maven.artifact.ant.Proxy
                        </a>
                    </td>
                </tr><tr>
                    <td>snapshotRepository</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RemoteRepository.html" target="_top">
                            org.apache.maven.artifact.ant.RemoteRepository
                        </a>
                    </td>
                </tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:installing_to_the_local_repository"></a>52.6.3.&nbsp;Installing to the local repository</h3></div></div></div><p>The Maven plugin adds an <code class="literal">install</code> task to your project. This task depends on all the archives
                task of the <code class="literal">archives</code> configuration. It installs those archives to your local Maven repository.
                If the default location for the local repository is redefined in a Maven <code class="literal">settings.xml</code>, this is
                considered by this task.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:maven_pom_generation"></a>52.6.4.&nbsp;Maven POM generation</h3></div></div></div><p>When deploying an artifact to a Maven repository, Gradle automatically generates a POM for it. The
                <code class="literal">groupId</code>, <code class="literal">artifactId</code>, <code class="literal">version</code> and <code class="literal">packaging</code>
                elements used for the POM default to the values shown in the table below. The <code class="literal">dependency</code>
                elements are created from the project's dependency declarations.
            </p><div class="table"><p class="title"><b>Table&nbsp;52.5.&nbsp;Default Values for Maven POM generation</b></p><div class="table-contents"><table id="N15658"><thead><tr>
                        <td>Maven Element</td>
                        <td>Default Value</td>
                    </tr></thead><tr>
                    <td>groupId</td>
                    <td>project.group</td>
                </tr><tr>
                    <td>artifactId</td>
                    <td>uploadTask.repositories.mavenDeployer.pom.artifactId (if set) or archiveTask.baseName.</td>
                </tr><tr>
                    <td>version</td>
                    <td>project.version</td>
                </tr><tr>
                    <td>packaging</td>
                    <td>archiveTask.extension</td>
                </tr></table></div></div><p>
                Here, <code class="literal">uploadTask</code> and <code class="literal">archiveTask</code> refer to the tasks used for uploading and generating the archive,
                respectively (for example <code class="literal">uploadArchives</code> and <code class="literal">jar</code>). <code class="literal">archiveTask.baseName</code> defaults
                to <code class="literal">project.archivesBaseName</code> which in turn defaults to <code class="literal">project.name</code>.
            </p><div class="note"><p>
                    When you set <code class="literal">archiveTask.baseName</code> to a value other than the default, make sure to set
                    <code class="literal">uploadTask.repositories.mavenDeployer.pom.artifactId</code> to the same value. Otherwise, the project at hand may
                    be referenced with the wrong artifact ID from generated POMs for other projects in the same build.
                </p></div><p>
                Generated POMs can be found in <code class="literal">&lt;buildDir&gt;/poms</code>. They can be further customized via the
                <a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/MavenPom.html" target="_top"><code class="classname">MavenPom</code></a> API. For example, you might want the artifact deployed
                to the Maven repository to have a different version or name than the artifact generated by Gradle. To customize these you can do:
            </p><div class="example"><a name="customizePom"></a><p class="title"><b>Example&nbsp;52.5.&nbsp;Customization of pom</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
            pom.version = <span class="hl-string">'1.0Maven'</span>
            pom.artifactId = <span class="hl-string">'myMavenName'</span>
        }
    }
}</pre></div></div><br class="example-break"><p>To add additional content to the POM, the <code class="literal">pom.project</code> builder can be used. With this builder,
                any element listed in the <a class="ulink" href="http://maven.apache.org/pom.html" target="_top">Maven POM reference</a> can be added.
            </p><div class="example"><a name="pomBuilder"></a><p class="title"><b>Example&nbsp;52.6.&nbsp;Builder style customization of pom</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
            pom.project {
                licenses {
                    license {
                        name <span class="hl-string">'The Apache Software License, Version 2.0'</span>
                        url <span class="hl-string">'http://www.apache.org/licenses/LICENSE-2.0.txt'</span>
                        distribution <span class="hl-string">'repo'</span>
                    }
                }
            }
        }
    }
}</pre></div></div><br class="example-break"><p>Note: <code class="literal">groupId</code>, <code class="literal">artifactId</code>, <code class="literal">version</code>, and <code class="literal">packaging</code>
                should always be set directly on the <code class="literal">pom</code> object.
            </p><div class="example"><a name="pomBuilder"></a><p class="title"><b>Example&nbsp;52.7.&nbsp;Modifying auto-generated content</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">def installer = install.repositories.mavenInstaller
def deployer = uploadArchives.repositories.mavenDeployer

[installer, deployer]*.pom*.whenConfigured {pom -&gt;
    pom.dependencies.find {dep -&gt; dep.groupId == <span class="hl-string">'group3'</span> &amp;&amp; dep.artifactId == <span class="hl-string">'runtime'</span> }.optional = true
}</pre></div></div><br class="example-break"><p>If you have more than one artifact to publish, things work a little bit differently. See<a class="xref" href="#sub:multiple_artifacts_per_project">Section&nbsp;52.6.4.1, &ldquo;Multiple artifacts per project&rdquo;</a>.
            </p><p>To customize the settings for the Maven installer (see<a class="xref" href="#sub:installing_to_the_local_repository">Section&nbsp;52.6.3, &ldquo;Installing to the local repository&rdquo;</a>), you can do:
            </p><div class="example"><a name="customizeInstaller"></a><p class="title"><b>Example&nbsp;52.8.&nbsp;Customization of Maven installer</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">install {
    repositories.mavenInstaller {
        pom.version = <span class="hl-string">'1.0Maven'</span>
        pom.artifactId = <span class="hl-string">'myName'</span>
    }
}</pre></div></div><br class="example-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:multiple_artifacts_per_project"></a>52.6.4.1.&nbsp;Multiple artifacts per project</h4></div></div></div><p>Maven can only deal with one artifact per project. This is reflected in the structure of the
                    Maven POM. We think there are many situations where it makes sense to have more than one artifact per
                    project. In such a case you need to generate multiple POMs. In such a case you have to explicitly declare each artifact
                    you want to publish to a Maven repository. The <a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/MavenDeployer.html" target="_top"><code class="classname">MavenDeployer</code></a> and the MavenInstaller
                    both provide an API for this:
                </p><div class="example"><a name="multiplePoms"></a><p class="title"><b>Example&nbsp;52.9.&nbsp;Generation of multiple poms</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
            addFilter(<span class="hl-string">'api'</span>) {artifact, file -&gt;
                artifact.name == <span class="hl-string">'api'</span>
            }
            addFilter(<span class="hl-string">'service'</span>) {artifact, file -&gt;
                artifact.name == <span class="hl-string">'service'</span>
            }
            pom(<span class="hl-string">'api'</span>).version = <span class="hl-string">'mySpecialMavenVersion'</span>
        }
    }
}</pre></div></div><br class="example-break"><p>You need to declare a filter for each artifact you want to publish. This filter defines a boolean expression for
                    which Gradle artifact it accepts. Each filter has a POM associated with it which you can configure.
                    To learn more about this have a look at <a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/PomFilterContainer.html" target="_top"><code class="classname">PomFilterContainer</code></a>
                    and its associated classes.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sub:dependency_mapping"></a>52.6.4.2.&nbsp;Dependency mapping</h4></div></div></div><p>The Maven plugin configures the default mapping between the Gradle configurations added by the
                    Java and War plugin and the Maven scopes. Most
                    of the time you don't need to touch this and you can safely skip this section. The mapping
                    works like the following. You can map a configuration to one and only one scope. Different
                    configurations can be mapped to one or different scopes. One can assign also a priority to a particular
                    configuration-to-scope mapping. Have a look at
                    <a class="ulink" href="../javadoc/org/gradle/api/artifacts/maven/Conf2ScopeMappingContainer.html" target="_top"><code class="classname">Conf2ScopeMappingContainer</code></a>
                    to learn more. To access the mapping configuration you can say:
                </p><div class="example"><a name="mappings"></a><p class="title"><b>Example&nbsp;52.10.&nbsp;Accessing a mapping configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task mappings &lt;&lt; {
    println conf2ScopeMappings.mappings
}</pre></div></div><br class="example-break"><p>Gradle exclude rules are converted to Maven excludes if possible. Such a conversion is possible if in
                    the Gradle exclude rule the group as well as the module name is specified (as Maven needs both in
                    contrast to Ivy). Per-configuration excludes are also included in the Maven POM, if they are convertible.
                </p></div></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N15574" name="ftn.N15574" class="para">19</a>] </sup>It is planned for a future release to provide out-of-the-box support for this
                    </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="signing_plugin"></a>Chapter&nbsp;53.&nbsp;The Signing Plugin</h1></div></div></div><p>
        The signing plugin adds the ability to digitally sign built files and artifacts.
        These digital signatures can then be used to prove who built the artifact the signature is attached to
        as well as other information such as when the signature was generated.
    </p><p>
        The signing plugin currently only provides support for generating <a class="ulink" href="http://www.pgpi.org/" target="_top">PGP signatures</a> 
        (which is the signature format <a class="ulink" href="https://docs.sonatype.org/display/Repository/Central+Sync+Requirements" target="_top">required for 
        publication to the Maven Central Repository</a>).
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1573F"></a>53.1.&nbsp;Usage</h2></div></div></div><p>To use the Signing plugin, include in your build script:</p><div class="example"><a name="useSigningPlugin"></a><p class="title"><b>Example&nbsp;53.1.&nbsp;Using the Signing plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'signing'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1574E"></a>53.2.&nbsp;Signatory credentials</h2></div></div></div><p>
            In order to create PGP signatures, you will need a key pair (instructions on creating a key pair using the <a class="ulink" href="http://www.gnupg.org/" target="_top">GnuPG tools</a> 
            can be found in the <a class="ulink" href="http://www.gnupg.org/documentation/howtos.html" target="_top">GnuPG HOWTOs</a>). You need to provide the signing plugin
            with your key information, which means three things: 
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The public key ID (an 8 character hexadecimal string).</p></li><li class="listitem"><p>The absolute path to the secret key ring file containing your private key.</p></li><li class="listitem"><p>The passphrase used to protect your private key.</p></li></ul></div><p>
            These items must be supplied as the property projects <code class="literal">signing.keyId</code>, <code class="literal">signing.password</code> 
            and <code class="literal">signing.secretKeyRingFile</code> respectively. Given the personal and private nature of these values, a good practice
            is to store them in the user <code class="literal">gradle.properties</code> file (described in <a class="xref" href="#sec:gradle_properties_and_system_properties">Section&nbsp;14.2, &ldquo;Gradle properties and system properties&rdquo;</a>).
        </p><pre class="programlisting">signing.keyId=24875D73
signing.password=secret
signing.secretKeyRingFile=/Users/me/.gnupg/secring.gpg</pre><p>
            If specifying this information in the user <code class="literal">gradle.properties</code> file is not feasible for your environment, you can source the information
            however you need to and set the project properties manually.
        </p><pre class="programlisting">import org.gradle.plugins.signing.Sign

gradle.taskGraph.whenReady { taskGraph -&gt;
    if (taskGraph.allTasks.any { it instanceof Sign }) {
        // Use Java 6's console to read from the console (no good for a CI environment)
        Console console = System.console()
        console.printf "\n\nWe have to sign some things in this build.\n\nPlease enter your signing details.\n\n"

        def id = console.readLine("PGP Key Id: ")
        def file = console.readLine("PGP Secret Key Ring File (absolute path): ")
        def password = console.readPassword("PGP Private Key Password: ")

        allprojects { ext."signing.keyId" = id }
        allprojects { ext."signing.secretKeyRingFile" = file }
        allprojects { ext."signing.password" = password }

        console.printf "\nThanks.\n\n"
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15780"></a>53.3.&nbsp;Specifying what to sign</h2></div></div></div><p>
            As well as configuring how things are to be signed (i.e. the signatory configuration), you must also specify what is to be signed. 
            The Signing plugin provides a DSL that allows you to specify the tasks and/or configurations that should be signed.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15785"></a>53.3.1.&nbsp;Signing Configurations</h3></div></div></div><p>
                It is common to want to sign the artifacts of a configuration. For example, the <a class="link" href="#java_plugin">Java plugin</a> 
                configures a jar to built and this jar artifact is added to the <code class="literal">archives</code> configuration. 
                Using the Signing DSL, you can specify that all of the artifacts of this configuration should be signed.
            </p><div class="example"><a name="signingArchives"></a><p class="title"><b>Example&nbsp;53.2.&nbsp;Signing a configuration</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">signing {
    sign configurations.archives
}</pre></div></div><br class="example-break"><p>
                This will create a task (of type <a class="ulink" href="../dsl/org.gradle.plugins.signing.Sign.html" target="_top"><code class="classname">Sign</code></a>) in your project named &ldquo;<code class="literal">signArchives</code>&rdquo;, 
                that will build any <code class="literal">archives</code> artifacts (if needed) and then generate signatures for them. The signature files will be placed
                alongside the artifacts being signed.
            </p><div class="example"><a name="signingArchivesOutput"></a><p class="title"><b>Example&nbsp;53.3.&nbsp;Signing a configuration output</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle signArchives</code></strong></p><pre class="screen">&gt; gradle signArchives
:compileJava
:processResources
:classes
:jar
:signArchives

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N157B2"></a>53.3.2.&nbsp;Signing Tasks</h3></div></div></div><p>
                In some cases the artifact that you need to sign may not be part of a configuration. In this case you can directly sign the task that
                produces the artifact to sign.
            </p><div class="example"><a name="signingTasks"></a><p class="title"><b>Example&nbsp;53.4.&nbsp;Signing a task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task stuffZip (type: Zip) {
    baseName = <span class="hl-string">"stuff"</span>
    from <span class="hl-string">"src/stuff"</span>
}

signing {
    sign stuffZip
}</pre></div></div><br class="example-break"><p>
                This will create a task (of type <a class="ulink" href="../dsl/org.gradle.plugins.signing.Sign.html" target="_top"><code class="classname">Sign</code></a>) in your project named &ldquo;<code class="literal">signStuffZip</code>&rdquo;, 
                that will build the input task's archive (if needed) and then sign it. The signature file will be placed
                alongside the artifact being signed.
            </p><div class="example"><a name="signingTaskOutput"></a><p class="title"><b>Example&nbsp;53.5.&nbsp;Signing a task output</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle signStuffZip</code></strong></p><pre class="screen">&gt; gradle signStuffZip
:stuffZip
:signStuffZip

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
                For a task to be &ldquo;signable&rdquo;, it must produce an archive of some type. Tasks that do this are the <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Tar.html" target="_top"><code class="classname">Tar</code></a>,
                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>, <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Jar.html" target="_top"><code class="classname">Jar</code></a>, 
                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.War.html" target="_top"><code class="classname">War</code></a> and <a class="ulink" href="../dsl/org.gradle.plugins.ear.Ear.html" target="_top"><code class="classname">Ear</code></a> tasks.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N157F0"></a>53.3.3.&nbsp;Conditional Signing</h3></div></div></div><p>
                A common usage pattern is to only sign build artifacts under certain conditions. For example, you may not wish to sign artifacts for non release versions.
                To achieve this, you can specify that signing is only required under certain conditions.
            </p><div class="example"><a name="conditionalSigning"></a><p class="title"><b>Example&nbsp;53.6.&nbsp;Conditional signing</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">version = <span class="hl-string">'1.0-SNAPSHOT'</span>
ext.isReleaseVersion = !version.endsWith(<span class="hl-string">"SNAPSHOT"</span>)

signing {
    required { isReleaseVersion &amp;&amp; gradle.taskGraph.hasTask(<span class="hl-string">"uploadArchives"</span>) }
    sign configurations.archives
}</pre></div></div><br class="example-break"><p>
                In this example, we only want to require signing if we are building a release version and we are going to publish it. Because we are inspecting the task
                graph to determine if we are going to be publishing, we must set the <code class="literal">signing.required</code> property to a closure to defer the evaluation. See
                <a class="ulink" href="../groovydoc/org/gradle/plugins/signing/SigningExtension.html#setRequired(java.lang.Object)" target="_top"><code class="classname">SigningExtension.setRequired()</code></a> for more information.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15809"></a>53.4.&nbsp;Publishing the signatures</h2></div></div></div><p>
            When specifying what is to be signed via the Signing DSL, the resultant signature artifacts are automatically added to the <code class="literal">signatures</code> and
            <code class="literal">archives</code> dependency configurations. This means that if you want to upload your signatures to your distribution repository along
            with the artifacts you simply execute the <code class="literal">uploadArchives</code> task as normal.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15817"></a>53.5.&nbsp;Signing POM files</h2></div></div></div><p>
            When deploying signatures for your artifacts to a Maven repository, you will also want to sign the published POM file. The signing plugin adds a
            <code class="literal">signing.signPom()</code> (see: <a class="ulink" href="../dsl/org.gradle.plugins.signing.SigningExtension.html#org.gradle.plugins.signing.SigningExtension:signPom(org.gradle.api.artifacts.maven.MavenDeployment, groovy.lang.Closure)" target="_top"><code class="classname">SigningExtension.signPom()</code></a>) method that can be used in the
            <code class="literal">beforeDeployment()</code> block in your upload task configuration.
        </p><div class="example"><a name="signingMavenPom"></a><p class="title"><b>Example&nbsp;53.7.&nbsp;Signing a POM for deployment</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">uploadArchives {
    repositories {
        mavenDeployer {
            beforeDeployment { MavenDeployment deployment -&gt; signing.signPom(deployment) }
        }
    }
}</pre></div></div><br class="example-break"><p>
            When signing is not required and the POM cannot be signed due to insufficient configuration (i.e. no credentials for signing) then the
            <code class="literal">signPom()</code> method will silently do nothing.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="nativeBinaries"></a>Chapter&nbsp;54.&nbsp;Building native binaries</h1></div></div></div><div class="note"><p>
            The Gradle support for building native binaries is currently <a class="link" href="#feature_lifecycle">incubating</a>. Please be aware that the DSL and other configuration may change in later Gradle versions.
        </p></div><p>
        The various native binary plugins add support for building native software components, such as executables or shared libraries, from C++, C and other languages.
        While many excellent build tools exist for this space of software development, Gradle offers developers it's trademark power and flexibility
        together with the dependency management practices more traditionally found in the JVM development space.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15845"></a>54.1.&nbsp;Supported languages</h2></div></div></div><p>
            The following source languages are currently supported:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>C</p></li><li class="listitem"><p>C++</p></li><li class="listitem"><p>Objective-C</p></li><li class="listitem"><p>Objective-C++</p></li><li class="listitem"><p>Assembly</p></li><li class="listitem"><p>Windows resources</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native-binaries:tool-chain-support"></a>54.2.&nbsp;Tool chain support</h2></div></div></div><p>
            Gradle offers the ability to execute the same build using different tool chains. You can control which tool chain will be used to build
            by changing the operating system PATH to include the desired tool chain compiler. Alternatively, you can configure the tool chains directly,
            as described in <a class="xref" href="#native_binaries:tool_chain">Section&nbsp;54.10, &ldquo;Tool chains&rdquo;</a>.
        </p><p>
            The following tool chains are supported:
        </p><div class="table"><div class="table-contents"><table id="N15868">
                <tr><td>Operating System</td><td>Tool Chain</td><td>Notes</td></tr>
            <tr>
                <td>Linux</td><td><a class="ulink" href="http://gcc.gnu.org/" target="_top">GCC</a></td> <td></td>
            </tr><tr>
                <td>Linux</td><td><a class="ulink" href="http://clang.llvm.org" target="_top">Clang</a></td><td></td>
            </tr><tr>
                <td>Mac OS X</td><td>XCode</td><td>Uses the Clang tool chain bundled with XCode.</td>
            </tr><tr>
                <td>Mac OS X</td><td><a class="ulink" href="http://gcc.gnu.org/" target="_top">GCC</a></td><td></td>
            </tr><tr>
                <td>Mac OS X</td><td><a class="ulink" href="http://clang.llvm.org" target="_top">Clang</a></td><td></td>
            </tr><tr>
                <td>Windows</td><td><a class="ulink" href="http://www.microsoft.com/visualstudio/en-us" target="_top">Visual C++</a></td><td>Windows XP and later, Visual C++ 2010 and later.</td>
            </tr><tr>
                <td>Windows</td><td><a class="ulink" href="http://gcc.gnu.org/" target="_top">GCC</a> with <a class="ulink" href="http://cygwin.com" target="_top">Cywin 32</a></td><td>Windows XP and later. Cygwin 64 is currently not supported.</td>
            </tr><tr>
                <td>Windows</td><td><a class="ulink" href="http://gcc.gnu.org/" target="_top">GCC</a> with <a class="ulink" href="http://www.mingw.org/" target="_top">MinGW</a></td><td>Windows XP and later. <a class="ulink" href="http://mingw-w64.sourceforge.net" target="_top">Mingw-w64</a> is currently not supported.</td>
            </tr></table></div></div><p>
            The native plugins should generally work on other UNIX-like platforms, but are currently officially supported on the above platforms only.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N158D4"></a>54.3.&nbsp;Component model</h2></div></div></div><p>
            A native binary project defines a set of <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeExecutable.html" target="_top"><code class="classname">NativeExecutable</code></a> and <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeLibrary.html" target="_top"><code class="classname">NativeLibrary</code></a> components,
            each of which Gradle maps to a number of <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeBinary.html" target="_top"><code class="classname">NativeBinary</code></a> outputs.
            For each <code class="literal">executable</code> or <code class="literal">library</code> defined, Gradle adds a <a class="ulink" href="../javadoc/org/gradle/language/base/FunctionalSourceSet.html" target="_top"><code class="classname">FunctionalSourceSet</code></a> with the same name.
            Each of these functional source sets will contain a language-specific source set for each of the languages supported by the project.
        </p><p>
            To build either a static or shared native library binary,
            a <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeLibrary.html" target="_top"><code class="classname">NativeLibrary</code></a> component is added to the <code class="literal">libraries</code> container.
            Each <code class="literal">library</code> component can produce at least one <a class="ulink" href="../dsl/org.gradle.nativebinaries.SharedLibraryBinary.html" target="_top"><code class="classname">SharedLibraryBinary</code></a>
            and at least one <a class="ulink" href="../dsl/org.gradle.nativebinaries.StaticLibraryBinary.html" target="_top"><code class="classname">StaticLibraryBinary</code></a>.
        </p><div class="example"><a name="cppLibraries"></a><p class="title"><b>Example&nbsp;54.1.&nbsp;Defining a library component</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">libraries {
    hello {}
}</pre></div></div><br class="example-break"><p>
            To build an executable binary,
            an <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeExecutable.html" target="_top"><code class="classname">NativeExecutable</code></a> component is added to the <code class="literal">executables</code> container
            and associated with a set of sources.
        </p><div class="example"><a name="cppExecutables"></a><p class="title"><b>Example&nbsp;54.2.&nbsp;Defining executable components</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">executables {
    main {}
}</pre></div></div><br class="example-break"><p>
            In many cases, more than one native binary can be produced for a component.
            These binaries may vary based on the tool chain used to build, the compiler/linker flags supplied, the dependencies
            provided, or additional source files provided. Each native binary produced for a component is referred to as <code class="literal">variant</code>.
            Binary variants are discussed in detail below.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1592D"></a>54.4.&nbsp;Tasks</h2></div></div></div><p>
            For each <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeBinary.html" target="_top"><code class="classname">NativeBinary</code></a> that can be produced by a build,
            a single <em class="firstterm">lifecycle task</em> is constructed that can be used to create that binary, together with a set of other tasks that do the actual
            work of compiling, linking or assembling the binary.
        </p><div class="table"><div class="table-contents"><table id="N1593A">
                <tr><td>Component Type</td><td>Native Binary Type</td><td>Lifecycle task</td><td>Location of created binary</td></tr>
            <tr>
                <td><a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeExecutable.html" target="_top"><code class="classname">NativeExecutable</code></a></td><td><a class="ulink" href="../javadoc/org/gradle/nativebinaries/ExecutableBinary.html" target="_top"><code class="classname">ExecutableBinary</code></a></td><td><code class="literal"><em class="replaceable"><code>$component.name</code></em>Executable</code></td><td><code class="filename"><em class="replaceable"><code>$buildDir</code></em>/binaries/<em class="replaceable"><code>$binary.name</code></em>/<em class="replaceable"><code>$component.name</code></em></code></td>
            </tr><tr>
                <td><a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeLibrary.html" target="_top"><code class="classname">NativeLibrary</code></a></td><td><a class="ulink" href="../dsl/org.gradle.nativebinaries.SharedLibraryBinary.html" target="_top"><code class="classname">SharedLibraryBinary</code></a></td><td><code class="literal"><em class="replaceable"><code>$component.name</code></em>SharedLibrary</code></td><td><code class="filename"><em class="replaceable"><code>$buildDir</code></em>/binaries/<em class="replaceable"><code>$binary.name</code></em>/lib<em class="replaceable"><code>$component.name</code></em>.so</code></td>
            </tr><tr>
                <td><a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeLibrary.html" target="_top"><code class="classname">NativeLibrary</code></a></td><td><a class="ulink" href="../dsl/org.gradle.nativebinaries.StaticLibraryBinary.html" target="_top"><code class="classname">StaticLibraryBinary</code></a></td><td><code class="literal"><em class="replaceable"><code>$component.name</code></em>StaticLibrary</code></td><td><code class="filename"><em class="replaceable"><code>$buildDir</code></em>/binaries/<em class="replaceable"><code>$binary.name</code></em>/<em class="replaceable"><code>$component.name</code></em>.a</code></td>
            </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1599D"></a>54.4.1.&nbsp;Working with shared libraries</h3></div></div></div><p>
                For each executable binary produced, the <code class="literal">cpp</code> plugin provides an <code class="literal">install${binary.name}</code> task,
                which creates a development install of the executable, along with the shared libraries it requires.
                This allows you to run the executable without needing to install the shared libraries in their final locations.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native_binaries:languages"></a>54.5.&nbsp;Language support</h2></div></div></div><p>
            Presently, Gradle supports building native binaries from any combination of source languages listed below.
            A native binary project will contain one or more named <code class="literal">FunctionalSourceSet</code> instances (eg 'main', 'test', etc),
            each of which can contain <code class="literal">LanguageSourceSet</code>s containing source files, one for each language.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>C</p></li><li class="listitem"><p>C++</p></li><li class="listitem"><p>Objective-C</p></li><li class="listitem"><p>Objective-C++</p></li><li class="listitem"><p>Assembly</p></li><li class="listitem"><p>Windows resources</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N159C7"></a>54.5.1.&nbsp;C++ sources</h3></div></div></div><p>
                C++ language support is provided by means of the <code class="literal">'cpp'</code> plugin.
            </p><div class="example"><a name="cppPlugin"></a><p class="title"><b>Example&nbsp;54.3.&nbsp;The 'cpp' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'cpp'</span></pre></div></div><br class="example-break"><p>
                C++ sources to be included in a native binary are provided via a <a class="ulink" href="../dsl/org.gradle.language.cpp.CppSourceSet.html" target="_top"><code class="classname">CppSourceSet</code></a>,
                which defines a set of C++ source files and optionally a set of exported header files (for a library).
                By default, for any named component the <a class="ulink" href="../dsl/org.gradle.language.cpp.CppSourceSet.html" target="_top"><code class="classname">CppSourceSet</code></a> contains
                <code class="filename">.cpp</code> source files in <code class="filename">src/${name}/cpp</code>,
                and header files in <code class="filename">src/${name}/headers</code>.
            </p><p>
                While the <code class="literal">cpp</code> plugin defines these default locations for each <a class="ulink" href="../dsl/org.gradle.language.cpp.CppSourceSet.html" target="_top"><code class="classname">CppSourceSet</code></a>,
                it is possible to extend or override these defaults to allow for a different project layout.
            </p><div class="example"><a name="cppSourceSet"></a><p class="title"><b>Example&nbsp;54.4.&nbsp;C++ source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sources {
    main {
        cpp {
            source {
                srcDir <span class="hl-string">"src/source"</span>
                include <span class="hl-string">"**/*.cpp"</span>
            }
        }
    }
}</pre></div></div><br class="example-break"><p>
                For a library named 'main', files in <code class="filename">src/main/headers</code> are considered the &ldquo;public&rdquo; or &ldquo;exported&rdquo; headers.
                Header files that should not be exported (but are used internally) should be placed inside the <code class="filename">src/main/cpp</code> directory (though be aware that
                such header files should always be referenced in a manner relative to the file including them).
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15A0A"></a>54.5.2.&nbsp;C sources</h3></div></div></div><p>
                C language support is provided by means of the <code class="literal">'c'</code> plugin.
            </p><div class="example"><a name="cPlugin"></a><p class="title"><b>Example&nbsp;54.5.&nbsp;The 'c' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'c'</span></pre></div></div><br class="example-break"><p>
                C sources to be included in a native binary are provided via a <a class="ulink" href="../dsl/org.gradle.language.c.CSourceSet.html" target="_top"><code class="classname">CSourceSet</code></a>,
                which defines a set of C source files and optionally a set of exported header files (for a library).
                By default, for any named component the <a class="ulink" href="../dsl/org.gradle.language.c.CSourceSet.html" target="_top"><code class="classname">CSourceSet</code></a> contains
                <code class="filename">.c</code> source files in <code class="filename">src/${name}/c</code>,
                and header files in <code class="filename">src/${name}/headers</code>.
            </p><p>
                While the <code class="literal">c</code> plugin defines these default locations for each <a class="ulink" href="../dsl/org.gradle.language.c.CSourceSet.html" target="_top"><code class="classname">CSourceSet</code></a>,
                it is possible to extend or override these defaults to allow for a different project layout.
            </p><div class="example"><a name="cSourceSet"></a><p class="title"><b>Example&nbsp;54.6.&nbsp;C source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sources {
    hello {
        c {
            source {
                srcDir <span class="hl-string">"src/source"</span>
                include <span class="hl-string">"**/*.c"</span>
            }
            exportedHeaders {
                srcDir <span class="hl-string">"src/include"</span>
            }
        }
    }
}</pre></div></div><br class="example-break"><p>
                For a library named 'main', files in <code class="filename">src/main/headers</code> are considered the &ldquo;public&rdquo; or &ldquo;exported&rdquo; headers.
                Header files that should not be exported (but are used internally) should be placed inside the <code class="filename">src/main/c</code> directory (though be aware that
                such header files should always be referenced in a manner relative to the file including them).
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15A4D"></a>54.5.3.&nbsp;Assembler sources</h3></div></div></div><p>
                Assembly language support is provided by means of the <code class="literal">'assembler'</code> plugin.
            </p><div class="example"><a name="assemblerPlugin"></a><p class="title"><b>Example&nbsp;54.7.&nbsp;The 'assembler' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'assembler'</span></pre></div></div><br class="example-break"><p>
                Assembler sources to be included in a native binary are provided via a <a class="ulink" href="../dsl/org.gradle.language.assembler.AssemblerSourceSet.html" target="_top"><code class="classname">AssemblerSourceSet</code></a>,
                which defines a set of Assembler source files.
                By default, for any named component the <a class="ulink" href="../dsl/org.gradle.language.assembler.AssemblerSourceSet.html" target="_top"><code class="classname">AssemblerSourceSet</code></a> contains
                <code class="filename">.s</code> source files under <code class="filename">src/${name}/asm</code>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15A71"></a>54.5.4.&nbsp;Objective-C sources</h3></div></div></div><p>
                Objective-C language support is provided by means of the <code class="literal">'objective-c'</code> plugin.
            </p><div class="example"><a name="objectiveCPlugin"></a><p class="title"><b>Example&nbsp;54.8.&nbsp;The 'objective-c' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'objective-c'</span></pre></div></div><br class="example-break"><p>
                Objective-C sources to be included in a native binary are provided via a <a class="ulink" href="../dsl/org.gradle.language.objectivec.ObjectiveCSourceSet.html" target="_top"><code class="classname">ObjectiveCSourceSet</code></a>,
                which defines a set of Objective-C source files.
                By default, for any named component the <a class="ulink" href="../dsl/org.gradle.language.objectivec.ObjectiveCSourceSet.html" target="_top"><code class="classname">ObjectiveCSourceSet</code></a> contains
                <code class="filename">.m</code> source files under <code class="filename">src/${name}/objectiveC</code>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15A95"></a>54.5.5.&nbsp;Objective-C++ sources</h3></div></div></div><p>
                Objective-C++ language support is provided by means of the <code class="literal">'objective-cpp'</code> plugin.
            </p><div class="example"><a name="objectiveCppPlugin"></a><p class="title"><b>Example&nbsp;54.9.&nbsp;The 'objective-cpp' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'objective-cpp'</span></pre></div></div><br class="example-break"><p>
                Objective-C++ sources to be included in a native binary are provided via a <a class="ulink" href="../dsl/org.gradle.language.objectivecpp.ObjectiveCppSourceSet.html" target="_top"><code class="classname">ObjectiveCppSourceSet</code></a>,
                which defines a set of Objective-C++ source files.
                By default, for any named component the <a class="ulink" href="../dsl/org.gradle.language.objectivecpp.ObjectiveCppSourceSet.html" target="_top"><code class="classname">ObjectiveCppSourceSet</code></a> contains
                <code class="filename">.mm</code> source files under <code class="filename">src/${name}/objectiveCpp</code>.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15AB9"></a>54.6.&nbsp;Configuring the compiler, assembler and linker</h2></div></div></div><p>
            Each binary to be produced is associated with a set of compiler and linker settings, which include command-line arguments as well as macro definitions.
            These settings can be applied to all binaries, an individual binary, or selectively to a group of binaries based on some criteria.
        </p><div class="example"><a name="allBinarySettings"></a><p class="title"><b>Example&nbsp;54.10.&nbsp;Settings that apply to all binaries</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">binaries.all {
    <span class="hl-comment">// Define a preprocessor macro for every binary</span>
    cppCompiler.define <span class="hl-string">"NDEBUG"</span>

    <span class="hl-comment">// Define toolchain-specific compiler and linker options</span>
    <span class="hl-keyword">if</span> (toolChain in Gcc) {
        cppCompiler.args <span class="hl-string">"-O2"</span>, <span class="hl-string">"-fno-access-control"</span>
        linker.args <span class="hl-string">"-Xlinker"</span>, <span class="hl-string">"-S"</span>
    }
    <span class="hl-keyword">if</span> (toolChain in VisualCpp) {
        cppCompiler.args <span class="hl-string">"/Zi"</span>
        linker.args <span class="hl-string">"/DEBUG"</span>
    }
}</pre></div></div><br class="example-break"><p>
            Each binary is associated with a particular <a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.ToolChain.html" target="_top"><code class="classname">ToolChain</code></a>, allowing settings to be targeted based on
            this value.
        </p><p>
            It is easy to apply settings to all binaries of a particular type:
        </p><div class="example"><a name="allSharedLibraryBinarySettings"></a><p class="title"><b>Example&nbsp;54.11.&nbsp;Settings that apply to all shared libraries</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// For any shared library binaries built with Visual C++, define the DLL_EXPORT macro</span>
binaries.withType(SharedLibraryBinary) {
    <span class="hl-keyword">if</span> (toolChain in VisualCpp) {
        cCompiler.args <span class="hl-string">"/Zi"</span>
        cCompiler.define <span class="hl-string">"DLL_EXPORT"</span>
    }
}</pre></div></div><br class="example-break"><p>
            Furthermore, it is possible to specify settings that apply to all binaries produces for a particular <code class="literal">executable</code>
            or <code class="literal">library</code> component:
        </p><div class="example"><a name="componentBinarySettings"></a><p class="title"><b>Example&nbsp;54.12.&nbsp;Settings that apply to all binaries produced for the 'main' executable component</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">executables {
    main {
        binaries.all {
            <span class="hl-keyword">if</span> (toolChain in VisualCpp) {
                assembler.args <span class="hl-string">"/Zi"</span>
            } <span class="hl-keyword">else</span> {
                assembler.args <span class="hl-string">"-g"</span>
            }
        }
    }
}</pre></div></div><br class="example-break"><p>
            The example above will apply the supplied configuration to all <code class="literal">executable</code> binaries built.
        </p><p>
            Similarly, settings can be specified to target binaries for a component that are of a particular type:
            eg all <code class="literal">shared libraries</code> for the <code class="literal">main library</code> component.
        </p><div class="example"><a name="sharedLibraryArgs"></a><p class="title"><b>Example&nbsp;54.13.&nbsp;Settings that apply only to shared libraries produced for the 'main' library component</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">libraries {
    main {
        binaries.withType(SharedLibraryBinary) {
            <span class="hl-comment">// Define a preprocessor macro that only applies to shared libraries</span>
            cppCompiler.define <span class="hl-string">"DLL_EXPORT"</span>
        }
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native_binaries:windows-resources"></a>54.7.&nbsp;Windows Resources</h2></div></div></div><p>
            When using the <a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.VisualCpp.html" target="_top"><code class="classname">VisualCpp</code></a> tool chain, Gradle is able to compile Window Resource (<code class="literal">rc</code>)
            files and link them into a native binary. This functionality is provided by the <code class="literal">'windows-resources'</code> plugin.
        </p><div class="example"><a name="windowsResourcesPlugin"></a><p class="title"><b>Example&nbsp;54.14.&nbsp;The 'windows-resources' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'windows-resources'</span></pre></div></div><br class="example-break"><p>
            Windows resources to be included in a native binary are provided via a <a class="ulink" href="../dsl/org.gradle.language.rc.WindowsResourceSet.html" target="_top"><code class="classname">WindowsResourceSet</code></a>,
            which defines a set of Windows Resource source files.
            By default, for any named component the <a class="ulink" href="../dsl/org.gradle.language.rc.WindowsResourceSet.html" target="_top"><code class="classname">WindowsResourceSet</code></a> contains
            <code class="filename">.rc</code> source files under <code class="filename">src/${name}/rc</code>.
        </p><p>
            As with other source types, you can configure the location of the windows resources that should in included in the binary.
        </p><div class="example"><a name="windowsResourceSet"></a><p class="title"><b>Example&nbsp;54.15.&nbsp;Configuring the location of Windows resource sources</b></p><div class="example-contents"><p><code class="filename">build-resource-only-dll.gradle</code></p><pre class="programlisting">sources {
    helloRes {
        rc {
            source {
                srcDirs <span class="hl-string">"src/hello/rc"</span>
            }
            exportedHeaders {
                srcDirs <span class="hl-string">"src/hello/headers"</span>
            }
        }
    }
}</pre></div></div><br class="example-break"><p>
            You are able to construct a resource-only library by providing Windows Resource sources with no other language sources,
            and configure the linker as appropriate:
        </p><div class="example"><a name="resourceOnlyDll"></a><p class="title"><b>Example&nbsp;54.16.&nbsp;Building a resource-only dll</b></p><div class="example-contents"><p><code class="filename">build-resource-only-dll.gradle</code></p><pre class="programlisting">libraries {
    helloRes {
        binaries.all {
            rcCompiler.args <span class="hl-string">"/v"</span>
            linker.args <span class="hl-string">"/noentry"</span>, <span class="hl-string">"/machine:x86"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
            The example above also demonstrates the mechanism of passing extra command-line arguments to the resource compiler.
            The <code class="literal">rcCompiler</code> extension is of type <a class="ulink" href="../dsl/org.gradle.nativebinaries.language.PreprocessingTool.html" target="_top"><code class="classname">PreprocessingTool</code></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N15B53"></a>54.8.&nbsp;Library Dependencies</h2></div></div></div><p>
            Dependencies for native components are binary libraries that export header files. The header files are used during compilation, with the compiled
            binary dependency being used during linking and execution.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15B58"></a>54.8.1.&nbsp;Dependencies within the same project</h3></div></div></div><p>
               A set of sources may depend on header files provided by another binary component within the same project.
               A common example is a native executable component that uses functions provided by a separate native library component.
           </p><p>
               Such a library dependency can be easily provided to source set associated with the <code class="literal">executable</code> component:
           </p><div class="example"><a name="cppSourceLibrary"></a><p class="title"><b>Example&nbsp;54.17.&nbsp;Providing a library dependency to the source set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">sources {
    main {
        cpp {
            lib libraries.hello
        }
    }
}</pre></div></div><br class="example-break"><p>
               Alternatively, a library dependency can be provided directly to the <code class="literal">ExecutableBinary</code> for the <code class="literal">executable</code>.
           </p><div class="example"><a name="cppBinaryLibrary"></a><p class="title"><b>Example&nbsp;54.18.&nbsp;Providing a library dependency to the binary</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">executables {
    main {
        binaries.all {
            <span class="hl-comment">// Each executable binary produced uses the 'hello' static library binary</span>
            lib libraries.hello.<span class="hl-keyword">static</span>
        }
    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15B7E"></a>54.8.2.&nbsp;Project Dependencies</h3></div></div></div><p>
                For a component produced in a different Gradle project, the notation is similar.
            </p><div class="example"><a name="cppProjectDependencies"></a><p class="title"><b>Example&nbsp;54.19.&nbsp;Declaring project dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">project(<span class="hl-string">":lib"</span>) {
    apply plugin: <span class="hl-string">"cpp"</span>
    libraries {
        main {}
    }
    <span class="hl-comment">// For any shared library binaries built with Visual C++, define the DLL_EXPORT macro</span>
    binaries.withType(SharedLibraryBinary) {
        <span class="hl-keyword">if</span> (toolChain in VisualCpp) {
            cppCompiler.define <span class="hl-string">"DLL_EXPORT"</span>
        }
    }
}

project(<span class="hl-string">":exe"</span>) {
    apply plugin: <span class="hl-string">"cpp"</span>

    executables {
        main {}
    }

    sources {
        main {
            cpp {
                lib project: <span class="hl-string">':lib'</span>, library: <span class="hl-string">'main'</span>
            }
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native_binaries:variants"></a>54.9.&nbsp;Native Binary Variants</h2></div></div></div><p>
            For each executable or library defined, Gradle is able to build a number of different native binary variants.
            Examples of different variants include debug vs release binaries, 32-bit vs 64-bit binaries, and binaries produced
            with different custom preprocessor flags.
        </p><p>
            Binaries produced by Gradle can be differentiated on
                <a class="link" href="#native_binaries:build_type">build type</a>,
                <a class="link" href="#native_binaries:platform">platform</a> and
                <a class="link" href="#native_binaries:flavor">flavor</a>.
            For each of these 'variant dimensions', it is possible to specify a set of available values as well as target each component at
            one, some or all of these. For example, a plugin may define a range of support platforms, but you
            may choose to only target Windows-x86 for a particular component.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="native_binaries:build_type"></a>54.9.1.&nbsp;Build types</h3></div></div></div><p>
                A <code class="literal">build type</code> determines various non-functional aspects of a binary, such as whether debug information is included,
                or what optimisation level the binary is compiled with. Typical build types are 'debug' and 'release', but a project
                is free to define any set of build types.
            </p><div class="example"><a name="buildTypes"></a><p class="title"><b>Example&nbsp;54.20.&nbsp;Defining build types</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    buildTypes {
        debug
        release
    }
}</pre></div></div><br class="example-break"><p>
                If no build types are defined in a project, then a single, default build type called 'debug' is added.
            </p><p>
                For a build type, a Gradle project will typically define a set of compiler/linker flags per tool chain.
            </p><div class="example"><a name="buildTypeConfig"></a><p class="title"><b>Example&nbsp;54.21.&nbsp;Configuring debug binaries</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">binaries.all {
    <span class="hl-keyword">if</span> (toolChain in Gcc &amp;&amp; buildType == buildTypes.debug) {
        cppCompiler.args <span class="hl-string">"-g"</span>
    }
    <span class="hl-keyword">if</span> (toolChain in VisualCpp &amp;&amp; buildType == buildTypes.debug) {
        cppCompiler.args <span class="hl-string">'/Zi'</span>
        cppCompiler.define <span class="hl-string">'DEBUG'</span>
        linker.args <span class="hl-string">'/DEBUG'</span>
    }
}</pre></div></div><br class="example-break"><div class="note">
                At this stage, it is completely up to the build script to configure the relevant compiler/linker flags for each
                build type. Future versions of Gradle will automatically include the appropriate debug flags for any 'debug' build
                type, and may be aware of various levels of optimisation as well.
            </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="native_binaries:platform"></a>54.9.2.&nbsp;Platform</h3></div></div></div><p>
                An executable or library can be built to run on different operating systems and cpu architectures, with a variant being
                produced for each platform. Gradle defines each OS/architecture combination as a <a class="ulink" href="../dsl/org.gradle.nativebinaries.platform.Platform.html" target="_top"><code class="classname">Platform</code></a>,
                and a project may define any number of platforms.
                If no platforms are defined in a project, then a single, default platform 'current' is added.
            </p><div class="note">
                Presently, a <code class="literal">Platform</code> consists of a defined operating system and architecture. As we continue to develop the
                native binary support in Gradle, the concept of Platform will be extended to include things like C-runtime version, Windows SDK, ABI, etc.
                Sophisticated builds may use the extensibility of Gradle to apply additional attributes to each platform, which can then be queried to
                specify particular includes, preprocessor macros or compiler arguments for a native binary.
            </div><div class="example"><a name="platforms"></a><p class="title"><b>Example&nbsp;54.22.&nbsp;Defining platforms</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    platforms {
        x8<span class="hl-number">6</span> {
            architecture <span class="hl-string">"x86"</span>
        }
        x6<span class="hl-number">4</span> {
            architecture <span class="hl-string">"x86_64"</span>
        }
        itanium {
            architecture <span class="hl-string">"ia-64"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>
                For a given variant, Gradle will attempt to find a <a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.ToolChain.html" target="_top"><code class="classname">ToolChain</code></a> that is able to build
                for the target platform. Available tool chains are searched in the order defined.
                See the <a class="link" href="#native_binaries:tool_chain">tool chain</a> section below for more details.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="native_binaries:flavor"></a>54.9.3.&nbsp;Flavor</h3></div></div></div><p>
                Each component can have a set of named <code class="literal">flavors</code>, and a separate binary variant can be produced for each flavor.
                While the <code class="literal">build type</code> and <code class="literal">target platform</code> variant dimensions have a defined meaning in Gradle,
                each project is free to define any number of flavors and apply meaning to them in any way.
            </p><p>
                An example of component flavors might differentiate between 'demo', 'paid' and 'enterprise' editions of the component,
                where the same set of sources is used to produce binaries with different functions.
            </p><div class="example"><a name="flavors"></a><p class="title"><b>Example&nbsp;54.23.&nbsp;Defining flavors</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    flavors {
        english
        french
    }
}

libraries {
    hello {
        binaries.all {
            <span class="hl-keyword">if</span> (flavor == flavors.french) {
                cppCompiler.define <span class="hl-string">"FRENCH"</span>
            }
        }
        source sources.lib
    }
}</pre></div></div><br class="example-break"><p>
                In the example above, a library is defined with a 'english' and 'french' flavor. When compiling the 'french'
                variant, a separate macro is defined which leads to a different binary being produced.
            </p><p>
                If no flavor is defined for a component, then a single default flavor named 'default' is used.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15C08"></a>54.9.4.&nbsp;Selecting the build types, platforms and flavors for a component</h3></div></div></div><p>
                For a default component, Gradle will attempt to create a native binary variant for each and every combination of <code class="literal">buildType</code>,
                <code class="literal">platform</code> and <code class="literal">flavor</code> defined for the project. It is possible to override this on a per-component
                basis, by specifying the set of <code class="literal">targetBuildTypes</code>, <code class="literal">targetPlatforms</code> and/or <code class="literal">targetFlavors</code>.
            </p><div class="example"><a name="targets"></a><p class="title"><b>Example&nbsp;54.24.&nbsp;Targeting a component at particular platforms</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">executables {
    main {
        targetPlatforms <span class="hl-string">"x86"</span>, <span class="hl-string">"x64"</span>
    }
}</pre></div></div><br class="example-break"><p>
                Here you can see that the <a class="ulink" href="../dsl/org.gradle.nativebinaries.TargetedNativeComponent.html#org.gradle.nativebinaries.TargetedNativeComponent:targetPlatforms(java.lang.String[])" target="_top"><code class="classname">TargetedNativeComponent.targetPlatforms()</code></a> method is used to
                select the set of platforms to target for <code class="literal">executables.main</code>.
            </p><p>
                A similar mechanism exists for selecting <a class="ulink" href="../dsl/org.gradle.nativebinaries.TargetedNativeComponent.html#org.gradle.nativebinaries.TargetedNativeComponent:targetBuildTypes(java.lang.String[])" target="_top"><code class="classname">TargetedNativeComponent.targetBuildTypes()</code></a>
                and <a class="ulink" href="../dsl/org.gradle.nativebinaries.TargetedNativeComponent.html#org.gradle.nativebinaries.TargetedNativeComponent:targetFlavors(java.lang.String[])" target="_top"><code class="classname">TargetedNativeComponent.targetFlavors()</code></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15C3F"></a>54.9.5.&nbsp;Building all possible variants</h3></div></div></div><p>
                When a set of build types, target platforms, and flavors is defined for a component,
                a <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeBinary.html" target="_top"><code class="classname">NativeBinary</code></a> model element is created for every possible
                combination of these. However, in many cases it is not possible to build a particular variant, perhaps because
                no tool chain is available to build for a particular platform.
            </p><p>
                If a binary variant cannot be built for any reason, then the <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeBinary.html" target="_top"><code class="classname">NativeBinary</code></a>
                associated with that variant will not be <code class="literal">buildable</code>. It is possible to use this property to create a task
                to generate all possible variants on a particular machine.
            </p><div class="example"><a name="buildable"></a><p class="title"><b>Example&nbsp;54.25.&nbsp;Building all possible variants</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task buildAllExecutables {
    dependsOn binaries.withType(ExecutableBinary).matching {
        it.buildable
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native_binaries:tool_chain"></a>54.10.&nbsp;Tool chains</h2></div></div></div><p>
            A single build may utilize different tool chains to build variants for different platforms. To this end,
            the core 'native-binary' plugins will attempt to locate and make available supported tool chains. However, the set
            of tool chains for a project may also be explicitly defined, allowing additional cross-compilers to be configured
            as well as allowing the install directories to be specified.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15C63"></a>54.10.1.&nbsp;Defining tool chains</h3></div></div></div><p>
                The supported tool chain types are:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.Gcc.html" target="_top"><code class="classname">Gcc</code></a></p></li><li class="listitem"><p><a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.Clang.html" target="_top"><code class="classname">Clang</code></a></p></li><li class="listitem"><p><a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.VisualCpp.html" target="_top"><code class="classname">VisualCpp</code></a></p></li></ul></div><div class="example"><a name="toolChains"></a><p class="title"><b>Example&nbsp;54.26.&nbsp;Defining tool chains</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    toolChains {
        visualCpp(VisualCpp) {
            <span class="hl-comment">// Specify the installDir if Visual Studio cannot be located by default</span>
            <span class="hl-comment">// installDir "C:/Apps/Microsoft Visual Studio 10.0"</span>
        }
        gcc(Gcc) {
            <span class="hl-comment">// Uncomment to use a GCC install that is not in the PATH</span>
            <span class="hl-comment">// path "/usr/bin/gcc"</span>
        }
        clang(Clang)
    }
}</pre></div></div><br class="example-break"><p>
                Each tool chain implementation allows for a certain degree of configuration (see the API documentation for more details).
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15C87"></a>54.10.2.&nbsp;Using tool chains</h3></div></div></div><p>
                It is not necessary or possible to specify the tool chain that should be used to build.
                For a given variant, Gradle will attempt to locate a <a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.ToolChain.html" target="_top"><code class="classname">ToolChain</code></a> that is able to build
                for the target platform. Available tool chains are searched in the order defined.
            </p><div class="note">
                When a platform does not define an architecture or operating system, the default target of the tool chain
                is assumed. So if a platform does not define a value for <code class="literal">operatingSystem</code>,
                Gradle will find the first available tool chain that can build for the specified <code class="literal">architecture</code>.
            </div><p>
                The core Gradle tool chains are able to target the following architectures out of the box. In each case, the tool chain
                will target the current operating system. See the next section for information on cross-compiling for other operating systems.
            </p><div class="table"><div class="table-contents"><table id="N15C9B">
                    <tr><td>Tool Chain</td><td>Architectures</td></tr>
                <tr>
                    <td>GCC</td><td>x86, x86_64</td>
                </tr><tr>
                    <td>Clang</td><td>x86, x86_64</td>
                </tr><tr>
                    <td>Visual C++</td><td>x86, x86_64, ia-64</td>
                </tr></table></div></div><p>
                So for GCC running on linux, the supported target platforms are 'linux/x86' and 'linux/x86_64'.
                For GCC running on Windows via Cygwin, platforms 'windows/x86' and 'windows/x86_64' are supported.
                (The Cygwin POSIX runtime is not yet modelled as part of the platform, but will be in the future.)
            </p><p>
                If no target platforms are defined for a project, then all binaries are built to target a default platform named 'current'.
                This default platform does not specify any <code class="literal">architecture</code> or <code class="literal">operatingSystem</code> value,
                hence using the default values of the first available tool chain.
            </p><p>
                Gradle provides a <em class="firstterm">hook</em> that allows the build author to control the exact set of arguments passed to a tool chain executable.
                This enables the build author to work around any limitations in Gradle, or assumptions that Gradle makes.
                The arguments hook should be seen as a 'last-resort' mechanism, with preference given to truly modelling the underlying domain.
            </p><div class="example"><a name="withArguments"></a><p class="title"><b>Example&nbsp;54.27.&nbsp;Reconfigure tool arguments</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    toolChains {
        visualCpp(VisualCpp) {
            cppCompiler.withArguments { args -&gt;
                args &lt;&lt; <span class="hl-string">"-DFRENCH"</span>
            }
        }
        clang(Clang){
            cCompiler.withArguments { args -&gt;
                Collections.replaceAll(args, <span class="hl-string">"CUSTOM"</span>, <span class="hl-string">"-DFRENCH"</span>)
            }
            linker.withArguments { args -&gt;
                args.remove <span class="hl-string">"CUSTOM"</span>
            }
            staticLibArchiver.withArguments { args -&gt;
                args.remove <span class="hl-string">"CUSTOM"</span>
            }
        }

    }
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15CD2"></a>54.10.3.&nbsp;Cross-compiling with GCC</h3></div></div></div><p>
                Cross-compiling is possible with the <a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.Gcc.html" target="_top"><code class="classname">Gcc</code></a> and <a class="ulink" href="../dsl/org.gradle.nativebinaries.toolchain.Clang.html" target="_top"><code class="classname">Clang</code></a> tool chains,
                by adding support for additional target platforms.
                This is done by specifying a target platform for a toolchain. For each targetted platform a custom configuration can be specified.
            </p><div class="example"><a name="targetPlatforms"></a><p class="title"><b>Example&nbsp;54.28.&nbsp;Defining target platforms</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    toolChains {
        gcc(Gcc) {
            target(<span class="hl-string">"arm"</span>){
                cppCompiler.withArguments { args -&gt;
                    args &lt;&lt; <span class="hl-string">"-m32"</span>
                }
                linker.withArguments { args -&gt;
                    args &lt;&lt; <span class="hl-string">"-m32"</span>
                }
            }
            target(<span class="hl-string">"sparc"</span>)
        }
    }
    platforms {
        arm {
            architecture <span class="hl-string">"arm"</span>
        }
        sparc {
            architecture <span class="hl-string">"sparc"</span>
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native_binaries:visual_studio"></a>54.11.&nbsp;Visual Studio IDE integration</h2></div></div></div><p>
            Gradle has the ability to generate Visual Studio project and solution files for the native components defined in your build.
            This ability is added by the <code class="literal">visual-studio</code> plugin. For a multi-project build, all projects with native components
            should have this plugin applied.
        </p><p>
            When the <code class="literal">visual-studio</code> plugin is applied, a task name <code class="literal">${component.name}VisualStudio</code> is created
            for each defined component. This task will generate a Visual Studio Solution file for the named component. This solution will include
            a Visual Studio Project for that component, as well as linking to project files for each depended-on binary.
        </p><p>
            The content of the generated visual studio files can be modified via programmatic hooks, provided by the <code class="literal">visualStudio</code>
            extension. Take a look at the 'visual-studio' sample, or see <a class="ulink" href="../dsl/org.gradle.ide.visualstudio.VisualStudioExtension.html#org.gradle.ide.visualstudio.VisualStudioExtension:projects" target="_top"><code class="classname">VisualStudioExtension.getProjects()</code></a>
            and <a class="ulink" href="../dsl/org.gradle.ide.visualstudio.VisualStudioExtension.html#org.gradle.ide.visualstudio.VisualStudioExtension:solutions" target="_top"><code class="classname">VisualStudioExtension.getSolutions()</code></a> for more details.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="native_binaries:cunit"></a>54.12.&nbsp;CUnit support</h2></div></div></div><p>
            The Gradle <code class="literal">cunit</code> plugin provides support for compiling and executing CUnit tests in your native-binary project.
            For each <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeExecutable.html" target="_top"><code class="classname">NativeExecutable</code></a> and <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeLibrary.html" target="_top"><code class="classname">NativeLibrary</code></a>
            defined in your project, Gradle will create a matching <a class="ulink" href="../dsl/org.gradle.nativebinaries.test.cunit.CUnitTestSuite.html" target="_top"><code class="classname">CUnitTestSuite</code></a> component,
            named <code class="literal">${component.name}Test</code>.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15D26"></a>54.12.1.&nbsp;CUnit sources</h3></div></div></div><p>
                Gradle will create a <a class="ulink" href="../dsl/org.gradle.language.c.CSourceSet.html" target="_top"><code class="classname">CSourceSet</code></a> named 'cunit' for each <a class="ulink" href="../dsl/org.gradle.nativebinaries.test.cunit.CUnitTestSuite.html" target="_top"><code class="classname">CUnitTestSuite</code></a> component
                in the project. This source set should contain the cunit test files for the component sources. Source files can be located in the conventional location
                (<code class="literal">src/${component.name}Test/cunit</code>) or can be configured like any other source set.
            </p><p>
                The job of initialising the CUnit test registry and executing the tests is performed by Gradle, via some generated CUnit launcher sources.
                Gradle will expect and call a function with the signature <code class="literal">void gradle_cunit_register()</code> that you can use to configure the
                actual CUnit suites and tests to execute.
            </p><div class="example"><a name="cunitSources"></a><p class="title"><b>Example&nbsp;54.29.&nbsp;Registering CUnit tests</b></p><div class="example-contents"><p><code class="filename">suite_operators.c</code></p><pre class="programlisting">#include &lt;CUnit/Basic.h&gt;
#include "gradle_cunit_register.h"
#include "test_operators.h"

int suite_init(void) {
    return 0;
}

int suite_clean(void) {
    return 0;
}

void gradle_cunit_register() {
    CU_pSuite pSuiteMath = CU_add_suite("operator tests", suite_init, suite_clean);
    CU_add_test(pSuiteMath, "test_plus", test_plus);
    CU_add_test(pSuiteMath, "test_minus", test_minus);
}</pre></div></div><br class="example-break"><div class="note">
                Due to this mechanism, your CUnit sources may not contain a <code class="literal">main</code> method since this will clash with the method provided by Gradle.
            </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15D4B"></a>54.12.2.&nbsp;Building CUnit executables</h3></div></div></div><p>
                A <a class="ulink" href="../dsl/org.gradle.nativebinaries.test.cunit.CUnitTestSuite.html" target="_top"><code class="classname">CUnitTestSuite</code></a> component has an associated
                <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeExecutable.html" target="_top"><code class="classname">NativeExecutable</code></a> or <a class="ulink" href="../dsl/org.gradle.nativebinaries.NativeLibrary.html" target="_top"><code class="classname">NativeLibrary</code></a> component.
                For each <a class="ulink" href="../dsl/org.gradle.nativebinaries.ProjectNativeBinary.html" target="_top"><code class="classname">ProjectNativeBinary</code></a> configured for the main component, a matching
                <a class="ulink" href="../javadoc/org/gradle/nativebinaries/test/TestSuiteExecutableBinary.html" target="_top"><code class="classname">TestSuiteExecutableBinary</code></a> will be configured on the test suite component.
                These test suite binaries can be configured in a similar way to any other binary instance:
            </p><div class="example"><a name="cunitSources"></a><p class="title"><b>Example&nbsp;54.30.&nbsp;Registering CUnit tests</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">binaries.withType(TestSuiteExecutableBinary) {
    lib library: <span class="hl-string">"cunit"</span>, linkage: <span class="hl-string">"static"</span>

    <span class="hl-keyword">if</span> (flavor == flavors.failing) {
        cCompiler.define <span class="hl-string">"PLUS_BROKEN"</span>
    }
}</pre></div></div><br class="example-break"><div class="note">
                Both the CUnit sources provided by your project and the generated launcher require the core CUnit headers and libraries.
                Presently, this library dependency must be provided by your project for each <a class="ulink" href="../javadoc/org/gradle/nativebinaries/test/TestSuiteExecutableBinary.html" target="_top"><code class="classname">TestSuiteExecutableBinary</code></a>.
            </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15D7A"></a>54.12.3.&nbsp;Running CUnit tests</h3></div></div></div><p>
                For each <a class="ulink" href="../javadoc/org/gradle/nativebinaries/test/TestSuiteExecutableBinary.html" target="_top"><code class="classname">TestSuiteExecutableBinary</code></a>, Gradle will create a task to execute this binary,
                which will run all of the registered CUnit tests.
                The generated test results will be located in the <code class="literal"><em class="replaceable"><code>${build.dir}</code></em>/test-results</code> directory.
            </p><div class="example"><a name="completeCUnitExample"></a><p class="title"><b>Example&nbsp;54.31.&nbsp;Running CUnit tests</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">"c"</span>
apply plugin: <span class="hl-string">"cunit"</span>

model {
    flavors {
        passing
        failing
    }
    repositories {
        libs(PrebuiltLibraries) {
            cunit {
                headers.srcDir <span class="hl-string">"lib/cunit/2.1-2/include"</span>
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(<span class="hl-string">"lib/cunit/2.1-2/lib/"</span> + findCUnitLibForPlatform(targetPlatform))
                }
            }
        }
    }
}

libraries {
    operators {}
}
binaries.withType(TestSuiteExecutableBinary) {
    lib library: <span class="hl-string">"cunit"</span>, linkage: <span class="hl-string">"static"</span>

    <span class="hl-keyword">if</span> (flavor == flavors.failing) {
        cCompiler.define <span class="hl-string">"PLUS_BROKEN"</span>
    }
}</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/native-binaries/cunit</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><pre class="screen">&gt; gradle -q runFailingOperatorsTestCUnitExe

There were test failures:
  1. /home/user/gradle/samples/native-binaries/cunit/src/operatorsTest/cunit/test_plus.c:6  - plus(0, -2) == -2
  2. /home/user/gradle/samples/native-binaries/cunit/src/operatorsTest/cunit/test_plus.c:7  - plus(2, 2) == 4

:runFailingOperatorsTestCUnitExe FAILED

BUILD FAILED

Total time: 1 secs</pre></div><div class="note"><p>
                The current support for CUnit is quite rudimentary. Plans for future integration include:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Allow tests to be declared with javadoc-style annotations.</p></li><li class="listitem"><p>Improved HTML reporting, similar to that available for JUnit.</p></li><li class="listitem"><p>Real-time feedback for test execution.</p></li><li class="listitem"><p>Support for additional test frameworks.</p></li></ul></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="build_lifecycle"></a>Chapter&nbsp;55.&nbsp;The Build Lifecycle</h1></div></div></div><p>We said earlier, that the core of Gradle is a language for dependency based programming. In Gradle terms this
        means that you can define tasks and dependencies between tasks. Gradle guarantees that these tasks are executed
        in the order of their dependencies, and that each task is executed only once. Those tasks form a
        <a class="ulink" href="http://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_top">Directed Acyclic Graph</a>. There are
        build tools that build up such a dependency graph as they execute their tasks. Gradle builds the complete
        dependency graph <span class="emphasis"><em>before</em></span> any task is executed. This lies at the heart of Gradle and makes
        many things possible which would not be possible otherwise.
    </p><p>Your build scripts configure this dependency graph. Therefore they are strictly speaking <span class="emphasis"><em>build
        configuration scripts</em></span>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:build_phases"></a>55.1.&nbsp;Build phases</h2></div></div></div><p>A Gradle build has three distinct phases.
        </p><div class="variablelist"><dl><dt><span class="term">Initialization</span></dt><dd><p>Gradle supports single and multi-project builds. During the initialization phase, Gradle
                        determines which projects are going to take part in the build, and creates a
                        <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a> instance for each of these projects.
                    </p></dd><dt><span class="term">Configuration</span></dt><dd><p>During this phase the project objects are configured.
                        The build scripts of <span class="emphasis"><em>all</em></span> projects which are part of the build are
                        executed. Gradle 1.4 introduces an <a class="link" href="#feature_lifecycle">incubating</a> opt-in feature called <em class="firstterm">configuration on demand</em>.
                        In this mode, Gradle configures only relevant projects (see <a class="xref" href="#sec:configuration_on_demand">Section&nbsp;56.1.1.1, &ldquo;Configuration on demand&rdquo;</a>).
                    </p></dd><dt><span class="term">Execution</span></dt><dd><p>Gradle determines the subset of the tasks, created and configured during the configuration
                        phase, to be executed. The subset is determined by the task name arguments passed to the
                        <span class="command"><strong>gradle</strong></span> command and the current directory. Gradle then executes each of the
                        selected tasks.
                    </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:settings_file"></a>55.2.&nbsp;Settings file</h2></div></div></div><p>Beside the build script files, Gradle defines a settings file. The settings file is determined by Gradle
            via a naming convention. The default name for this file is <code class="filename">settings.gradle</code>. Later in
            this chapter we explain how Gradle looks for a settings file.
        </p><p>The settings file gets executed during the initialization phase. A multiproject build must have a
            <code class="filename">settings.gradle</code>
            file in the root project of the multiproject hierarchy. It is required because in the
            settings file it is defined, which projects are taking part in the multi-project build (see
            <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>). For a single-project build, a settings file is optional.
            You might need it for example, to add libraries to your build script classpath (see <a class="xref" href="#organizing_build_logic">Chapter&nbsp;59, <i>Organizing Build Logic</i></a>). Let's first do some introspection with a single project
            build:
        </p><div class="example"><a name="buildlifecycle"></a><p class="title"><b>Example&nbsp;55.1.&nbsp;Single project build</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">println <span class="hl-string">'This is executed during the initialization phase.'</span></pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">println <span class="hl-string">'This is executed during the configuration phase.'</span>

task configured {
    println <span class="hl-string">'This is also executed during the configuration phase.'</span>
}

task test &lt;&lt; {
    println <span class="hl-string">'This is executed during the execution phase.'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle test</code></strong></p><pre class="screen">&gt; gradle test
This is executed during the initialization phase.
This is executed during the configuration phase.
This is also executed during the configuration phase.
:test
This is executed during the execution phase.

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>For a build script, the property access and method calls are delegated to a project object. Similarly
            property access and method calls within the settings file is delegated to a settings object. Have a look at
            <a class="ulink" href="../dsl/org.gradle.api.initialization.Settings.html" target="_top"><code class="classname">Settings</code></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:multi_project_builds"></a>55.3.&nbsp;Multi-project builds</h2></div></div></div><p>A multi-project build is a build where you build more than one project during a single execution of
            Gradle. You have to declare the projects taking part in the multiproject build in the settings file. There
            is much more to say about multi-project builds in the chapter dedicated to this topic (see <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>).
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:project_locations"></a>55.3.1.&nbsp;Project locations</h3></div></div></div><p>Multi-project builds are always represented by a tree with a single root. Each element in the tree
                represents a project. A project has a path which denotes the position
                of the project in the multi-project build tree. In majority of cases the project path is consistent with
                the physical location of the project in the file system. However, this behavior is configurable.
                The project tree is created in the <code class="filename">settings.gradle</code> file.
                By default it is assumed that the location of the settings
                file is also the location of the root project. But you can redefine the location of the root project
                in the settings file.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:building_the_tree"></a>55.3.2.&nbsp;Building the tree</h3></div></div></div><p>In the settings file you can use a set of methods to build the project tree. Hierarchical and flat
                physical layouts get special support.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N15E3A"></a>55.3.2.1.&nbsp;Hierarchical layouts</h4></div></div></div><div class="example"><a name="standardLayouts"></a><p class="title"><b>Example&nbsp;55.2.&nbsp;Hierarchical layout</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'project1'</span>, <span class="hl-string">'project2:child'</span>, <span class="hl-string">'project3:child1'</span></pre></div></div><br class="example-break"><p>The <code class="literal">include</code> method takes project paths as arguments.
                    The project path is assumed to be equal to the relative physical file system path.
                    For example, a path 'services:api' is mapped by default to a folder 'services/api'
                    (relative from the project root). You only need to specify the leaves of the tree.
                    This means that the inclusion of the path 'services:hotels:api' will result in creating 3 projects:
                    'services', 'services:hotels' and 'services:hotels:api'.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="N15E4C"></a>55.3.2.2.&nbsp;Flat layouts</h4></div></div></div><div class="example"><a name="standardLayouts"></a><p class="title"><b>Example&nbsp;55.3.&nbsp;Flat layout</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">includeFlat <span class="hl-string">'project3'</span>, <span class="hl-string">'project4'</span></pre></div></div><br class="example-break"><p>The <code class="literal">includeFlat</code> method takes directory names as an argument. Those directories
                    need to exist as siblings of the root project directory. The location of those directories
                    are considered as child projects of the root project in the multi-project tree.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:modifying_element_of_the_project_tree"></a>55.3.3.&nbsp;Modifying elements of the project tree</h3></div></div></div><p>The multi-project tree created in the settings file is made up of so called <em class="firstterm">project descriptors</em>.
                You can modify these descriptors in the settings file at any time. To access a descriptor you can do:
            </p><div class="example"><a name="customLayout"></a><p class="title"><b>Example&nbsp;55.4.&nbsp;Modification of elements of the project tree</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">println rootProject.name
println project(<span class="hl-string">':projectA'</span>).name</pre></div></div><br class="example-break"><p>Using this descriptor you can change the name, project directory and build file of a project.
            </p><div class="example"><a name="customLayout"></a><p class="title"><b>Example&nbsp;55.5.&nbsp;Modification of elements of the project tree</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">rootProject.name = <span class="hl-string">'main'</span>
project(<span class="hl-string">':projectA'</span>).projectDir = <span class="hl-keyword">new</span> File(settingsDir, <span class="hl-string">'../my-project-a'</span>)
project(<span class="hl-string">':projectA'</span>).buildFileName = <span class="hl-string">'projectA.gradle'</span></pre></div></div><br class="example-break"><p>Have a look at <a class="ulink" href="../javadoc/org/gradle/api/initialization/ProjectDescriptor.html" target="_top"><code class="classname">ProjectDescriptor</code></a> for more details.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:initialization"></a>55.4.&nbsp;Initialization</h2></div></div></div><p>How does Gradle know whether to do a single or multiproject build? If you trigger a multiproject build
            from the directory where the settings file is, things are easy. But Gradle also allows you to execute the
            build from within any subproject taking part in the build.
            <sup>[<a href="#ftn.N15E8A" name="N15E8A" class="footnote">20</a>]</sup>
            If you execute Gradle from within a project that has no <code class="filename">settings.gradle</code> file,
            Gradle does the following:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>It searches for a <code class="filename">settings.gradle</code> in a directory called <code class="filename">master</code>
                    which has the same nesting level as the current dir.
                </p></li><li class="listitem"><p>If no <code class="filename">settings.gradle</code> is found, it searches the parent directories for the existence of a
                    <code class="filename">settings.gradle</code> file.
                </p></li><li class="listitem"><p>If no <code class="filename">settings.gradle</code> file is found, the build is executed as a single project build.
                </p></li><li class="listitem"><p>If a <code class="filename">settings.gradle</code> file is found, Gradle checks if the current project is part of the
                    multiproject hierarchy defined in the found <code class="filename">settings.gradle</code> file. If not, the build is executed as a
                    single project build. Otherwise a multiproject build is executed.
                </p></li></ul></div><p>What is the purpose of this behavior? Somehow Gradle has to find out, whether the project you are into, is
            a subproject of a multiproject build or not. Of course, if it is a subproject, only the subproject and its
            dependent projects are build. But Gradle needs to create the build configuration for the whole multiproject
            build (see <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>). Via the <code class="option">-u</code>
            command line option, you can tell Gradle not to look in the parent hierarchy for a <code class="filename">settings.gradle</code> file. The
            current project is then always build as a single project build. If the current project contains a
            <code class="filename">settings.gradle</code> file, the <code class="option">-u</code> option has no meaning. Such a build is always executed as:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>a single project build, if the <code class="filename">settings.gradle</code> file does not define a multiproject hierarchy
                </p></li><li class="listitem"><p>a multiproject build, if the <code class="filename">settings.gradle</code> file does define a multiproject hierarchy.
                </p></li></ul></div><p>The auto search for a settings file does only work for multi-project builds with a physical hierarchical
            or flat layout. For a flat layout you must additionally obey to the naming convention described above.
            Gradle supports arbitrary physical layouts for a multiproject build. But for such arbitrary layouts you need
            to execute the build from the directory where the settings file is located. For how to run partial builds
            from the root see <a class="xref" href="#sec:running_partial_build_from_the_root">Section&nbsp;56.4, &ldquo;Running tasks by their absolute path&rdquo;</a>. In our next release we want to
            enable partial builds from subprojects by specifying the location of the settings file as a command line
            parameter. Gradle creates Project objects for every project taking part in the build. For a single
            project build this is only one project. For a multi-project build these are the projects specified in
            Settings object (plus the root project). Each project object has by default a name equals to the name of its
            top level directory. Every project except the root project has a parent project and might have child projects.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuration_and_execution_of_a_single_project_build"></a>55.5.&nbsp;Configuration and execution of a single project build</h2></div></div></div><p>For a single project build, the workflow of the <span class="emphasis"><em>after initialization</em></span>
            phases are pretty simple. The build script is executed against the project object that was created during
            the initialization phase. Then Gradle looks for tasks with names equal to those passed as command line
            arguments. If these task names exist, they are executed as a separate build in the order you have passed
            them. The configuration and execution for multi-project builds is discussed in <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="build_lifecycle_events"></a>55.6.&nbsp;Responding to the lifecycle in the build script</h2></div></div></div><p>Your build script can receive notifications as the build progresses through its lifecycle. These
            notifications generally take 2 forms: You can either implement a particular listener interface, or you can
            provide a closure to execute when the notification is fired. The examples below use closures. For details on
            how to use the listener interfaces, refer to the API documentation.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15EEB"></a>55.6.1.&nbsp;Project evaluation</h3></div></div></div><p>You can receive a notification immediately before and after a project is evaluated. This can be used
                to do things like performing additional configuration once all the definitions in a build script have
                been applied, or for some custom logging or profiling.
            </p><p>Below is an example which adds a <code class="literal">test</code> task to each project with the
                <code class="literal">hasTests</code> property set to true.
            </p><div class="example"><a name="projectEvaluateEvents"></a><p class="title"><b>Example&nbsp;55.6.&nbsp;Adding of test task to each project which has certain property set</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    afterEvaluate { project -&gt;
        <span class="hl-keyword">if</span> (project.hasTests) {
            println <span class="hl-string">"Adding test task to $project"</span>
            project.task(<span class="hl-string">'test'</span>) &lt;&lt; {
                println <span class="hl-string">"Running tests for $project"</span>
            }
        }
    }
}</pre><p><code class="filename">projectA.gradle</code></p><pre class="programlisting">hasTests = true</pre><p>Output of <strong class="userinput"><code>gradle -q test</code></strong></p><pre class="screen">&gt; gradle -q test
Adding test task to project ':projectA'
Running tests for project ':projectA'</pre></div></div><br class="example-break"><p>This example uses method <code class="literal">Project.afterEvaluate()</code> to add a closure which is executed
                after the project is evaluated.</p><p>It is also possible to receive notifications when any project is evaluated. This example performs
                some custom logging of project evaluation. Notice that the <code class="literal">afterProject</code> notification
                is received regardless of whether the project evaluates successfully or fails with an exception.
            </p><div class="example"><a name="buildProjectEvaluateEvents"></a><p class="title"><b>Example&nbsp;55.7.&nbsp;Notifications</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">gradle.afterProject {project, projectState -&gt;
    <span class="hl-keyword">if</span> (projectState.failure) {
        println <span class="hl-string">"Evaluation of $project FAILED"</span>
    } <span class="hl-keyword">else</span> {
        println <span class="hl-string">"Evaluation of $project succeeded"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q test</code></strong></p><pre class="screen">&gt; gradle -q test
Evaluation of root project 'buildProjectEvaluateEvents' succeeded
Evaluation of project ':projectA' succeeded
Evaluation of project ':projectB' FAILED</pre></div></div><br class="example-break"><p>You can also add a <a class="ulink" href="../javadoc/org/gradle/api/ProjectEvaluationListener.html" target="_top"><code class="classname">ProjectEvaluationListener</code></a> to the
                <a class="ulink" href="../dsl/org.gradle.api.invocation.Gradle.html" target="_top"><code class="classname">Gradle</code></a> to receive these events.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15F34"></a>55.6.2.&nbsp;Task creation</h3></div></div></div><p>You can receive a notification immediately after a task is added to a project. This can be used
                to set some default values or add behaviour before the task is made available in the build file.</p><p>The following example sets the <code class="literal">srcDir</code> property of each task as it is created.</p><div class="example"><a name="taskCreationEvents"></a><p class="title"><b>Example&nbsp;55.8.&nbsp;Setting of certain property to all tasks</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">tasks.whenTaskAdded { task -&gt;
    task.ext.srcDir = <span class="hl-string">'src/main/java'</span>
}

task a

println <span class="hl-string">"source dir is $a.srcDir"</span></pre><p>Output of <strong class="userinput"><code>gradle -q a</code></strong></p><pre class="screen">&gt; gradle -q a
source dir is src/main/java</pre></div></div><br class="example-break"><p>You can also add an <a class="ulink" href="../javadoc/org/gradle/api/Action.html" target="_top"><code class="classname">Action</code></a> to a
                <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top"><code class="classname">TaskContainer</code></a> to receive these events.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15F5A"></a>55.6.3.&nbsp;Task execution graph ready</h3></div></div></div><p>You can receive a notification immediately after the task execution graph has been populated. We
                have seen this already in <a class="xref" href="#configure-by-dag">Section&nbsp;6.13, &ldquo;Configure by DAG&rdquo;</a>.
            </p><p>You can also add a <a class="ulink" href="../javadoc/org/gradle/api/execution/TaskExecutionGraphListener.html" target="_top"><code class="classname">TaskExecutionGraphListener</code></a> to the
                <a class="ulink" href="../javadoc/org/gradle/api/execution/TaskExecutionGraph.html" target="_top"><code class="classname">TaskExecutionGraph</code></a> to receive these events.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15F6E"></a>55.6.4.&nbsp;Task execution</h3></div></div></div><p>You can receive a notification immediately before and after any task is executed.</p><p>The following example logs the start and end of each task execution. Notice that the
                <code class="literal">afterTask</code> notification is received regardless of whether the task completes
                successfully or fails with an exception.</p><div class="example"><a name="taskExecutionEvents"></a><p class="title"><b>Example&nbsp;55.9.&nbsp;Logging of start and end of each task execution</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task ok

task broken(dependsOn: ok) &lt;&lt; {
    <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> RuntimeException(<span class="hl-string">'broken'</span>)
}

gradle.taskGraph.beforeTask { Task task -&gt;
    println <span class="hl-string">"executing $task ..."</span>
}

gradle.taskGraph.afterTask { Task task, TaskState state -&gt;
    <span class="hl-keyword">if</span> (state.failure) {
        println <span class="hl-string">"FAILED"</span>
    }
    <span class="hl-keyword">else</span> {
        println <span class="hl-string">"done"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q broken</code></strong></p><pre class="screen">&gt; gradle -q broken
executing task ':ok' ...
done
executing task ':broken' ...
FAILED</pre></div></div><br class="example-break"><p>You can also use a <a class="ulink" href="../javadoc/org/gradle/api/execution/TaskExecutionListener.html" target="_top"><code class="classname">TaskExecutionListener</code></a> to the
                <a class="ulink" href="../javadoc/org/gradle/api/execution/TaskExecutionGraph.html" target="_top"><code class="classname">TaskExecutionGraph</code></a> to receive these events.
            </p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N15E8A" name="ftn.N15E8A" class="para">20</a>] </sup>Gradle supports partial multiproject builds (see <a class="xref" href="#multi_project_builds">Chapter&nbsp;56, <i>Multi-project Builds</i></a>).
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="multi_project_builds"></a>Chapter&nbsp;56.&nbsp;Multi-project Builds</h1></div></div></div><p>The powerful support for multi-project builds is one of Gradle's unique selling points. This topic is also the
        most intellectually challenging.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:cross_project_configuration"></a>56.1.&nbsp;Cross project configuration</h2></div></div></div><p>Let's start with a very simple multi-project build. After all Gradle is a general purpose build tool at
            its core, so the projects don't have to be java projects. Our first examples are about marine life.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15FA2"></a>56.1.1.&nbsp;Configuration and execution</h3></div></div></div><p><a class="xref" href="#sec:build_phases">Section&nbsp;55.1, &ldquo;Build phases&rdquo;</a> describes the phases of every Gradle build.
                Let's zoom into configuration and execution phases of a multi-project build.
                The configuration of all projects happens before any task is executed.
                This means that when a single task, from a single project is requested,
                <span class="emphasis"><em>all</em></span> projects of multi-project build are configured first.
                The reason every project needs to be configured is to support
                the flexibility of accessing and changing any part of Gradle project model.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sec:configuration_on_demand"></a>56.1.1.1.&nbsp;Configuration on demand</h4></div></div></div><p>Configuration injection feature and access to the complete project model
                    are possible because every project is configured before the execution phase.
                    Yet, this approach may not be the most efficient in a very large multi-project builds.
                    There are Gradle builds with a hierarchy of hundreds of subprojects.
                    Configuration time of huge multi-project builds may become noticeable.
                    Scalability is an important requirement for Gradle. Hence, starting from version 1.4
                    new incubating 'configuration on demand' mode is introduced.</p><p>
                    Configuration on demand mode attempts to configure only projects that are relevant for requested tasks.
                    This way, the configuration time of a large multi-project build is greatly improved.
                    In the long term, this mode will become the default mode, possibly the only mode for Gradle build execution.
                    The configuration on demand feature is incubating so not every build is guaranteed to work correctly.
                    The feature should work very well for multi-project builds that have decoupled projects (<a class="xref" href="#sec:decoupled_projects">Section&nbsp;56.9, &ldquo;Decoupled Projects&rdquo;</a>).
                    In configuration on demand mode projects are configured as follows:
                    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Root project is always configured.
                            This way the typical common configuration is supported (allprojects or subprojects script blocks).</li><li class="listitem">Project in the directory where the build is executed is also configured, but only when Gradle is executed without any tasks.
                            This way the default tasks behave correctly when projects are configured on demand.</li><li class="listitem">The standard project dependencies are supported and makes relevant projects configured.
                            If project A has a compile dependency on project B then building A causes configuration of both projects: A and B.</li><li class="listitem">The task dependencies declared via task path are supported and cause relevant projects configured.
                            Example: someTask.dependsOn(":someOtherProject:someOtherTask")
                        </li><li class="listitem">Task requested via task path from the command line (or Tooling API) causes the relevant project configured.
                            Building 'projectA:projectB:someTask' causes configuration of projectB.
                        </li></ul></div><p>
                </p><p>
                    Eager to try out this new feature? To configure on demand with every build run see <a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a>.
                    To configure on demand just for given build please see <a class="xref" href="#gradle_command_line">Appendix&nbsp;D, <i>Gradle Command Line</i></a>.
                </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N15FCB"></a>56.1.2.&nbsp;Defining common behavior</h3></div></div></div><p>We have the following project tree. This is a multi-project build with a root project
                <code class="literal">water</code> and a subproject <code class="literal">bluewhale</code>.
            </p><div class="example"><a name="multiprojectFirstExample"></a><p class="title"><b>Example&nbsp;56.1.&nbsp;Multi-project tree - water &amp; bluewhale projects</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/firstExample/water</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span></pre></div></div><br class="example-break"><p>And where is the build script for the <code class="literal">bluewhale</code> project? In Gradle build scripts are optional.
                Obviously for a single project build, a project without a build script doesn't make much sense. For
                multiproject builds the situation is different. Let's look at the build script for the <code class="literal">water</code> project and
                execute it:
            </p><div class="example"><a name="multiprojectFirstExample"></a><p class="title"><b>Example&nbsp;56.2.&nbsp;Build script of water (parent) project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">Closure cl = { task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
task hello &lt;&lt; cl
project(<span class="hl-string">':bluewhale'</span>) {
    task hello &lt;&lt; cl
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale</pre></div></div><br class="example-break"><p>Gradle allows you to access any project of the multi-project build from any build script. The Project
                API provides a method called <code class="literal">project()</code>, which takes a path as an argument and returns
                the Project object for this path. The capability to configure a project build from any build script we
                call <em class="firstterm">cross project configuration</em>. Gradle implements this via
                <em class="firstterm">configuration injection</em>.
            </p><p>We are not that happy with the build script of the <code class="literal">water</code>  project. It is inconvenient to add the task
                explicitly for every project. We can do better. Let's first add another project called
                <code class="literal">krill</code> to our multi-project build.
            </p><div class="example"><a name="multiprojectAddKrill"></a><p class="title"><b>Example&nbsp;56.3.&nbsp;Multi-project tree - water, bluewhale  &amp; krill projects</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
  krill/</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/addKrill/water</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span></pre></div></div><br class="example-break"><p>Now we rewrite the <code class="literal">water</code> build script and boil it down to a single line.</p><div class="example"><a name="multiprojectAddKrill"></a><p class="title"><b>Example&nbsp;56.4.&nbsp;Water project build script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    task hello &lt;&lt; { task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
I'm krill</pre></div></div><br class="example-break"><p>Is this cool or is this cool? And how does this work? The Project API provides a property
                <code class="literal">allprojects</code>
                which returns a list with the current project and all its subprojects underneath it. If you call
                <code class="literal">allprojects</code>
                with a closure, the statements of the closure are delegated to the projects associated with <code class="literal">
                    allprojects</code>. You could also do an iteration via <code class="literal">allprojects.each</code>, but
                that would be more verbose.
            </p><p>Other build systems use inheritance as the primary means for defining common behavior. We also offer
                inheritance for projects as you will see later. But Gradle uses configuration injection as the usual way
                of defining common behavior. We think it provides a very powerful and flexible way of configuring
                multiproject builds.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:subproject_configuration"></a>56.2.&nbsp;Subproject configuration</h2></div></div></div><p>The Project API also provides a property for accessing the subprojects only.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1605A"></a>56.2.1.&nbsp;Defining common behavior</h3></div></div></div><div class="example"><a name="multiprojectUseSubprojects"></a><p class="title"><b>Example&nbsp;56.5.&nbsp;Defining common behaviour of all projects and subprojects</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
I'm krill
- I depend on water</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:adding_specific_behavior"></a>56.2.2.&nbsp;Adding specific behavior</h3></div></div></div><p>You can add specific behavior on top of the common behavior. Usually we put the project specific
                behavior in the build script of the project where we want to apply this specific behavior. But as we
                have already seen, we don't have to do it this way. We could add project specific behavior for the
                <code class="literal">bluewhale</code> project like this:
            </p><div class="example"><a name="multiprojectSubprojectsAddFromTop"></a><p class="title"><b>Example&nbsp;56.6.&nbsp;Defining specific behaviour for particular project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}
project(<span class="hl-string">':bluewhale'</span>).hello &lt;&lt; {
    println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
I'm krill
- I depend on water</pre></div></div><br class="example-break"><p>As we have said, we usually prefer to put project specific behavior into the build script of this
                project. Let's refactor and also add some project specific behavior to the <code class="literal">krill</code>
                project.
            </p><div class="example"><a name="multiprojectSpreadSpecifics"></a><p class="title"><b>Example&nbsp;56.7.&nbsp;Defining specific behaviour for project krill</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
    build.gradle
  krill/
    build.gradle</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/spreadSpecifics/water</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span></pre><p><code class="filename">bluewhale/build.gradle</code></p><pre class="programlisting">hello.doLast { println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span> }</pre><p><code class="filename">krill/build.gradle</code></p><pre class="programlisting">hello.doLast {
    println <span class="hl-string">"- The weight of my species in summer is twice as heavy as all human beings."</span>
}</pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
I'm krill
- I depend on water
- The weight of my species in summer is twice as heavy as all human beings.</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:project_filtering"></a>56.2.3.&nbsp;Project filtering</h3></div></div></div><p>To show more of the power of configuration injection, let's add another project
                called <code class="literal">tropicalFish</code> and add more behavior to the build via the build script of the
                <code class="literal">water</code> project.
            </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:filtering_by_name"></a>56.2.3.1.&nbsp;Filtering by name</h4></div></div></div><div class="example"><a name="multiprojectAddTropical"></a><p class="title"><b>Example&nbsp;56.8.&nbsp;Adding custom behaviour to some projects (filtered by project name)</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
    build.gradle
  krill/
    build.gradle
  tropicalFish/</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/addTropical/water</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span>, <span class="hl-string">'tropicalFish'</span></pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}
configure(subprojects.findAll {it.name != <span class="hl-string">'tropicalFish'</span>}) {
    hello &lt;&lt; {println <span class="hl-string">'- I love to spend time in the arctic waters.'</span>}
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I love to spend time in the arctic waters.
- I'm the largest animal that has ever lived on this planet.
I'm krill
- I depend on water
- I love to spend time in the arctic waters.
- The weight of my species in summer is twice as heavy as all human beings.
I'm tropicalFish
- I depend on water</pre></div></div><br class="example-break"><p>The <code class="literal">configure()</code> method takes a list as an argument and applies the
                    configuration to the projects in this list.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:filtering_by_properties"></a>56.2.3.2.&nbsp;Filtering by properties</h4></div></div></div><p>Using the project name for filtering is one option. Using extra project properties is another.
                    (See <a class="xref" href="#sec:extra_properties">Section&nbsp;13.4.2, &ldquo;Extra properties&rdquo;</a> for more information on extra properties.)
                </p><div class="example"><a name="multiprojectTropicalWithProperties"></a><p class="title"><b>Example&nbsp;56.9.&nbsp;Adding custom behaviour to some projects (filtered by project properties)</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
    build.gradle
  krill/
    build.gradle
  tropicalFish/
    build.gradle</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/tropicalWithProperties/water</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span>, <span class="hl-string">'tropicalFish'</span></pre><p><code class="filename">bluewhale/build.gradle</code></p><pre class="programlisting">ext.arctic = true
hello.doLast { println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span> }</pre><p><code class="filename">krill/build.gradle</code></p><pre class="programlisting">ext.arctic = true
hello.doLast {
    println <span class="hl-string">"- The weight of my species in summer is twice as heavy as all human beings."</span>
}</pre><p><code class="filename">tropicalFish/build.gradle</code></p><pre class="programlisting">ext.arctic = false</pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello {
        doLast {println <span class="hl-string">"- I depend on water"</span>}
        afterEvaluate { Project project -&gt;
            <span class="hl-keyword">if</span> (project.arctic) { doLast {
                println <span class="hl-string">'- I love to spend time in the arctic waters.'</span> }
            }
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
- I love to spend time in the arctic waters.
I'm krill
- I depend on water
- The weight of my species in summer is twice as heavy as all human beings.
- I love to spend time in the arctic waters.
I'm tropicalFish
- I depend on water</pre></div></div><br class="example-break"><p>In the build file of the <code class="literal">water</code> project we use an <code class="literal">afterEvaluate</code>
                    notification. This means that the closure we are passing gets evaluated <span class="emphasis"><em>after</em></span>
                    the build scripts of the subproject are evaluated. As the property <code class="literal">arctic</code>
                    is set in those build scripts, we have to do it this way. You will find more on this topic in
                    <a class="xref" href="#sec:dependencies_which_dependencies">Section&nbsp;56.6, &ldquo;Dependencies - Which dependencies?&rdquo;</a>
                </p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:execution_rules_for_multi_project_builds"></a>56.3.&nbsp;Execution rules for multi-project builds</h2></div></div></div><p>When we have executed the <code class="literal">hello</code> task from the root project dir things behaved in an
            intuitive way. All the <code class="literal">hello</code> tasks of the different projects were executed. Let's switch
            to the <code class="literal">bluewhale</code> dir and see what happens if we execute Gradle from there.
        </p><div class="example"><a name="multiprojectSubBuild"></a><p class="title"><b>Example&nbsp;56.10.&nbsp;Running build from subproject</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
- I love to spend time in the arctic waters.</pre></div></div><br class="example-break"><p>The basic rule behind Gradle's behavior is simple. Gradle looks down the hierarchy, starting with the
            <span class="emphasis"><em>current dir</em></span>, for tasks with the name
            <code class="literal">hello</code>
            an executes them. One thing is very important to note. Gradle
            <span class="emphasis"><em>always</em></span>
            evaluates
            <span class="emphasis"><em>every</em></span>
            project of the multi-project build and creates all existing task objects. Then, according to the task name
            arguments and the current dir, Gradle filters the tasks which should be executed. Because of Gradle's
            cross project configuration <span class="emphasis"><em>every</em></span> project has to be evaluated before <span class="emphasis"><em>any</em></span>
            task gets executed. We will have a closer look at this in the next section. Let's now have our last marine
            example. Let's add a task to <code class="literal">bluewhale</code> and <code class="literal">krill</code>.
        </p><div class="example"><a name="multiprojectPartialTasks"></a><p class="title"><b>Example&nbsp;56.11.&nbsp;Evaluation and execution of projects</b></p><div class="example-contents"><p><code class="filename">bluewhale/build.gradle</code></p><pre class="programlisting">ext.arctic = true
hello &lt;&lt; { println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span> }

task distanceToIceberg &lt;&lt; {
    println <span class="hl-string">'20 nautical miles'</span>
}</pre><p><code class="filename">krill/build.gradle</code></p><pre class="programlisting">ext.arctic = true
hello &lt;&lt; { println <span class="hl-string">"- The weight of my species in summer is twice as heavy as all human beings."</span> }

task distanceToIceberg &lt;&lt; {
    println <span class="hl-string">'5 nautical miles'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q distanceToIceberg</code></strong></p><pre class="screen">&gt; gradle -q distanceToIceberg
20 nautical miles
5 nautical miles</pre></div></div><br class="example-break"><p>Here the output without the <code class="literal">-q</code> option:</p><div class="example"><a name="multiprojectPartialTasksNotQuiet"></a><p class="title"><b>Example&nbsp;56.12.&nbsp;Evaluation and execution of projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle distanceToIceberg</code></strong></p><pre class="screen">&gt; gradle distanceToIceberg
:bluewhale:distanceToIceberg
20 nautical miles
:krill:distanceToIceberg
5 nautical miles

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>The build is executed from the <code class="literal">water</code> project. Neither <code class="literal">water</code> nor
            <code class="literal">tropicalFish</code> have a task with the name <code class="literal">distanceToIceberg</code>. Gradle does
            not care. The simple rule mentioned already above is: Execute all tasks down the hierarchy which have this
            name. Only complain if there is <span class="emphasis"><em>no</em></span> such task!
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:running_partial_build_from_the_root"></a>56.4.&nbsp;Running tasks by their absolute path</h2></div></div></div><p>As we have seen, you can run a multi-project build by entering any subproject dir and execute the build
            from there. All matching task names of the project hierarchy starting with the current dir are executed. But
            Gradle also offers to execute tasks by their absolute path (see also <a class="xref" href="#sec:project_and_task_paths">Section&nbsp;56.5, &ldquo;Project and task paths&rdquo;</a>):
        </p><div class="example"><a name="multiprojectAbsoluteTaskPaths"></a><p class="title"><b>Example&nbsp;56.13.&nbsp;Running tasks by their absolute path</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q :hello :krill:hello hello</code></strong></p><pre class="screen">&gt; gradle -q :hello :krill:hello hello
I'm water
I'm krill
- I depend on water
- The weight of my species in summer is twice as heavy as all human beings.
- I love to spend time in the arctic waters.
I'm tropicalFish
- I depend on water</pre></div></div><br class="example-break"><p>The build is executed from the <code class="literal">tropicalFish</code> project. We execute the <code class="literal">hello</code>
            tasks of the <code class="literal">water</code>, the <code class="literal">krill</code> and the <code class="literal">tropicalFish</code>
            project. The first two tasks are specified by there absolute path, the last task is executed on the name
            matching mechanism described above.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:project_and_task_paths"></a>56.5.&nbsp;Project and task paths</h2></div></div></div><p>A project path has the following pattern: It starts always with a colon, which denotes the root project.
            The root project is the only project in a path that is not specified by its name. The path
            <code class="literal">:bluewhale</code>
            corresponds to the file system path
            <code class="literal">water/bluewhale</code>
            in the case of the example above.
        </p><p>The path of a task is simply its project path plus the task name. For example <code class="literal">
            :bluewhale:hello</code>. Within a project you can address a task of the same project just by its name.
            This is interpreted as a relative path.
        </p><p>Originally Gradle has used the
            <code class="literal">'/'</code>
            character as a natural path separator. With the introduction of directory tasks (see <a class="xref" href="#sec:directory_creation">Section&nbsp;14.1, &ldquo;Directory creation&rdquo;</a>) this was no longer possible, as the name of the directory task
            contains the
            <code class="literal">'/'</code>
            character.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dependencies_which_dependencies"></a>56.6.&nbsp;Dependencies - Which dependencies?</h2></div></div></div><p>The examples from the last section were special, as the projects had no <span class="emphasis"><em>Execution
            Dependencies</em></span>. They had only <span class="emphasis"><em>Configuration Dependencies</em></span>. Here is an example
            where this is different:
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:execution_time_dependencies"></a>56.6.1.&nbsp;Execution dependencies</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:dependencies_and_execution_order"></a>56.6.1.1.&nbsp;Dependencies and execution order</h4></div></div></div><div class="example"><a name="multiprojectFirstMessages"></a><p class="title"><b>Example&nbsp;56.14.&nbsp;Dependencies and execution order</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">messages/
  settings.gradle
  consumer/
    build.gradle
  producer/
    build.gradle</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/firstMessages/messages</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'consumer'</span>, <span class="hl-string">'producer'</span></pre><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">task action &lt;&lt; {
    println(<span class="hl-string">"Consuming message: ${rootProject.producerMessage}"</span>)
}</pre><p><code class="filename">producer/build.gradle</code></p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    rootProject.producerMessage = <span class="hl-string">'Watch the order of execution.'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q action</code></strong></p><pre class="screen">&gt; gradle -q action
Consuming message: null
Producing message:</pre></div></div><br class="example-break"><p>This did not work out. If nothing else is defined, Gradle executes the task in alphanumeric order.
                    Therefore
                    <code class="literal">:consumer:action</code>
                    is executed before <code class="literal">:producer:action</code>. Let's try to solve this with a hack and
                    rename the producer project to <code class="literal">aProducer</code>.
                </p><div class="example"><a name="multiprojectMessagesHack"></a><p class="title"><b>Example&nbsp;56.15.&nbsp;Dependencies and execution order</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">messages/
  settings.gradle
  aProducer/
    build.gradle
  consumer/
    build.gradle</pre><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'consumer'</span>, <span class="hl-string">'aProducer'</span></pre><p><code class="filename">aProducer/build.gradle</code></p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    rootProject.producerMessage = <span class="hl-string">'Watch the order of execution.'</span>
}</pre><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">task action &lt;&lt; {
    println(<span class="hl-string">"Consuming message: ${rootProject.producerMessage}"</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q action</code></strong></p><pre class="screen">&gt; gradle -q action
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"><p>Now we take the air out of this hack. We simply switch to the <code class="literal">consumer</code> dir and
                    execute the build.
                </p><div class="example"><a name="multiprojectMessagesHackBroken"></a><p class="title"><b>Example&nbsp;56.16.&nbsp;Dependencies and execution order</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q action</code></strong></p><pre class="screen">&gt; gradle -q action
Consuming message: null</pre></div></div><br class="example-break"><p>For Gradle the two
                    <code class="literal">action</code>
                    tasks are just not related. If you execute the build from the
                    <code class="literal">messages</code>
                    project Gradle executes them both because they have the same name and they are down the hierarchy.
                    In the last example only one
                    <code class="literal">action</code>
                    was down the hierarchy and therefore it was the only task that got executed. We need something
                    better than this hack.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:declaring_dependencies"></a>56.6.1.2.&nbsp;Declaring dependencies</h4></div></div></div><div class="example"><a name="multiprojectMessagesDependencies"></a><p class="title"><b>Example&nbsp;56.17.&nbsp;Declaring dependencies</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">messages/
  settings.gradle
  consumer/
    build.gradle
  producer/
    build.gradle</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/messagesWithDependencies/messages</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'consumer'</span>, <span class="hl-string">'producer'</span></pre><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">task action(dependsOn: <span class="hl-string">":producer:action"</span>) &lt;&lt; {
    println(<span class="hl-string">"Consuming message: ${rootProject.producerMessage}"</span>)
}</pre><p><code class="filename">producer/build.gradle</code></p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    rootProject.producerMessage = <span class="hl-string">'Watch the order of execution.'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q action</code></strong></p><pre class="screen">&gt; gradle -q action
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"><p>Running this from the <code class="literal">consumer</code> directory gives:</p><div class="example"><a name="multiprojectMessagesDependenciesSubBuild"></a><p class="title"><b>Example&nbsp;56.18.&nbsp;Declaring dependencies</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q action</code></strong></p><pre class="screen">&gt; gradle -q action
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"><p>We have now declared that the
                    <code class="literal">action</code> task in the <code class="literal">consumer</code>
                    project has an
                    <span class="emphasis"><em>execution dependency</em></span>
                    on the <code class="literal">action</code> task on the
                    <code class="literal">producer</code>
                    project.
                </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:the_nature_of_cross_project_task_dependencies"></a>56.6.1.3.&nbsp;The nature of cross project task dependencies</h4></div></div></div><p>Of course, task dependencies across different projects are not limited to tasks with the same name.
                    Let's change the naming of our tasks and execute the build.
                </p><div class="example"><a name="multiprojectMessagesTaskDependencies"></a><p class="title"><b>Example&nbsp;56.19.&nbsp;Cross project task dependencies</b></p><div class="example-contents"><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">task consume(dependsOn: <span class="hl-string">':producer:produce'</span>) &lt;&lt; {
    println(<span class="hl-string">"Consuming message: ${rootProject.producerMessage}"</span>)
}</pre><p><code class="filename">producer/build.gradle</code></p><pre class="programlisting">task produce &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    rootProject.producerMessage = <span class="hl-string">'Watch the order of execution.'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong></p><pre class="screen">&gt; gradle -q consume
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:configuration_time_dependencies"></a>56.6.2.&nbsp;Configuration time dependencies</h3></div></div></div><p>Let's have one more example with our producer-consumer build before we enter
                <span class="emphasis"><em>Java</em></span>
                land. We add a property to the producer project and create now a configuration time dependency from
                consumer on producer.
            </p><div class="example"><a name="multiprojectMessagesConfigDependenciesBroken"></a><p class="title"><b>Example&nbsp;56.20.&nbsp;Configuration time dependencies</b></p><div class="example-contents"><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">def message = rootProject.producerMessage

task consume &lt;&lt; {
    println(<span class="hl-string">"Consuming message: "</span> + message)
}</pre><p><code class="filename">producer/build.gradle</code></p><pre class="programlisting">rootProject.producerMessage = <span class="hl-string">'Watch the order of evaluation.'</span></pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong></p><pre class="screen">&gt; gradle -q consume
Consuming message: null</pre></div></div><br class="example-break"><p>The default
                <span class="emphasis"><em>evaluation</em></span>
                order of the projects is alphanumeric (for the same nesting level). Therefore the
                <code class="literal">consumer</code>
                project is evaluated before the
                <code class="literal">producer</code>
                project and the
                <code class="literal">key</code>
                value of the
                <code class="literal">producer</code>
                is set
                <span class="emphasis"><em>after</em></span>
                it is read by the
                <code class="literal">consumer</code>
                project. Gradle offers a solution for this.
            </p><div class="example"><a name="multiprojectMessagesConfigDependencies"></a><p class="title"><b>Example&nbsp;56.21.&nbsp;Configuration time dependencies - evaluationDependsOn</b></p><div class="example-contents"><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">evaluationDependsOn(<span class="hl-string">':producer'</span>)

def message = rootProject.producerMessage

task consume &lt;&lt; {
    println(<span class="hl-string">"Consuming message: "</span> + message)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong></p><pre class="screen">&gt; gradle -q consume
Consuming message: Watch the order of evaluation.</pre></div></div><br class="example-break"><p>The command
                <code class="literal">evaluationDependsOn</code>
                triggers the evaluation of
                <code class="literal">producer</code>
                <span class="emphasis"><em>before</em></span>
                <code class="literal">consumer</code>
                is evaluated. The example is a bit contrived for the sake of showing the mechanism. In
                <span class="emphasis"><em>this</em></span>
                case there would be an easier solution by reading the key property at execution time.
            </p><div class="example"><a name="multiprojectMessagesConfigDependenciesAltSolution"></a><p class="title"><b>Example&nbsp;56.22.&nbsp;Configuration time dependencies</b></p><div class="example-contents"><p><code class="filename">consumer/build.gradle</code></p><pre class="programlisting">task consume &lt;&lt; {
    println(<span class="hl-string">"Consuming message: ${rootProject.producerMessage}"</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong></p><pre class="screen">&gt; gradle -q consume
Consuming message: Watch the order of evaluation.</pre></div></div><br class="example-break"><p>Configuration dependencies are very different to execution dependencies. Configuration dependencies
                are between projects whereas execution dependencies are always resolved to task dependencies. Another
                difference is that always all projects are configured, even when you start the build from a subproject.
                The default configuration order is top down, which is usually what is needed.
            </p><p>
                To change the the default configuration order to be bottom up, That means that a project configuration
                depends on the configuration of its child projects, the <code class="literal">evaluationDependsOnChildren()</code> method can be used.
            </p><p>On the same nesting level the configuration order depends on the alphanumeric position. The most
                common use case is to have multi-project builds that share a common lifecycle (e.g. all projects use the
                Java plugin). If you declare with
                <code class="literal">dependsOn</code>
                a
                <span class="emphasis"><em>execution dependency</em></span>
                between different projects, the default behavior of this method is to create also a
                <span class="emphasis"><em>configuration</em></span>
                dependency between the two projects. Therefore it is likely that you don't have to define configuration
                dependencies explicitly.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sub:real_life_examples"></a>56.6.3.&nbsp;Real life examples</h3></div></div></div><p>Gradle's multi-project features are driven by real life use cases. The first example for describing
                such a use case, consists of two webapplication projects and a parent project that creates a
                distribution out of them.
                <sup>[<a href="#ftn.N16354" name="N16354" class="footnote">21</a>]</sup>
                For the example we use only one build script and do <span class="emphasis"><em>cross project configuration</em></span>.
            </p><div class="example"><a name="webdist"></a><p class="title"><b>Example&nbsp;56.23.&nbsp;Dependencies - real life example - crossproject configuration</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">webDist/
  settings.gradle
  build.gradle
  date/
    src/main/java/
      org/gradle/sample/
        DateServlet.java
  hello/
    src/main/java/
      org/gradle/sample/
        HelloServlet.java</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/webDist</code> which is in both the binary and source distributions of Gradle.</p></div><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'date'</span>, <span class="hl-string">'hello'</span></pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">allprojects {
    apply plugin: <span class="hl-string">'java'</span>
    group = <span class="hl-string">'org.gradle.sample'</span>
    version = <span class="hl-string">'1.0'</span>
}

subprojects {
    apply plugin: <span class="hl-string">'war'</span>
    repositories {
        mavenCentral()
    }
    dependencies {
        compile <span class="hl-string">"javax.servlet:servlet-api:2.5"</span>
    }
}

task explodedDist(dependsOn: assemble) &lt;&lt; {
    File explodedDist = mkdir(<span class="hl-string">"$buildDir/explodedDist"</span>)
    subprojects.each {project -&gt;
        project.tasks.withType(Jar).each {archiveTask -&gt;
            copy {
                from archiveTask.archivePath
                into explodedDist
            }
        }
    }
}</pre></div></div><br class="example-break"><p>We have an interesting set of dependencies. Obviously the
                <code class="literal">date</code>
                and
                <code class="literal">hello</code>
                projects have a
                <span class="emphasis"><em>configuration</em></span>
                dependency on <code class="literal">webDist</code>, as all the build logic for the webapp projects is injected by
                <code class="literal">webDist</code>. The
                <span class="emphasis"><em>execution</em></span>
                dependency is in the other direction, as
                <code class="literal">webDist</code>
                depends on the build artifacts of
                <code class="literal">date</code>
                and <code class="literal">hello</code>. There is even a third dependency.
                <code class="literal">webDist</code>
                has a
                <span class="emphasis"><em>configuration</em></span>
                dependency on
                <code class="literal">date</code>
                and
                <code class="literal">hello</code>
                because it needs to know the <code class="literal">archivePath</code>. But it asks for this information at
                <span class="emphasis"><em>execution time</em></span>. Therefore we have no circular dependency.
            </p><p>Such and other dependency patterns are daily bread in the problem space of multi-project builds. If a
                build system does not support such patterns, you either can't solve your problem or you need to do ugly
                hacks which are hard to maintain and massively afflict your productivity as a build master.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:project_jar_dependencies"></a>56.7.&nbsp;Project lib dependencies</h2></div></div></div><p>What if one projects needs the jar produced by another project in its compile path? And not just the jar
            but also the transitive dependencies of this jar? Obviously this is a very common use case for Java
            multi-project builds. As already mentioned in <a class="xref" href="#sub:project_dependencies">Section&nbsp;50.4.3, &ldquo;Project dependencies&rdquo;</a>, Gradle
            offers project lib dependencies for this.
        </p><div class="example"><a name="javadependencies_1"></a><p class="title"><b>Example&nbsp;56.24.&nbsp;Project lib dependencies</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">java/
  settings.gradle
  build.gradle
  api/
    src/main/java/
      org/gradle/sample/
        api/
          Person.java
        apiImpl/
          PersonImpl.java
  services/personService/
    src/
      main/java/
        org/gradle/sample/services/
          PersonService.java
      test/java/
        org/gradle/sample/services/
          PersonServiceTest.java
  shared/
    src/main/java/
      org/gradle/sample/shared/
        Helper.java</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/java</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>We have the projects <code class="literal">shared</code>, <code class="literal">api</code> and<code class="literal">personService</code>.
            <code class="literal">personService</code> has a lib dependency on the other two projects. <code class="literal">api</code>
            has a lib dependency on <code class="literal">shared</code>.
            <sup>[<a href="#ftn.N163DA" name="N163DA" class="footnote">22</a>]</sup>
        </p><div class="example"><a name="javadependencies_2"></a><p class="title"><b>Example&nbsp;56.25.&nbsp;Project lib dependencies</b></p><div class="example-contents"><p><code class="filename">settings.gradle</code></p><pre class="programlisting">include <span class="hl-string">'api'</span>, <span class="hl-string">'shared'</span>, <span class="hl-string">'services:personService'</span></pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    apply plugin: <span class="hl-string">'java'</span>
    group = <span class="hl-string">'org.gradle.sample'</span>
    version = <span class="hl-string">'1.0'</span>
    repositories {
        mavenCentral()
    }
    dependencies {
        testCompile <span class="hl-string">"junit:junit:4.11"</span>
    }
}

project(<span class="hl-string">':api'</span>) {
    dependencies {
        compile project(<span class="hl-string">':shared'</span>)
    }
}

project(<span class="hl-string">':services:personService'</span>) {
    dependencies {
        compile project(<span class="hl-string">':shared'</span>), project(<span class="hl-string">':api'</span>)
    }
}</pre></div></div><br class="example-break"><p>All the build logic is in the
            <code class="literal">build.gradle</code> of the root project.
            <sup>[<a href="#ftn.N163F6" name="N163F6" class="footnote">23</a>]</sup>
            A <span class="emphasis"><em>lib</em></span>
            dependency is a special form of an execution dependency. It causes the other project to be built first and
            adds the jar with the classes of the other project to the classpath. It also adds the dependencies of the
            other project to the classpath. So you can enter the
            <code class="literal">api</code>
            directory and trigger a <strong class="userinput"><code>gradle compile</code></strong>. First
            <code class="literal">shared</code>
            is built and then
            <code class="literal">api</code>
            is built. Project dependencies enable partial multi-project builds.
        </p><p>If you come from Maven land you might be perfectly happy with this. If you come from Ivy land, you might
            expect some more fine grained control. Gradle offers this to you:
        </p><div class="example"><a name="javaWithCustomConf"></a><p class="title"><b>Example&nbsp;56.26.&nbsp;Fine grained control over dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    apply plugin: <span class="hl-string">'java'</span>
    group = <span class="hl-string">'org.gradle.sample'</span>
    version = <span class="hl-string">'1.0'</span>
}

project(<span class="hl-string">':api'</span>) {
    configurations {
        spi
    }
    dependencies {
        compile project(<span class="hl-string">':shared'</span>)
    }
    task spiJar(type: Jar) {
        baseName = <span class="hl-string">'api-spi'</span>
        dependsOn classes
        from sourceSets.main.output
        include(<span class="hl-string">'org/gradle/sample/api/**'</span>)
    }
    artifacts {
        spi spiJar
    }
}

project(<span class="hl-string">':services:personService'</span>) {
    dependencies {
        compile project(<span class="hl-string">':shared'</span>)
        compile project(path: <span class="hl-string">':api'</span>, configuration: <span class="hl-string">'spi'</span>)
        testCompile <span class="hl-string">"junit:junit:4.11"</span>, project(<span class="hl-string">':api'</span>)
    }
}</pre></div></div><br class="example-break"><p>The Java plugin adds per default a jar to your project libraries which contains all the classes. In this
            example we create an
            <span class="emphasis"><em>additional</em></span>
            library containing only the interfaces of the
            <code class="literal">api</code>
            project. We assign this library to a new <span class="emphasis"><em>dependency configuration</em></span>. For the person
            service we declare that the project should be compiled only against the
            <code class="literal">api</code>
            interfaces but tested with all classes from <code class="literal">api</code>.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="disable_dependency_projects"></a>56.7.1.&nbsp;Disabling the build of dependency projects</h3></div></div></div><p>Sometimes you don't want depended on projects to be built when doing a partial build.
                To disable the build of the depended on projects you can run Gradle with the <code class="code">-a</code> option.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:parallel_execution"></a>56.8.&nbsp;Parallel project execution</h2></div></div></div><p>With more and more CPU cores available on developer desktops and CI servers,
            it is important that Gradle is able to fully utilise these processing resources.
            More specifically, the parallel execution attempts to:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Reduce total build time for a multi-project build where execution is IO bound or otherwise does not consume all available CPU resources.</li><li class="listitem">Provide faster feedback for execution of small projects without awaiting completion of other projects.</li></ul></div><p>
            Although Gradle already offers parallel test execution via <a class="ulink" href="../javadoc/org/gradle/api/tasks/testing/Test.html#setMaxParallelForks(int)" target="_top"><code class="classname">Test.setMaxParallelForks()</code></a>
            the feature described in this section is parallel execution at a project level.
            Parallel execution is an incubating feature. Please use it and let us know how it works for you.
        </p><p>
            Parallel project execution allows the separate projects in a decoupled multi-project build to be executed in parallel
            (see also: <a class="xref" href="#sec:decoupled_projects">Section&nbsp;56.9, &ldquo;Decoupled Projects&rdquo;</a>).
            While parallel execution does not strictly require decoupling at configuration time,
            the long-term goal is to provide a powerful set of features that will be available for fully decoupled projects.
            Such features include:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><a class="xref" href="#sec:configuration_on_demand">Section&nbsp;56.1.1.1, &ldquo;Configuration on demand&rdquo;</a>.</li><li class="listitem">Configuration of projects in parallel.</li><li class="listitem">Re-use of configuration for unchanged projects.</li><li class="listitem">Project-level up-to-date checks.</li><li class="listitem">Using pre-built artifacts in the place of building dependent projects.</li></ul></div><p>
        </p><p>
            How does the parallel execution work? First, you need to tell Gradle to use the parallel mode.
            You can use the command line argument (<a class="xref" href="#gradle_command_line">Appendix&nbsp;D, <i>Gradle Command Line</i></a>) or configure your build environment (<a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a>).
            Unless you provide specific number of parallel threads Gradle attempts to choose the right number based on available CPU cores.
            Every parallel worker exclusively owns a given project while executing a task.
            This means that 2 tasks from the same project are never executed in parallel.
            Therefore only multi-project builds can take advantage of parallel execution.
            Task dependencies are fully supported and parallel workers will start executing upstream tasks first.
            Bear in mind that the alphabetical scheduling of decoupled tasks, known from the sequential execution, does not really work in parallel mode.
            You need to make sure the task dependencies are declared correctly to avoid ordering issues.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:decoupled_projects"></a>56.9.&nbsp;Decoupled Projects</h2></div></div></div><p>Gradle allows any project to access any other project during both the configuration and execution phases. While this provides a great deal of power
            and flexibility to the build author, it also limits the flexibility that Gradle has when building those projects. For instance, this tight <span class="emphasis"><em>coupling</em></span> of projects
            effectively prevents Gradle from building multiple projects in parallel, or from substituting a pre-built artifact in place of a project dependency.
        </p><p>Two projects are said to be <span class="emphasis"><em>decoupled</em></span> if they do not directly access each other's project model. Decoupled projects may only interact in terms of
            declared dependencies: project dependencies (<a class="xref" href="#sub:project_dependencies">Section&nbsp;50.4.3, &ldquo;Project dependencies&rdquo;</a>) and/or task dependencies (<a class="xref" href="#sec:task_dependencies">Section&nbsp;6.5, &ldquo;Task dependencies&rdquo;</a>).
            Any other form of project interaction (i.e. by modifying another project object or by reading a value from another project object) causes the projects to
            be coupled.
        </p><p>
            A very common way for projects to be coupled is by using configuration injection (<a class="xref" href="#sec:cross_project_configuration">Section&nbsp;56.1, &ldquo;Cross project configuration&rdquo;</a>). It may not be immediately apparent, but using key
            Gradle features like the <code class="literal">allprojects</code> and <code class="literal">subprojects</code> keywords automatically cause your projects to be coupled. This is
            because these keywords are used in a <code class="literal">build.gradle</code> file, which defines a project. Often this is a "root project" that does nothing more than
            define common configuration, but as far as Gradle is concerned this root project is still a fully-fledged project, and by using <code class="literal">allprojects</code>
            that project is effectively coupled to all other projects.
        </p><p>This means that using any form of shared build script logic or configuration injection (<code class="literal">allprojects</code>, <code class="literal">subprojects</code>, etc.)
            will cause your projects to be coupled. As we extend the concept of project decoupling and provide features that take advantage of decoupled projects,
            we will also introduce new features to help you to solve common use cases (like configuration injection) without causing your projects to be coupled.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:multiproject_build_and_test"></a>56.10.&nbsp;Multi-Project Building and Testing</h2></div></div></div><p>The <code class="literal">build</code> task of the Java plugin is typically used to compile, test, and perform
            code style checks (if the CodeQuality plugin is used) of a single project.  In multi-project builds
            you may often want to do all of these tasks across a range of projects.  The <code class="literal">buildNeeded</code>
            and <code class="literal">buildDependents</code> tasks can help with this.
        </p><p>Let's use the project structure shown in <a class="xref" href="#javadependencies_2" title="Example&nbsp;56.25.&nbsp;Project lib dependencies">Example&nbsp;56.25, &ldquo;Project lib dependencies&rdquo;</a>.  In this
            example :services:personservice depends on both :api and :shared.  The :api project also depends on
            :shared.
        </p><p>Assume you are working on a single project, the :api project.  You have been making changes, but
            have not built the entire project since performing a clean.  You want to build any necessary supporting
            jars, but only perform code quality and unit tests on the project you have changed.
            The <code class="literal">build</code> task does this.
        </p><div class="example"><a name="multitestingBuild"></a><p class="title"><b>Example&nbsp;56.27.&nbsp;Build and Test Single Project</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle :api:build</code></strong></p><pre class="screen">&gt; gradle :api:build
:shared:compileJava
:shared:processResources
:shared:classes
:shared:jar
:api:compileJava
:api:processResources
:api:classes
:api:jar
:api:assemble
:api:compileTestJava
:api:processTestResources
:api:testClasses
:api:test
:api:check
:api:build

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>While you are working in a typical development cycle repeatedly building and testing changes to
            the :api project (knowing that you are only changing files in this one project), you may not want to
            even suffer the expense of :shared:compile checking to see what has changed in the :shared project.
            Adding the <code class="literal">-a</code> option will cause Gradle to use cached jars to resolve any project lib
            dependencies and not try to re-build the depended on projects.
        </p><div class="example"><a name="multitestingBuildDashA"></a><p class="title"><b>Example&nbsp;56.28.&nbsp;Partial Build and Test Single Project</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -a :api:build</code></strong></p><pre class="screen">&gt; gradle -a :api:build
:api:compileJava
:api:processResources
:api:classes
:api:jar
:api:assemble
:api:compileTestJava
:api:processTestResources
:api:testClasses
:api:test
:api:check
:api:build

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>If you have just gotten the latest version of source from your version control system which included changes
            in other projects that :api depends on, you might want to not only build all the projects you depend on,
            but test them as well. The <code class="literal">buildNeeded</code> task also tests all the projects from the
            project lib dependencies of the testRuntime configuration.
        </p><div class="example"><a name="multitestingBuildNeeded"></a><p class="title"><b>Example&nbsp;56.29.&nbsp;Build and Test Depended On Projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle :api:buildNeeded</code></strong></p><pre class="screen">&gt; gradle :api:buildNeeded
:shared:compileJava
:shared:processResources
:shared:classes
:shared:jar
:api:compileJava
:api:processResources
:api:classes
:api:jar
:api:assemble
:api:compileTestJava
:api:processTestResources
:api:testClasses
:api:test
:api:check
:api:build
:shared:assemble
:shared:compileTestJava
:shared:processTestResources
:shared:testClasses
:shared:test
:shared:check
:shared:build
:shared:buildNeeded
:api:buildNeeded

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You also might want to refactor some part of the :api project that is used in other projects.
            If you make these types of changes, it is not sufficient to test just the :api
            project, you also need to test all projects that depend on the :api project.
            The <code class="literal">buildDependents</code> task also tests all the projects that have a project lib dependency
            (in the testRuntime configuration) on the specified project.
        </p><div class="example"><a name="multitestingBuildDependents"></a><p class="title"><b>Example&nbsp;56.30.&nbsp;Build and Test Dependent Projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle :api:buildDependents</code></strong></p><pre class="screen">&gt; gradle :api:buildDependents
:shared:compileJava
:shared:processResources
:shared:classes
:shared:jar
:api:compileJava
:api:processResources
:api:classes
:api:jar
:api:assemble
:api:compileTestJava
:api:processTestResources
:api:testClasses
:api:test
:api:check
:api:build
:services:personService:compileJava
:services:personService:processResources
:services:personService:classes
:services:personService:jar
:services:personService:assemble
:services:personService:compileTestJava
:services:personService:processTestResources
:services:personService:testClasses
:services:personService:test
:services:personService:check
:services:personService:build
:services:personService:buildDependents
:api:buildDependents

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>Finally, you may want to build and test everything in all projects. Any task you run in the root project folder
        will cause that same named task to be run on all the children. So you can just run
        <code class="literal">gradle build</code> to build and test all projects.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:property_and_method_inheritance"></a>56.11.&nbsp;Property and method inheritance</h2></div></div></div><p>Properties and methods declared in a project are inherited to all its subprojects. This is an alternative
            to configuration injection. But we think that the model of inheritance does not reflect the problem space of
            multi-project builds very well. In a future edition of this user guide we might write more about this.
        </p><p>Method inheritance might be interesting to use as Gradle's
            <span class="emphasis"><em>Configuration Injection</em></span>
            does not support methods yet (but will in a future release).
        </p><p>You might be wondering why we have implemented a feature we obviously don't like that much. One reason is
            that it is offered by other tools and we want to have the check mark in a feature comparison :). And we like
            to offer our users a choice.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N164EA"></a>56.12.&nbsp;Summary</h2></div></div></div><p>Writing this chapter was pretty exhausting and reading it might have a similar effect. Our final message
            for this chapter is that multi-project builds with Gradle are usually
            <span class="emphasis"><em>not</em></span>
            difficult. There are five elements you need to remember: <code class="literal">allprojects</code>, <code class="literal">
            subprojects</code>, <code class="literal">evaluationDependsOn</code>, <code class="literal">evaluationDependsOnChildren</code>
            and project lib dependencies.
            <sup>[<a href="#ftn.N164FE" name="N164FE" class="footnote">24</a>]</sup>
            With those elements, and keeping in mind that Gradle has a distinct configuration and execution phase, you
            have already a lot of flexibility. But when you enter steep territory Gradle does not become an obstacle and
            usually accompanies and carries you to the top of the mountain.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N16354" name="ftn.N16354" class="para">21</a>] </sup>The real use case we had, was using <a class="ulink" href="http://lucene.apache.org/solr" target="_top">http://lucene.apache.org/solr</a>, where you
                        need a separate war for each index you are accessing. That was one reason why we have created a
                        distribution of webapps. The Resin servlet container allows us, to let such a distribution point
                        to a base installation of the servlet container.
                    </p></div><div class="footnote"><p><sup>[<a href="#N163DA" name="ftn.N163DA" class="para">22</a>] </sup>
                    <code class="literal">services</code>
                    is also a project, but we use it just as a container. It has no build script and gets nothing
                    injected by another build script.
                </p></div><div class="footnote"><p><sup>[<a href="#N163F6" name="ftn.N163F6" class="para">23</a>] </sup>We do this here, as it makes the layout a bit easier. We usually put the project specific stuff
                    into the build script of the respective projects.
                </p></div><div class="footnote"><p><sup>[<a href="#N164FE" name="ftn.N164FE" class="para">24</a>] </sup>So we are well in the range of the
                    <a class="ulink" href="http://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two" target="_top">7 plus 2
                        Rule
                    </a>
                    :)
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="custom_tasks"></a>Chapter&nbsp;57.&nbsp;Writing Custom Task Classes</h1></div></div></div><p>Gradle supports two types of task. One such type is the simple task, where you define the task with an
        action closure. We have seen these in <a class="xref" href="#tutorial_using_tasks">Chapter&nbsp;6, <i>Build Script Basics</i></a>. For this type of task, the action
        closure determines the behaviour of the task. This type of task is good for implementing one-off tasks in your
        build script.
    </p><p>
        The other type of task is the enhanced task, where the behaviour is built into the task, and the task
        provides some properties which you can use to configure the behaviour. We have seen these in
        <a class="xref" href="#more_about_tasks">Chapter&nbsp;15, <i>More about Tasks</i></a>. Most Gradle plugins use enhanced tasks. With enhanced tasks, you don't need
        to implement the task behaviour as you do with simple tasks.
        You simply declare the task and configure the task using its properties. In this way, enhanced tasks let you reuse
        a piece of behaviour in many different places, possibly across different builds.
    </p><p>
        The behaviour and properties of an enhanced task is defined by the task's class. When you declare an enhanced task, you
        specify the type, or class of the task.
    </p><p>
        Implementing your own custom task class in Gradle is easy.
        You can implement a custom task class in pretty much any language you like, provided it ends up compiled to bytecode.
        In our examples, we are going to use Groovy as the implementation language, but you could use, for example, Java
        or Scala. In general, using Groovy is the easiest option, because the Gradle API is designed to work well with Groovy.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1651A"></a>57.1.&nbsp;Packaging a task class</h2></div></div></div><p>There are several places where you can put the source for the task class.
        </p><div class="variablelist"><dl><dt><span class="term">Build script</span></dt><dd><p>You can include the task class directly in the build script. This has the benefit that the task class is
                        automatically compiled and included in the classpath of the build script without you having to do anything.
                        However, the task class is not visible outside the build script, and so you cannot reuse the task class
                        outside the build script it is defined in.
                    </p></dd><dt><span class="term"><code class="filename">buildSrc</code> project</span></dt><dd><p>You can put the source for the task class in the
                        <code class="filename"><em class="replaceable"><code>rootProjectDir</code></em>/buildSrc/src/main/groovy</code> directory.
                        Gradle will take care of compiling and testing the task class and making it available on the
                        classpath of the build script. The task class is visible to every build script used by the build.
                        However, it is not visible outside the build, and so you cannot reuse the task class outside the
                        build it is defined in.
                        Using the <code class="filename">buildSrc</code> project approach keeps separate
                        the task declaration - that is, what the task should do - from the task implementation - that is,
                        how the task does it.</p><p>
                        See <a class="xref" href="#organizing_build_logic">Chapter&nbsp;59, <i>Organizing Build Logic</i></a> for more details about the <code class="filename">buildSrc</code>
                        project.</p></dd><dt><span class="term">Standalone project</span></dt><dd><p>You can create a separate project for your task class. This project produces and
                        publishes a JAR which you can then use in multiple builds and share with others. Generally, this JAR
                        might include some custom plugins, or bundle several related task classes into a single library. Or
                        some combination of the two.
                    </p></dd></dl></div><p> In our examples, we will start with the task class in the build script, to keep things simple.
            Then we will look at creating a standalone project.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16546"></a>57.2.&nbsp;Writing a simple task class</h2></div></div></div><p>To implement a custom task class, you extend <a class="ulink" href="../dsl/org.gradle.api.DefaultTask.html" target="_top"><code class="classname">DefaultTask</code></a>.
        </p><div class="example"><a name="customTask"></a><p class="title"><b>Example&nbsp;57.1.&nbsp;Defining a custom task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-keyword">class</span> GreetingTask <span class="hl-keyword">extends</span> DefaultTask {
}</pre></div></div><br class="example-break"><p>This task doesn't do anything useful, so let's add some behaviour. To do so, we add a method to the task
            and mark it with the <a class="ulink" href="../javadoc/org/gradle/api/tasks/TaskAction.html" target="_top"><code class="classname">TaskAction</code></a> annotation. Gradle will call the
            method when the task executes. You don't have to use a method to define the behaviour for the task. You
            could, for instance, call <code class="literal">doFirst()</code> or <code class="literal">doLast()</code> with a closure in the
            task constructor to add behaviour.
        </p><div class="example"><a name="customTaskWithAction"></a><p class="title"><b>Example&nbsp;57.2.&nbsp;A hello world task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task hello(type: GreetingTask)

<span class="hl-keyword">class</span> GreetingTask <span class="hl-keyword">extends</span> DefaultTask {
    <span class="hl-annotation">@TaskAction</span>
    def greet() {
        println <span class="hl-string">'hello from GreetingTask'</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
hello from GreetingTask</pre></div></div><br class="example-break"><p>Let's add a property to the task, so we can customize it. Tasks are simply POGOs, and when you declare a
            task, you can set the properties or call methods on the task object. Here we add a <code class="literal">greeting</code>
            property, and set the value when we declare the <code class="literal">greeting</code> task.
        </p><div class="example"><a name="customTaskWithProperty"></a><p class="title"><b>Example&nbsp;57.3.&nbsp;A customizable hello world task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Use the default greeting</span>
task hello(type: GreetingTask)

<span class="hl-comment">// Customize the greeting</span>
task greeting(type: GreetingTask) {
    greeting = <span class="hl-string">'greetings from GreetingTask'</span>
}

<span class="hl-keyword">class</span> GreetingTask <span class="hl-keyword">extends</span> DefaultTask {
    String greeting = <span class="hl-string">'hello from GreetingTask'</span>

    <span class="hl-annotation">@TaskAction</span>
    def greet() {
        println greeting
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello greeting</code></strong></p><pre class="screen">&gt; gradle -q hello greeting
hello from GreetingTask
greetings from GreetingTask</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1658F"></a>57.3.&nbsp;A standalone project</h2></div></div></div><p>Now we will move our task to a standalone project, so we can publish it and share it with others.
            This project is simply a Groovy project that produces a JAR containing the task class.
            Here is a simple build script for the project. It applies the Groovy plugin, and adds the Gradle API
            as a compile-time dependency.
        </p><div class="example"><a name="customTaskStandalone"></a><p class="title"><b>Example&nbsp;57.4.&nbsp;A build for a custom task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'groovy'</span>

dependencies {
    compile gradleApi()
    compile localGroovy()
}</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/customPlugin/plugin</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>We just follow the convention for where the source for the task class should go.</p><div class="example"><a name="customTaskStandalone"></a><p class="title"><b>Example&nbsp;57.5.&nbsp;A custom task</b></p><div class="example-contents"><p><code class="filename">src/main/groovy/org/gradle/GreetingTask.groovy</code></p><pre class="programlisting"><span class="hl-keyword">package</span> org.gradle

<span class="hl-keyword">import</span> org.gradle.api.DefaultTask
<span class="hl-keyword">import</span> org.gradle.api.tasks.TaskAction

<span class="hl-keyword">class</span> GreetingTask <span class="hl-keyword">extends</span> DefaultTask {
    String greeting = <span class="hl-string">'hello from GreetingTask'</span>

    <span class="hl-annotation">@TaskAction</span>
    def greet() {
        println greeting
    }
}</pre></div></div><br class="example-break"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N165B3"></a>57.3.1.&nbsp;Using your task class in another project</h3></div></div></div><p>To use a task class in a build script, you need to add the class to the build script's classpath. To
                do this, you use a <code class="literal">buildscript { }</code> block, as described in <a class="xref" href="#sec:external_dependencies">Section&nbsp;59.5, &ldquo;External dependencies for the build script&rdquo;</a>.
                The following example shows how you might do this when the JAR containing the task class has been published
                to a local repository:
            </p><div class="example"><a name="usingCustomTask"></a><p class="title"><b>Example&nbsp;57.6.&nbsp;Using a custom task in another project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">buildscript {
    repositories {
        maven {
            url uri(<span class="hl-string">'../repo'</span>)
        }
    }
    dependencies {
        classpath group: <span class="hl-string">'org.gradle'</span>, name: <span class="hl-string">'customPlugin'</span>, version: <span class="hl-string">'1.0-SNAPSHOT'</span>
    }
}

task greeting(type: org.gradle.GreetingTask) {
    greeting = <span class="hl-string">'howdy!'</span>
}</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N165C8"></a>57.3.2.&nbsp;Writing tests for your task class</h3></div></div></div><p>You can use the <a class="ulink" href="../javadoc/org/gradle/testfixtures/ProjectBuilder.html" target="_top"><code class="classname">ProjectBuilder</code></a> class to create
                <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a> instances to use when you test your task class.
            </p><div class="example"><a name="customTaskStandalone"></a><p class="title"><b>Example&nbsp;57.7.&nbsp;Testing a custom task</b></p><div class="example-contents"><p><code class="filename">src/test/groovy/org/gradle/GreetingTaskTest.groovy</code></p><pre class="programlisting"><span class="hl-keyword">class</span> GreetingTaskTest {
    <span class="hl-annotation">@Test</span>
    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> canAddTaskToProject() {
        Project project = ProjectBuilder.builder().build()
        def task = project.task(<span class="hl-string">'greeting'</span>, type: GreetingTask)
        assertTrue(task <span class="hl-keyword">instanceof</span> GreetingTask)
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="incremental_tasks"></a>57.4.&nbsp;Incremental tasks</h2></div></div></div><div class="note"><p>
                Incremental tasks are an <a class="link" href="#feature_lifecycle">incubating</a> feature.
            </p><p>
                Since the introduction of the implementation described above (early in the Gradle 1.6 release cycle), discussions within the Gradle community have produced
                superior ideas for exposing the information about changes to task implementors to what is described below. As such, the API for this feature will almost certainly
                change in upcoming releases. However, please do experiment with the current implementation and share your experiences with the Gradle community.
            </p><p>
                The feature incubation process, which is part of the Gradle feature lifecycle (see <a class="xref" href="#feature_lifecycle">Appendix&nbsp;C, <i>The Feature Lifecycle</i></a>), exists for this purpose of ensuring high quality
                final implementation through incorporation of early user feedback.
            </p></div><p>
            With Gradle, it's very simple to implement a task that gets skipped when all of it's inputs and outputs are up to date (see <a class="xref" href="#sec:up_to_date_checks">Section&nbsp;15.9, &ldquo;Skipping tasks that are up-to-date&rdquo;</a>).
            However, there are times when only a few input files have changed since the last execution, and you'd like to avoid reprocessing all of the unchanged inputs.
            This can be particularly useful for a transformer task, that converts input files to output files on a 1:1 basis.
        </p><p>
            If you'd like to optimise your build so that only out-of-date inputs are processed, you can do so with an <em class="firstterm">incremental task</em>.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N165FD"></a>57.4.1.&nbsp;Implementing an incremental task</h3></div></div></div><p>
                For a task to process inputs incrementally, that task must contain an <em class="firstterm">incremental task action</em>. This is a task action method that contains a
                single <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html" target="_top"><code class="classname">IncrementalTaskInputs</code></a> parameter, which indicates to Gradle that the action will process the changed inputs only.
            </p><p>
                The incremental task action may supply an <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:outOfDate(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.outOfDate()</code></a> action for processing any input file that is out-of-date,
                and a <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:removed(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.removed()</code></a> action that executes for any input file that has been removed since the previous execution.
            </p><div class="example"><a name="taskDefinition"></a><p class="title"><b>Example&nbsp;57.8.&nbsp;Defining an incremental task action</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-keyword">class</span> IncrementalReverseTask <span class="hl-keyword">extends</span> DefaultTask {
    <span class="hl-annotation">@InputDirectory</span>
    def File inputDir

    <span class="hl-annotation">@OutputDirectory</span>
    def File outputDir

    <span class="hl-annotation">@Input</span>
    def inputProperty

    <span class="hl-annotation">@TaskAction</span>
    <span class="hl-keyword">void</span> execute(IncrementalTaskInputs inputs) {
        println inputs.incremental ? <span class="hl-string">"CHANGED inputs considered out of date"</span> : <span class="hl-string">"ALL inputs considered out of date"</span>
        inputs.outOfDate { change -&gt;
            println <span class="hl-string">"out of date: ${change.file.name}"</span>
            def targetFile = <span class="hl-keyword">new</span> File(outputDir, change.file.name)
            targetFile.text = change.file.text.reverse()
        }

        inputs.removed { change -&gt;
            println <span class="hl-string">"removed: ${change.file.name}"</span>
            def targetFile = <span class="hl-keyword">new</span> File(outputDir, change.file.name)
            targetFile.delete()
        }
    }
}</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/tasks/incrementalTask</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>
                For a simple transformer task like this, the task action simply needs to generate output files for any out-of-date inputs,
                and delete output files for any removed inputs.
            </p><p>
                A task may only contain a single incremental task action.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1662D"></a>57.4.2.&nbsp;Which inputs are considered out of date?</h3></div></div></div><p>
                When Gradle has history of a previous task execution, and the only changes to the task execution context since that execution are to input files,
                then Gradle is able to determine which input files need to be reprocessed by the task.
                In this case, the <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:outOfDate(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.outOfDate()</code></a> action will be executed for any input file that was <span class="emphasis"><em>added</em></span> or <span class="emphasis"><em>modified</em></span>,
                and the <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:removed(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.removed()</code></a> action will be executed for any <span class="emphasis"><em>removed</em></span> input file.
            </p><p>
                However, there are many cases where Gradle is unable to determine which input files need to be reprocessed. Examples include:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">There is no history available from a previous execution.</li><li class="listitem">You are building with a different version of Gradle. Currently, Gradle does not use task history from a different version.</li><li class="listitem">An <code class="literal">upToDateWhen</code> criteria added to the task returns <code class="literal">false</code>.</li><li class="listitem">An input property has changed since the previous execution.</li><li class="listitem">One or more output files have changed since the previous execution.</li></ul></div><p>
                In any of these cases, Gradle will consider all of the input files to be <code class="literal">outOfDate</code>.
                The <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:outOfDate(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.outOfDate()</code></a> action will be executed for every input file, and the
                <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:removed(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.removed()</code></a> action will not be executed at all.
            </p><p>
                You can check if Gradle was able to determine the incremental changes to input files with <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:incremental" target="_top"><code class="classname">IncrementalTaskInputs.isIncremental()</code></a>.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1666E"></a>57.4.3.&nbsp;An incremental task in action</h3></div></div></div><p>
                Given the incremental task implementation <a class="link" href="#taskDefinition" title="Example&nbsp;57.8.&nbsp;Defining an incremental task action">above</a>, we can explore the various change scenarios by example.
                Note that the various mutation tasks ('updateInputs', 'removeInput', etc) are only present for demonstration purposes: these would not normally be part of your build script.
            </p><p>
                First, consider the <code class="literal">IncrementalReverseTask</code> executed against a set of inputs for the first time.
                In this case, all inputs will be considered "out of date":
            </p><div class="example"><a name="incrementalTaskFirstRun"></a><p class="title"><b>Example&nbsp;57.9.&nbsp;Running the incremental task for the first time</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task incrementalReverse(type: IncrementalReverseTask) {
    inputDir = file(<span class="hl-string">'inputs'</span>)
    outputDir = file(<span class="hl-string">"$buildDir/outputs"</span>)
    inputProperty = project.properties[<span class="hl-string">'taskInputProperty'</span>] ?: <span class="hl-string">"original"</span>
}</pre><p>Build layout</p><pre class="programlisting">incrementalTask/
  build.gradle
  inputs/
    1.txt
    2.txt
    3.txt</pre><p>Output of <strong class="userinput"><code>gradle -q incrementalReverse</code></strong></p><pre class="screen">&gt; gradle -q incrementalReverse
ALL inputs considered out of date
out of date: 1.txt
out of date: 2.txt
out of date: 3.txt</pre></div></div><br class="example-break"><p>
                Naturally when the task is executed again with no changes, then task itself is up to date and no files are reported to the task action:
            </p><div class="example"><a name="incrementalTaskNoChange"></a><p class="title"><b>Example&nbsp;57.10.&nbsp;Running the incremental task with unchanged inputs</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q incrementalReverse</code></strong></p><pre class="screen">&gt; gradle -q incrementalReverse</pre></div></div><br class="example-break"><p>
                When an input file is modified in some way or a new input file is added, then re-executing the task results in those files being reported to <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:outOfDate(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.outOfDate()</code></a>:
            </p><div class="example"><a name="incrementalTaskUpdatedInputs"></a><p class="title"><b>Example&nbsp;57.11.&nbsp;Running the incremental task with updated input files</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task updateInputs() &lt;&lt; {
    file(<span class="hl-string">'inputs/1.txt'</span>).text = <span class="hl-string">"Changed content for existing file 1."</span>
    file(<span class="hl-string">'inputs/4.txt'</span>).text = <span class="hl-string">"Content for new file 4."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q updateInputs incrementalReverse</code></strong></p><pre class="screen">&gt; gradle -q updateInputs incrementalReverse
CHANGED inputs considered out of date
out of date: 1.txt
out of date: 4.txt</pre></div></div><br class="example-break"><p>
                When an existing input file is removed, then re-executing the task results that file being reported to <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:removed(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.removed()</code></a>:
            </p><div class="example"><a name="incrementalTaskRemovedInput"></a><p class="title"><b>Example&nbsp;57.12.&nbsp;Running the incremental task with an input file removed</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task removeInput() &lt;&lt; {
    file(<span class="hl-string">'inputs/3.txt'</span>).delete()
}</pre><p>Output of <strong class="userinput"><code>gradle -q removeInput incrementalReverse</code></strong></p><pre class="screen">&gt; gradle -q removeInput incrementalReverse
CHANGED inputs considered out of date
removed: 3.txt</pre></div></div><br class="example-break"><p>
                When an output file is deleted (or modified), then Gradle is unable to determine which input files are out of date.
                In this case, <span class="emphasis"><em>all</em></span> input files are reported to the <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:outOfDate(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.outOfDate()</code></a> action,
                and no input files are reported to the <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:removed(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.removed()</code></a> action:
            </p><div class="example"><a name="incrementalTaskRemovedOutput"></a><p class="title"><b>Example&nbsp;57.13.&nbsp;Running the incremental task with an output file removed</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task removeOutput() &lt;&lt; {
    file(<span class="hl-string">"$buildDir/outputs/1.txt"</span>).delete()
}</pre><p>Output of <strong class="userinput"><code>gradle -q removeOutput incrementalReverse</code></strong></p><pre class="screen">&gt; gradle -q removeOutput incrementalReverse
ALL inputs considered out of date
out of date: 1.txt
out of date: 2.txt
out of date: 3.txt</pre></div></div><br class="example-break"><p>
                When a task input property modified, Gradle is not able to determine how this property impacted the task outputs, so all input files are assumed to be out of date.
                So similar to the changed output file example, <span class="emphasis"><em>all</em></span> input files are reported to
                the <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:outOfDate(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.outOfDate()</code></a> action,
                and no input files are reported to the <a class="ulink" href="../dsl/org.gradle.api.tasks.incremental.IncrementalTaskInputs.html#org.gradle.api.tasks.incremental.IncrementalTaskInputs:removed(org.gradle.api.Action)" target="_top"><code class="classname">IncrementalTaskInputs.removed()</code></a> action:
            </p><div class="example"><a name="incrementalTaskChangedProperty"></a><p class="title"><b>Example&nbsp;57.14.&nbsp;Running the incremental task with an input property changed</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q -PtaskInputProperty=changed incrementalReverse</code></strong></p><pre class="screen">&gt; gradle -q -PtaskInputProperty=changed incrementalReverse
ALL inputs considered out of date
out of date: 1.txt
out of date: 2.txt
out of date: 3.txt</pre></div></div><br class="example-break"></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="custom_plugins"></a>Chapter&nbsp;58.&nbsp;Writing Custom Plugins</h1></div></div></div><p>A Gradle plugin packages up reusable pieces of build logic, which can be used across many different
        projects and builds. Gradle allows you to implement your own custom plugins, so you can reuse your
        build logic, and share it with others.
    </p><p>
        You can implement a custom plugin in any language you like, provided the implementation ends up compiled as
        bytecode. For the examples here, we are going to use Groovy as the implementation language. You could use
        Java or Scala instead, if you want.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1670B"></a>58.1.&nbsp;Packaging a plugin</h2></div></div></div><p>There are several places where you can put the source for the plugin.
        </p><div class="variablelist"><dl><dt><span class="term">Build script</span></dt><dd><p>You can include the source for the plugin directly in the build script. This has the benefit that the plugin is
                        automatically compiled and included in the classpath of the build script without you having to do anything.
                        However, the plugin is not visible outside the build script, and so you cannot reuse the plugin
                        outside the build script it is defined in.
                    </p></dd><dt><span class="term"><code class="filename">buildSrc</code> project</span></dt><dd><p>You can put the source for the plugin in the
                        <code class="filename"><em class="replaceable"><code>rootProjectDir</code></em>/buildSrc/src/main/groovy</code> directory.
                        Gradle will take care of compiling and testing the plugin and making it available on the
                        classpath of the build script. The plugin is visible to every build script used by the build.
                        However, it is not visible outside the build, and so you cannot reuse the plugin outside the
                        build it is defined in.
                    </p><p>
                        See <a class="xref" href="#organizing_build_logic">Chapter&nbsp;59, <i>Organizing Build Logic</i></a> for more details about the <code class="filename">buildSrc</code>
                        project.</p></dd><dt><span class="term">Standalone project</span></dt><dd><p>You can create a separate project for your plugin. This project produces and
                        publishes a JAR which you can then use in multiple builds and share with others. Generally, this JAR
                        might include some custom plugins, or bundle several related task classes into a single library. Or
                        some combination of the two.
                    </p></dd></dl></div><p> In our examples, we will start with the plugin in the build script, to keep things simple.
            Then we will look at creating a standalone project.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16734"></a>58.2.&nbsp;Writing a simple plugin</h2></div></div></div><p>To create a custom plugin, you need to write an implementation of <a class="ulink" href="../javadoc/org/gradle/api/Plugin.html" target="_top"><code class="classname">Plugin</code></a>.
            Gradle instantiates the plugin and calls the plugin instance's <a class="ulink" href="../javadoc/org/gradle/api/Plugin.html#apply(T)" target="_top"><code class="classname">Plugin.apply()</code></a> method when the
            plugin is used with a project. The project
            object is passed as a parameter, which the plugin can use to configure the project however it needs to.
            The following sample contains a greeting plugin, which adds a <code class="literal">hello</code> task to the project.
        </p><div class="example"><a name="customPlugin"></a><p class="title"><b>Example&nbsp;58.1.&nbsp;A custom plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: GreetingPlugin

<span class="hl-keyword">class</span> GreetingPlugin <span class="hl-keyword">implements</span> Plugin&lt;Project&gt; {
    <span class="hl-keyword">void</span> apply(Project project) {
        project.task(<span class="hl-string">'hello'</span>) &lt;&lt; {
            println <span class="hl-string">"Hello from the GreetingPlugin"</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
Hello from the GreetingPlugin</pre></div></div><br class="example-break"><p>
            One thing to note is that a new instance of a given plugin is created for each project it is applied to.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16758"></a>58.3.&nbsp;Getting input from the build</h2></div></div></div><p>Most plugins need to obtain some configuration from the build script. One method for doing this is to use <em class="firstterm">extension objects</em>.
             The Gradle <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a> has an associated <a class="ulink" href="../javadoc/org/gradle/api/plugins/ExtensionContainer.html" target="_top"><code class="classname">ExtensionContainer</code></a> object
             that helps keep track of all the settings and properties being passed to plugins. You can capture user input by telling
             the extension container about your plugin. To capture input, simply add a Java Bean compliant class into the extension container's list of
             extensions. Groovy is a good language choice for a plugin because plain old Groovy objects contain all the getter and setter methods
             that a Java Bean requires. 
        </p><p>Let's add a simple extension object to the project. Here we add a <code class="literal">greeting</code> extension object to the
            project, which allows you to configure the greeting.
        </p><div class="example"><a name="customPluginWithConvention"></a><p class="title"><b>Example&nbsp;58.2.&nbsp;A custom plugin extension</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: GreetingPlugin

greeting.message = <span class="hl-string">'Hi from Gradle'</span>

<span class="hl-keyword">class</span> GreetingPlugin <span class="hl-keyword">implements</span> Plugin&lt;Project&gt; {
    <span class="hl-keyword">void</span> apply(Project project) {
        <span class="hl-comment">// Add the 'greeting' extension object</span>
        project.extensions.create(<span class="hl-string">"greeting"</span>, GreetingPluginExtension)
        <span class="hl-comment">// Add a task that uses the configuration</span>
        project.task(<span class="hl-string">'hello'</span>) &lt;&lt; {
            println project.greeting.message
        }
    }
}

<span class="hl-keyword">class</span> GreetingPluginExtension {
    def String message = <span class="hl-string">'Hello from GreetingPlugin'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
Hi from Gradle</pre></div></div><br class="example-break"><p>In this example, <code class="classname">GreetingPluginExtension</code> is a plain old Groovy object with a field called <code class="literal">message</code>.
            The extension object is added to the plugin list with the name <code class="literal">greeting</code>. This object then becomes available as a project property
            with the same name as the extension object.
        </p><p>Oftentimes, you have several related properties you need to specify on a single plugin. Gradle adds a configuration closure block for each extension object, so you
            can group settings together. The following example shows you how this works.
        </p><div class="example"><a name="customPluginWithAdvancedConvention"></a><p class="title"><b>Example&nbsp;58.3.&nbsp;A custom plugin with configuration closure</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: GreetingPlugin

greeting {
    message = <span class="hl-string">'Hi'</span>
    greeter = <span class="hl-string">'Gradle'</span>
}

<span class="hl-keyword">class</span> GreetingPlugin <span class="hl-keyword">implements</span> Plugin&lt;Project&gt; {
    <span class="hl-keyword">void</span> apply(Project project) {
        project.extensions.create(<span class="hl-string">"greeting"</span>, GreetingPluginExtension)
        project.task(<span class="hl-string">'hello'</span>) &lt;&lt; {
            println <span class="hl-string">"${project.greeting.message} from ${project.greeting.greeter}"</span>
        }
    }
}

<span class="hl-keyword">class</span> GreetingPluginExtension {
    String message
    String greeter
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong></p><pre class="screen">&gt; gradle -q hello
Hi from Gradle</pre></div></div><br class="example-break"><p>In this example, several settings can be grouped together within the <code class="literal">greeting</code> closure.
            The name of the closure block in the build script (<code class="literal">greeting</code>) needs to match the extension object name.
            Then, when the closure is executed, the fields on the extension object will be mapped to the variables within the closure
            based on the standard Groovy closure delegate feature.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N167A4"></a>58.4.&nbsp;Working with files in custom tasks and plugins</h2></div></div></div><p>
            When developing custom tasks and plugins, it's a good idea to be very flexible when accepting input configuration for file locations.
            To do this, you can leverage the <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:file(java.lang.Object)" target="_top"><code class="classname">Project.file()</code></a> method to resolve values to files as late as possible.
        </p><div class="example"><a name="lazyFileProperties"></a><p class="title"><b>Example&nbsp;58.4.&nbsp;Evaluating file properties lazily</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-keyword">class</span> GreetingToFileTask <span class="hl-keyword">extends</span> DefaultTask {

    def destination

    File getDestination() {
        project.file(destination)
    }

    <span class="hl-annotation">@TaskAction</span>
    def greet() {
        def file = getDestination()
        file.parentFile.mkdirs()
        file.write <span class="hl-string">"Hello!"</span>
    }
}

task greet(type: GreetingToFileTask) {
    destination = { project.greetingFile }
}

task sayGreeting(dependsOn: greet) &lt;&lt; {
    println file(greetingFile).text
}

ext.greetingFile = <span class="hl-string">"$buildDir/hello.txt"</span></pre><p>Output of <strong class="userinput"><code>gradle -q sayGreeting</code></strong></p><pre class="screen">&gt; gradle -q sayGreeting
Hello!</pre></div></div><br class="example-break"><p>
            In this example, we configure the <code class="literal">greet</code> task <code class="literal">destination</code> property as a closure, which is evaluated with
            the <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:file(java.lang.Object)" target="_top"><code class="classname">Project.file()</code></a> method to turn the return value of the closure into a file object
            at the last minute. You will notice that in the example above we specify the <code class="literal">greetingFile</code> property value after we have 
            configured to use it for the task. This kind of lazy evaluation is a key benefit of accepting any value when setting a file property, then 
            resolving that value when reading the property.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N167CE"></a>58.5.&nbsp;A standalone project</h2></div></div></div><p>Now we will move our plugin to a standalone project, so we can publish it and share it with others.
            This project is simply a Groovy project that produces a JAR containing the plugin classes.
            Here is a simple build script for the project. It applies the Groovy plugin, and adds the Gradle API
            as a compile-time dependency.
        </p><div class="example"><a name="customPluginStandalone"></a><p class="title"><b>Example&nbsp;58.5.&nbsp;A build for a custom plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'groovy'</span>

dependencies {
    compile gradleApi()
    compile localGroovy()
}</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/customPlugin/plugin</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"><p>
            So how does Gradle find the <a class="ulink" href="../javadoc/org/gradle/api/Plugin.html" target="_top"><code class="classname">Plugin</code></a> implementation? The answer is you need to provide a properties file in the jar's
	    <code class="filename">META-INF/gradle-plugins</code> directory that matches the name of your plugin.
	</p><div class="example"><a name="customPluginStandalone"></a><p class="title"><b>Example&nbsp;58.6.&nbsp;Wiring for a custom plugin</b></p><div class="example-contents"><p><code class="filename">src/main/resources/META-INF/gradle-plugins/greeting.properties</code></p><pre class="programlisting">implementation-class=org.gradle.GreetingPlugin</pre></div></div><br class="example-break"><p>
	    Notice that the properties filename matches the plugin's name and is placed in the resources folder, and
	    that the <code class="literal">implementation-class</code> property identifies the <a class="ulink" href="../javadoc/org/gradle/api/Plugin.html" target="_top"><code class="classname">Plugin</code></a> implementation class.
	</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16803"></a>58.5.1.&nbsp;Using your plugin in another project</h3></div></div></div><p>To use a plugin in a build script, you need to add the plugin classes to the build script's classpath. To
                do this, you use a <code class="literal">buildscript { }</code> block, as described in <a class="xref" href="#sec:external_dependencies">Section&nbsp;59.5, &ldquo;External dependencies for the build script&rdquo;</a>.
                The following example shows how you might do this when the JAR containing the plugin has been published
                to a local repository:
            </p><div class="example"><a name="customPluginStandalone"></a><p class="title"><b>Example&nbsp;58.7.&nbsp;Using a custom plugin in another project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">buildscript {
    repositories {
        maven {
            url uri(<span class="hl-string">'../repo'</span>)
        }
    }
    dependencies {
        classpath group: <span class="hl-string">'org.gradle'</span>, name: <span class="hl-string">'customPlugin'</span>, version: <span class="hl-string">'1.0-SNAPSHOT'</span>
    }
}
apply plugin: <span class="hl-string">'greeting'</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16818"></a>58.5.2.&nbsp;Writing tests for your plugin</h3></div></div></div><p>You can use the <a class="ulink" href="../javadoc/org/gradle/testfixtures/ProjectBuilder.html" target="_top"><code class="classname">ProjectBuilder</code></a> class to create
                <a class="ulink" href="../dsl/org.gradle.api.Project.html" target="_top"><code class="classname">Project</code></a> instances to use when you test your plugin implementation.
            </p><div class="example"><a name="customPluginStandalone"></a><p class="title"><b>Example&nbsp;58.8.&nbsp;Testing a custom plugin</b></p><div class="example-contents"><p><code class="filename">src/test/groovy/org/gradle/GreetingPluginTest.groovy</code></p><pre class="programlisting"><span class="hl-keyword">class</span> GreetingPluginTest {
    <span class="hl-annotation">@Test</span>
    <span class="hl-keyword">public</span> <span class="hl-keyword">void</span> greeterPluginAddsGreetingTaskToProject() {
        Project project = ProjectBuilder.builder().build()
        project.apply plugin: <span class="hl-string">'greeting'</span>

        assertTrue(project.tasks.hello <span class="hl-keyword">instanceof</span> GreetingTask)
    }
}</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16831"></a>58.6.&nbsp;Maintaining multiple domain objects</h2></div></div></div><p>Gradle provides some utility classes for maintaining collections of object, which work well with the Gradle build language.</p><div class="example"><a name="domainObjectContainer"></a><p class="title"><b>Example&nbsp;58.9.&nbsp;Managing domain objects</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: DocumentationPlugin

books {
    quickStart {
        sourceFile = file(<span class="hl-string">'src/docs/quick-start'</span>)
    }
    userGuide {

    }
    developerGuide {

    }
}

task books &lt;&lt; {
    books.each { book -&gt;
        println <span class="hl-string">"$book.name -&gt; $book.sourceFile"</span>
    }
}

<span class="hl-keyword">class</span> DocumentationPlugin <span class="hl-keyword">implements</span> Plugin&lt;Project&gt; {
    <span class="hl-keyword">void</span> apply(Project project) {
        def books = project.container(Book)
        books.all {
            sourceFile = project.file(<span class="hl-string">"src/docs/$name"</span>)
        }
        project.extensions.books = books
    }
}

<span class="hl-keyword">class</span> Book {
    <span class="hl-keyword">final</span> String name
    File sourceFile

    Book(String name) {
        <span class="hl-keyword">this</span>.name = name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q books</code></strong></p><pre class="screen">&gt; gradle -q books
developerGuide -&gt; /home/user/gradle/samples/userguide/organizeBuildLogic/customPluginWithDomainObjectContainer/src/docs/developerGuide
quickStart -&gt; /home/user/gradle/samples/userguide/organizeBuildLogic/customPluginWithDomainObjectContainer/src/docs/quick-start
userGuide -&gt; /home/user/gradle/samples/userguide/organizeBuildLogic/customPluginWithDomainObjectContainer/src/docs/userGuide</pre></div></div><br class="example-break"><p>
            The <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:container(java.lang.Class)" target="_top"><code class="classname">Project.container()</code></a> methods create instances of <a class="ulink" href="../dsl/org.gradle.api.NamedDomainObjectContainer.html" target="_top"><code class="classname">NamedDomainObjectContainer</code></a>, that have many useful methods for managing and configuring the objects. In order
            to use a type with any of the <code class="literal">project.container</code> methods, it MUST expose a property named &ldquo;<code class="literal">name</code>&rdquo;
            as the unique, and constant, name for the object. The <code class="literal">project.container(Class)</code> variant of the container method creates 
            new instances by attempting to invoke the constructor of the class that takes a single string argument, which is the desired name of the object. 
            See the above link for <code class="literal">project.container</code> method variants that allow custom instantiation strategies.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="organizing_build_logic"></a>Chapter&nbsp;59.&nbsp;Organizing Build Logic</h1></div></div></div><p>Gradle offers a variety of ways to organize your build logic. First of all you can put your build logic
        directly in the action closure of a task. If a couple of tasks share the same logic you can extract this logic
        into a method. If multiple projects of a multi-project build share some logic you can define this method in the
        parent project. If the build logic gets too complex for being properly modeled by methods you want have an OO
        Model.
        <sup>[<a href="#ftn.N16866" name="N16866" class="footnote">25</a>]</sup>
        Gradle makes this very easy. Just drop your classes in a certain directory and Gradle automatically compiles them
        and puts them in the classpath of your build script.
    </p><p>Here is a summary of the ways you can organise your build logic:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>POGOs. You can declare and use plain old Groovy objects (POGOs) directly in your build script. The
                build script is written in Groovy, after all, and Groovy provides you with lots of excellent ways to
                organize code.
            </p></li><li class="listitem"><p><a class="link" href="#sec:inherited_properties_and_methods">Inherited properties and methods</a>. In a
                multi-project build, sub-projects inherit the properties and methods of their parent project.</p></li><li class="listitem"><p><a class="link" href="#sec:injected_configuration">Configuration injection</a>. In a
                multi-project build, a project (usually the root project) can inject properties and methods into another
                project.</p></li><li class="listitem"><p><a class="link" href="#sec:build_sources"><code class="filename">buildSrc</code> project</a>. Drop the source for
                your build classes into a certain directory and Gradle automatically compiles them and includes them
                in the classpath of your build script.
            </p></li><li class="listitem"><p><a class="link" href="#sec:configuring_using_external_script">Shared scripts</a>. Define common configuration
                in an external build, and apply the script to multiple projects, possibly across different builds.
            </p></li><li class="listitem"><p><a class="link" href="#custom_tasks">Custom tasks</a>. Put your build logic into a custom task, and
                reuse that task in multiple places.</p></li><li class="listitem"><p><a class="link" href="#custom_plugins">Custom plugins</a>. Put your build logic into a custom plugin,
                and apply that plugin to multiple projects. The plugin must be in the classpath of your build script.
                You can achieve this either by using <a class="link" href="#sec:build_sources"><code class="filename">build sources</code></a> or
                by adding an <a class="link" href="#sec:external_dependencies">external library</a> that contains the plugin. 
            </p></li><li class="listitem"><p><a class="link" href="#sec:external_build">Execute an external build</a>. Execute another Gradle build from the
                current build.</p></li><li class="listitem"><p><a class="link" href="#sec:external_dependencies">External libraries</a>. Use external libraries directly
                in your build file.
            </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:inherited_properties_and_methods"></a>59.1.&nbsp;Inherited properties and methods</h2></div></div></div><p>Any method or property defined in a project build script is also visible to all the sub-projects. You
            can use this to define common configurations, and to extract build logic into methods which can be reused
            by the sub-projects.
        </p><div class="example"><a name="inheritedBuildLogic"></a><p class="title"><b>Example&nbsp;59.1.&nbsp;Using inherited properties and methods</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Define an extra property</span>
ext.srcDirName = <span class="hl-string">'src/java'</span>

<span class="hl-comment">// Define a method</span>
def getSrcDir(project) {
    <span class="hl-keyword">return</span> project.file(srcDirName)
}</pre><p><code class="filename">child/build.gradle</code></p><pre class="programlisting">task show &lt;&lt; {
    <span class="hl-comment">// Use inherited property</span>
    println <span class="hl-string">'srcDirName: '</span> + srcDirName

    <span class="hl-comment">// Use inherited method</span>
    File srcDir = getSrcDir(project)
    println <span class="hl-string">'srcDir: '</span> + rootProject.relativePath(srcDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong></p><pre class="screen">&gt; gradle -q show
srcDirName: src/java
srcDir: child/src/java</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:injected_configuration"></a>59.2.&nbsp;Injected configuration</h2></div></div></div><p>You can use the configuration injection technique discussed in <a class="xref" href="#sec:cross_project_configuration">Section&nbsp;56.1, &ldquo;Cross project configuration&rdquo;</a>
            and <a class="xref" href="#sec:subproject_configuration">Section&nbsp;56.2, &ldquo;Subproject configuration&rdquo;</a> to inject properties and methods into various projects.
            This is generally a better option than inheritance, for a number of reasons: The injection is
            explicit in the build script, You can inject different logic into different projects, And you can inject
            any kind of configuration such as repositories, plug-ins, tasks, and so on.
            The following sample shows how this works.
        </p><div class="example"><a name="injectedBuildLogic"></a><p class="title"><b>Example&nbsp;59.2.&nbsp;Using injected properties and methods</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    <span class="hl-comment">// Define a new property</span>
    ext.srcDirName = <span class="hl-string">'src/java'</span>

    <span class="hl-comment">// Define a method using a closure as the method body</span>
    ext.srcDir = { file(srcDirName) }

    <span class="hl-comment">// Define a task</span>
    task show &lt;&lt; {
        println <span class="hl-string">'project: '</span> + project.path
        println <span class="hl-string">'srcDirName: '</span> + srcDirName
        File srcDir = srcDir()
        println <span class="hl-string">'srcDir: '</span> + rootProject.relativePath(srcDir)
    }
}

<span class="hl-comment">// Inject special case configuration into a particular project</span>
project(<span class="hl-string">':child2'</span>) {
    ext.srcDirName = <span class="hl-string">"$srcDirName/legacy"</span>
}</pre><p><code class="filename">child1/build.gradle</code></p><pre class="programlisting"><span class="hl-comment">// Use injected property and method. Here, we override the injected value</span>
srcDirName = <span class="hl-string">'java'</span>
def dir = srcDir()</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong></p><pre class="screen">&gt; gradle -q show
project: :child1
srcDirName: java
srcDir: child1/java
project: :child2
srcDirName: src/java/legacy
srcDir: child2/src/java/legacy</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:build_sources"></a>59.3.&nbsp;Build sources in the <code class="filename">buildSrc</code> project</h2></div></div></div><p>When you run Gradle, it checks for the existence of a directory called <code class="filename">buildSrc</code>. 
            Gradle then automatically compiles and tests this code and puts it in the classpath of your build script. 
            You don't need to provide any further instruction. This can be a good place to add your custom tasks and plugins.
        </p><p>For multi-project builds there can be only one <code class="filename">buildSrc</code> directory, which has to be
            in the root project directory.
        </p><p>Listed below is the default build script that Gradle applies to the <code class="filename">buildSrc</code> project:</p><div class="figure"><a name="N168FF"></a><p class="title"><b>Figure&nbsp;59.1.&nbsp;Default buildSrc build script</b></p><div class="figure-contents"><pre class="programlisting">apply plugin: 'groovy'
dependencies {
    compile gradleApi()
    compile localGroovy()
}</pre></div></div><br class="figure-break"><p>
            This means that you can just put you build source code in this directory and stick to the layout convention for a 
            Java/Groovy project (see <a class="xref" href="#javalayout" title="Table&nbsp;23.4.&nbsp;Java plugin - default project layout">Table&nbsp;23.4, &ldquo;Java plugin - default project layout&rdquo;</a>).
        </p><p>
            If you need more flexibility, you can provide your own <code class="filename">build.gradle</code>. Gradle applies the default build script
            regardless of whether there is one specified. This means you only need to declare the extra things you need. Below is an example.
            Notice that this example does not need to declare a dependency on the Gradle API, as this is done by the default build script:
        </p><div class="example"><a name="customBuildSrcBuild"></a><p class="title"><b>Example&nbsp;59.3.&nbsp;Custom buildSrc build script</b></p><div class="example-contents"><p><code class="filename">buildSrc/build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    testCompile <span class="hl-string">'junit:junit:4.11'</span>
}</pre></div></div><br class="example-break"><p>
            The <code class="filename">buildSrc</code> project can be a multi-project build. This works like any other regular Gradle multi-project build. However,
            you need to make all of the projects that you wish be on the classpath of the actual build <code class="literal">runtime</code> dependencies of the root project in 
            <code class="filename">buildSrc</code>. You can do this by adding this to the configuration of each project you wish to export:
        </p><div class="example"><a name="multiProjectBuildSrc"></a><p class="title"><b>Example&nbsp;59.4.&nbsp;Adding subprojects to the root buildSrc project</b></p><div class="example-contents"><p><code class="filename">buildSrc/build.gradle</code></p><pre class="programlisting">rootProject.dependencies {
  runtime project(path)
}</pre><div class="exampleLocation"><p><span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/multiProjectBuildSrc</code> which is in both the binary and source distributions of Gradle.</p></div></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:external_build"></a>59.4.&nbsp;Running another Gradle build from a build</h2></div></div></div><p>You can use the <a class="ulink" href="../dsl/org.gradle.api.tasks.GradleBuild.html" target="_top"><code class="classname">GradleBuild</code></a> task. You can use either of the
            <code class="literal">dir</code> or <code class="literal">buildFile</code> properties to specify which build to execute,
            and the <code class="literal">tasks</code> property to specify which tasks to execute.
        </p><div class="example"><a name="nestedBuild"></a><p class="title"><b>Example&nbsp;59.5.&nbsp;Running another build from a build</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task build(type: GradleBuild) {
    buildFile = <span class="hl-string">'other.gradle'</span>
    tasks = [<span class="hl-string">'hello'</span>]
}</pre><p><code class="filename">other.gradle</code></p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">"hello from the other build."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q build</code></strong></p><pre class="screen">&gt; gradle -q build
hello from the other build.</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:external_dependencies"></a>59.5.&nbsp;External dependencies for the build script</h2></div></div></div><p>If your build script needs to use external libraries, you can add them to the script's classpath in the
            build script itself. You do this using the <code class="literal">buildscript()</code> method, passing in a closure which
            declares the build script classpath.
        </p><div class="example"><a name="declareExternalBuildDependency"></a><p class="title"><b>Example&nbsp;59.6.&nbsp;Declaring external dependencies for the build script</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'commons-codec'</span>, name: <span class="hl-string">'commons-codec'</span>, version: <span class="hl-string">'1.2'</span>
    }
}</pre></div></div><br class="example-break"><p>The closure passed to the <code class="literal">buildscript()</code> method configures a
            <a class="ulink" href="../javadoc/org/gradle/api/initialization/dsl/ScriptHandler.html" target="_top"><code class="classname">ScriptHandler</code></a> instance. You declare the build script
            classpath by adding dependencies to the <code class="literal">classpath</code> configuration. This is the same way
            you declare, for example, the Java compilation classpath. You can use any of the dependency types described
            in <a class="xref" href="#sec:how_to_declare_your_dependencies">Section&nbsp;50.4, &ldquo;How to declare your dependencies&rdquo;</a>, except project dependencies.</p><p>Having declared the build script classpath, you can use the classes in your build script as you would
            any other classes on the classpath. The following example adds to the previous example, and uses classes
            from the build script classpath.</p><div class="example"><a name="externalBuildDependency"></a><p class="title"><b>Example&nbsp;59.7.&nbsp;A build script with external dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting"><span class="hl-keyword">import</span> org.apache.commons.codec.binary.Base6<span class="hl-number">4</span>

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'commons-codec'</span>, name: <span class="hl-string">'commons-codec'</span>, version: <span class="hl-string">'1.2'</span>
    }
}

task encode &lt;&lt; {
    def <span class="hl-keyword">byte</span>[] encodedString = <span class="hl-keyword">new</span> Base6<span class="hl-number">4</span>().encode(<span class="hl-string">'hello world\n'</span>.getBytes())
    println <span class="hl-keyword">new</span> String(encodedString)
}</pre><p>Output of <strong class="userinput"><code>gradle -q encode</code></strong></p><pre class="screen">&gt; gradle -q encode
aGVsbG8gd29ybGQK</pre></div></div><br class="example-break"><p>
            For multi-project builds, the dependencies declared in the a project's build script, are available to the
            build scripts of all sub-projects.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:ant_optional_dependencies"></a>59.6.&nbsp;Ant optional dependencies</h2></div></div></div><p>For reasons we don't fully understand yet, external dependencies are not picked up by Ant's optional
            tasks. But you can easily do it in another way.
            <sup>[<a href="#ftn.N1699D" name="N1699D" class="footnote">26</a>]</sup>
        </p><div class="example"><a name="buildLogic"></a><p class="title"><b>Example&nbsp;59.8.&nbsp;Ant optional dependencies</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">configurations {
    ftpAntTask
}

dependencies {
    ftpAntTask(<span class="hl-string">"org.apache.ant:ant-commons-net:1.9.3"</span>) {
        module(<span class="hl-string">"commons-net:commons-net:1.4.1"</span>) {
            dependencies <span class="hl-string">"oro:oro:2.0.8:jar"</span>
        }
    }
}

task ftp &lt;&lt; {
    ant {
        taskdef(name: <span class="hl-string">'ftp'</span>,
                classname: <span class="hl-string">'org.apache.tools.ant.taskdefs.optional.net.FTP'</span>,
                classpath: configurations.ftpAntTask.asPath)
        ftp(server: <span class="hl-string">"ftp.apache.org"</span>, userid: <span class="hl-string">"anonymous"</span>, password: <span class="hl-string">"me@myorg.com"</span>) {
            fileset(dir: <span class="hl-string">"htdocs/manual"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>This is also nice example for the usage of client modules. The POM file in Maven Central for the
        ant-commons-net task does not provide the right information for this use case.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:philosophy"></a>59.7.&nbsp;Summary</h2></div></div></div><p>Gradle offers you a variety of ways of organizing your build logic. You can choose what is right for your
            domain and find the right balance between unnecessary indirections, and avoiding redundancy and a hard to
            maintain code base. It is our experience that even very complex custom build logic is rarely shared between
            different builds. Other build tools enforce a separation of this build logic into a separate project. Gradle
            spares you this unnecessary overhead and indirection.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N16866" name="ftn.N16866" class="para">25</a>] </sup>Which might range from a single class to something very complex.
            </p></div><div class="footnote"><p><sup>[<a href="#N1699D" name="ftn.N1699D" class="para">26</a>] </sup>In fact, we think this is anyway the nicer solution. Only if your buildscript and Ant's optional
                    task need the <span class="emphasis"><em>same</em></span> library you would have to define it two times. In such a
                    case it would be nice, if Ant's optional task would automatically pickup the classpath defined
                    in the <code class="literal">gradesettings</code>.
                </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="init_scripts"></a>Chapter&nbsp;60.&nbsp;Initialization Scripts</h1></div></div></div><p>Gradle provides a powerful mechanism to allow customizing the build based on the current environment.  This
        mechanism also supports tools that wish to integrate with Gradle.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:basic_usage"></a>60.1.&nbsp;Basic usage</h2></div></div></div><p>Initialization scripts (a.k.a. <em class="firstterm">init scripts</em>) are similar to other scripts in Gradle.
            These scripts, however, are run before the build starts.  Here are several possible uses:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Set up enterprise-wide configuration, such as where to find custom plugins.</p></li><li class="listitem"><p>Set up properties based on the current environment, such as a developer's machine vs. a
                        continuous integration server.
                    </p></li><li class="listitem"><p>Supply personal information about the user that is required by the build, such as repository or database
                        authentication credentials.
                    </p></li><li class="listitem"><p>Define machine specific details, such as where JDKs are installed.
                    </p></li><li class="listitem"><p>Register build listeners.  External tools that wish to listen to Gradle events might find
                        this useful.
                    </p></li><li class="listitem"><p>Register build loggers.  You might wish to customize how Gradle logs the events that it generates.
                    </p></li></ul></div><p>
            One main limitation of init scripts is that they cannot access classes in the buildSrc project (see
            <a class="xref" href="#sec:build_sources">Section&nbsp;59.3, &ldquo;Build sources in the <code class="filename">buildSrc</code> project&rdquo;</a> for details of this feature).
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N169E1"></a>60.2.&nbsp;Using an init script</h2></div></div></div><p>There are several ways to use an init script:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Specify a file on the command line.  The command line option is <code class="option">-I</code> or <code class="option">--init-script</code> followed
                    by the path to the script.  The command line option can appear more than once, each time adding another init script.</p></li><li class="listitem"><p>Put a file called <code class="filename">init.gradle</code> in the <code class="filename"><em class="replaceable"><code>USER_HOME</code></em>/.gradle/</code> directory.</p></li><li class="listitem"><p>Put a file that ends with <code class="filename">.gradle</code> in the <code class="filename"><em class="replaceable"><code>USER_HOME</code></em>/.gradle/init.d/</code> directory.</p></li><li class="listitem"><p>Put a file that ends with <code class="filename">.gradle</code> in the <code class="filename"><em class="replaceable"><code>GRADLE_HOME</code></em>/init.d/</code>
                    directory, in the Gradle distribution. This allows you to package up a custom Gradle distribution containing some custom build logic and plugins. You can
                    combine this with the <a class="link" href="#gradle_wrapper">Gradle wrapper</a> as a way to make custom logic available to all builds
                    in your enterprise.
                </p></li></ul></div><p>
            If more than one init script is found they will all be executed, in the order specified above. Scripts in a given directory are executed
            in alphabetical order.
            This allows, for example, a tool to specify an init script on the command line and the user to put one in their home directory for defining
            the environment and both scripts will run when Gradle is executed.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16A17"></a>60.3.&nbsp;Writing an init script</h2></div></div></div><p>Similar to a Gradle build script, an init script is a groovy script. Each init script has a
            <a class="ulink" href="../dsl/org.gradle.api.invocation.Gradle.html" target="_top"><code class="classname">Gradle</code></a> instance associated with it. Any property reference
            and method call in the init script will delegate to this <code class="classname">Gradle</code> instance.
        </p><p>Each init script also implements the <a class="ulink" href="../dsl/org.gradle.api.Script.html" target="_top"><code class="classname">Script</code></a> interface.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16A2B"></a>60.3.1.&nbsp;Configuring projects from an init script</h3></div></div></div><p>You can use an init script to configure the projects in the build. This works in a similar way to configuring projects in a
                multi-project build.
                The following sample shows how to perform extra configuration from an init script <span class="emphasis"><em>before</em></span> the projects are evaluated.
                This sample uses this feature to configure an extra repository to be used only for certain environments.
            </p><div class="example"><a name="initScriptConfiguration"></a><p class="title"><b>Example&nbsp;60.1.&nbsp;Using init script to perform extra configuration before projects are evaluated</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
    mavenCentral()
}

task showRepos &lt;&lt; {
    println <span class="hl-string">"All repos:"</span>
    println repositories.collect { it.name }
}</pre><p><code class="filename">init.gradle</code></p><pre class="programlisting">allprojects {
    repositories {
        mavenLocal()
    }
}</pre><p>Output of <strong class="userinput"><code>gradle --init-script init.gradle -q showRepos</code></strong></p><pre class="screen">&gt; gradle --init-script init.gradle -q showRepos
All repos:
[MavenLocal, MavenRepo]</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:custom_classpath"></a>60.4.&nbsp;External dependencies for the init script</h2></div></div></div><p>In <a class="xref" href="#sec:external_dependencies">Section&nbsp;59.5, &ldquo;External dependencies for the build script&rdquo;</a> is was explained how to add external dependencies to a
            build script. Init scripts can similarly have external dependencies defined.  You do this using the
            <code class="literal">initscript()</code> method, passing in a closure which declares the init script classpath.
        </p><div class="example"><a name="declareExternalInitDependency"></a><p class="title"><b>Example&nbsp;60.2.&nbsp;Declaring external dependencies for an init script</b></p><div class="example-contents"><p><code class="filename">init.gradle</code></p><pre class="programlisting">initscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'org.apache.commons'</span>, name: <span class="hl-string">'commons-math'</span>, version: <span class="hl-string">'2.0'</span>
    }
}</pre></div></div><br class="example-break"><p>The closure passed to the <code class="literal">initscript()</code> method configures a
            <a class="ulink" href="../javadoc/org/gradle/api/initialization/dsl/ScriptHandler.html" target="_top"><code class="classname">ScriptHandler</code></a> instance. You declare the init script
            classpath by adding dependencies to the <code class="literal">classpath</code> configuration. This is the same way
            you declare, for example, the Java compilation classpath. You can use any of the dependency types described
            in <a class="xref" href="#sec:how_to_declare_your_dependencies">Section&nbsp;50.4, &ldquo;How to declare your dependencies&rdquo;</a>, except project dependencies.</p><p>Having declared the init script classpath, you can use the classes in your init script as you would
            any other classes on the classpath. The following example adds to the previous example, and uses classes
            from the init script classpath.</p><div class="example"><a name="externalInitDependency"></a><p class="title"><b>Example&nbsp;60.3.&nbsp;An init script with external dependencies</b></p><div class="example-contents"><p><code class="filename">init.gradle</code></p><pre class="programlisting"><span class="hl-keyword">import</span> org.apache.commons.math.fraction.Fraction

initscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'org.apache.commons'</span>, name: <span class="hl-string">'commons-math'</span>, version: <span class="hl-string">'2.0'</span>
    }
}

println Fraction.ONE_FIFTH.multiply(<span class="hl-number">2</span>)</pre><p>Output of <strong class="userinput"><code>gradle --init-script init.gradle -q doNothing</code></strong></p><pre class="screen">&gt; gradle --init-script init.gradle -q doNothing
2 / 5</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16A81"></a>60.5.&nbsp;Init script plugins</h2></div></div></div><p>Similar to a Gradle build script or a Gradle settings file, plugins can be applied on init scripts.
            </p><div class="example"><a name="usePluginsInInitScripts"></a><p class="title"><b>Example&nbsp;60.4.&nbsp;Using plugins in init scripts</b></p><div class="example-contents"><p><code class="filename">init.gradle</code></p><pre class="programlisting">apply plugin:EnterpriseRepositoryPlugin

<span class="hl-keyword">class</span> EnterpriseRepositoryPlugin <span class="hl-keyword">implements</span> Plugin&lt;Gradle&gt; {

    <span class="hl-keyword">private</span> <span class="hl-keyword">static</span> String ENTERPRISE_REPOSITORY_URL = <span class="hl-string">"http://repo.gradle.org/gradle/repo"</span>

    <span class="hl-keyword">void</span> apply(Gradle gradle) {
        <span class="hl-comment">// ONLY USE ENTERPRISE REPO FOR DEPENDENCIES</span>
        gradle.allprojects{ project -&gt;
            project.repositories {

                <span class="hl-comment">//remove all repositories not pointing to the enterprise repository url</span>
                all { ArtifactRepository repo -&gt;
                    <span class="hl-keyword">if</span> (!(repo <span class="hl-keyword">instanceof</span> MavenArtifactRepository) || repo.url.toString() != ENTERPRISE_REPOSITORY_URL) {
                        project.logger.lifecycle <span class="hl-string">"Repository ${repo.url} removed. Only $ENTERPRISE_REPOSITORY_URL is allowed"</span>
                        remove repo
                    }
                }

                <span class="hl-comment">// add the enterprise repository</span>
                maven {
                    name <span class="hl-string">"STANDARD_ENTERPRISE_REPO"</span>
                    url ENTERPRISE_REPOSITORY_URL
                }
            }
        }
    }
}</pre><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories{
    mavenCentral()
}

 task showRepositories &lt;&lt; {
    repositories.each{
        println <span class="hl-string">"repository: ${it.name} ('${it.url}')"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q -I init.gradle showRepositories</code></strong></p><pre class="screen">&gt; gradle -q -I init.gradle showRepositories
repository: STANDARD_ENTERPRISE_REPO ('http://repo.gradle.org/gradle/repo')</pre></div></div><br class="example-break"><p>The plugin in the sample init scripts ensures, that only a specified repository is used when running the build.
            </p><p>When applying plugins within the init script, Gradle instantiates the plugin and calls the plugin
                instance's <a class="ulink" href="../javadoc/org/gradle/api/Plugin.html#apply(T)" target="_top"><code class="classname">Plugin.apply()</code></a> method. The <code class="literal">gradle</code> object is passed as a parameter,
                which can be used to configure all aspects of a build.
                Of course, the applied plugin can be resolved as external dependency as described in <a class="xref" href="#sec:custom_classpath">Section&nbsp;60.4, &ldquo;External dependencies for the init script&rdquo;</a>
            </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="gradle_wrapper"></a>Chapter&nbsp;61.&nbsp;The Gradle Wrapper</h1></div></div></div><p>
        The Gradle Wrapper (henceforth referred to as the &ldquo;wrapper&rdquo;) is the preferred way of starting a Gradle build. The wrapper
        is a batch script on Windows, and a shell script for other operating systems. When you start a Gradle build via the wrapper,
        Gradle will be automatically downloaded and used to run the build. 
    </p><p>
        The wrapper is something you <span class="emphasis"><em>should</em></span> check into version control. By distributing the wrapper with your project,
        anyone can work with it without needing to install Gradle beforehand. Even better, users of the build are guaranteed to use the 
        version of Gradle that the build was designed to work with. Of course, this is also great for 
        <a class="ulink" href="http://en.wikipedia.org/wiki/Continuous_integration" target="_top">continuous integration</a> servers (i.e. servers that regularly
        build your project) as it requires no configuration on the server.
    </p><p>
        You install the wrapper into your project by adding and configuring a <a class="ulink" href="../dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_top"><code class="classname">Wrapper</code></a> 
        task in your build script, and then executing it.
    </p><div class="example"><a name="wrapperSimple"></a><p class="title"><b>Example&nbsp;61.1.&nbsp;Wrapper task</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task wrapper(type: Wrapper) {
    gradleVersion = <span class="hl-string">'1.4'</span>
}</pre></div></div><br class="example-break"><p>
        After such an execution you find the following new or updated files in your project directory 
        (in case the default configuration of the wrapper task is used).
    </p><div class="example"><a name="wrapperSimple"></a><p class="title"><b>Example&nbsp;61.2.&nbsp;Wrapper generated files</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">simple/
  gradlew
  gradlew.bat
  gradle/wrapper/
    gradle-wrapper.jar
    gradle-wrapper.properties</pre></div></div><br class="example-break"><p>
        All of these files <span class="emphasis"><em>should</em></span> be submitted to your version control system. This only needs to be done once. After
        these files have been added to the project, the project should then be built with the added <span class="command"><strong>gradlew</strong></span> command.
        The <span class="command"><strong>gradlew</strong></span> command can be used <span class="emphasis"><em>exactly</em></span> the same way as the <span class="command"><strong>gradle</strong></span> command.
    </p><p>If you want to switch to a new version of Gradle you don't need to rerun the wrapper task. It is good enough
        to change the respective entry in the <code class="literal">gradle-wrapper.properties</code> file. But if there is for
        example an improvement in the gradle-wrapper functionality you need to regenerate the wrapper files.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuration"></a>61.1.&nbsp;Configuration</h2></div></div></div><p>If you run Gradle with <span class="command"><strong>gradlew</strong></span>, the wrapper checks if a Gradle distribution for the wrapper
            is available. If not it tries to download it, otherwise it delegates to the <span class="command"><strong>gradle</strong></span>
            command of this distribution with all the arguments passed originally to the <span class="command"><strong>gradlew</strong></span>
            command.
        </p><p>
            When you configure the <code class="literal">Wrapper</code> task, you can specify the Gradle version you wish to use. The <span class="command"><strong>gradlew</strong></span>
            command will download the appropriate distribution from the Gradle repository.
            Alternatively, you can specify the download URL of the Gradle distribution. The <span class="command"><strong>gradlew</strong></span> command will use this URL to download
            the distribution.
            If you specify neither a Gradle version or download URL, the <span class="command"><strong>gradlew</strong></span> command will by default download whichever version
            of Gradle was used to generate the wrapper files.
        </p><p>For the details on how to configure the wrapper, see <a class="ulink" href="../dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_top"><code class="classname">Wrapper</code></a>
        </p><p>If you don't want any download to happen when your project is build via <span class="command"><strong>gradlew</strong></span>, simply add the Gradle
            distribution zip to your version control at the location specified by your wrapper configuration.
            A relative URL is supported - you can specify a distribution file relative to the location of <code class="literal">gradle-wrapper.properties</code> file.
        </p><p>If you build via the wrapper, any existing Gradle distribution installed on the machine is ignored.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:unix_file_permissions"></a>61.2.&nbsp;Unix file permissions</h2></div></div></div><p>The Wrapper task adds appropriate file permissions to allow the execution for the gradlew *NIX command.
            Subversion preserves this file permission. We are not sure how other version control systems deal with this.
            What should always work is to execute <code class="literal">sh gradlew</code>.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="embedding"></a>Chapter&nbsp;62.&nbsp;Embedding Gradle</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:embedding_introduction"></a>62.1.&nbsp;Introduction to the Tooling API</h2></div></div></div><p>The 1.0 milestone 3 release brought a new API called the tooling API,
            which you can use for embedding Gradle. This API allows you to execute and monitor builds,
            and to query Gradle about the details of a build.
            The main audience for this API is IDE, CI server, other UI authors, or integration testing of your Gradle plugins.
            However, it is open for anyone who needs to embed Gradle in their application.
        </p><p>A fundamental characteristic of the tooling API is that it operates in a version independent way.
            This means that you can use the same API to work with different target versions of Gradle.
            The tooling API is Gradle wrapper aware and, by default,
            uses the same target Gradle version as that used by the wrapper-powered project.
        </p><p>Some features that the tooling API provides today:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">You can query Gradle for the details of a build,
                    including the project hierarchy and the project dependencies,
                    external dependencies (including source and javadoc jars),
                    source directories and tasks of each project.
                </li><li class="listitem">You can execute a build, and listen to stdout and stderr logging and progress
                    (e.g. the stuff shown in the 'status bar' when you run on the command line).
                </li><li class="listitem">Tooling API can download and install the appropriate Gradle version, similar to the wrapper.
                    Bear in mind that the tooling API is wrapper aware so you should not need to configure a Gradle distribution directly.
                </li><li class="listitem">The implementation is lightweight, with only a small number of dependencies.
                    It is also a well-behaved library, and makes no assumptions about your class loader structure or logging configuration.
                    This makes the API easy to bundle in your application.
                </li></ul></div><p>
        </p><p>In future we may support other interesting features:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Performance. The API gives us the opportunity to do lots of caching,
                    static analysis and preemptive work, to make things faster for the user.
                </li><li class="listitem">Better progress monitoring and build cancellation.
                    For example, allowing test execution to be monitored.
                </li><li class="listitem">Notifications when things in the build change, so that UIs and models can be updated.
                    For example, your Eclipse or IDEA project will update immediately, in the background.
                </li><li class="listitem">Validating and prompting for user supplied configuration.
                </li><li class="listitem">Prompting for and managing user credentials.
                </li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:embedding_daemon"></a>62.2.&nbsp;Tooling API and the Gradle Build Daemon</h2></div></div></div><p>Please take a look at <a class="xref" href="#gradle_daemon">Chapter&nbsp;19, <i>The Gradle Daemon</i></a>.
            The Tooling API uses the daemon all the time, e.g. you cannot officially use the Tooling API without the daemon.
            This means that subsequent calls to the Tooling API, be it model building requests or task executing requests
            can be executed in the same long-living process. <a class="xref" href="#gradle_daemon">Chapter&nbsp;19, <i>The Gradle Daemon</i></a> contains more details about the daemon,
            specifically information on situations when new daemons are forked.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:embedding_quickstart"></a>62.3.&nbsp;Quickstart</h2></div></div></div><p>Since the tooling API is an interface for a programmer most of the documentation lives in the Javadoc.
            This is exactly our intention - we don't expect this chapter to grow very much.
            Instead we will add more code samples and improve the Javadoc documentation.
            The main entry point to the tooling API is the
            <a class="ulink" href="../javadoc/org/gradle/tooling/GradleConnector.html" target="_top"><code class="classname">GradleConnector</code></a>.
            You can navigate from there and find code samples and other instructions.
            Pretty effective way of learning how to use the tooling API is checking out and running
            the <span class="emphasis"><em>samples</em></span> that live in <code class="filename">$gradleHome/samples/toolingApi</code>.
        </p><p>
            If you're embedding Gradle and you're looking for exact set of dependencies the tooling API Jar requires
            please look at one of the samples in <code class="filename">$gradleHome/samples/toolingApi</code>.
            The dependencies are declared in the Gradle build scripts.
            You can also find the repository declarations where the Jars are obtained from.
        </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="comparing_builds"></a>Chapter&nbsp;63.&nbsp;Comparing Builds</h1></div></div></div><div class="note"><p>
            Build comparison support is an <a class="link" href="#feature_lifecycle">incubating</a> feature. This means that it is incomplete and not yet at regular Gradle production quality.
            This also means that this Gradle User Guide chapter is a work in progress.
        </p></div><p>
        Gradle provides support for comparing the <em class="firstterm">outcomes</em> (e.g. the produced binary archives) of two builds.
        There are several reasons why you may want to compare the outcomes of two builds. You may want to compare:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A build with a newer version of Gradle than it's currently using (i.e. upgrading the Gradle version).</p></li><li class="listitem"><p>A Gradle build with a build executed by another tool such as Apache Ant, Apache Maven or something else (i.e. migrating to Gradle).</p></li><li class="listitem"><p>The same Gradle build, with the same version, before and after a change to the build (i.e. testing build changes).</p></li></ul></div><p>
        By comparing builds in these scenarios you can make an informed decision about the Gradle upgrade, migration to Gradle or build change by understanding the differences in the outcomes.
        The comparison process produces a HTML report outlining which outcomes were found to be identical and identifying the differences between non-identical outcomes.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16B8C"></a>63.1.&nbsp;Definition of terms</h2></div></div></div><p>The following are the terms used for build comparison and their definitions.</p><div class="variablelist"><dl><dt><span class="term">&ldquo;Build&rdquo;</span></dt><dd><p>
                        In the context of build comparison, a build is not necessarily a Gradle build.
                        It can be any invokable &ldquo;process&rdquo; that produces observable &ldquo;outcomes&rdquo;.
                        At least one of the builds in a comparison will be a Gradle build.
                    </p></dd><dt><span class="term">&ldquo;Build Outcome&rdquo;</span></dt><dd><p>
                        Something that happens in an observable manner during a build, such as the creation of a zip file or test execution.
                        These are the things that are compared.
                    </p></dd><dt><span class="term">&ldquo;Source Build&rdquo;</span></dt><dd><p>
                        The build that comparisons are being made against, typically the build in its &ldquo;current&rdquo; state.
                        In other words, the left hand side of the comparison.
                    </p></dd><dt><span class="term">&ldquo;Target Build&rdquo;</span></dt><dd><p>
                        The build that is being compared to the source build, typically the &ldquo;proposed&rdquo; build.
                        In other words, the right hand side of the comparison.
                    </p></dd><dt><span class="term">&ldquo;Host Build&rdquo;</span></dt><dd><p>
                        The Gradle build that executes the comparison process. It may be the same project as either the &ldquo;target&rdquo; or &ldquo;source&rdquo; build
                        or may be a completely separate project. It does not need to be the same Gradle version as the &ldquo;source&rdquo; or &ldquo;target&rdquo; builds.
                        The host build must be run with Gradle 1.2 or newer.
                    </p></dd><dt><span class="term">&ldquo;Compared Build Outcome&rdquo;</span></dt><dd><p>
                        Build outcomes that are intended to be logically equivalent in the &ldquo;source&rdquo; and &ldquo;target&rdquo; builds,
                        and are therefore meaningfully comparable.</p></dd><dt><span class="term">&ldquo;Uncompared Build Outcome&rdquo;</span></dt><dd><p>
                        A build outcome is uncompared if a logical equivalent from the other build cannot be found
                        (e.g. a build produces a zip file that the other build does not).
                    </p></dd><dt><span class="term">&ldquo;Unknown Build Outcome&rdquo;</span></dt><dd><p>
                        A build outcome that cannot be understood by the host build. This can occur when the source or target build
                        is a newer Gradle version than the host build and that Gradle version exposes new outcome types. Unknown build outcomes
                        can be compared in so far as they can be identified to be logically equivalent to an unknown build outcome in the other build,
                        but no meaningful comparison of what the build outcome actually is can be performed. Using the latest Gradle version
                        for the host build will avoid encountering unknown build outcomes.
                    </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16BC2"></a>63.2.&nbsp;Current Capabilities</h2></div></div></div><p>
            As this is an <a class="link" href="#feature_lifecycle">incubating</a> feature, a limited set of the eventual functionality has been implemented at this time.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16BCB"></a>63.2.1.&nbsp;Supported builds</h3></div></div></div><p>
                Only support for executing Gradle builds is available at this time.
                Source and target build must execute with Gradle newer or equal to <code class="literal">1.0</code>.
                Host build must be at least <code class="literal">1.2</code>.
            </p><p>
                Future versions will provide support for executing builds from other build systems such as Apache Ant
                or Apache Maven, as well as support for executing arbitrary processes (e.g. shell script based builds)
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16BD8"></a>63.2.2.&nbsp;Supported build outcomes</h3></div></div></div><p>
                Only support for comparing build outcomes that are <code class="literal">zip</code> archives is supported at this time.
                This includes <code class="literal">jar</code>, <code class="literal">war</code> and <code class="literal">ear</code> archives.
            </p><p>
                Future versions will provide support for comparing outcomes such as test execution (i.e. which tests were executed, which tests failed, etc.)
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16BEB"></a>63.3.&nbsp;Comparing Gradle Builds</h2></div></div></div><p>
            The <code class="literal">compare-gradle-builds</code> plugin can be used to facilitate a comparison between two Gradle builds. The plugin
            adds a <a class="ulink" href="../dsl/org.gradle.api.plugins.buildcomparison.gradle.CompareGradleBuilds.html" target="_top"><code class="classname">CompareGradleBuilds</code></a> task named &ldquo;<code class="literal">compareGradleBuilds</code>&rdquo;
            to the project. The configuration of this task specifies what is to be compared. By default, it is configured to compare the current build with itself
            using the current Gradle version by executing the tasks: &ldquo;<code class="literal">clean assemble</code>&rdquo;.
        </p><pre class="programlisting">apply plugin: 'compare-gradle-builds'</pre><p>
            This task can be configured to change what is compared.
        </p><pre class="programlisting">compareGradleBuilds {
    sourceBuild {
        projectDir "/projects/project-a"
        gradleVersion "1.1"
    }
    targetBuild {
        projectDir "/projects/project-b"
        gradleVersion "1.2"
    }
}</pre><p>
            The example above configures a comparison between two different projects using two different Gradle versions.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16C06"></a>63.3.1.&nbsp;Trying Gradle upgrades</h3></div></div></div><p>
                You can use the build comparison functionality to very quickly try a new Gradle version with your build.
            </p><p>
                To try your current build with a different Gradle version, simply add the following to the <code class="filename">build.gradle</code> of the <em class="firstterm">root project</em>.
            </p><pre class="programlisting">apply plugin: 'compare-gradle-builds'

compareGradleBuilds {
    targetBuild.gradleVersion = "&laquo;gradle version&raquo;"
}</pre><p>
                Then simply execute the <span class="command"><strong>compareGradleBuilds</strong></span> task. You will see the console output of the &ldquo;source&rdquo; and &ldquo;target&rdquo; builds as they are executing.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16C1A"></a>63.3.2.&nbsp;The comparison &ldquo;result&rdquo;</h3></div></div></div><p>
                If there are any differences between the <em class="firstterm">compared outcomes</em>, the task will fail. The location of the HTML report
                providing insight into the comparison will be given. If all compared outcomes are found to be identical, and there are no uncompared outcomes,
                and there are no unknown build outcomes the task will succeed.
            </p><p>
                You can configure the task to not fail on compared outcome differences by setting the <code class="literal">ignoreFailures</code> property to true.
            </p><pre class="programlisting">compareGradleBuilds {
    ignoreFailures = true
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16C29"></a>63.3.3.&nbsp;Which archives are compared?</h3></div></div></div><p>
                For an archive to be a candidate for comparison, it must be added as an artifact of the archives configuration.
                Take a look at <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a> for more information on how to configure and add artifacts.
            </p><p>
                The archive must also have been produced by a <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Zip.html" target="_top"><code class="classname">Zip</code></a>, <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.Jar.html" target="_top"><code class="classname">Jar</code></a>,
                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.War.html" target="_top"><code class="classname">War</code></a>, <a class="ulink" href="../dsl/org.gradle.plugins.ear.Ear.html" target="_top"><code class="classname">Ear</code></a> task. Future versions of Gradle
                will support increased flexibility in this area.
            </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="publishing_ivy"></a>Chapter&nbsp;64.&nbsp;Ivy Publishing (new)</h1></div></div></div><div class="note"><p>
            This chapter describes the new <a class="link" href="#feature_lifecycle">incubating</a> Ivy publishing support provided by the &ldquo;<code class="literal">ivy-publish</code>&rdquo;
            plugin. Eventually this new publishing support will replace publishing via the <code class="literal">Upload</code> task.
        </p><p>
            If you are looking for documentation on the original Ivy publishing support using the <code class="literal">Upload</code> task please see
            <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>.
        </p></div><p>
        This chapter describes how to publish build artifacts in the <a class="ulink" href="http://ant.apache.org/ivy/" target="_top">Apache Ivy</a> format, usually to a repository
        for consumption by other builds or projects. What is published is one or more artifacts created by the build, and an
        Ivy <em class="firstterm">module descriptor</em> (normally <code class="filename">ivy.xml</code>)
        that describes the artifacts and the dependencies of the artifacts, if any.
    </p><p>
        A published Ivy module can be consumed by Gradle (see <a class="xref" href="#dependency_management">Chapter&nbsp;50, <i>Dependency Management</i></a>) and other tools that understand the Ivy format.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:plugin"></a>64.1.&nbsp;The &ldquo;<code class="literal">ivy-publish</code>&rdquo; Plugin</h2></div></div></div><p>
            The ability to publish in the Ivy format is provided by the &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin.
        </p><p>
            The &ldquo;<code class="literal">publishing</code>&rdquo; plugin creates an extension on the project named &ldquo;<code class="literal">publishing</code>&rdquo; of type <a class="ulink" href="../dsl/org.gradle.api.publish.PublishingExtension.html" target="_top"><code class="classname">PublishingExtension</code></a>.
            This extension provides a container of named publications and a container of named repositories. The &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin works with
            <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a> publications and <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.IvyArtifactRepository.html" target="_top"><code class="classname">IvyArtifactRepository</code></a> repositories.
        </p><div class="example"><a name="publishing_ivy:apply-plugin-snippet"></a><p class="title"><b>Example&nbsp;64.1.&nbsp;Applying the &ldquo;ivy-publish&rdquo; plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'ivy-publish'</span></pre></div></div><br class="example-break"><p>
            Applying the &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin does the following:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Applies the &ldquo;<code class="literal">publishing</code>&rdquo; plugin
            </li><li class="listitem">
                Establishes a rule to automatically create a <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.GenerateIvyDescriptor.html" target="_top"><code class="classname">GenerateIvyDescriptor</code></a>
                task for each <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a> added (see <a class="xref" href="#publishing_ivy:publications">Section&nbsp;64.2, &ldquo;Publications&rdquo;</a>).
            </li><li class="listitem">
                Establishes a rule to automatically create a <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.PublishToIvyRepository.html" target="_top"><code class="classname">PublishToIvyRepository</code></a> task
                for the combination of each <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a> added (see <a class="xref" href="#publishing_ivy:publications">Section&nbsp;64.2, &ldquo;Publications&rdquo;</a>),
                with each <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.IvyArtifactRepository.html" target="_top"><code class="classname">IvyArtifactRepository</code></a> added (see <a class="xref" href="#publishing_ivy:repositories">Section&nbsp;64.3, &ldquo;Repositories&rdquo;</a>).
            </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:publications"></a>64.2.&nbsp;Publications</h2></div></div></div><div class="note"><p>
                If you are not familiar with project artifacts and configurations, you should read the <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>
                that introduces these concepts. This chapter also describes &ldquo;publishing artifacts&rdquo; using a different mechanism than what is
                described in this chapter. The publishing functionality described here will eventually supersede that functionality.
            </p></div><p>
            Publication objects describe the structure/configuration of a publication to be created. Publications are published to repositories via tasks, and the
            configuration of the publication object determines exactly what is published. All of the publications of a project are defined in the
            <a class="ulink" href="../dsl/org.gradle.api.publish.PublishingExtension.html#org.gradle.api.publish.PublishingExtension:publications" target="_top"><code class="classname">PublishingExtension.getPublications()</code></a> container. Each publication has a unique name within the project.
        </p><p>
            For the &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin to have any effect, a <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a> must be added to the set of publications.
            This publication determines which artifacts are actually published as well as the details included in the associated Ivy module descriptor file.
            A publication can be configured by adding components, customizing artifacts, and by modifying the generated module descriptor file directly.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16CEF"></a>64.2.1.&nbsp;Publishing a Software Component</h3></div></div></div><p>
                The simplest way to publish a Gradle project to an Ivy repository is to specify a <a class="ulink" href="../javadoc/org/gradle/api/component/SoftwareComponent.html" target="_top"><code class="classname">SoftwareComponent</code></a> to publish.
                The components presently available for publication are:
            </p><div class="table"><p class="title"><b>Table&nbsp;64.1.&nbsp;Software Components</b></p><div class="table-contents"><table id="N16CF9"><thead><tr>
                        <td>Name</td>
                        <td>Provided By</td>
                        <td>Artifacts</td>
                        <td>Dependencies</td>
                    </tr></thead><tr>
                    <td><code class="literal">java</code></td>
                    <td><a class="link" href="#java_plugin">Java Plugin</a></td>
                    <td>Generated jar file</td>
                    <td>Dependencies from 'runtime' configuration</td>
                </tr><tr>
                    <td><code class="literal">web</code></td>
                    <td><a class="link" href="#war_plugin">War Plugin</a></td>
                    <td>Generated war file</td>
                    <td>No dependencies</td>
                </tr></table></div></div><p>
                 In the following example, artifacts and runtime dependencies are taken from the `java` component, which is added by the <code class="literal">Java Plugin</code>.
             </p><div class="example"><a name="publishing_ivy:publish-component-snippet"></a><p class="title"><b>Example&nbsp;64.2.&nbsp;Publishing a java module to Ivy</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">publications {
        ivyJava(IvyPublication) {
            from components.java
        }
    }</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16D3C"></a>64.2.2.&nbsp;Publishing custom artifacts</h3></div></div></div><p>
                It is also possible to explicitly configure artifacts to be included in the publication. Artifacts are commonly supplied as raw files, or as instances of
                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html" target="_top"><code class="classname">AbstractArchiveTask</code></a> (e.g. Jar, Zip).
            </p><p>
                For each custom artifact, it is possible to specify the <code class="literal">name</code>, <code class="literal">extension</code>, <code class="literal">type</code>, <code class="literal">classifier</code>
                and <code class="literal">conf</code> values to use for publication. Note that each artifacts must have a unique name/classifier/extension combination.
            </p><p>
                Configure custom artifacts as follows:
            </p><div class="example"><a name="publishing_ivy:publish-custom-artifact-snippet"></a><p class="title"><b>Example&nbsp;64.3.&nbsp;Publishing additional artifact to Ivy</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task sourceJar(type: Jar) {
        from sourceSets.main.java
        classifier <span class="hl-string">"source"</span>
    }
    publishing {
        publications {
            ivy(IvyPublication) {
                from components.java
                artifact(sourceJar) {
                    type <span class="hl-string">"source"</span>
                    conf <span class="hl-string">"runtime"</span>
                }
            }
        }
    }</pre></div></div><br class="example-break"><p>
                See <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a> for more detailed documentation on how artifacts can be customized.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16D6A"></a>64.2.3.&nbsp;Identity values for the published project</h3></div></div></div><p>
                The generated Ivy module descriptor file contains an <code class="literal">&lt;info&gt;</code> tag that identifies the module.
                The default identity values are derived from the following project properties:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">organisation</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:group" target="_top"><code class="classname">Project.getGroup()</code></a></li><li class="listitem"><code class="literal">module</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:name" target="_top"><code class="classname">Project.getName()</code></a></li><li class="listitem"><code class="literal">revision</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:version" target="_top"><code class="classname">Project.getVersion()</code></a></li><li class="listitem"><code class="literal">status</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:status" target="_top"><code class="classname">Project.getStatus()</code></a></li></ul></div><p>
                Overriding the default identity values is easy: simply specify the <code class="literal">organisation</code>, <code class="literal">module</code>
                or <code class="literal">revision</code> attributes when configuring the <code class="literal">IvyPublication</code>.
            </p><div class="example"><a name="publishing_ivy:publish-customize-identity"></a><p class="title"><b>Example&nbsp;64.4.&nbsp;customizing the publication identity</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">publishing {
        publications {
            ivy(IvyPublication) {
                organisation <span class="hl-string">'org.gradle.sample'</span>
                module <span class="hl-string">'project1-sample'</span>
                revision <span class="hl-string">'1.1'</span>
                descriptor.status = <span class="hl-string">'milestone'</span>

                from components.java
            }
        }
    }</pre></div></div><br class="example-break"><div class="tip">
                Certain repositories are not able to handle all supported characters.
                For example, the ':' character cannot be used as an identifier when publishing to a filesystem-backed repository on Windows.
            </div><p>
                Gradle will handle any valid Unicode character for organisation, module and revision (as well as artifact name, extension and classifier).
                The only values that are explicitly prohibited are '<code class="literal">\</code>', '<code class="literal">/</code>' and any ISO control character. The supplied values are validated early in publication.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16DB5"></a>64.2.4.&nbsp;Modifying the generated module descriptor</h3></div></div></div><p>
                At times, the module descriptor file generated from the project information will need to be tweaked before publishing. The &ldquo;<code class="literal">ivy-publish</code>&rdquo;
                plugin provides a hook to allow such modification.
            </p><div class="example"><a name="publishing_ivy:descriptor-customization-snippet"></a><p class="title"><b>Example&nbsp;64.5.&nbsp;Customizing the module descriptor file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">publications {
        ivyCustom(IvyPublication) {
            descriptor.withXml {
                asNode().info[<span class="hl-number">0</span>].appendNode(<span class="hl-string">'description'</span>, <span class="hl-string">'A demonstration of ivy descriptor customization'</span>)
            }
        }
    }</pre></div></div><br class="example-break"><p>
                In this example we are adding a 'description' element to the generated Ivy dependency descriptor, but this this hook, allows you to modify any aspect
                of the generated descriptor. For example, you could replace the version range for a dependency with the actual version used to produce the build.
            </p><p>
                See <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyModuleDescriptor.html#org.gradle.api.publish.ivy.IvyModuleDescriptor:withXml(org.gradle.api.Action)" target="_top"><code class="classname">IvyModuleDescriptor.withXml()</code></a> for the relevant API reference documentation.
            </p><p>
                It is possible to modify virtually any aspect of the created descriptor should you need to.
                This means that it is also possible to modify the descriptor in such a way that it is no longer a valid
                Ivy module descriptor, so care must be taken when using this feature.
            </p><p>
                The identifier (organisation, module, revision) of the published module is an exception; these values cannot be modified in the descriptor using the `withXML` hook.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16DD4"></a>64.2.5.&nbsp;Publishing multiple modules</h3></div></div></div><p>
                Sometimes it's useful to publish multiple modules from your Gradle build, without creating a separate Gradle subproject.
                An example is publishing a separate API and implementation jar for your library. With Gradle this is simple:
            </p><div class="example"><a name="publishing_ivy:publish-multiple-publications"></a><p class="title"><b>Example&nbsp;64.6.&nbsp;Publishing multiple modules from a single project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task apiJar(type: Jar) {
        baseName <span class="hl-string">"publishing-api"</span>
        from sourceSets.main.output
        exclude <span class="hl-string">'**/impl/**'</span>
    }
    publishing {
        publications {
            impl(IvyPublication) {
                organisation <span class="hl-string">'org.gradle.sample.impl'</span>
                module <span class="hl-string">'project2-impl'</span>
                revision <span class="hl-string">'2.3'</span>

                from components.java
            }
            api(IvyPublication) {
                organisation <span class="hl-string">'org.gradle.sample'</span>
                module <span class="hl-string">'project2-api'</span>
                revision <span class="hl-string">'2'</span>
            }
        }
    }</pre></div></div><br class="example-break"><p>
                If a project defines multiple publications then Gradle will publish each of these to the defined repositories. Each publication
                must be given a unique identity as described above.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:repositories"></a>64.3.&nbsp;Repositories</h2></div></div></div><p>
            Publications are published to repositories. The repositories to publish to are defined by the <a class="ulink" href="../dsl/org.gradle.api.publish.PublishingExtension.html#org.gradle.api.publish.PublishingExtension:repositories" target="_top"><code class="classname">PublishingExtension.getRepositories()</code></a>
            container.
        </p><div class="example"><a name="publishing_ivy:sample_repositories"></a><p class="title"><b>Example&nbsp;64.7.&nbsp;Declaring repositories to publish to</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
        ivy {
            url <span class="hl-string">"$buildDir/repo"</span> <span class="hl-comment">// change to point to your repo, e.g. http://my.org/repo</span>
        }
    }</pre></div></div><br class="example-break"><p>
            The DSL used to declare repositories for publishing is the same DSL that is used to declare repositories for dependencies (<a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.RepositoryHandler.html" target="_top"><code class="classname">RepositoryHandler</code></a>).
            However, in the context of Ivy publication only the repositories created by the <code class="literal">ivy()</code> methods can be used as publication destinations.
            You cannot publish an <code class="literal">IvyPublication</code> to a Maven repository for example.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:publishing"></a>64.4.&nbsp;Performing a publish</h2></div></div></div><p>
            The &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin automatically creates a <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.PublishToIvyRepository.html" target="_top"><code class="classname">PublishToIvyRepository</code></a>
            task for each <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a> and <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.IvyArtifactRepository.html" target="_top"><code class="classname">IvyArtifactRepository</code></a>
            combination in the <code class="literal">publishing.publications</code> and <code class="literal">publishing.repositories</code> containers respectively.
        </p><p>
            The created task is named using the pattern "<code class="literal">publish&laquo;<span class="emphasis"><em>NAME OF PUBLICATION</em></span>&raquo;PublicationTo&laquo;<span class="emphasis"><em>NAME OF REPOSITORY</em></span>&raquo;Repository</code>".
            So in this example a single <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.PublishToIvyRepository.html" target="_top"><code class="classname">PublishToIvyRepository</code></a> task is be added, named '<code class="literal">publishIvyJavaPublicationToIvyRepository</code>'.
        </p><div class="example"><a name="publishingIvyPublishSingle"></a><p class="title"><b>Example&nbsp;64.8.&nbsp;Choosing a particular publication to publish</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>
apply plugin: <span class="hl-string">'ivy-publish'</span>

group = <span class="hl-string">'org.gradle.sample'</span>
version = <span class="hl-string">'1.0'</span>

publishing {
    publications {
        ivyJava(IvyPublication) {
            from components.java
        }
    }
    repositories {
        ivy {
            url <span class="hl-string">"$buildDir/repo"</span> <span class="hl-comment">// change to point to your repo, e.g. http://my.org/repo</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle publishIvyJavaPublicationToIvyRepository</code></strong></p><pre class="screen">&gt; gradle publishIvyJavaPublicationToIvyRepository
:generateDescriptorFileForIvyJavaPublication
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:jar
:publishIvyJavaPublicationToIvyRepository

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16E48"></a>64.4.1.&nbsp;The &ldquo;<code class="literal">publish</code>&rdquo; lifecycle task</h3></div></div></div><p>
                The &ldquo;<code class="literal">publish</code>&rdquo; plugin (that the &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin implicitly applies) adds a lifecycle task
                that can be used to publish all publications to all applicable repositories named &ldquo;<code class="literal">publish</code>&rdquo;.
            </p><p>
                In more concrete terms, executing this task will execute all <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.PublishToIvyRepository.html" target="_top"><code class="classname">PublishToIvyRepository</code></a> tasks in the project.
                This is usually the most convenient way to perform a publish.
            </p><div class="example"><a name="publishingIvyPublishLifecycle"></a><p class="title"><b>Example&nbsp;64.9.&nbsp;Publishing all publications via the &ldquo;publish&rdquo; lifecycle task</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle publish</code></strong></p><pre class="screen">&gt; gradle publish
:generateDescriptorFileForIvyJavaPublication
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:jar
:publishIvyJavaPublicationToIvyRepository
:publish

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:descriptor"></a>64.5.&nbsp;Generating the Ivy module descriptor file without publishing</h2></div></div></div><p>
            At times it is useful to generate the Ivy module descriptor file (normally <code class="filename">ivy.xml</code>) without publishing your module to an Ivy repository.
            Since descriptor file generation is performed by a separate task, this is very easy to do.
        </p><p>
            The &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin automatically wires in one <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.GenerateIvyDescriptor.html" target="_top"><code class="classname">GenerateIvyDescriptor</code></a> task
            for each registered <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.IvyPublication.html" target="_top"><code class="classname">IvyPublication</code></a>.
            This task is given a name based on the name of the publication:  "<code class="literal">generateDescriptorFileFor&laquo;<span class="emphasis"><em>NAME OF PUBLICATION</em></span>&raquo;Publication</code>".
            So in the example above where the publication is named "<code class="literal">ivyJava</code>", the task will be named "<code class="literal">generateDescriptorFileForIvyJavaPublication</code>".
        </p><p>
            You can specify where the generated Ivy file will be located by setting the <code class="literal">destination</code> property on the generate task.
            By default this file is generated to <code class="literal">build/publications/&laquo;<span class="emphasis"><em>NAME OF PUBLICATION</em></span>&raquo;/ivy.xml</code>.
        </p><div class="example"><a name="publishingIvyGenerateDescriptor"></a><p class="title"><b>Example&nbsp;64.10.&nbsp;Generating the Ivy module descriptor file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    tasks.generateDescriptorFileForIvyCustomPublication {
        destination = file(<span class="hl-string">"$buildDir/generated-ivy.xml"</span>)
    }
}</pre><p>Output of <strong class="userinput"><code>gradle generateDescriptorFileForIvyCustomPublication</code></strong></p><pre class="screen">&gt; gradle generateDescriptorFileForIvyCustomPublication
:generateDescriptorFileForIvyCustomPublication

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><div class="note"><p>
                The &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin leverages some experimental support for late plugin configuration,
                and the <code class="literal">GenerateIvyDescriptor</code> task will not be constructed until the publishing extension is configured.
                The simplest way to ensure that the publishing plugin is configured when you attempt to access the <code class="literal">GenerateIvyDescriptor</code> task
                is to place the access inside a <code class="literal">publishing</code> block, as the example above demonstrates.
            </p><p>
                The same applies to any attempt to access publication-specific tasks like <a class="ulink" href="../dsl/org.gradle.api.publish.ivy.tasks.PublishToIvyRepository.html" target="_top"><code class="classname">PublishToIvyRepository</code></a>.
                These tasks should be referenced from within a <code class="literal">publishing</code> block.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:example"></a>64.6.&nbsp;Complete example</h2></div></div></div><p>
            The following example demonstrates publishing with a multi-project build. Each project publishes a java component and a configured additional source artifact.
            The descriptor file is customized to include the project description for each project.
        </p><div class="example"><a name="publishing_ivy:complete_example"></a><p class="title"><b>Example&nbsp;64.11.&nbsp;Publishing a java module</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">subprojects {
    apply plugin: <span class="hl-string">'java'</span>
    apply plugin: <span class="hl-string">'ivy-publish'</span>

    version = <span class="hl-string">'1.0'</span>
    group = <span class="hl-string">'org.gradle.sample'</span>

    repositories {
        mavenCentral()
    }
    task sourceJar(type: Jar) {
        from sourceSets.main.java
        classifier <span class="hl-string">"source"</span>
    }
}

project(<span class="hl-string">":project1"</span>) {
    description = <span class="hl-string">"The first project"</span>

    dependencies {
       compile <span class="hl-string">'junit:junit:4.11'</span>, project(<span class="hl-string">':project2'</span>)
    }
}

project(<span class="hl-string">":project2"</span>) {
    description = <span class="hl-string">"The second project"</span>

    dependencies {
       compile <span class="hl-string">'commons-collections:commons-collections:3.1'</span>
    }
}

subprojects {
    publishing {
        repositories {
            ivy {
                url <span class="hl-string">"${rootProject.buildDir}/repo"</span> <span class="hl-comment">// change to point to your repo, e.g. http://my.org/repo</span>
            }
        }
        publications {
            ivy(IvyPublication) {
                from components.java
                artifact(sourceJar) {
                    type <span class="hl-string">"source"</span>
                    conf <span class="hl-string">"runtime"</span>
                }
                descriptor.withXml {
                    asNode().info[<span class="hl-number">0</span>].appendNode(<span class="hl-string">'description'</span>, description)
                }
            }
        }
    }
}</pre></div></div><br class="example-break"><p>
            The result is that the following artifacts will be published for each project:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The Ivy module descriptor file: <code class="filename">ivy-1.0.xml</code>.</li><li class="listitem">The primary &ldquo;jar&rdquo; artifact for the java component: <code class="filename">project1-1.0.jar</code>.</li><li class="listitem">The source &ldquo;jar&rdquo; artifact that has been explicitly configured:<code class="filename">project1-1.0-source.jar</code>.</li></ul></div><p>
            When <code class="literal">project1</code> is published, the module descriptor (i.e. the <code class="filename">ivy.xml</code> file) that is produced will look like&hellip;
        </p><div class="tip"><p>Note that the <code class="literal">&laquo;PUBLICATION-TIME-STAMP&raquo;</code> in this example Ivy module descriptor will be the timestamp of when the descriptor was generated.</p></div><div class="example"><a name="publishing_ivy:output_ivy.xml"></a><p class="title"><b>Example&nbsp;64.12.&nbsp;Example generated ivy.xml</b></p><div class="example-contents"><p><code class="filename">output-ivy.xml</code></p><pre class="programlisting"><span style="color: maroon" class="hl-directive">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;ivy-module</span> <span class="hl-attribute">version</span>=<span class="hl-value">"2.0"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;info</span> <span class="hl-attribute">organisation</span>=<span class="hl-value">"org.gradle.sample"</span> <span class="hl-attribute">module</span>=<span class="hl-value">"project1"</span> <span class="hl-attribute">revision</span>=<span class="hl-value">"1.0"</span> <span class="hl-attribute">status</span>=<span class="hl-value">"integration"</span> <span class="hl-attribute">publication</span>=<span class="hl-value">"&laquo;PUBLICATION-TIME-STAMP&raquo;"</span><span class="hl-tag">&gt;</span>
    <span class="hl-tag">&lt;description&gt;</span>The first project<span class="hl-tag">&lt;/description&gt;</span>
  <span class="hl-tag">&lt;/info&gt;</span>
  <span class="hl-tag">&lt;configurations&gt;</span>
    <span class="hl-tag">&lt;conf</span> <span class="hl-attribute">name</span>=<span class="hl-value">"default"</span> <span class="hl-attribute">visibility</span>=<span class="hl-value">"public"</span> <span class="hl-attribute">extends</span>=<span class="hl-value">"runtime"</span><span class="hl-tag">/&gt;</span>
    <span class="hl-tag">&lt;conf</span> <span class="hl-attribute">name</span>=<span class="hl-value">"runtime"</span> <span class="hl-attribute">visibility</span>=<span class="hl-value">"public"</span><span class="hl-tag">/&gt;</span>
  <span class="hl-tag">&lt;/configurations&gt;</span>
  <span class="hl-tag">&lt;publications&gt;</span>
    <span class="hl-tag">&lt;artifact</span> <span class="hl-attribute">name</span>=<span class="hl-value">"project1"</span> <span class="hl-attribute">type</span>=<span class="hl-value">"jar"</span> <span class="hl-attribute">ext</span>=<span class="hl-value">"jar"</span> <span class="hl-attribute">conf</span>=<span class="hl-value">"runtime"</span><span class="hl-tag">/&gt;</span>
    <span class="hl-tag">&lt;artifact</span> <span class="hl-attribute">name</span>=<span class="hl-value">"project1"</span> <span class="hl-attribute">type</span>=<span class="hl-value">"source"</span> <span class="hl-attribute">ext</span>=<span class="hl-value">"jar"</span> <span class="hl-attribute">conf</span>=<span class="hl-value">"runtime"</span> <span class="hl-attribute">m:classifier</span>=<span class="hl-value">"source"</span> <span class="hl-attribute">xmlns:m</span>=<span class="hl-value">"http://ant.apache.org/ivy/maven"</span><span class="hl-tag">/&gt;</span>
  <span class="hl-tag">&lt;/publications&gt;</span>
  <span class="hl-tag">&lt;dependencies&gt;</span>
    <span class="hl-tag">&lt;dependency</span> <span class="hl-attribute">org</span>=<span class="hl-value">"junit"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"junit"</span> <span class="hl-attribute">rev</span>=<span class="hl-value">"4.11"</span> <span class="hl-attribute">conf</span>=<span class="hl-value">"runtime-&amp;gt;default"</span><span class="hl-tag">/&gt;</span>
    <span class="hl-tag">&lt;dependency</span> <span class="hl-attribute">org</span>=<span class="hl-value">"org.gradle.sample"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"project2"</span> <span class="hl-attribute">rev</span>=<span class="hl-value">"1.0"</span> <span class="hl-attribute">conf</span>=<span class="hl-value">"runtime-&amp;gt;default"</span><span class="hl-tag">/&gt;</span>
  <span class="hl-tag">&lt;/dependencies&gt;</span>
<span class="hl-tag">&lt;/ivy-module&gt;</span></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_ivy:future"></a>64.7.&nbsp;Future features</h2></div></div></div><p>
            The &ldquo;<code class="literal">ivy-publish</code>&rdquo; plugin functionality as described above is incomplete, as the feature is still <a class="link" href="#feature_lifecycle">incubating</a>.
            Over the coming Gradle releases, the functionality will be expanded to include (but not limited to):
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Convenient customization of module attributes (<code class="literal">module</code>, <code class="literal">organisation</code> etc.)</li><li class="listitem">Convenient customization of dependencies reported in <code class="literal">module descriptor</code>.</li><li class="listitem">Multiple discreet publications per project</li></ul></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1><a name="publishing_maven"></a>Chapter&nbsp;65.&nbsp;Maven Publishing (new)</h1></div></div></div><div class="note"><p>
            This chapter describes the new <a class="link" href="#feature_lifecycle">incubating</a> Maven publishing support provided by the &ldquo;<code class="literal">maven-publish</code>&rdquo;
            plugin. Eventually this new publishing support will replace publishing via the <code class="literal">Upload</code> task.
        </p><p>
            If you are looking for documentation on the original Maven publishing support using the <code class="literal">Upload</code> task please see
            <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>.
        </p></div><p>
        This chapter describes how to publish build artifacts to an <a class="ulink" href="http://maven.apache.org/" target="_top">Apache Maven</a> Repository.
        A module published to a Maven repository can be consumed by Maven, Gradle (see <a class="xref" href="#dependency_management">Chapter&nbsp;50, <i>Dependency Management</i></a>) and other tools that understand the Maven repository format.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N16F3D"></a>65.1.&nbsp;The &ldquo;<code class="literal">maven-publish</code>&rdquo; Plugin</h2></div></div></div><p>
            The ability to publish in the Maven format is provided by the &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin.
        </p><p>
            The &ldquo;<code class="literal">publishing</code>&rdquo; plugin creates an extension on the project named &ldquo;<code class="literal">publishing</code>&rdquo; of type <a class="ulink" href="../dsl/org.gradle.api.publish.PublishingExtension.html" target="_top"><code class="classname">PublishingExtension</code></a>.
            This extension provides a container of named publications and a container of named repositories. The &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin works with
            <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> publications and <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.MavenArtifactRepository.html" target="_top"><code class="classname">MavenArtifactRepository</code></a> repositories.
        </p><div class="example"><a name="publishing_maven:apply_plugin"></a><p class="title"><b>Example&nbsp;65.1.&nbsp;Applying the 'maven-publish' plugin</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'maven-publish'</span></pre></div></div><br class="example-break"><p>
            Applying the &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin does the following:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Applies the &ldquo;<code class="literal">publishing</code>&rdquo; plugin
            </li><li class="listitem">
                Establishes a rule to automatically create a <a class="ulink" href="../dsl/org.gradle.api.publish.maven.tasks.GenerateMavenPom.html" target="_top"><code class="classname">GenerateMavenPom</code></a>
                task for each <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> added (see <a class="xref" href="#publishing_maven:publications">Section&nbsp;65.2, &ldquo;Publications&rdquo;</a>).
            </li><li class="listitem">
                Establishes a rule to automatically create a <a class="ulink" href="../dsl/org.gradle.api.publish.maven.tasks.PublishToMavenRepository.html" target="_top"><code class="classname">PublishToMavenRepository</code></a> task
                for the combination of each <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> added (see <a class="xref" href="#publishing_maven:publications">Section&nbsp;65.2, &ldquo;Publications&rdquo;</a>),
                with each <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.MavenArtifactRepository.html" target="_top"><code class="classname">MavenArtifactRepository</code></a> added (see <a class="xref" href="#publishing_maven:repositories">Section&nbsp;65.3, &ldquo;Repositories&rdquo;</a>).
            </li><li class="listitem">
                Establishes a rule to automatically create a <a class="ulink" href="../javadoc/org/gradle/api/publish/maven/tasks/PublishToMavenLocal.html" target="_top"><code class="classname">PublishToMavenLocal</code></a> task
                for each <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> added (see<a class="xref" href="#publishing_maven:publications">Section&nbsp;65.2, &ldquo;Publications&rdquo;</a>).
            </li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_maven:publications"></a>65.2.&nbsp;Publications</h2></div></div></div><div class="note"><p>
                If you are not familiar with project artifacts and configurations, you should read the <a class="xref" href="#artifact_management">Chapter&nbsp;51, <i>Publishing artifacts</i></a>
                that introduces these concepts. This chapter also describes &ldquo;publishing artifacts&rdquo; using a different mechanism than what is
                described in this chapter. The publishing functionality described here will eventually supersede that functionality.
            </p></div><p>
            Publication objects describe the structure/configuration of a publication to be created. Publications are published to repositories via tasks, and the
            configuration of the publication object determines exactly what is published. All of the publications of a project are defined in the
            <a class="ulink" href="../dsl/org.gradle.api.publish.PublishingExtension.html#org.gradle.api.publish.PublishingExtension:publications" target="_top"><code class="classname">PublishingExtension.getPublications()</code></a> container. Each publication has a unique name within the project.
        </p><p>
            For the &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin to have any effect, a <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> must be added to the set of publications.
            This publication determines which artifacts are actually published as well as the details included in the associated POM file.
            A publication can be configured by adding components, customizing artifacts, and by modifying the generated POM file directly.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N16FC7"></a>65.2.1.&nbsp;Publishing a Software Component</h3></div></div></div><p>
                The simplest way to publish a Gradle project to a Maven repository is to specify a <a class="ulink" href="../javadoc/org/gradle/api/component/SoftwareComponent.html" target="_top"><code class="classname">SoftwareComponent</code></a> to publish.
                The components presently available for publication are:
            </p><div class="table"><p class="title"><b>Table&nbsp;65.1.&nbsp;Software Components</b></p><div class="table-contents"><table id="N16FD1"><thead><tr>
                        <td>Name</td>
                        <td>Provided By</td>
                        <td>Artifacts</td>
                        <td>Dependencies</td>
                    </tr></thead><tr>
                    <td><code class="literal">java</code></td>
                    <td><a class="xref" href="#java_plugin">Chapter&nbsp;23, <i>The Java Plugin</i></a></td>
                    <td>Generated jar file</td>
                    <td>Dependencies from 'runtime' configuration</td>
                </tr><tr>
                    <td><code class="literal">web</code></td>
                    <td><a class="xref" href="#war_plugin">Chapter&nbsp;26, <i>The War Plugin</i></a></td>
                    <td>Generated war file</td>
                    <td>No dependencies</td>
                </tr></table></div></div><p>
                 In the following example, artifacts and runtime dependencies are taken from the `java` component, which is added by the <code class="literal">Java Plugin</code>.
             </p><div class="example"><a name="publishing_maven:publish-component"></a><p class="title"><b>Example&nbsp;65.2.&nbsp;Adding a MavenPublication for a java component</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N17012"></a>65.2.2.&nbsp;Publishing custom artifacts</h3></div></div></div><p>
                It is also possible to explicitly configure artifacts to be included in the publication. Artifacts are commonly supplied as raw files, or as instances of
                <a class="ulink" href="../dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html" target="_top"><code class="classname">AbstractArchiveTask</code></a> (e.g. Jar, Zip).
            </p><p>
                For each custom artifact, it is possible to specify the <code class="literal">extension</code> and <code class="literal">classifier</code> values to use for publication. Note that
                only one of the published artifacts can have an empty classifier, and all other artifacts must have a unique classifier/extension combination.
            </p><p>
                Configure custom artifacts as follows:
            </p><div class="example"><a name="publishing_maven:publish-custom-artifact"></a><p class="title"><b>Example&nbsp;65.3.&nbsp;Adding additional artifact to a MavenPublication</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task sourceJar(type: Jar) {
    from sourceSets.main.allJava
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java

            artifact sourceJar {
                classifier <span class="hl-string">"sources"</span>
            }
        }
    }
}</pre></div></div><br class="example-break"><p>
                See <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> for more detailed documentation on how artifacts can be customized.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N17037"></a>65.2.3.&nbsp;Identity values in the generated POM</h3></div></div></div><p>
                The attributes of the generated <code class="literal">POM</code> file will contain identity values derived from the following project properties:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">groupId</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:group" target="_top"><code class="classname">Project.getGroup()</code></a></li><li class="listitem"><code class="literal">artifactId</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:name" target="_top"><code class="classname">Project.getName()</code></a></li><li class="listitem"><code class="literal">version</code> - <a class="ulink" href="../dsl/org.gradle.api.Project.html#org.gradle.api.Project:version" target="_top"><code class="classname">Project.getVersion()</code></a></li></ul></div><p>
                Overriding the default identity values is easy: simply specify the <code class="literal">groupId</code>, <code class="literal">artifactId</code>
                or <code class="literal">version</code> attributes when configuring the <code class="literal">MavenPublication</code>.
            </p><div class="example"><a name="publishing_maven:publish-customize-identity"></a><p class="title"><b>Example&nbsp;65.4.&nbsp;customizing the publication identity</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">publishing {
        publications {
            maven(MavenPublication) {
                groupId <span class="hl-string">'org.gradle.sample'</span>
                artifactId <span class="hl-string">'project1-sample'</span>
                version <span class="hl-string">'1.1'</span>

                from components.java
            }
        }
    }</pre></div></div><br class="example-break"><div class="tip">
                Certain repositories will not be able to handle all supported characters.
                For example, the ':' character cannot be used as an identifier when publishing to a filesystem-backed repository on Windows.
            </div><p>
                Maven restricts 'groupId' and 'artifactId' to a limited character set (<code class="literal">[A-Za-z0-9_\\-.]+</code>) and Gradle enforces this restriction.
                For 'version' (as well as artifact 'extension' and 'classifier'), Gradle will handle any valid Unicode character.
            </p><p>
                The only Unicode values that are explicitly prohibited are '<code class="literal">\</code>', '<code class="literal">/</code>' and any ISO control character.
                Supplied values are validated early in publication.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1707F"></a>65.2.4.&nbsp;Modifying the generated POM</h3></div></div></div><p>
                At times, the POM file generated from the project information will need to be tweaked before publishing. The &ldquo;<code class="literal">maven-publish</code>&rdquo;
                plugin provides a hook to allow such modification.
            </p><div class="example"><a name="publishing_maven:pom_modification"></a><p class="title"><b>Example&nbsp;65.5.&nbsp;Modifying the POM file</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">publications {
        mavenCustom(MavenPublication) {
            pom.withXml {
                asNode().appendNode(<span class="hl-string">'description'</span>, <span class="hl-string">'A demonstration of maven POM customization'</span>)
            }
        }
    }</pre></div></div><br class="example-break"><p>
                In this example we are adding a 'description' element for the generated POM. With this hook, you can modify any aspect of the POM.
                For example, you could replace the version range for a dependency with the actual version used to produce the build.
            </p><p>
                See <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPom.html#org.gradle.api.publish.maven.MavenPom:withXml(org.gradle.api.Action)" target="_top"><code class="classname">MavenPom.withXml()</code></a> for the relevant API reference documentation.
            </p><p>
                It is possible to modify virtually any aspect of the created POM should you need to.
                This means that it is also possible to modify the POM in such a way that it is no longer a valid
                Maven Pom, so care must be taken when using this feature.
            </p><p>
                The identifier (groupId, artifactId, version) of the published module is an exception; these values cannot be modified in the POM using the `withXML` hook.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1709E"></a>65.2.5.&nbsp;Publishing multiple modules</h3></div></div></div><p>
                 Sometimes it's useful to publish multiple modules from your Gradle build, without creating a separate Gradle subproject.
                 An example is publishing a separate API and implementation jar for your library. With Gradle this is simple:
             </p><div class="example"><a name="publishing_maven:publish-multiple-publications"></a><p class="title"><b>Example&nbsp;65.6.&nbsp;Publishing multiple modules from a single project</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">task apiJar(type: Jar) {
        baseName <span class="hl-string">"publishing-api"</span>
        from sourceSets.main.output
        exclude <span class="hl-string">'**/impl/**'</span>
    }

    publishing {
        publications {
            impl(MavenPublication) {
                groupId <span class="hl-string">'org.gradle.sample.impl'</span>
                artifactId <span class="hl-string">'project2-impl'</span>
                version <span class="hl-string">'2.3'</span>

                from components.java
            }
            api(MavenPublication) {
                groupId <span class="hl-string">'org.gradle.sample'</span>
                artifactId <span class="hl-string">'project2-api'</span>
                version <span class="hl-string">'2'</span>

                artifact apiJar
            }
        }
    }</pre></div></div><br class="example-break"><p>
                 If a project defines multiple publications then Gradle will publish each of these to the defined repositories. Each publication
                 must be given a unique identity as described above.
             </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_maven:repositories"></a>65.3.&nbsp;Repositories</h2></div></div></div><p>
            Publications are published to repositories. The repositories to publish to are defined by the <a class="ulink" href="../dsl/org.gradle.api.publish.PublishingExtension.html#org.gradle.api.publish.PublishingExtension:repositories" target="_top"><code class="classname">PublishingExtension.getRepositories()</code></a>
            container.
        </p><div class="example"><a name="publishing_maven:repositories"></a><p class="title"><b>Example&nbsp;65.7.&nbsp;Declaring repositories to publish to</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">repositories {
        maven {
            url <span class="hl-string">"$buildDir/repo"</span> <span class="hl-comment">// change to point to your repo, e.g. http://my.org/repo</span>
        }
    }</pre></div></div><br class="example-break"><p>
            The DSL used to declare repositories for publication is the same DSL that is used to declare repositories to consume dependencies from,
            <a class="ulink" href="../dsl/org.gradle.api.artifacts.dsl.RepositoryHandler.html" target="_top"><code class="classname">RepositoryHandler</code></a>. However, in the context of Maven publication only
            <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.MavenArtifactRepository.html" target="_top"><code class="classname">MavenArtifactRepository</code></a> repositories can be used for publication.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_maven:publishing"></a>65.4.&nbsp;Performing a publish</h2></div></div></div><p>
            The &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin automatically creates a <a class="ulink" href="../dsl/org.gradle.api.publish.maven.tasks.PublishToMavenRepository.html" target="_top"><code class="classname">PublishToMavenRepository</code></a>
            task for each <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a> and <a class="ulink" href="../dsl/org.gradle.api.artifacts.repositories.MavenArtifactRepository.html" target="_top"><code class="classname">MavenArtifactRepository</code></a>
            combination in the <code class="literal">publishing.publications</code> and <code class="literal">publishing.repositories</code> containers respectively.
        </p><p>
            The created task is named using the pattern "<code class="literal">publish&laquo;<span class="emphasis"><em>NAME OF PUBLICATION</em></span>&raquo;PublicationTo&laquo;<span class="emphasis"><em>NAME OF REPOSITORY</em></span>&raquo;Repository</code>".
        </p><div class="example"><a name="publishingMavenPublishMinimal"></a><p class="title"><b>Example&nbsp;65.8.&nbsp;Publishing a project to a Maven repository</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">apply plugin: <span class="hl-string">'java'</span>
apply plugin: <span class="hl-string">'maven-publish'</span>

group = <span class="hl-string">'org.gradle.sample'</span>
version = <span class="hl-string">'1.0'</span>

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
    repositories {
        maven {
            url <span class="hl-string">"$buildDir/repo"</span> <span class="hl-comment">// change to point to your repo, e.g. http://my.org/repo</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle publish</code></strong></p><pre class="screen">&gt; gradle publish
:generatePomFileForMavenJavaPublication
:compileJava
:processResources UP-TO-DATE
:classes
:jar
:publishMavenJavaPublicationToMavenRepository
:publish

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            So in this example a single <a class="ulink" href="../dsl/org.gradle.api.publish.maven.tasks.PublishToMavenRepository.html" target="_top"><code class="classname">PublishToMavenRepository</code></a> task is be added, named '<code class="literal">publishMavenJavaPublicationToMavenRepository</code>'.
            This task is wired into the <code class="literal">publish</code> lifecycle task.
            Executing <code class="literal">gradle publish</code> builds the POM file and all of the artifacts to be published, and transfers them to the repository.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_maven:install"></a>65.5.&nbsp;Publishing to Maven Local</h2></div></div></div><p>
            For integration with a local Maven installation, it is sometimes useful to publish the module into the local .m2 repository. In Maven parlance, this is
            referred to as 'installing' the module. The &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin makes this easy to do by automatically creating a
            <a class="ulink" href="../javadoc/org/gradle/api/publish/maven/tasks/PublishToMavenLocal.html" target="_top"><code class="classname">PublishToMavenLocal</code></a> task for each <a class="ulink" href="../dsl/org.gradle.api.publish.maven.MavenPublication.html" target="_top"><code class="classname">MavenPublication</code></a>
            in the <code class="literal">publishing.publications</code> container. Each of these tasks is wired into the <code class="literal">publishToMavenLocal</code> lifecycle task.
            You do not need to have `mavenLocal` in your `publishing.repositories` section.
        </p><p>
            The created task is named using the pattern "<code class="literal">publish&laquo;<span class="emphasis"><em>NAME OF PUBLICATION</em></span>&raquo;PublicationToMavenLocal</code>".
        </p><div class="example"><a name="publishingMavenPublishLocal"></a><p class="title"><b>Example&nbsp;65.9.&nbsp;Publish a project to the Maven local repository</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle publishToMavenLocal</code></strong></p><pre class="screen">&gt; gradle publishToMavenLocal
:generatePomFileForMavenJavaPublication
:compileJava
:processResources UP-TO-DATE
:classes
:jar
:publishMavenJavaPublicationToMavenLocal
:publishToMavenLocal

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            So in this example you can see that a single <a class="ulink" href="../javadoc/org/gradle/api/publish/maven/tasks/PublishToMavenLocal.html" target="_top"><code class="classname">PublishToMavenLocal</code></a> task is be added,
            named '<code class="literal">publishMavenJavaPublicationToMavenLocal</code>'. This task is wired into the <code class="literal">publishToMavenLocal</code> lifecycle task.
            Executing <code class="literal">gradle publishToMavenLocal</code> builds the POM file and all of the artifacts to be published, and 'installs' them into the local Maven repository.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="publishing_maven:generate-pom"></a>65.6.&nbsp;Generating the POM file without publishing</h2></div></div></div><p>
            At times it is useful to generate a Maven POM file for a module without actually publishing. Since POM generation is performed by a separate task, it is very easy
            to do so.
        </p><p>
            The task for generating the POM file is of type <a class="ulink" href="../dsl/org.gradle.api.publish.maven.tasks.GenerateMavenPom.html" target="_top"><code class="classname">GenerateMavenPom</code></a>, and it is given a name based on the name
            of the publication: "<code class="literal">generatePomFileFor&laquo;<span class="emphasis"><em>NAME OF PUBLICATION</em></span>&raquo;Publication</code>". So in the example below,
            where the publication is named "<code class="literal">mavenCustom</code>",
            the task will be named "<code class="literal">generatePomFileForMavenCustomPublication</code>".
        </p><div class="example"><a name="publishingMavenGeneratePom"></a><p class="title"><b>Example&nbsp;65.10.&nbsp;Generate a POM file without publishing</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">model {
    tasks.generatePomFileForMavenCustomPublication {
        destination = file(<span class="hl-string">"$buildDir/generated-pom.xml"</span>)
    }
}</pre><p>Output of <strong class="userinput"><code>gradle generatePomFileForMavenCustomPublication</code></strong></p><pre class="screen">&gt; gradle generatePomFileForMavenCustomPublication
:generatePomFileForMavenCustomPublication

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            All details of the publishing model are still considered in POM generation, including <code class="literal">components</code>`, custom <code class="literal">artifacts</code>,
            and any modifications made via <code class="literal">pom.withXml</code>.
        </p><div class="note"><p>
                The &ldquo;<code class="literal">maven-publish</code>&rdquo; plugin leverages some experimental support for late plugin configuration,
                and any <code class="literal">GenerateMavenPom</code> tasks will not be constructed until the publishing extension is configured.
                The simplest way to ensure that the publishing plugin is configured when you attempt to access the <code class="literal">GenerateMavenPom</code> task
                is to place the access inside a <code class="literal">publishing</code> block, as the example above demonstrates.
            </p><p>
                The same applies to any attempt to access publication-specific tasks like <a class="ulink" href="../dsl/org.gradle.api.publish.maven.tasks.PublishToMavenRepository.html" target="_top"><code class="classname">PublishToMavenRepository</code></a>.
                These tasks should be referenced from within a <code class="literal">publishing</code> block.
            </p></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1><a name="sample_list"></a>Appendix&nbsp;A.&nbsp;Gradle Samples</h1></div></div></div><p>Listed below are some of the stand-alone samples which are included in the Gradle distribution. You can find these samples in the <code class="filename">
      <em class="replaceable"><code>GRADLE_HOME</code></em>/samples</code> directory of the distribution.</p><div class="table"><p class="title"><b>Table&nbsp;A.1.&nbsp;Samples included in the distribution</b></p><div class="table-contents"><table id="N171AF"><thead><td>Sample</td><td>Description</td></thead><tr>
      <td>
        <code class="filename">announce</code>
      </td>
      <td>
        <p>A project which uses the announce plugin</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">application</code>
      </td>
      <td>
        <p>A project which uses the application plugin</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">buildDashboard</code>
      </td>
      <td>
        <p>A project which uses the build-dashboard plugin</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">codeQuality</code>
      </td>
      <td>
        <p>A project which uses the various code quality plugins.</p>
      </td>
    </tr><tr>
      <td>
        <a class="link" href="#-1241809347">
          <code class="filename">customBuildLanguage</code>
        </a>
      </td>
      <td>
        <p>This sample demonstrates how to add some custom elements to the build DSL. It also demonstrates the use of
        custom plug-ins to organize build logic.
    </p>
      </td>
    </tr><tr>
      <td>
        <a class="link" href="#-483118767">
          <code class="filename">customDistribution</code>
        </a>
      </td>
      <td>
        <p>This sample demonstrates how to create a custom Gradle distribution and use it with the Gradle wrapper.</p>
      </td>
    </tr><tr>
      <td>
        <a class="link" href="#1805725798">
          <code class="filename">customPlugin</code>
        </a>
      </td>
      <td>
        <p>A set of projects that show how to implement, test, publish and use a custom plugin and task.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">ear/earCustomized/ear</code>
      </td>
      <td>
        <p>Web application ear project with customized contents</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">ear/earWithWar</code>
      </td>
      <td>
        <p>Web application ear project</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">groovy/customizedLayout</code>
      </td>
      <td>
        <p>Groovy project with a custom source layout</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">groovy/mixedJavaAndGroovy</code>
      </td>
      <td>
        <p>Project containing a mix of Java and Groovy source</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">groovy/multiproject</code>
      </td>
      <td>
        <p>Build made up of multiple Groovy projects. Also demonstrates how to exclude certain source files, and the use
        of a custom Groovy AST transformation.
    </p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">groovy/quickstart</code>
      </td>
      <td>
        <p>Groovy quickstart sample</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">java/base</code>
      </td>
      <td>
        <p>Java base project</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">java/customizedLayout</code>
      </td>
      <td>
        <p>Java project with a custom source layout</p>
      </td>
    </tr><tr>
      <td>
        <a class="link" href="#1527440619">
          <code class="filename">java/multiproject</code>
        </a>
      </td>
      <td>
        <p>This sample demonstrates how an application can be composed using multiple Java projects.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">java/quickstart</code>
      </td>
      <td>
        <p>Java quickstart project</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">java/withIntegrationTests</code>
      </td>
      <td>
        <p>This sample demonstrates how to use a source set to add an integration test suite to a Java project.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">maven/pomGeneration</code>
      </td>
      <td>
        <p>Demonstrates how to deploy and install to a Maven repository. Also demonstrates how to deploy a javadoc JAR
        along with the main JAR, how to customize the contents of the generated POM, and how to deploy snapshots and
        releases to different repositories.
    </p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">maven/quickstart</code>
      </td>
      <td>
        <p>Demonstrates how to deploy and install artifacts to a Maven repository.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">osgi</code>
      </td>
      <td>
        <p>A project which builds an OSGi bundle</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">scala/customizedLayout</code>
      </td>
      <td>
        <p>Scala project with a custom source layout</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">scala/fsc</code>
      </td>
      <td>
        <p>Scala project using the Fast Scala Compiler (fsc).</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">scala/mixedJavaAndScala</code>
      </td>
      <td>
        <p>A project containing a mix of Java and Scala source.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">scala/quickstart</code>
      </td>
      <td>
        <p>Scala quickstart project</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">scala/zinc</code>
      </td>
      <td>
        <p>Scala project using the Zinc based Scala compiler.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">testing/testReport</code>
      </td>
      <td>
        <p>Generates an HTML test report that includes the test results from all subprojects.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">toolingApi/customModel</code>
      </td>
      <td>
        <p>A sample of how a plugin can expose its own custom tooling model to tooling API clients.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">toolingApi/eclipse</code>
      </td>
      <td>
        <p>An application that uses the tooling API to build the Eclipse model for a project.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">toolingApi/idea</code>
      </td>
      <td>
        <p>An application that uses the tooling API to extract information needed by IntelliJ IDEA.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">toolingApi/model</code>
      </td>
      <td>
        <p>An application that uses the tooling API to build the model for a Gradle build.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">toolingApi/runBuild</code>
      </td>
      <td>
        <p>An application that uses the tooling API to run a Gradle task.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">userguide/distribution</code>
      </td>
      <td>
        <p>A project which uses the distribution plugin</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">userguide/javaLibraryDistribution</code>
      </td>
      <td>
        <p>A project which uses the Java library distribution plugin</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">webApplication/customized</code>
      </td>
      <td>
        <p>Web application with customized WAR contents.</p>
      </td>
    </tr><tr>
      <td>
        <code class="filename">webApplication/quickstart</code>
      </td>
      <td>
        <p>Web application quickstart project</p>
      </td>
    </tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="-1241809347"></a>A.1.&nbsp;Sample <code class="filename">customBuildLanguage</code>
    </h2></div></div></div><p>This sample demonstrates how to add some custom elements to the build DSL. It also demonstrates the use of
        custom plug-ins to organize build logic.
    </p><p>The build is composed of 2 types of projects. The first type of project represents a product, and the second
        represents a product module. Each product includes one or more product modules, and each product module may be
        included in multiple products. That is, there is a many-to-many relationship between these products and product
        modules. For each product, the build produces a ZIP containing the runtime classpath for each product module
        included in the product. The ZIP also contains some product-specific files.
    </p><p>The custom elements can be seen in the build script for the product projects (for example,
        <code class="filename">basicEdition/build.gradle</code>). Notice that the build script uses the
        <code class="literal">product { }</code> element. This is a custom element.
    </p><p>The build scripts of each project contain only declarative elements. The bulk of the work is done by 2
        custom plug-ins found in <code class="filename">buildSrc/src/main/groovy</code>.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="-483118767"></a>A.2.&nbsp;Sample <code class="filename">customDistribution</code>
    </h2></div></div></div><p>This sample demonstrates how to create a custom Gradle distribution and use it with the Gradle wrapper.</p><p>This sample contains the following projects:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The <code class="filename">plugin</code> directory contains the project that implements a custom plugin, and bundles the plugin into a custom
                Gradle distribution.</p></li><li class="listitem"><p>The <code class="filename">consumer</code> directory contains the project that uses the custom distribution.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="1805725798"></a>A.3.&nbsp;Sample <code class="filename">customPlugin</code>
    </h2></div></div></div><p>A set of projects that show how to implement, test, publish and use a custom plugin and task.</p><p>This sample contains the following projects:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The <code class="filename">plugin</code> directory contains the project that implements and publishes the plugin.</p></li><li class="listitem"><p>The <code class="filename">consumer</code> directory contains the project that uses the plugin.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="1527440619"></a>A.4.&nbsp;Sample <code class="filename">java/multiproject</code>
    </h2></div></div></div><p>This sample demonstrates how an application can be composed using multiple Java projects.</p><p>This build creates a client-server application which is distributed as 2 archives. First, there is a client
        ZIP which includes an API JAR, which a 3rd party application would compile against, and a client runtime. Then,
        there is a server WAR which provides a web service.
    </p></div></div><div class="appendix"><div class="titlepage"><div><div><h1><a name="potential_traps"></a>Appendix&nbsp;B.&nbsp;Potential Traps</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:groovy_script_variables"></a>B.1.&nbsp;Groovy script variables</h2></div></div></div><p>For Gradle users it is important to understand how Groovy deals with script variables. Groovy has two types
            of script variables. One with a local scope and one with a script wide scope.
        </p><div class="example"><a name="scope"></a><p class="title"><b>Example&nbsp;B.1.&nbsp;Variables scope: local and script wide</b></p><div class="example-contents"><p><code class="filename">scope.groovy</code></p><pre class="programlisting">String localScope1 = <span class="hl-string">'localScope1'</span>
def localScope2 = <span class="hl-string">'localScope2'</span>
scriptScope = <span class="hl-string">'scriptScope'</span>

println localScope1
println localScope2
println scriptScope

closure = {
    println localScope1
    println localScope2
    println scriptScope
}

def method() {
    <span class="hl-keyword">try</span> {localScope1} <span class="hl-keyword">catch</span>(MissingPropertyException e) {println <span class="hl-string">'localScope1NotAvailable'</span> }
    <span class="hl-keyword">try</span> {localScope2} <span class="hl-keyword">catch</span>(MissingPropertyException e) {println <span class="hl-string">'localScope2NotAvailable'</span> }
    println scriptScope
}

closure.call()
method()</pre><p>Output of <strong class="userinput"><code>gradle </code></strong></p><pre class="screen">&gt; gradle 
localScope1
localScope2
scriptScope
localScope1
localScope2
scriptScope
localScope1NotAvailable
localScope2NotAvailable
scriptScope</pre></div></div><br class="example-break"><p>Variables which are declared with a type modifier are visible within closures but not visible within
            methods. This is a heavily discussed behavior in the Groovy community.
            <sup>[<a href="#ftn.N17430" name="N17430" class="footnote">27</a>]</sup>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuration_and_execution_phase"></a>B.2.&nbsp;Configuration and execution phase</h2></div></div></div><p>It is important to keep in mind that Gradle has a distinct configuration and execution phase (see 
            <a class="xref" href="#build_lifecycle">Chapter&nbsp;55, <i>The Build Lifecycle</i></a>).
        </p><div class="example"><a name="mkdirTrap"></a><p class="title"><b>Example&nbsp;B.2.&nbsp;Distinct configuration and execution phase</b></p><div class="example-contents"><p><code class="filename">build.gradle</code></p><pre class="programlisting">def classesDir = file(<span class="hl-string">'build/classes'</span>)
classesDir.mkdirs()
task clean(type: Delete) {
    delete <span class="hl-string">'build'</span>
}
task compile(dependsOn: <span class="hl-string">'clean'</span>) &lt;&lt; {
    <span class="hl-keyword">if</span> (!classesDir.isDirectory()) {
        println <span class="hl-string">'The class directory does not exist. I can not operate'</span>
        <span class="hl-comment">// do something</span>
    }
    <span class="hl-comment">// do something</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q compile</code></strong></p><pre class="screen">&gt; gradle -q compile
The class directory does not exist. I can not operate</pre></div></div><br class="example-break"><p>As the creation of the directory happens during the configuration phase, the
            <code class="literal">clean</code>
            task removes the directory during the execution phase.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N17430" name="ftn.N17430" class="para">27</a>] </sup>One of those discussions can be found here:
                    <a class="ulink" href="http://groovy.329449.n5.nabble.com/script-scoping-question-td355887.html" target="_top">http://groovy.329449.n5.nabble.com/script-scoping-question-td355887.html</a>
                </p></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1><a name="feature_lifecycle"></a>Appendix&nbsp;C.&nbsp;The Feature Lifecycle</h1></div></div></div><p>
        Gradle is under constant development and improvement. New versions are also delivered on a regular and frequent basis
        (approximately every 6 weeks). Continuous improvement combined with frequent delivery allows new features to be made available
        to users early and for invaluable real world feedback to be incorporated into the development process. Getting
        new functionality into the hands of users regularly is a core value of the Gradle platform.
        At the same time, API and feature stability is taken very seriously and is also considered a core value of the Gradle platform.
        This is something that is engineered into the development process by design choices and automated testing, and is formalised by
        the <a class="xref" href="#backwards_compatibility">Section&nbsp;C.2, &ldquo;Backwards Compatibility Policy&rdquo;</a>.
    </p><p>
        The Gradle
        <em class="firstterm">feature lifecycle</em>
        has been designed to meet these goals. It also serves
        to clearly communicate to users of Gradle what the state of a feature is. The term
        <em class="firstterm">feature</em>
        typically means
        an API or DSL method or property in this context, but it is not restricted to this definition.
        Command line arguments and modes of execution (e.g. the Build Daemon) are two examples of other kinds of features.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N17469"></a>C.1.&nbsp;States</h2></div></div></div><p>
            Features can be in one of 4 states:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Internal</p></li><li class="listitem"><p>Incubating</p></li><li class="listitem"><p>Public</p></li><li class="listitem"><p>Deprecated</p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N1747B"></a>C.1.1.&nbsp;Internal</h3></div></div></div><p>
                Internal features are not designed for public use and are only intended to be used by Gradle itself. They can change in any way at any
                point in time without any notice. Therefore, we recommend avoiding the use of such features.
                Internal features are not documented. If it appears in this User Guide, the DSL Reference or the API Reference documentation then
                the feature is not internal.
            </p><p>
                Internal features may evolve into public features.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sec:incubating_state"></a>C.1.2.&nbsp;Incubating</h3></div></div></div><p>
                Features are introduced in the <em class="firstterm">incubating</em> state to allow real world feedback to be incorporated into the feature before it is made public and
                locked down to provide backwards compatibility.
                It also gives users who are willing to accept potential future changes early access to the feature so they can put it into use immediately.
            </p><p>
                A feature in an incubating state may change in future Gradle versions until it is no longer incubating.
                Changes to incubating features for a Gradle release will be highlighted in the release notes for that release.
                The incubation period for new features varies depending on the scope, complexity and nature of the feature.
            </p><p>
                Features in incubation are clearly indicated to be so. In the source code, all methods/properties/classes that are incubating are
                annotated with <a class="ulink" href="../javadoc/org/gradle/api/Incubating.html" target="_top"><code class="classname">Incubating</code></a>, which is also used to specially mark them in the DSL and API references. If an incubating
                feature is discussed in this User Guide, it will be explicitly said to be in the incubating state.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N17494"></a>C.1.3.&nbsp;Public</h3></div></div></div><p>
                The default state for a non-internal feature is <em class="firstterm">public</em>.
                Anything that is documented in the User Guide, DSL Reference or API references that
                is not explicitly said to be incubating or deprecated is considered public. Features are said to be <em class="firstterm">promoted</em> from an
                incubating state to public. The release notes for each release indicate which previously incubating features are being promoted by the release.
            </p><p>
                A public feature will <span class="emphasis"><em>never</em></span> be removed or intentionally changed without undergoing deprecation.
                All public features are subject to the backwards compatibility policy.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="N174A4"></a>C.1.4.&nbsp;Deprecated</h3></div></div></div><p>
                Some features will become superseded or irrelevant due to the natural evolution of Gradle. Such features will eventually be removed
                from Gradle after being <em class="firstterm">deprecated</em>. A deprecated feature will <span class="emphasis"><em>never</em></span>
                be changed, until it is finally removed according to the backwards compatibility policy.
            </p><p>
                Deprecated features are clearly indicated to be so. In the source code, all methods/properties/classes that are deprecated are
                annotated with
                <code class="literal">@java.lang.Deprecated</code>
                which is reflected in the DSL and API references.
                In most cases, there is a replacement for the deprecated element, and this will be described in the documentation.
                Using a deprecated feature will also result in runtime warning in Gradle's output.
            </p><p>
                Use of deprecated features should be avoided. The release notes for each release indicate any features that are being deprecated
                by the release.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="backwards_compatibility"></a>C.2.&nbsp;Backwards Compatibility Policy</h2></div></div></div><p>
            Gradle provides backwards compatibility for across major versions (e.g. <code class="literal">1.x</code>, <code class="literal">2.x</code>
            etc.).
            Once a public feature is introduced or promoted in a Gradle release it will remain indefinitely or until it is deprecated. Once
            deprecated, it may be removed in the next major release. Deprecated features may be supported across major
            releases, but this is not guaranteed.
        </p></div></div><div class="appendix"><div class="titlepage"><div><div><h1><a name="gradle_command_line"></a>Appendix&nbsp;D.&nbsp;Gradle Command Line</h1></div></div></div><p>The
        <span class="command"><strong>gradle</strong></span>
        command has the following usage:
        </p><div class="cmdsynopsis"><p><code class="command">gradle</code>  [option...] [task...]</p></div><p>
        The command-line options available for the
        <span class="command"><strong>gradle</strong></span>
        command are listed below:
    </p><div class="variablelist"><dl><dt><span class="term"><code class="option">-?</code>, <code class="option">-h</code>, <code class="option">--help</code>
            </span></dt><dd><p>Shows a help message.</p></dd><dt><span class="term"><code class="option">-a</code>, <code class="option">--no-rebuild</code>
            </span></dt><dd><p>Do not rebuild project dependencies.
                </p></dd><dt><span class="term">
                <code class="option">--all</code>
            </span></dt><dd><p>Shows additional detail in the task listing. See <a class="xref" href="#sec:listing_tasks">Section&nbsp;11.6.2, &ldquo;Listing tasks&rdquo;</a>.
                </p></dd><dt><span class="term"><code class="option">-b</code>, <code class="option">--build-file</code>
            </span></dt><dd><p>Specifies the build file. See <a class="xref" href="#sec:selecting_build">Section&nbsp;11.5, &ldquo;Selecting which build to execute&rdquo;</a>.
                </p></dd><dt><span class="term"><code class="option">-c</code>, <code class="option">--settings-file</code>
            </span></dt><dd><p>Specifies the settings file.</p></dd><dt><span class="term">
                <code class="option">--continue</code>
            </span></dt><dd><p>Continues task execution after a task failure.</p></dd><dt><span class="term">
                <code class="option">--configure-on-demand (incubating)</code>
            </span></dt><dd><p>Only relevant projects are configured in this build run. This means faster builds for large multi-projects.
                    See <a class="xref" href="#sec:configuration_on_demand">Section&nbsp;56.1.1.1, &ldquo;Configuration on demand&rdquo;</a>.
                </p></dd><dt><span class="term"><code class="option">-D</code>, <code class="option">--system-prop</code>
            </span></dt><dd><p>Sets a system property of the JVM, for example <code class="literal">-Dmyprop=myvalue</code>.
                    See <a class="xref" href="#sec:gradle_properties_and_system_properties">Section&nbsp;14.2, &ldquo;Gradle properties and system properties&rdquo;</a>.
                </p></dd><dt><span class="term"><code class="option">-d</code>, <code class="option">--debug</code>
            </span></dt><dd><p>Log in debug mode (includes normal stacktrace). See <a class="xref" href="#logging">Chapter&nbsp;18, <i>Logging</i></a>.
                </p></dd><dt><span class="term"><code class="option">-g</code>, <code class="option">--gradle-user-home</code>
            </span></dt><dd><p>Specifies the Gradle user home directory. The default is the
                    <code class="filename">.gradle</code>
                    directory in the user's home directory.
                </p></dd><dt><span class="term">
                <code class="option">--gui</code>
            </span></dt><dd><p>Launches the Gradle GUI. See <a class="xref" href="#tutorial_gradle_gui">Chapter&nbsp;12, <i>Using the Gradle Graphical User Interface</i></a>.
                </p></dd><dt><span class="term"><code class="option">-I</code>, <code class="option">--init-script</code>
            </span></dt><dd><p>Specifies an initialization script. See <a class="xref" href="#init_scripts">Chapter&nbsp;60, <i>Initialization Scripts</i></a>.
                </p></dd><dt><span class="term"><code class="option">-i</code>, <code class="option">--info</code>
            </span></dt><dd><p>Set log level to info. See <a class="xref" href="#logging">Chapter&nbsp;18, <i>Logging</i></a>.
                </p></dd><dt><span class="term"><code class="option">-m</code>, <code class="option">--dry-run</code>
            </span></dt><dd><p>Runs the build with all task actions disabled. See <a class="xref" href="#sec:dry_run">Section&nbsp;11.7, &ldquo;Dry Run&rdquo;</a>.
                </p></dd><dt><span class="term">
                <code class="option">--no-color</code>
            </span></dt><dd><p>Do not use color in the console output.</p></dd><dt><span class="term">
                <code class="option">--offline</code>
            </span></dt><dd><p>Specifies that the build should operate without accessing network resources. See <a class="xref" href="#sec:cache_command_line_options">Section&nbsp;50.9.2, &ldquo;Command line options to override caching&rdquo;</a>.</p></dd><dt><span class="term"><code class="option">-P</code>, <code class="option">--project-prop</code>
            </span></dt><dd><p>Sets a project property of the root project, for example
                    <code class="literal">-Pmyprop=myvalue</code>. See <a class="xref" href="#sec:gradle_properties_and_system_properties">Section&nbsp;14.2, &ldquo;Gradle properties and system properties&rdquo;</a>.
                </p></dd><dt><span class="term"><code class="option">-p</code>, <code class="option">--project-dir</code>
            </span></dt><dd><p>Specifies the start directory for Gradle. Defaults to current directory.
                    See <a class="xref" href="#sec:selecting_build">Section&nbsp;11.5, &ldquo;Selecting which build to execute&rdquo;</a>.
                </p></dd><dt><span class="term">
                <code class="option">--parallel (incubating)</code>
            </span></dt><dd><p>
                    Build projects in parallel. Gradle will attempt to determine the optimal number of executor threads to use.
                    This option should only be used with decoupled projects (see <a class="xref" href="#sec:decoupled_projects">Section&nbsp;56.9, &ldquo;Decoupled Projects&rdquo;</a>).
                </p></dd><dt><span class="term">
                <code class="option">--parallel-threads (incubating)</code>
            </span></dt><dd><p>
                    Build projects in parallel, using the specified number of executor threads. For example<code class="literal">--parallel-threads=3</code>.
                    This option should only be used with decoupled projects (see <a class="xref" href="#sec:decoupled_projects">Section&nbsp;56.9, &ldquo;Decoupled Projects&rdquo;</a>).
                </p></dd><dt><span class="term">
                <code class="option">--profile</code>
            </span></dt><dd><p>Profiles build execution time and generates a report in the
                    <code class="filename"><em class="replaceable"><code>buildDir</code></em>/reports/profile</code>
                    directory. See <a class="xref" href="#sec:profiling_build">Section&nbsp;11.6.7, &ldquo;Profiling a build&rdquo;</a>.
                </p></dd><dt><span class="term">
                <code class="option">--project-cache-dir</code>
            </span></dt><dd><p>Specifies the project-specific cache directory. Default value is
                    <code class="filename">.gradle</code>
                    in the root project directory. See <a class="xref" href="#sec:caching">Section&nbsp;14.6, &ldquo;Caching&rdquo;</a>.
                </p></dd><dt><span class="term"><code class="option">-q</code>, <code class="option">--quiet</code>
            </span></dt><dd><p>Log errors only. See <a class="xref" href="#logging">Chapter&nbsp;18, <i>Logging</i></a>.
                </p></dd><dt><span class="term">
                <code class="option">--recompile-scripts</code>
            </span></dt><dd><p>Specifies that cached build scripts are skipped and forced to be recompiled.
                    See <a class="xref" href="#sec:caching">Section&nbsp;14.6, &ldquo;Caching&rdquo;</a>.
                </p></dd><dt><span class="term">
                <code class="option">--refresh-dependencies</code>
            </span></dt><dd><p>Refresh the state of dependencies.
                    See <a class="xref" href="#sec:cache_command_line_options">Section&nbsp;50.9.2, &ldquo;Command line options to override caching&rdquo;</a>.
                </p></dd><dt><span class="term">
                <code class="option">--rerun-tasks</code>
            </span></dt><dd><p>Specifies that any task optimization is ignored.
                </p></dd><dt><span class="term"><code class="option">-S</code>, <code class="option">--full-stacktrace</code>
            </span></dt><dd><p>Print out the full (very verbose) stacktrace for any exceptions. See <a class="xref" href="#logging">Chapter&nbsp;18, <i>Logging</i></a>.
                </p></dd><dt><span class="term"><code class="option">-s</code>, <code class="option">--stacktrace</code>
            </span></dt><dd><p>Print out the stacktrace also for user exceptions (e.g. compile error). See <a class="xref" href="#logging">Chapter&nbsp;18, <i>Logging</i></a>.
                </p></dd><dt><span class="term"><code class="option">-u</code>, <code class="option">--no-search-upwards</code>
            </span></dt><dd><p>Don't search in parent directories for a
                    <code class="filename">settings.gradle</code>
                    file.
                </p></dd><dt><span class="term"><code class="option">-v</code>, <code class="option">--version</code>
            </span></dt><dd><p>Prints version info.
                </p></dd><dt><span class="term"><code class="option">-x</code>, <code class="option">--exclude-task</code>
            </span></dt><dd><p>Specifies a task to be excluded from execution. See <a class="xref" href="#sec:excluding_tasks_from_the_command_line">Section&nbsp;11.2, &ldquo;Excluding tasks&rdquo;</a>.
                </p></dd></dl></div><p>The above information is printed to the console when you execute <strong class="userinput"><code>gradle -h</code></strong>.
    </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="daemon_cli"></a>D.1.&nbsp;Daemon command-line options:</h2></div></div></div><p>The
            <a class="xref" href="#gradle_daemon">Chapter&nbsp;19, <i>The Gradle Daemon</i></a>
            contains more information about the daemon.
            For example it includes information how to turn on the daemon by default
            so that you can avoid using
            <code class="literal">--daemon</code>
            all the time.
        </p><div class="variablelist"><dl><dt><span class="term">
                    <code class="option">--daemon</code>
                </span></dt><dd><p>Uses the Gradle daemon to run the build.
                        Starts the daemon if not running or existing daemon busy.
                        <a class="xref" href="#gradle_daemon">Chapter&nbsp;19, <i>The Gradle Daemon</i></a>
                        contains more detailed
                        information when new daemon processes are started.
                    </p></dd><dt><span class="term">
                    <code class="option">--foreground</code>
                </span></dt><dd><p>Starts the Gradle daemon in the foreground. Useful for debugging or troubleshooting
                        because you can easily monitor the build execution.
                    </p></dd><dt><span class="term">
                    <code class="option">--no-daemon</code>
                </span></dt><dd><p>Do not use the Gradle daemon to run the build.
                        Useful occasionally if you have configured Gradle to always run with the daemon by default.
                    </p></dd><dt><span class="term">
                    <code class="option">--stop</code>
                </span></dt><dd><p>Stops the Gradle daemon if it is running.
                        You can only stop daemons that were started with
                        the Gradle version you use when running <code class="literal">--stop</code>.
                    </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N176AF"></a>D.2.&nbsp;System properties</h2></div></div></div><p>The following system properties are available for the
            <span class="command"><strong>gradle</strong></span>
            command. Note that
            command-line options take precedence over system properties.
        </p><dt><span class="term">
                <code class="literal">gradle.user.home</code>
            </span></dt><dd><p>Specifies the Gradle user home directory.</p></dd><p>The
            <a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a>
            contains specific information about
            Gradle configuration available via system properties.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N176C5"></a>D.3.&nbsp;Environment variables</h2></div></div></div><p>The following environment variables are available for the
            <span class="command"><strong>gradle</strong></span>
            command. Note that
            command-line options and system properties take precedence over environment variables.
        </p><div class="variablelist"><dl><dt><span class="term">
                    <code class="literal">GRADLE_OPTS</code>
                </span></dt><dd><p>Specifies command-line arguments to use to start the JVM. This can be useful for setting
                        the system properties to use for running Gradle. For example you could set
                        <code class="literal">GRADLE_OPTS="-Dorg.gradle.daemon=true"</code>
                        to use the Gradle daemon without needing to use the
                        <code class="option">--daemon</code>
                        option every time you
                        run Gradle.
                        <a class="xref" href="#sec:gradle_configuration_properties">Section&nbsp;20.1, &ldquo;Configuring the build environment via gradle.properties&rdquo;</a>
                        contains more information about ways of configuring the daemon
                        without using environmental variables, e.g. in more maintainable and explicit way.
                    </p></dd><dt><span class="term">
                    <code class="literal">GRADLE_USER_HOME</code>
                </span></dt><dd><p>Specifies the Gradle user home directory.</p></dd><dt><span class="term">
                    <code class="literal">JAVA_HOME</code>
                </span></dt><dd><p>Specifies the JDK installation directory to use.</p></dd></dl></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1><a name="ide_support"></a>Appendix&nbsp;E.&nbsp;Existing IDE Support and how to cope without it</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:intellij"></a>E.1.&nbsp;IntelliJ</h2></div></div></div><p>Gradle has been mainly developed with Idea IntelliJ and its very good Groovy plugin. Gradle's build script
            <sup>[<a href="#ftn.N176FE" name="N176FE" class="footnote">28</a>]</sup>
            has also been developed with the support of this IDE. IntelliJ allows you to define any filepattern to be
            interpreted as a Groovy script. In the case of Gradle you can define such a pattern for
            <code class="filename">build.gradle</code>
            and <code class="filename">settings.gradle</code>. This will already help very much. What is missing is the classpath
            to the Gradle binaries to offer content assistance for the Gradle classes. You might add the Gradle jar
            (which you can find in your distribution) to your project's classpath. It does not really belong there, but
            if you do this you have a fantastic IDE support for developing Gradle scripts. Of course if you use
            additional libraries for your build scripts they would further pollute your project classpath.
        </p><p>We hope that in the future <code class="filename">*.gradle</code> files
            get special treatment by IntelliJ and you will be able to define a specific classpath for them.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="N1770D"></a>E.2.&nbsp;Eclipse</h2></div></div></div><p>There is a Groovy plugin for eclipse. We don't know in what state it is and how it would support Gradle.
            In the next edition of this user guide we can hopefully write more about this.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="sec:using_gradle_without_ide_support"></a>E.3.&nbsp;Using Gradle without IDE support</h2></div></div></div><p>What we can do for you is to spare you typing things like
            <code class="literal">throw new org.gradle.api.tasks.StopExecutionException()</code>
            and just type
            <code class="literal">throw new StopExecutionException()</code>
            instead. We do this by automatically adding a set of import statements to the Gradle scripts before Gradle
            executes them. Listed below are the imports added to each script.
        </p><div class="figure"><a name="N1771E"></a><p class="title"><b>Figure&nbsp;E.1.&nbsp;gradle-imports</b></p><div class="figure-contents"><pre class="programlisting">import org.gradle.*
import org.gradle.api.*
import org.gradle.api.artifacts.*
import org.gradle.api.artifacts.cache.*
import org.gradle.api.artifacts.component.*
import org.gradle.api.artifacts.dsl.*
import org.gradle.api.artifacts.maven.*
import org.gradle.api.artifacts.query.*
import org.gradle.api.artifacts.repositories.*
import org.gradle.api.artifacts.result.*
import org.gradle.api.component.*
import org.gradle.api.distribution.*
import org.gradle.api.distribution.plugins.*
import org.gradle.api.dsl.*
import org.gradle.api.execution.*
import org.gradle.api.file.*
import org.gradle.api.initialization.*
import org.gradle.api.initialization.dsl.*
import org.gradle.api.invocation.*
import org.gradle.api.java.archives.*
import org.gradle.api.jvm.*
import org.gradle.api.logging.*
import org.gradle.api.plugins.*
import org.gradle.api.plugins.announce.*
import org.gradle.api.plugins.antlr.*
import org.gradle.api.plugins.buildcomparison.gradle.*
import org.gradle.api.plugins.jetty.*
import org.gradle.api.plugins.osgi.*
import org.gradle.api.plugins.quality.*
import org.gradle.api.plugins.scala.*
import org.gradle.api.plugins.sonar.*
import org.gradle.api.plugins.sonar.model.*
import org.gradle.api.publish.*
import org.gradle.api.publish.ivy.*
import org.gradle.api.publish.ivy.plugins.*
import org.gradle.api.publish.ivy.tasks.*
import org.gradle.api.publish.maven.*
import org.gradle.api.publish.maven.plugins.*
import org.gradle.api.publish.maven.tasks.*
import org.gradle.api.publish.plugins.*
import org.gradle.api.reporting.*
import org.gradle.api.reporting.dependencies.*
import org.gradle.api.reporting.plugins.*
import org.gradle.api.resources.*
import org.gradle.api.sonar.runner.*
import org.gradle.api.specs.*
import org.gradle.api.tasks.*
import org.gradle.api.tasks.ant.*
import org.gradle.api.tasks.application.*
import org.gradle.api.tasks.bundling.*
import org.gradle.api.tasks.compile.*
import org.gradle.api.tasks.diagnostics.*
import org.gradle.api.tasks.incremental.*
import org.gradle.api.tasks.javadoc.*
import org.gradle.api.tasks.scala.*
import org.gradle.api.tasks.testing.*
import org.gradle.api.tasks.testing.junit.*
import org.gradle.api.tasks.testing.testng.*
import org.gradle.api.tasks.util.*
import org.gradle.api.tasks.wrapper.*
import org.gradle.buildinit.plugins.*
import org.gradle.buildinit.tasks.*
import org.gradle.external.javadoc.*
import org.gradle.ide.cdt.*
import org.gradle.ide.cdt.tasks.*
import org.gradle.ide.visualstudio.*
import org.gradle.ide.visualstudio.plugins.*
import org.gradle.ide.visualstudio.tasks.*
import org.gradle.language.*
import org.gradle.language.assembler.*
import org.gradle.language.assembler.plugins.*
import org.gradle.language.base.*
import org.gradle.language.base.artifact.*
import org.gradle.language.base.plugins.*
import org.gradle.language.c.*
import org.gradle.language.c.plugins.*
import org.gradle.language.cpp.*
import org.gradle.language.cpp.plugins.*
import org.gradle.language.java.*
import org.gradle.language.java.artifact.*
import org.gradle.language.jvm.*
import org.gradle.language.jvm.tasks.*
import org.gradle.language.objectivec.*
import org.gradle.language.objectivec.plugins.*
import org.gradle.language.objectivecpp.*
import org.gradle.language.objectivecpp.plugins.*
import org.gradle.language.rc.*
import org.gradle.language.rc.plugins.*
import org.gradle.nativebinaries.*
import org.gradle.nativebinaries.language.*
import org.gradle.nativebinaries.language.assembler.plugins.*
import org.gradle.nativebinaries.language.assembler.tasks.*
import org.gradle.nativebinaries.language.c.plugins.*
import org.gradle.nativebinaries.language.c.tasks.*
import org.gradle.nativebinaries.language.cpp.plugins.*
import org.gradle.nativebinaries.language.cpp.tasks.*
import org.gradle.nativebinaries.language.objectivec.plugins.*
import org.gradle.nativebinaries.language.objectivec.tasks.*
import org.gradle.nativebinaries.language.objectivecpp.plugins.*
import org.gradle.nativebinaries.language.objectivecpp.tasks.*
import org.gradle.nativebinaries.language.rc.plugins.*
import org.gradle.nativebinaries.language.rc.tasks.*
import org.gradle.nativebinaries.platform.*
import org.gradle.nativebinaries.plugins.*
import org.gradle.nativebinaries.tasks.*
import org.gradle.nativebinaries.test.*
import org.gradle.nativebinaries.test.cunit.*
import org.gradle.nativebinaries.test.cunit.plugins.*
import org.gradle.nativebinaries.test.cunit.tasks.*
import org.gradle.nativebinaries.test.plugins.*
import org.gradle.nativebinaries.test.tasks.*
import org.gradle.nativebinaries.toolchain.*
import org.gradle.nativebinaries.toolchain.plugins.*
import org.gradle.plugins.ear.*
import org.gradle.plugins.ear.descriptor.*
import org.gradle.plugins.ide.api.*
import org.gradle.plugins.ide.eclipse.*
import org.gradle.plugins.ide.idea.*
import org.gradle.plugins.javascript.base.*
import org.gradle.plugins.javascript.coffeescript.*
import org.gradle.plugins.javascript.envjs.*
import org.gradle.plugins.javascript.envjs.browser.*
import org.gradle.plugins.javascript.envjs.http.*
import org.gradle.plugins.javascript.envjs.http.simple.*
import org.gradle.plugins.javascript.jshint.*
import org.gradle.plugins.javascript.rhino.*
import org.gradle.plugins.javascript.rhino.worker.*
import org.gradle.plugins.signing.*
import org.gradle.plugins.signing.signatory.*
import org.gradle.plugins.signing.signatory.pgp.*
import org.gradle.plugins.signing.type.*
import org.gradle.plugins.signing.type.pgp.*
import org.gradle.process.*
import org.gradle.runtime.base.*
import org.gradle.runtime.jvm.*
import org.gradle.runtime.jvm.plugins.*
import org.gradle.testing.jacoco.plugins.*
import org.gradle.testing.jacoco.tasks.*
import org.gradle.util.*</pre></div></div><br class="figure-break"></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N176FE" name="ftn.N176FE" class="para">28</a>] </sup>Gradle is built with Gradle
                </p></div></div></div><div class="glossary" title="Glossary"><div class="titlepage"><div><div><h1><a name="N10002"></a>Gradle User Guide</h1></div></div></div><div class="glossdiv" title="A"><h3 class="title">A</h3><dl><dt>Artifact</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="B"><h3 class="title">B</h3><dl><dt>Build Script</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="C"><h3 class="title">C</h3><dl><dt>Configuration</dt><dd><p>See <a class="glosssee" href="#configuration">Dependency Configuration</a>.</p></dd><dt>Configuration Injection</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="D"><h3 class="title">D</h3><dl><dt>DAG</dt><dd><p>See <a class="glosssee" href="#dag">Directed Acyclic Graph</a>.</p></dd><dt>Dependency</dt><dd><p>See <a class="glosssee" href="#externalDependency">External Dependency</a>.</p></dd><dd><p>See <a class="glosssee" href="#projectDependency">Project Dependency</a>.</p></dd><dd><p>??</p></dd><dt><a name="configuration"></a>Dependency Configuration</dt><dd><p>??</p></dd><dt>Dependency Resolution</dt><dd><p>??</p></dd><dt><a name="dag"></a>Directed Acyclic Graph</dt><dd><p>A directed acyclic graph is a directed graph that contains no cycles. In Gradle each task to
                execute represents a node in the graph. A dependsOn relation to another task will add this
                other task as a node (if it is not in the graph already) and create a directed edge between
                those two nodes. Any dependsOn relation will be validated for cycles. There must be no way
                to start at certain node, follow a sequence of edges and end up at the original node.</p></dd><dt><a name="dsl"></a>Domain Specific Language</dt><dd><p>A domain-specific language is a programming language or specification language dedicated
                    to a particular problem domain, a particular problem representation technique, and/or a particular
                    solution technique. The concept isn't new&mdash;special-purpose programming languages and all kinds of
                    modeling/specification languages have always existed, but the term has become more popular due to
                    the rise of domain-specific modeling.
                </p></dd><dt>DSL</dt><dd><p>See <a class="glosssee" href="#dsl">Domain Specific Language</a>.</p></dd></dl></div><div class="glossdiv" title="E"><h3 class="title">E</h3><dl><dt><a name="externalDependency"></a>External Dependency</dt><dd><p>??</p></dd><dt>Extension Object</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="I"><h3 class="title">I</h3><dl><dt><a name="initScript"></a>Init Script</dt><dd><p>A script that is run before the build itself starts, to allow customization of Gradle and the build.</p></dd><dt>Initialization Script</dt><dd><p>See <a class="glosssee" href="#initScript">Init Script</a>.</p></dd></dl></div><div class="glossdiv" title="P"><h3 class="title">P</h3><dl><dt>Plugin</dt><dd><p>??</p></dd><dt>Project</dt><dd><p>??</p></dd><dt><a name="projectDependency"></a>Project Dependency</dt><dd><p>??</p></dd><dt>Publication</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="R"><h3 class="title">R</h3><dl><dt>Repository</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="S"><h3 class="title">S</h3><dl><dt>Source Set</dt><dd><p>??</p></dd></dl></div><div class="glossdiv" title="T"><h3 class="title">T</h3><dl><dt>Task</dt><dd><p>??</p></dd><dt>Transitive Dependency</dt><dd><p>??</p></dd></dl></div></div></div></body></html>